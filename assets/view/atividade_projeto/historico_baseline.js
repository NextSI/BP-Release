define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.tab_listagem=this.dialog.find(".tabela_oportunidades_representante"),this.grid_projeto_atividade_historico_baseline=this.dialog.find(".grid_projeto_atividade_historico_baseline"),this.dados_atividade=null,this.show=function(i){t.dados_atividade=i,t.listar(i),show_modal(t.modal.attr("id"))},this.listar=function(i){var a={projeto_id:i.projeto_id,projeto_atividade_id:i.id};WS.get("atividade_projeto/historico_baseline/",a,function(i){t.monta_grid(i)})},this.monta_grid=function(i){t.grid_projeto_atividade_historico_baseline.dxDataGrid({dataSource:i,rowAlternationEnabled:!1,showRowLines:!0,showBorders:!0,noDataText:App.lang.dxDataGrid.noDataText,filterRow:{visible:!0},columns:[{dataField:"id",caption:"#",dataType:"number",alignment:"left",fixed:!0,fixedPosition:"left"},{dataField:"nome",caption:"Usuário"},{dataField:"data",caption:"Data",dataType:"date",format:"dd/MM/yy HH:mm:ss"},{dataField:"inicio_previsto_baseline",caption:"Início Previsto Baseline",dataType:"date",format:"dd/MM/yy"},{dataField:"termino_previsto_baseline",caption:"Termino Previsto Baseline",dataType:"date",format:"dd/MM/yy"},{dataField:"trabalho_previsto_baseline",caption:"Trabalho Previsto Baseline",format:"decimal fixedPoint",customizeText:function(i){if(void 0===i.value||void 0===i.target||"filterPanel"!=i.target&&"row"!=i.target||!i.value)return"000:00";var t=i.value.indexOf(":");return i.value=i.value.replaceAll(":",""),i.value.substring(0,t)+":"+i.value.substring(t,t+2)}},{type:"buttons",fixed:!0,fixedPosition:"right",buttons:[{icon:"fas fa-trash",hint:"Excluir Baseline",onClick(i){window.alertaPopUp("Excluir Baseline",`Deseja excluir a <strong>Baseline #${i.row.data.id}</strong>?<br><br>Todos registros desse histórico serão perdidos com a exclusão.`,"Sim, excluir",()=>{WS.post("/atividade_projeto/excluir_historico_baseline_atividade/",{historico_id:i.row.data.id,projeto_atividade_id:i.row.data.projeto_atividade_id},i=>{i?(window.alert_saved("Baseline excluída com sucesso."),t.listar(t.dados_atividade)):window.alert_fail("Falha ao excluir a Baseline.")})},"Não, cancelar")}}]}]})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()})}});