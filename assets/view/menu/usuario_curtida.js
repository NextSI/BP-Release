define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.carrega_img=this.dialog.find(".carrega_img"),this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.div_mostar_mais_curtidas=this.dialog.find(".div_mostar_mais_curtidas"),this.btn_mostrar_mais_curtidas=this.dialog.find(".btn_mostrar_mais_curtidas"),this.mural_mensagem_id=null,this.arr_curtidas_usuario=null,this.arr_curtidas=[],this.curtida_mural=null,this.limite=0,this.quantidade=0,this.show=function(i,a){t.mural_mensagem_id=i,t.curtida_mural=a,show_modal(t.modal.attr("id")),t.listar()},this.listar=function(){1==t.curtida_mural?WS.get({route:"mural_mensagem/listar_curtidas_mensagem_mural/",data:{mural_mensagem_id:t.mural_mensagem_id,limite:t.limite},func_response:function(i){t.arr_curtidas=i,t.render_usuarios()}}):WS.get({route:"mural_mensagem/listar_curtidas_comentarios_mural/",data:{comentario_id:t.mural_mensagem_id,limite:t.limite},func_response:function(i){t.arr_curtidas=i,t.render_usuarios()}})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.render_usuarios=function(){var i=t.tab_listagem.find("tbody"),a=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),$(t.arr_curtidas).each(function(s,r){t.quantidade=r.quantidade_curtida,null==r.usuario_curtida_nome&&""==r.usuario_curtida_nome||(t.carrega_img.attr("src","assets/img/icones_bp/imagem_usuario_padrao.svg"),null!=r.foto_id&&t.carrega_img.attr("src",WS_URI+"documento/midia_imagens_menores/?documento_id="+r.foto_id+"&tamanho=32&token_midia="+(App.sessao?App.sessao.token_midia:""))),function(t){var s=a.clone();s.removeAttr("template-row"),s.css("display",""),$(s.find("[template-field='img_usuario_curtida']")),$(s.find("[template-field='nome_usuario_curtida']")).text(t.usuario_curtida_nome),s.appendTo(i)}(r)}),t.quantidade>25&&t.div_mostar_mais_curtidas.removeClass("hidden")},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),t.btn_mostrar_mais_curtidas.unbind("click"),t.btn_mostrar_mais_curtidas.click(function(){t.limite=t.limite+1,t.listar()})}});