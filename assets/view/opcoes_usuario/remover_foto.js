define([],function(){return function(o){"use strict";var i=this;this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.onsave=null,this.carrega_img=this.dialog.find(".carrega_img"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_remover=this.dialog.find(".btn_remover"),this.foto_id=null,this.show=function(o){i.tipo=o,i.carrega_foto(),show_modal(i.modal.attr("id")),set_focus(i.edt_senha_atual)},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id)},this.carrega_foto=function(){null!=App.sessao.dados.foto_id?i.carrega_img.attr("src",WS_URI+"documento/midia_imagens_menores/?documento_id="+App.sessao.dados.foto_id+"&tamanho=90&token_midia="+App.sessao.token_midia):(i.carrega_img.css(""),i.carrega_img.attr("src","assets/img/icones_bp/imagem_usuario_padrao.svg"))},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_remover.unbind("click"),this.btn_remover.click(function(){WS.post("usuario/remover_foto",{},function(o){alert_saved("Foto removida com sucesso"),void 0!==i.onsave&&i.onsave&&i.onsave(),App.sessao.dados.foto_id=o.foto_id,App.renovar_foto_usuario(),i.unload()},[i.btn_cancelar,i.btn_remover],null,!0)})}});