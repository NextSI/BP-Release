define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Tipos de Oportunidade",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.show=function(){t.listar()},this.listar=function(){var i=t.tab_listagem.find("tbody"),o=i.find("tr:first");WS.get("tipo_oportunidade/listar/",null,function(n){t.tab_listagem.find("tr:gt(1)").remove(),$(n).each(function(n,d){!function(n){var d=o.clone();d.removeAttr("template-row"),d.css("display",""),$(d.find("[template-field='descricao']")).text(n.descricao);var a=$(d.find("[template-field='padrao']"));"S"==n.padrao&&a.addClass("glyphicon-ok"),$(d.find(".btn_editar")).click(function(){View.load("tipo_oportunidade/detalhes",function(i,o){o.onclose=t.listar,o.show(n.tipo_oportunidade_id,FORMULARIO.EDITAR)},View.ABA.MULTIPLAS)}),$(d.find(".btn_visualizar")).click(function(){View.load("tipo_oportunidade/detalhes",function(i,o){o.onclose=t.listar,o.show(n.tipo_oportunidade_id,FORMULARIO.VISUALIZAR)},View.ABA.MULTIPLAS)});var l=$(d.find(".btn_clonar"));l.unbind("click"),l.click(function(){View.load("tipo_oportunidade/clonar",function(i,o){o.onclose=t.listar,o.show(n.nome,n.tipo_oportunidade_id)})}),$(d.find(".btn_excluir")).click(function(){View.load("tipo_oportunidade/detalhes",function(i,o){o.onclose=t.listar,o.show(n.tipo_oportunidade_id,FORMULARIO.EXCLUIR)},View.ABA.MULTIPLAS)}),d.appendTo(i)}(d)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("tipo_oportunidade/detalhes",function(i,o){o.onclose=t.listar,o.show(null,FORMULARIO.NOVO)},View.ABA.MULTIPLAS)}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)}}});