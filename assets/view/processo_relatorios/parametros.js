define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.cbo_processo=this.dialog.find(".cbo_processo"),this.cbo_responsavel=this.dialog.find(".cbo_responsavel"),this.cbo_solicitante=this.dialog.find(".cbo_solicitante"),this.edt_codigo=this.dialog.find(".edt_codigo"),this.edt_descricao=this.dialog.find(".edt_descricao"),this.edt_solicitacao_ini=this.dialog.find(".edt_solicitacao_ini"),this.edt_solicitacao_fim=this.dialog.find(".edt_solicitacao_fim"),this.edt_recebimento_ini=this.dialog.find(".edt_recebimento_ini"),this.edt_recebimento_fim=this.dialog.find(".edt_recebimento_fim"),this.edt_execucao_ini=this.dialog.find(".edt_execucao_ini"),this.edt_execucao_fim=this.dialog.find(".edt_execucao_fim"),this.chk_sintetico=this.dialog.find(".chk_sintetico"),this.chk_analitico=this.dialog.find(".chk_analitico"),this.chk_tipo=this.dialog.find(".chk_tipo"),this.div_analitico=this.dialog.find(".div_analitico"),this.btn_limpar_filtros=this.dialog.find(".btn_limpar_filtros"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_pesquisar=this.dialog.find(".btn_pesquisar"),this.show=function(i,e,o,c,a,s,_,n,d,l,r,h){i=i||0,t.edt_descricao.val(a||""),t.edt_codigo.val(s||""),set_datepicker(t.edt_solicitacao_ini),set_datepicker(t.edt_solicitacao_fim),set_datepicker(t.edt_recebimento_ini),set_datepicker(t.edt_recebimento_fim),set_datepicker(t.edt_execucao_ini),set_datepicker(t.edt_execucao_fim);var f=new Date,p=f.getFullYear(),u=("0"+(f.getMonth()+1)).slice(-2),g=new Date(p,u,1),m=new Date(p,u,0),b=p+"-"+u+"-"+("0"+g.getDate()).slice(-2),k=p+"-"+u+"-"+("0"+m.getDate()).slice(-2);setTimeout(function(){set_datepicker(t.edt_solicitacao_ini,_||b),set_datepicker(t.edt_solicitacao_fim,n||k)}),0==i?t.chk_sintetico.prop("checked",!0).trigger("click"):t.chk_analitico.prop("checked",!0).trigger("click"),t.listar_filtro_processo(e),t.listar_filtro_solicitante(c),show_modal(t.modal.attr("id"))},this.listar_filtro_processo=function(i){t.cbo_processo.find("option").remove(),WS.get("processo/listar/",null,function(e){$(e).each(function(i,e){add_option(t.cbo_processo,e.processo_id,e.nome)}),i&&t.cbo_processo.val(i).trigger("change"),t.cbo_processo.selectpicker("refresh")})},this.listar_filtro_responsavel=function(i){t.cbo_responsavel.find("option").remove(),WS.get("usuario/listar/",{tipo_usuario:2},function(e){for(var o=0;o<e.length;o++){var c=e[o];add_option(t.cbo_responsavel,c.usuario_id,c.nome)}i&&t.cbo_responsavel.val(i).trigger("change"),t.cbo_responsavel.selectpicker("refresh")})},this.listar_filtro_solicitante=function(i){t.cbo_solicitante.find("option").remove(),WS.get("usuario/listar/",{tipo_usuario:2},function(e){for(var o=0;o<e.length;o++){var c=e[o];add_option(t.cbo_solicitante,c.usuario_id,c.nome)}i&&t.cbo_solicitante.val(i).trigger("change"),t.cbo_solicitante.selectpicker("refresh")})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.limpar_filtros=function(){t.edt_recebimento_ini.val(""),t.edt_recebimento_fim.val(""),t.edt_execucao_ini.val(""),t.edt_execucao_fim.val(""),t.edt_codigo.val(""),t.edt_descricao.val(""),t.cbo_processo.val("").trigger("change"),t.cbo_solicitante.val("").trigger("change"),t.cbo_processo.selectpicker("refresh"),t.cbo_solicitante.selectpicker("refresh")},this.btn_limpar_filtros.unbind("click"),this.btn_limpar_filtros.click(function(){t.limpar_filtros()}),this.chk_tipo.unbind("click"),this.chk_tipo.click(function(){1==t.chk_sintetico.prop("checked")?t.div_analitico.addClass("hidden"):1==t.chk_analitico.prop("checked")&&t.div_analitico.removeClass("hidden")}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),this.btn_pesquisar.unbind("click"),this.btn_pesquisar.click(function(){var i={processo_id:t.cbo_processo.val(),responsavel_id:t.cbo_responsavel.val(),solicitante_id:t.cbo_solicitante.val(),codigo:t.edt_codigo.val(),descricao:t.edt_descricao.val(),data_solicitacao_ini:get_datepicker(t.edt_solicitacao_ini),data_solicitacao_fim:get_datepicker(t.edt_solicitacao_fim),data_recebimento_ini:get_datepicker(t.edt_recebimento_ini),data_recebimento_fim:get_datepicker(t.edt_recebimento_fim),data_execucao_ini:get_datepicker(t.edt_execucao_ini),data_execucao_fim:get_datepicker(t.edt_execucao_fim),tipo:1==t.chk_sintetico.prop("checked")?0:1};t.onselect(i),t.unload()})}});