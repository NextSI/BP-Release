define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.tab_listagem=this.dialog.find(".tab_listagem"),this.edt_municipio=this.dialog.find(".edt_municipio"),this.edt_uf_sigla=this.dialog.find(".edt_uf_sigla"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.municipio_id=null,this.arr_municipios=[],this.show=function(i){t.onselect=i,show_modal(t.modal.attr("id")),set_focus(t.edt_municipio)},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.listar=function(i){if(t.arr_municipios=[],""!=t.edt_municipio.val().trim()||""!=t.edt_uf_sigla.val().trim()){var n={municipio:t.edt_municipio.val(),uf_sigla:t.edt_uf_sigla.val()};WS.get("municipio/listar/",n,function(i){t.arr_municipios=i,t.render_lista()})}else t.render_lista()},this.render_lista=function(){var i=t.tab_listagem.find("tbody"),n=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),$(t.arr_municipios).each(function(l,e){!function(l){var e=n.clone();e.removeAttr("template-row"),e.css("display",""),$(e.find("[template-field='municipio']")).text(l.municipio),$(e.find("[template-field='uf']")).text(l.uf),$(e.find("[template-field='uf_sigla']")).text(l.uf_sigla);var s=$(e.find(".btn_selecionar")),a=function(){t.onselect(l),t.unload()};s.unbind("click"),s.click(a),e.dblclick(a),e.appendTo(i)}(e)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),this.edt_uf_sigla.unbind("keyup"),this.edt_uf_sigla.keyup($.debounce(500,t.listar)),this.edt_municipio.unbind("keyup"),this.edt_municipio.keyup($.debounce(500,t.listar))}});