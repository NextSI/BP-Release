(this.webpackJsonpnext_bp=this.webpackJsonpnext_bp||[]).push([[6],{1103:function(e,t,a){"use strict";a.r(t);var o=a(372),i=(a(376),a(105)),n=a(401),r=a(617),s=a(838),c=a(547),l=a(388),d=function(e){for(var t=e.dados,a=e.onRowUpdated,d=0;d<t.length;d++)t[d].registrar="N"===t[d].conflito||"S"===t[d].eventos_simultaneos;return Object(o.jsxs)(n.default,{style:{height:"auto"},dataSource:t,selection:{mode:"none"},remoteOperations:!1,filterPanel:null,filterRow:null,headerFilter:null,sorting:null,groupPanel:null,searchPanel:null,columnChooser:null,export:{},onEditingStart:function(e){"registrar"!==e.column.dataField&&(e.cancel=!0),"registrar"===e.column.dataField&&e.data.agenda_ativo_id>0&&"S"===e.data.conflito&&"N"===e.data.eventos_simultaneos&&(e.cancel=!0)},onCellPrepared:function(e){"data"!==e.rowType||!["dia","hora_inicio","hora_fim","observacoes"].includes(e.column.dataField)||"S"!==e.data.conflito&&"S"!==e.data.excede||(e.cellElement.addClass("text-danger"),e.cellElement.css("background","auto")),"data"===e.rowType&&"registrar"===e.column.dataField&&e.data.agenda_ativo_id>0&&"S"===e.data.conflito&&"N"===e.data.eventos_simultaneos&&e.cellElement.html("")},onRowUpdated:a,children:[Object(o.jsx)(l.Editing,{mode:"cell",allowUpdating:!0}),Object(o.jsx)(c.a,{dataField:"registrar",caption:"Gerar",width:"60px"},"registrar"),Object(o.jsx)(r.a,{dataField:"dia",caption:"Dia"},"dia"),Object(o.jsx)(s.a,{dataField:"hora_inicio",caption:"Hora In\xedcio"},"hora_inicio"),Object(o.jsx)(s.a,{dataField:"hora_fim",caption:"Hora Fim"},"hora_fim"),Object(o.jsx)(l.Column,{dataField:"observacoes",caption:"Observa\xe7\xf5es",calculateCellValue:function(e){var t="";return"S"===e.conflito&&(t="J\xe1 existe evento agendado neste hor\xe1rio. "),"S"===e.excede&&(t+=i.a.lang.gestao_agenda.recorrencia_excede_calendario),t}},"observacoes")]})};d.defaultProps={abaTitulo:"Pr\xe9-visualizar eventos recorrentes"},t.default=d},1121:function(e,t,a){},1124:function(e,t,a){e.exports={pivotChart:"ListagemAlocacoes_pivotChart__1Bzge",filtrosData:"ListagemAlocacoes_filtrosData__1yGP_",refreshButton:"ListagemAlocacoes_refreshButton__2wO3Z"}},1125:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(679),m=a(840),_=a(408),h=a(454),v=a.n(h),b=a(483),j=a(465),O=a.n(j),g=a(413);var w=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o,n,s;return Object(i.a)(this,a),(s=t.call(this,e)).state={grupoMotivoChamadoId:null!==(o=e.grupoMotivoChamadoId)&&void 0!==o?o:null,nome:null!==(n=e.nome)&&void 0!==n?n:null,motivosSelecionados:[]},s.chamadoMotivoList=Object(m.b)(),s.obterMotivosSelecionados=s.obterMotivosSelecionados.bind(Object(r.a)(s)),s.motivosOnSelectionChanged=s.motivosOnSelectionChanged.bind(Object(r.a)(s)),s.nomeChange=s.nomeChange.bind(Object(r.a)(s)),s.salvar=s.salvar.bind(Object(r.a)(s)),s.cancelar=s.cancelar.bind(Object(r.a)(s)),s.excluir=s.excluir.bind(Object(r.a)(s)),s}return Object(n.a)(a,[{key:"obterMotivosSelecionados",value:function(){var e=this;this.state.grupoMotivoChamadoId&&Object(f.b)(this.state.grupoMotivoChamadoId,(function(t){return e.setState({nome:t.nome,motivosSelecionados:t.motivos.map((function(e){return e.chamado_motivo_id}))})}))}},{key:"componentDidMount",value:function(){this.obterMotivosSelecionados(),this.setState({chamadoMotivoList:this.chamadoMotivoList})}},{key:"componentWillUnmount",value:function(){this.props.onClose&&this.props.onClose()}},{key:"motivosOnSelectionChanged",value:function(e){this.setState({motivosSelecionados:e.selectedRowKeys})}},{key:"nomeChange",value:function(e){e.value!==this.state.nome&&this.setState({nome:e.value})}},{key:"salvar",value:function(){var e=this;Object(f.e)({grupo_id:this.state.grupoMotivoChamadoId,nome:this.state.nome,motivos:this.state.motivosSelecionados.map((function(e){return{chamado_motivo_id:e}}))},(function(){return _.a.unload(e.props.html_id)}))}},{key:"cancelar",value:function(){_.a.unload(this.props.html_id)}},{key:"excluir",value:function(){var e=this;Object(f.d)(this.state.grupoMotivoChamadoId,(function(){return _.a.unload(e.props.html_id)}))}},{key:"render",value:function(){var e=[Object(o.jsx)(g.a,{width:"100%"})];return Object(o.jsxs)(u.a.Fragment,{children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsxs)(v.a,{style:{paddingLeft:"10px",paddingRight:"10px"},children:[Object(o.jsx)(h.Item,{location:"before",children:Object(o.jsx)(b.Button,{onClick:this.salvar,text:"Salvar",icon:"save",stylingMode:"contained",type:"default"})}),Object(o.jsx)(h.Item,{location:"before",children:Object(o.jsx)(b.Button,{onClick:this.cancelar,text:"Cancelar",icon:"remove",stylingMode:"text",type:"normal"})}),Object(o.jsx)(h.Item,{location:"after",children:Object(o.jsx)(b.Button,{onClick:this.excluir,text:"Excluir",icon:"trash",stylingMode:"text",type:"danger",visible:!!this.state.grupoMotivoChamadoId})})]})})}),Object(o.jsxs)("div",{className:"panel panel-default",style:{padding:"10px"},children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)("div",{className:"form-group",children:Object(o.jsx)(O.a,{stylingMode:"filled",value:this.state.nome,width:"100%",placeholder:"Nome do Grupo de Motivos",onValueChanged:this.nomeChange})})})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsx)("div",{children:"Selecione abaixo os motivos que fazem parte deste grupo"}),Object(o.jsx)(p.default,{style:{height:"calc(100vh - 195px)"},dataSource:this.state.chamadoMotivoList,selectedRowKeys:this.state.motivosSelecionados,onSelectionChanged:this.motivosOnSelectionChanged,selection:{mode:"multiple",selectAllMode:"allPages",showCheckBoxesMode:"always"},filterPanel:{visible:!1},groupPanel:{visible:!1},export:{enabled:!1},columnChooser:{enabled:!1},paging:{enabled:!1},children:e})]})})]})]})}}]),a}(u.a.Component);w.defaultProps={abaTitulo:"Grupo de Motivos",grupoMotivoChamadoId:null},t.default=w},1126:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(618),m=a(913),_=a(413);var h=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=function(){var e=Object(i.a)(m.a);return e.splice(2,0,Object(o.jsx)(_.a,{})),e}();return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(p.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(p.stateStoring)("listagem_agenda_contatos"),dataSource:Object(f.a)(!1),selection:{mode:"multiple"},children:e})})})})}}]),a}(u.a.Component);h.defaultProps={abaTitulo:"Agenda de Contatos"},t.default=h},1127:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(388),_=a(845),h=a(846),v=a(432),b=a(450);var j=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o.dataGrid=null,o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){this.dataGrid=e.component;var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Classifica\xe7\xe3o de Chamado",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=e.component.getController("editing").getChanges();Object(_.b)(a,(function(t){e.component.saveEditData()}))})}}},{key:"render",value:function(){var e=this,t=[].concat(Object(i.a)(h.a),[Object(o.jsxs)(m.Column,{type:"buttons",width:110,children:[Object(o.jsx)(v.a,{visible:function(e){return!e.row.removed&&!e.row.data.padrao},onClick:function(t){e.dataGrid.deleteRow(t.row.rowIndex)}}),Object(o.jsx)(b.a,{visible:function(e){return e.row.removed},onClick:function(t){e.dataGrid.undeleteRow(t.row.rowIndex),t.event.preventDefault()}})]})]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(f.stateStoring)("DataGridChamadoClassificacao"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(_.a)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:t})})})})}}]),a}(p.a.Component);j.defaultProps={abaTitulo:"Classifica\xe7\xe3o"},t.default=j},1128:function(e,t,a){e.exports={kanbanList:"Kanban_kanbanList__1ptgn"}},1129:function(e,t,a){},1130:function(e,t,a){},1178:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(423),n=a(376),r=a.n(n),s=a(105),c=a(492),l=a(548),d=a(683),u=a(849);function p(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),p=a[0],f=a[1],m=Object(n.useCallback)((function(e){return f(e)})),_=[];return!!Array.isArray(e.historico)&&(e.historico.forEach((function(e){var t=Object(o.jsx)(l.a,{nome:e.usuario_nome,tamanho:"32",usuarioId:e.usuario_id,imgAlternativa:"assets/img/imagem_usuario_padrao.svg"}),a=parseInt(s.a.sessao.dados.usuario_id,10)===parseInt(e.usuario_id,10),i=a?"text-right pull-right":"text-left",n=e.processo_atividade_nome?Object(o.jsx)("div",{className:"small text-muted",title:"Atividade ".concat(e.processo_atividade_nome),children:Object(o.jsx)("span",{className:"text hideextra",style:{display:"block",maxWidth:"120px"},children:e.processo_atividade_nome})}):null;_.push(Object(o.jsx)("div",{className:"panel",children:Object(o.jsx)("div",{className:"panel-body",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 text-left",style:{display:"inline-flex"},children:[a?null:Object(o.jsxs)(r.a.Fragment,{children:[t,Object(o.jsx)(c.a,{})]}),Object(o.jsxs)("div",{style:{width:"100%"},children:[Object(o.jsxs)("div",{className:i,children:[Object(o.jsx)(u.a,{nome:e.usuario_nome}),Object(o.jsx)(d.a,{dataEnvio:e.data,aoAlterarTipoExibicao:m,extenso:p}),n]}),Object(o.jsxs)(r.a.Fragment,{children:[Object(o.jsx)(c.b,{}),Object(o.jsx)("div",{className:"mensagemTextoHistorico",dangerouslySetInnerHTML:{__html:e.mensagem}})]})]}),a?Object(o.jsxs)(r.a.Fragment,{children:[Object(o.jsx)(c.a,{}),t]}):null]})})})}))})),_)}},1179:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(388),_=a(880),h=a(881),v=a(432),b=a(450);var j=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o.dataGrid=null,o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){this.dataGrid=e.component;var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Classifica\xe7\xe3o de Chamado",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=e.component.getController("editing").getChanges();Object(_.a)(a,(function(t){e.component.saveEditData()}))})}}},{key:"render",value:function(){var e=this,t=[].concat(Object(i.a)(h.a),[Object(o.jsxs)(m.Column,{type:"buttons",width:110,children:[Object(o.jsx)(v.a,{visible:function(e){return!e.row.removed&&!e.row.data.padrao},onClick:function(t){e.dataGrid.deleteRow(t.row.rowIndex)}}),Object(o.jsx)(b.a,{visible:function(e){return e.row.removed},onClick:function(t){e.dataGrid.undeleteRow(t.row.rowIndex),t.event.preventDefault()}})]},"buttons")]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(f.stateStoring)("DataGridTipoMoeda"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(_.b)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:t})})})})}}]),a}(p.a.Component);j.defaultProps={abaTitulo:"Tipo de Moeda"},t.default=j},1180:function(e,t,a){e.exports={container:"Cockpit_container__1CzsS",containerCentralPendencias:"Cockpit_containerCentralPendencias__PmkYt"}},1181:function(e,t,a){e.exports={container:"cardCockpit_container__1mZsK",card:"cardCockpit_card__g32t9",topoTitulo:"cardCockpit_topoTitulo__pNIRR",button:"cardCockpit_button__3Tilp",cardCorpo:"cardCockpit_cardCorpo__2UTNh",qtdEmAtraso:"cardCockpit_qtdEmAtraso__1inW1",cardRodape:"cardCockpit_cardRodape__2nk13",totalSection:"cardCockpit_totalSection__g9k8V",totalIndicator:"cardCockpit_totalIndicator__31ocR"}},1182:function(e,t,a){e.exports={progress:"ProjetoGantt_progress__4p3o5",taskWrapper:"ProjetoGantt_taskWrapper__1UOAo",taskTitle:"ProjetoGantt_taskTitle__2BpWJ",taskRow:"ProjetoGantt_taskRow__LN2Uv"}},1183:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(890),m=a(388),_=a(432),h=a(450),v=a(389);var b=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsxs)(p.default,{dataSource:Object(f.a)(),onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(p.stateStoring)("listagem_cargos"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},style:{height:"calc(100vh - 48px)"},children:[Object(o.jsx)(m.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}),Object(o.jsxs)(m.Column,{type:"buttons",children:[Object(o.jsx)(_.a,{visible:function(e){return!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(h.a,{visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cargo",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());v.a.post("/cargo/salvar/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}]),a}(u.a.Component);b.defaultProps={abaTitulo:"Cargos"}},1184:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var o=a(372),i=a(105),n=a(376),r=a(879),s=a(63),c=a.n(s);function l(e){var t=e.empresa_filial_id,a=e.usuario_tipo,s=e.todas_permissoes,l=e.permissoes_selecionadas,d=e.ao_selecionar,u=e.ao_listar_permissoes,p=!1,f=!1,m=[],_={},h=[];Object.keys(s).forEach((function(e){if((!s[e].perfil||null==a||Array.isArray(s[e].perfil)&&s[e].perfil.includes(parseInt(a))||parseInt(s[e].perfil)===parseInt(a))&&(i.a.verifica_permissao(t,e)||parseInt(a)!==window.USUARIO_TIPO.COLABORADOR&&null!==a)&&(parseInt(a)===window.USUARIO_TIPO.COLABORADOR||null===a||!s[e].perfil||!(Array.isArray(s[e].perfil)&&1===s[e].perfil.length&&s[e].perfil.includes(window.USUARIO_TIPO.COLABORADOR)||s[e].perfil===window.USUARIO_TIPO.COLABORADOR))){!0===s[e].principal&&(_[parseInt(s[e].modulo)]=e);var o=!0===s[e].principal?null:_[parseInt(s[e].modulo)]||(!0===s[e].especifico?"especificos":"sistema");switch(m.push({chave:e,descricao:s[e].descricao||e,chave_pai:o,observacao:s[e].observacao||""}),o){case"especificos":p=!0;break;case"sistema":f=!0}var n=!0,r=!1,c=void 0;try{for(var d,u=l[Symbol.iterator]();!(n=(d=u.next()).done);n=!0){if(d.value.chave===e){h.push(e);break}}}catch(v){r=!0,c=v}finally{try{n||null==u.return||u.return()}finally{if(r)throw c}}}})),f&&m.unshift({chave:"sistema",descricao:"Sistema",chave_pai:null}),p&&m.push({chave:"especificos",descricao:"Espec\xedficos",chave_pai:null});var v=Object(n.useCallback)((function(e){var t;"headerRow"===e.parentType&&(e.editorOptions.visible=!1),"dataRow"===e.parentType&&e.row&&"descricao"===e.dataField&&(e.editorOptions.visible=(t=e.row,!["especificos","sistema"].includes(t.data.chave)))}),[]),b=Object(n.useCallback)((function(e){d&&d(e.selectedRowsData)}),[d]);return u&&u(m),Object(o.jsxs)(r.TreeList,{id:"permissoes",dataSource:m,showRowLines:!0,showBorders:!0,columnAutoWidth:!0,defaultSelectedRowKeys:h,keyExpr:"chave",parentIdExpr:"chave_pai",allowSelectAll:!0,onSelectionChanged:b,onEditorPreparing:v,children:[Object(o.jsx)(r.FilterRow,{visible:!0}),Object(o.jsx)(r.Selection,{mode:"multiple"}),Object(o.jsx)(r.Column,{dataField:"descricao",caption:"Permiss\xf5es",cellTemplate:function(e,t){if(void 0===t.data.observacao||""===t.data.observacao||null===t.data.observacao)c()(e).text(t.data.descricao);else{var a=c()("<div>"),o=c()("<i>").attr("id","infoPermissao").attr("class","fas fa-info-circle").attr("title",t.data.observacao).css({cursor:"pointer"}).on("click",(function(e){window.alertaPopUp(t.data.descricao,t.data.observacao,"Ok")})),i=c()("<span>").attr("id","descricaoPermissao").html("&nbsp;".concat(t.data.descricao));c()(a).append([o,i]),c()(e).append(a)}}})]})}},1185:function(e,t,a){"use strict";var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d);var p=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).handlePathItemClick=function(e){o.props.fnCarregarDados(e)},o.handlePathItemClick=o.handlePathItemClick.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"render",value:function(){var e=this,t=null;return t=this.props.arrCurrentPath&&this.props.arrCurrentPath.length>0?this.props.arrCurrentPath.map((function(t,a){return Object(o.jsxs)(u.a.Fragment,{children:[a>0&&Object(o.jsx)("li",{className:"dx-menu-item-wrapper",style:{pointerEvents:"none"},children:Object(o.jsx)("div",{className:"dx-item dx-menu-item dx-menu-item-has-icon dx-filemanager-breadcrumbs-path-separator-item",tabIndex:"-1",children:Object(o.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(o.jsx)("i",{className:"dx-icon dx-icon-spinnext"})})})}),Object(o.jsx)("li",{className:"dx-menu-item-wrapper",onClick:function(){e.handlePathItemClick(t.id)},children:Object(o.jsx)("div",{className:"dx-menu-item-has-text",tabIndex:"-1",children:Object(o.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(o.jsx)("span",{className:"dx-menu-item-text",children:t.nome})})})})]},a)})):Object(o.jsx)("li",{className:"dx-menu-item-wrapper",children:Object(o.jsx)("div",{className:"dx-item dx-menu-item dx-menu-item-has-text",tabIndex:"-1",children:Object(o.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(o.jsx)("span",{className:"dx-menu-item-text",children:"Carregando..."})})})}),Object(o.jsxs)("ul",{className:"dx-menu-items-container",children:[Object(o.jsx)("li",{className:"dx-menu-item-wrapper",onClick:function(){e.props.arrCurrentPath.length>1&&e.handlePathItemClick(e.props.arrCurrentPath[e.props.arrCurrentPath.length-2].id)},children:Object(o.jsx)("div",{className:"dx-menu-item-has-icon dx-filemanager-breadcrumbs-parent-folder-item",tabIndex:"-1",children:Object(o.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(o.jsx)("i",{className:"dx-icon dx-icon-arrowup"})})})}),Object(o.jsx)("li",{className:"dx-menu-item-wrapper",style:{pointerEvents:"none"},children:Object(o.jsx)("div",{className:"dx-item dx-menu-item dx-menu-item-has-text dx-filemanager-breadcrumbs-separator-item",tabIndex:"-1",children:Object(o.jsx)("div",{className:"dx-item-content dx-menu-item-content",children:Object(o.jsx)("span",{className:"dx-menu-item-text",children:"\xa0"})})})}),t]})}}]),a}(d.Component);t.a=p},1186:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(388),f=a(401),m=a(432),_=a(450),h=a(892),v=a(389);var b=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={dataSource:Object(h.a)()},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsxs)(f.default,{dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagemClassificacaoMovimentacaoFinanceira"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},style:{height:"calc(100vh - 48px)"},children:[Object(o.jsx)(p.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}),Object(o.jsx)(p.Column,{dataField:"tipo",caption:"Tipo",lookup:{dataSource:[{id:"1",descricao:"Entrada"},{id:"2",descricao:"Sa\xedda"}],displayExpr:"descricao",valueExpr:"id"}}),Object(o.jsxs)(p.Column,{type:"buttons",children:[Object(o.jsx)(m.a,{visible:function(e){return!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(_.a,{visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Classifica\xe7\xe3o",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());v.a.post("/classificacao_movimentacao_financeira/salvar_dx_grid/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}]),a}(u.a.Component);b.defaultProps={abaTitulo:"Classifica\xe7\xe3o de Movimenta\xe7\xe3o Financeira"}},1187:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(627);var p=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(n.a)(a,[{key:"render",value:function(){return this.props.quadro_id?Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)(u.default,{tabela:"tarefa_quadro",id:this.props.quadro_id,html_id:this.props.html_id})}):Object(o.jsx)("p",{children:"ID do Quadro n\xe3o informado ou inexistente"})}}]),a}(d.a.Component)},1188:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(627);var p=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(n.a)(a,[{key:"render",value:function(){return this.props.pdca_id?Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)(u.default,{tabela:"pdca",id:this.props.pdca_id,html_id:this.props.html_id})}):Object(o.jsx)("p",{children:"ID do PDCA n\xe3o informado ou inexistente"})}}]),a}(d.a.Component)},1189:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var o=a(372),i=a(380),n=a(419),r=a(619);function s(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.c)({equipe_interna:!0,clientes:!0,fornecedores:!0,prospects:!0,dx_grid:!0}),displayExpr:function(t){return e.limparAoAlterar?"":t?t.nome:""}})))}s.defaultProps={placeholder:"Pesquisar por nome",aoAlterar:null,limparAoAlterar:!1,columns:r.d}},1190:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(422),i=a.n(o),n=a(372),r=a(423),s=a(425),c=a(105),l=a(389),d=a(408),u=a(63),p=a.n(u),f=a(376),m=a.n(f),_=a(388),h=a(401),v=a(853),b=a(686),j=a(892);function O(){return(O=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("S"!==c.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira&&!0!==c.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira){e.next=4;break}return e.next=3,Object(j.b)();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",new Promise((function(e){return e([])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t=e.projetoId,a=e.atividadeProjetoId,o=e.dataSource,i=e.html_id,s=e.instanceMovimentacaoFinanceira,u=Object(f.useState)([]),j=Object(r.a)(u,2),g=j[0],w=j[1],x=!(+a>0||+t>0),y=Object(f.useState)(null!==o&&void 0!==o?o:x?Object(v.d)():null),A=Object(r.a)(y,2),C=A[0],S=A[1],R=Object(v.c)(),I=m.a.createRef(),P=function(){return I.current?I.current.instance:null},E="listagem_movimentacao_financeira"+(+t>0?"_"+t:"")+(+a>0?"_"+a:""),T={};Object(f.useEffect)((function(){return function(){return O.apply(this,arguments)}().then((function(e){return w(e)}))}),[]);var D=function(e){if(x&&P())return P().cancelEditData(),P().refresh(),!1;var o=function(e){S(e)};+a>0?Object(b.a)(a).then(o):Object(v.a)(t).then(o)},k=function(e){return!(+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS)},M=+t>0||+a>0?"calc(100vh - 173px)":"calc(100vh - 50px)",N={format:"R$ #,##0.##",showClearButton:!0},F=+a>0||+t>0?{totalItems:[{name:"entrada_valor_previsto",showInColumn:"valor_previsto",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Entrada: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saida_valor_previsto",showInColumn:"valor_previsto",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Sa\xedda: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saldo_valor_previsto",showInColumn:"valor_previsto",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Saldo: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"entrada_valor_realizado",showInColumn:"valor_realizado",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Entrada: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saida_valor_realizado",showInColumn:"valor_realizado",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Sa\xedda: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}},{name:"saldo_valor_realizado",showInColumn:"valor_realizado",summaryType:"custom",valueFormat:"currency",customizeText:function(e){return"Saldo: "+window.numberToReal(parseFloat(e.value.toString().replace(",",".")))}}],calculateCustomSummary:function(e){"entrada_valor_previsto"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL&&(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",","))),"saida_valor_previsto"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS||(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",",")))),"saldo_valor_previsto"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL?e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",","):e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)-(e.value.valor_previsto?parseFloat(e.value.valor_previsto):0)).toString().replace(".",","))),"entrada_valor_realizado"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL&&(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",","))),"saida_valor_realizado"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS&&+e.value.tipo!==window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS||(e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",",")))),"saldo_valor_realizado"===e.name&&("start"===e.summaryProcess&&(e.totalValue=0),"calculate"===e.summaryProcess&&(+e.value.tipo===window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL?e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)+(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",","):e.totalValue=(parseFloat(e.totalValue?e.totalValue.replace(",","."):0)-(e.value.valor_realizado?parseFloat(e.value.valor_realizado):0)).toString().replace(".",",")))}}:null;return Object(n.jsxs)(h.default,{ref:I,style:{height:M,width:"100%"},dataSource:C,remoteOperations:x,stateStoring:Object(h.stateStoring)(E),onInitNewRow:function(e){e.data.tabela=null,e.data.tabela_id=null},onInitialized:function(e){s&&s(e.component)},onEditorPreparing:function(e){if("dataRow"===e.parentType&&!(+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.HORAS_ALOCADAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_HORAS||+e.row.data.tipo===window.MOVIMENTACAO_FINANCEIRA.APONTAMENTO_DESPESAS)){if("tipo"===e.dataField&&(e.editorOptions.dataSource={store:{type:"array",data:[{id:"1",descricao:"Entrada Manual"},{id:"2",descricao:"Sa\xedda Manual"}]}},"S"===c.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira||!0===c.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira)){var t=e.editorOptions.onValueChanged;e.editorOptions.onValueChanged=function(a){t.apply(this,arguments);var o=e.row.rowIndex,i=e.component.cellValue(o,"classificacao_movimentacao_financeira_id");i&&e.component.cellValue(o,"classificacao_movimentacao_financeira_id",null)}}if("classificacao_movimentacao_financeira_id"===e.dataField&&g.length){var a=[];switch(+e.row.data.tipo){case window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL:a=g.filter((function(e){return e.tipo==window.MOVIMENTACAO_FINANCEIRA.ENTRADA_MANUAL}));break;case window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL:a=g.filter((function(e){return e.tipo==window.MOVIMENTACAO_FINANCEIRA.SAIDA_MANUAL}))}e.editorOptions.dataSource=a}}},onToolbarPreparing:function(e){var o=[{widget:"dxButton",options:{icon:"fa fa-plus",hint:"Adicionar uma movimenta\xe7\xe3o financeira",text:"Adicionar uma movimenta\xe7\xe3o financeira",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"save",hint:"Salvar",text:"Salvar",onClick:function(){var e=P().getController("editing").getChanges().length?window.CircularJSON.stringify(P().getController("editing").getChanges()):null;if(!e)return!1;l.a.post({route:"projeto/salvar_movimentacao_financeira/",type:"POST",data:{arr_movimentacao_financeira:e},func_response:function(e){e&&(window.alert_saved("Salvo com sucesso"),D())},html_id:i})}},location:"after",name:"BtnSalvar",locateInMenu:"auto",visible:!(+a>0||+t>0)},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:D},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto",visible:!0}];e.toolbarOptions.items=window.add_botao_dx_toolbar(o,e.toolbarOptions.items);for(var n=0;n<e.toolbarOptions.items.length;n++){var r=e.toolbarOptions.items[n];"saveButton"===r.name&&(r.visible=!1)}},summary:F,children:[Object(n.jsx)(_.Column,{dataField:"projeto_id",width:"200px",visible:!1,allowEditing:!1}),Object(n.jsx)(_.Column,{dataField:"projeto_nome",width:"200px",caption:"Projeto",visible:0===+t,editCellTemplate:function(e,t){var a=t.component.cellValue(t.rowIndex,"projeto_id");return p()("<div>").dxDropDownBox({dropDownOptions:{width:"50vw",resizeEnabled:!0},dataSource:R,placeholder:"Pesquisar Projeto",remoteOperations:!0,value:a,valueExpr:"id",displayExpr:function(e){return e.nome},inputAttr:{"aria-label":"Owner"},contentTemplate:function(e){return p()("<div>").dxDataGrid({dataSource:Object(v.c)(),remoteOperations:!0,columns:[{dataField:"codigo",width:"100px"},{dataField:"nome",caption:"Nome do projeto"},{dataField:"status_nome",caption:"Status",width:"100px"},{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",width:"100px"}],filterValue:[["status_nome","<>","Conclu\xeddo"]],pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},filterPanel:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!1},allowColumnResizing:!0,columnResizingMode:"widget",hoverStateEnabled:!0,scrolling:{mode:"virtual"},height:"100%",selection:{mode:"single"},selectedRowKeys:[a],focusedRowEnabled:!0,focusedRowKey:a,onSelectionChanged:function(a){a.selectedRowKeys[0]&&(e.component.option("value",a.selectedRowKeys[0]),t.setValue(a.selectedRowsData[0].nome),t.component.cellValue(t.rowIndex,"projeto_id",a.selectedRowKeys[0]),t.component.cellValue(t.rowIndex,"projeto_codigo",a.selectedRowsData[0].codigo),t.component.cellValue(t.rowIndex,"projeto_atividade_id",null),t.component.cellValue(t.rowIndex,"projeto_atividade_codigo",null),t.component.cellValue(t.rowIndex,"projeto_atividade_simplificada",null),a.selectedRowKeys.length>0&&e.component.close())}})}})}}),Object(n.jsx)(_.Column,{dataField:"projeto_codigo",width:"200px",visible:!1,allowEditing:!1}),Object(n.jsx)(_.Column,{dataField:"projeto_atividade_id",width:"200px",visible:!1,allowEditing:!1}),Object(n.jsx)(_.Column,{dataField:"projeto_atividade_simplificada",width:"200px",caption:"Atividade",visible:0===+a||0===+t,editCellTemplate:function(e,a){var o=p()("<div>"),i=t||a.component.cellValue(a.rowIndex,"projeto_id");if(0===parseInt(i))return o;var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.require(["react","react-dom","./assets/view/atividade_projeto/ListarAtividadeProjeto"],(function(n,r,s){t||(T["projeto_"+i]=e);var c=s=n.createElement(s,null,null);r.render(c,o[0]),c.props.setParams({div:p()(o),data:e,parametro_usuario:"apontamento_projeto",dropdown:!0,somente_leitura:!0,atividade_selecionada:a.component.cellValue(a.rowIndex,"projeto_atividade_id")||null,ao_selecionar:function(e,t){a.component.cellValue(a.rowIndex,"projeto_atividade_id",e),a.component.cellValue(a.rowIndex,"projeto_atividade_codigo",t.codigo),a.setValue(t.atividade_simplificada)},fullscreen:!1,listar_somente_analiticas:!0})}))},r=function(e){return!!T["projeto_"+e]&&T["projeto_"+e]}(i);return r?n(r,!0):Object(b.b)(i,n),o}}),Object(n.jsx)(_.Column,{dataField:"tipo",width:"200px",placeholder:c.a.lang.combobox.selecione,visible:!0,children:Object(n.jsx)(_.Lookup,{dataSource:v.e,displayExpr:"descricao",valueExpr:"id"})}),Object(n.jsx)(_.Column,{dataField:"classificacao_movimentacao_financeira_id",width:"200px",caption:"Classifica\xe7\xe3o",placeholder:c.a.lang.combobox.selecione,visible:"S"===c.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira||!0===c.a.sessao.dados.parametro_projeto.utilizar_classificacao_movimentacao_financeira,children:Object(n.jsx)(_.Lookup,{dataSource:g,displayExpr:"descricao",valueExpr:"classificacao_movimentacao_financeira_id",allowClearing:!0})}),Object(n.jsx)(_.Column,{dataField:"descricao",width:"200px",dataType:"string"}),Object(n.jsx)(_.Column,{dataField:"valor_previsto",width:"200px",dataType:"number",editorOptions:N,children:Object(n.jsx)(_.Format,{type:"currency",precision:2})}),Object(n.jsx)(_.Column,{dataField:"valor_realizado",width:"200px",dataType:"number",editorOptions:N,children:Object(n.jsx)(_.Format,{type:"currency",precision:2})}),Object(n.jsx)(_.Column,{dataField:"data_prevista",width:"200px",dataType:"date"}),Object(n.jsx)(_.Column,{dataField:"data_realizado",width:"200px",dataType:"date"}),Object(n.jsxs)(_.Column,{type:"buttons",width:"45px",fixed:!0,fixedPosition:"right",children:[Object(n.jsx)(_.Button,{hint:"Acessar registro",icon:"fa fa-external-link-square-alt",visible:function(e){return e.row.data.tabela_id>0},onClick:function(e){return function(e){switch(e.tabela){case"projeto_atividade":d.a.load("atividade_projeto/detalhes",(function(t,a){a.onclose=function(){return D()},a.show({projeto_atividade_id:e.tabela_id,tipo:window.FORMULARIO.EDITAR})}),d.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:e.tabela_id});break;case"apontamento_projeto":d.a.load("apontamento_projeto/detalhes",(function(t,a){a.onclose=function(){return D()},a.show(e.tabela_id,window.FORMULARIO.EDITAR)}),d.a.ABA.MULTIPLAS);break;case"apontamento_despesa":d.a.load("apontamento_despesas/detalhes",(function(t,a){a.onclose=function(){return D()},a.show(window.FORMULARIO.EDITAR,e.tabela_id)}),d.a.ABA.MULTIPLAS)}}(e.row.data)}}),Object(n.jsx)(_.Button,{hint:"Excluir",icon:"trash",visible:function(e){return 0===+e.row.data.tabela_id&&!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(n.jsx)(_.Button,{hint:"Recuperar",icon:"revert",visible:function(e){return 0===+e.row.data.tabela_id&&e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]}),Object(n.jsx)(_.Editing,{mode:"batch",allowUpdating:k,allowDeleting:k,useIcons:!0})]})}g.defaultProps={abaTitulo:"Movimenta\xe7\xe3o Financeira",projetoId:0,atividadeProjetoId:0}},1191:function(e,t,a){e.exports={container:"Favoritos_container__3BPoj",loadingIndicator:"Favoritos_loadingIndicator__12IOd"}},1192:function(e,t,a){},1193:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(934),f=a(933);var m=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o,n;return Object(i.a)(this,a),(n=t.call(this,e)).state={componente:null!==(o=e.componente)&&void 0!==o?o:window.HOME_DRAWER_RIGHT_COMPONENTES.NOTAS},n.alterarOpcoes=n.alterarOpcoes.bind(Object(r.a)(n)),e.callbackAlterarOpcoes&&e.callbackAlterarOpcoes(n.alterarOpcoes),n}return Object(n.a)(a,[{key:"alterarOpcoes",value:function(e){this.setState({componente:e})}},{key:"render",value:function(){switch(this.state.componente){case window.HOME_DRAWER_RIGHT_COMPONENTES.FAVORITOS:return Object(o.jsx)(f.default,{});case window.HOME_DRAWER_RIGHT_COMPONENTES.NOTAS:return Object(o.jsx)(p.default,{});case window.HOME_DRAWER_RIGHT_COMPONENTES.BOTH:return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f.default,{height:"calc(50vh - 0px)"}),Object(o.jsx)(p.default,{height:"calc(50vh - 95px)"})]});default:return Object(o.jsx)(u.a.Fragment,{})}}}]),a}(u.a.Component);m.defaultProps={componente:window.HOME_DRAWER_RIGHT_COMPONENTES.NOTAS}},1194:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var o=a(372),i=a(380),n=a(419),r=a(880),s=a(881);function c(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.b)()})))}c.defaultProps={aoAlterar:null,displayExpr:function(e){return e&&e.nome},children:s.a}},1195:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(422),n=a.n(i),r=a(425),s=a(365),c=a(366),l=a(385),d=a(368),u=a(369),p=a(367),f=a(376),m=a.n(f),_=a(894),h=a(465),v=a.n(h);var b="00.000.000/0000-00",j="000.000.000-00",O="",g=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var o;return Object(s.a)(this,a),(o=t.call(this,e)).ajustarMascara=function(e){11===(e.component.option("value")||"").toString().length&&14===e.component.element().find(".dx-texteditor-input")[0].selectionStart&&1===e.event.originalEvent.key.length&&parseInt(e.event.originalEvent.key)<=9&&o.setState({mask:b})},o.state={mask:e.valor&&e.valor.length>11?b:j,valor:e.valor},o.fnConsultarCNPJ=o.fnConsultarCNPJ.bind(Object(l.a)(o)),o.ajustarMascara=o.ajustarMascara.bind(Object(l.a)(o)),o}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(o.jsx)(v.a,{valueChangeEvent:"keyup change",onValueChanged:this.fnConsultarCNPJ,placeholder:this.props.placeholder,onKeyDown:this.ajustarMascara,onPaste:function(){var t=Object(r.a)(n.a.mark((function t(a){var o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(O=(O=a.event.originalEvent.clipboardData.getData("Text")).replace(/[^\d]/g,""),e.setState({valor:O,mask:O.length<=11?j:b}),!e.props.aoAlterar||14!==O.length){t.next=9;break}return t.next=6,Object(_.consultarCNPJ)(O);case 6:o=t.sent,e.props.aoAlterar(O,o),O="";case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),mask:this.state.mask,value:this.state.valor})}},{key:"fnConsultarCNPJ",value:function(){var e=Object(r.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({valor:t.value,mask:t.value.length<=11?j:b}),!this.props.aoAlterar||14!==t.value.length||!(t.event&&t.event.originalEvent&&t.event.originalEvent.key&&1===t.event.originalEvent.key.length&&parseInt(t.event.originalEvent.key)<9||O&&14===O.length)){e.next=7;break}return O="",e.next=5,Object(_.consultarCNPJ)(t.value);case 5:a=e.sent,this.props.aoAlterar(t.value,a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(m.a.Component);g.defaultProps={placeholder:"CPF/CNPJ",aoAlterar:null}},1196:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(388),f=a.n(p);var m=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).getKey=o.getKey.bind(Object(r.a)(o)),o.onContentReady=o.onContentReady.bind(Object(r.a)(o)),o.keyCount=0,o.dataGridRef=u.a.createRef(),o}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)(f.a,{ref:this.dataGridRef,dataSource:[],editing:{mode:"cell",allowAdding:!0,allowUpdating:!0,allowDeleting:!0},showBorders:!0,paging:{enabled:!1},onContentReady:this.onContentReady,children:Object(o.jsx)(p.Column,{dataField:"email",caption:"E-mails dos respons\xe1veis",dataType:"string",validationRules:[{type:"email"}],fixed:!0,fixedPosition:"left"},"coluna_email")},this.getKey())})}},{key:"getKey",value:function(){return this.keyCount++}},{key:"onContentReady",value:function(e){"function"===typeof this.props.getDataGridRef&&this.props.getDataGridRef(e)}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(u.a.Component)},1197:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var o=a(372),i=a(380),n=(a(376),a(419)),r=a(866);function s(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.a)()})))}s.defaultProps={displayExpr:"nome",valueExpr:"categoria_pdca_id"}},1198:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(388),p=a.n(u),f=a(465),m=a.n(f),_=a(508),h=a.n(_),v=a(454),b=a(693);a(895);var j=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o,n,r,s,c,l;return Object(i.a)(this,a),(l=t.call(this,e)).state={votacao_id:null!==(o=e.votacao_id)&&void 0!==o?o:null,pergunta:null!==(n=e.pergunta)&&void 0!==n?n:"",expiracao:null!==(r=e.expiracao)&&void 0!==r?r:window.AddDays(new Date,1),voto_secreto:null===(s=e.voto_secreto)||void 0===s||s,opcoes:null!==(c=e.opcoes)&&void 0!==c?c:[{},{}]},l}return Object(n.a)(a,[{key:"render",value:function(){var e,t=this;return this.props.aoAlterar&&this.props.aoAlterar(this.state),Object(o.jsxs)(d.a.Fragment,{children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 form-group",children:[Object(o.jsx)("div",{children:"Pergunta:"}),Object(o.jsx)(m.a,{defaultValue:"",onValueChange:function(e){return t.setState({pergunta:e})}})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 form-group",children:[Object(o.jsx)("div",{children:"Data de Expira\xe7\xe3o:"}),Object(o.jsx)(h.a,{value:this.state.expiracao,type:"datetime",useMaskBehavior:!0,stylingMode:"filled",onValueChange:function(e){return t.setState({expiracao:e})},readOnly:!1})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 form-group",style:{display:"flex",justifyContent:"flex-start"},children:[Object(o.jsx)(b.Switch,{defaultValue:null===(e=this.props.voto_secreto)||void 0===e||e,onValueChange:function(e){return t.setState({voto_secreto:e})},style:{marginRight:"5px"}}),Object(o.jsx)("label",{children:"Voto secreto"})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-xs-12 form-group",children:Object(o.jsxs)(p.a,{id:"gridContainer",dataSource:this.state.opcoes,showBorders:!0,showColumnHeaders:!1,noDataText:"Nenhuma op\xe7\xe3o para vota\xe7\xe3o.",showEditorAlways:!0,onEditorPreparing:function(e){"dataRow"==e.parentType&&"opcao"==e.dataField&&(e.editorOptions.placeholder="Informe aqui uma op\xe7\xe3o")},onRowInserted:function(e){return t.props.aoAlterar?t.props.aoAlterar(t.state):null},onRowUpdated:function(e){return t.props.aoAlterar?t.props.aoAlterar(t.state):null},onRowRemoved:function(e){return t.props.aoAlterar?t.props.aoAlterar(t.state):null},children:[Object(o.jsx)(u.Editing,{mode:"cell",allowUpdating:!0,allowAdding:!0,allowDeleting:!0}),Object(o.jsx)(u.Column,{dataField:"opcao",caption:"Op\xe7\xf5es",width:"100%",showEditorAlways:!0}),Object(o.jsxs)(u.Toolbar,{children:[Object(o.jsx)(v.Item,{location:"before",locateInMenu:"never"}),Object(o.jsx)(v.Item,{location:"after",name:"addRowButton",showText:!0,options:{text:"Adicionar Op\xe7\xe3o"}})]})]})})})]})}}]),a}(d.a.Component);j.defaultProps={}},1199:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(388),f=a.n(p),m=a(895),_=a(615),h=a.n(_),v=a(577),b=a(529),j=a.n(b),O=a(485);var g=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o,n,s,c,l,d;return Object(i.a)(this,a),(d=t.call(this,e)).callbackResultado=function(e){var t;d.setState({dataSource:e.resultado,usuario_votacao_opcao_id:e.usuario_votacao_opcao_id,encerrada:e.encerrada,dataSourceHistorico:null!==(t=e.votos)&&void 0!==t?t:[]})},d.callbackAoFalhar=function(e){d.carregarDados()},d.state={votacao_id:null!==(o=e.votacao_id)&&void 0!==o?o:null,pergunta:null!==(n=e.pergunta)&&void 0!==n?n:"",expiracao:null!==(s=e.expiracao)&&void 0!==s?s:"",encerrada:d.estaEncerrada(e.expiracao),voto_secreto:null===(c=e.voto_secreto)||void 0===c||c,opcoes:null!==(l=e.opcoes)&&void 0!==l?l:[],dataSource:[],dataSourceHistorico:[],usuario_votacao_opcao_id:null,popup_votos_visivel:!1},d.callbackResultado=d.callbackResultado.bind(Object(r.a)(d)),d.callbackAoFalhar=d.callbackAoFalhar.bind(Object(r.a)(d)),d.carregarDados=d.carregarDados.bind(Object(r.a)(d)),d.onSelectionChanged=d.onSelectionChanged.bind(Object(r.a)(d)),d.renderExpiracao=d.renderExpiracao.bind(Object(r.a)(d)),d.hideInfo=d.hideInfo.bind(Object(r.a)(d)),d}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.carregarDados(),this.timer=setInterval((function(){e.state.encerrada!==e.estaEncerrada(e.state.expiracao)&&e.carregarDados()}),3e4)}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"carregarDados",value:function(){Object(m.a)(this.state.votacao_id,this.callbackResultado,this.callbackAoFalhar)}},{key:"estaEncerrada",value:function(e){return!!e&&new Date(e)<=new Date}},{key:"onSelectionChanged",value:function(e){var t=this,a=e.selectedRowsData[0];a&&a.votacao_opcao_id&&a.votacao_opcao_id!=this.state.usuario_votacao_opcao_id&&this.setState({usuario_votacao_opcao_id:a.votacao_opcao_id},(function(){Object(m.b)(t.state.votacao_id,a.votacao_opcao_id,t.callbackResultado,t.callbackAoFalhar)}))}},{key:"renderExpiracao",value:function(){return this.state.expiracao?this.state.encerrada?Object(o.jsx)("div",{className:"row small text-muted",children:Object(o.jsx)("div",{className:"col-xs-12",children:Object(o.jsxs)("div",{title:this.state.expiracao?this.state.expiracao.format_date_time():"",children:["Vota\xe7\xe3o encerrada ",h()(this.state.expiracao).fromNow()]})})}):Object(o.jsx)("div",{className:"row small text-muted",children:Object(o.jsx)("div",{className:"col-xs-12",children:Object(o.jsxs)("div",{children:["Esta vota\xe7\xe3o expira ",h()(this.state.expiracao).fromNow()]})})}):null}},{key:"renderHistorico",value:function(){var e=this;if(!this.state.voto_secreto)return Object(o.jsxs)("div",{className:"row small text-muted",children:[Object(o.jsx)("div",{className:"col-xs-12",children:Object(o.jsx)("a",{onClick:function(t){return e.setState({popup_votos_visivel:!0})},href:"#!",children:"Hist\xf3rico de votos"})}),Object(o.jsx)(v.Popup,{visible:this.state.popup_votos_visivel,onHiding:this.hideInfo,dragEnabled:!1,hideOnOutsideClick:!0,showCloseButton:!0,showTitle:!0,title:"Hist\xf3rico de Votos",container:"body",minWidth:400,minHeight:400,resizeEnabled:!0,children:Object(o.jsx)(j.a,{width:"100%",height:"100%",children:Object(o.jsxs)(f.a,{id:"gridContainer",dataSource:this.state.dataSourceHistorico,showBorders:!1,showColumnHeaders:!0,noDataText:"Nenhum voto realizado",wordWrapEnabled:!1,children:[Object(o.jsx)(p.GroupPanel,{visible:!0}),Object(o.jsx)(p.FilterRow,{visible:!0}),Object(o.jsx)(p.FilterPanel,{visible:!0}),Object(o.jsx)(p.HeaderFilter,{visible:!0}),Object(o.jsx)(p.Editing,{mode:"cell",allowUpdating:!1,allowAdding:!1,allowDeleting:!1}),Object(o.jsx)(p.Export,{enabled:!0,allowExportSelectedData:!1}),Object(o.jsx)(O.a,{dataField:"hora",width:150}),Object(o.jsx)(p.Column,{dataField:"usuario_nome"}),Object(o.jsx)(p.Column,{dataField:"opcao",width:150})]})})})]})}},{key:"hideInfo",value:function(){this.setState({popup_votos_visivel:!1})}},{key:"render",value:function(){return Object(o.jsxs)(u.a.Fragment,{children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-xs-12",children:this.state.pergunta})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-xs-12",children:Object(o.jsxs)(f.a,{id:"gridContainer",dataSource:this.state.dataSource,showBorders:!0,showColumnHeaders:!1,noDataText:"",keyExpr:"votacao_opcao_id",selectedRowKeys:this.state.usuario_votacao_opcao_id?[this.state.usuario_votacao_opcao_id]:null,onSelectionChanged:this.state.encerrada?null:this.onSelectionChanged,wordWrapEnabled:!0,allowColumnResizing:!0,children:[Object(o.jsx)(p.Editing,{mode:"cell",allowUpdating:!1,allowAdding:!1,allowDeleting:!1}),Object(o.jsx)(p.Selection,{mode:"single"}),Object(o.jsx)(p.Column,{dataField:"opcao"}),Object(o.jsx)(p.Column,{dataField:"votos",width:"55px",alignment:"right"})]})})}),this.renderExpiracao(),this.renderHistorico()]})}}]),a}(u.a.Component);g.defaultProps={}},1200:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(873),f=a.n(p),m=a(389),_=a(105),h=a(401),v=a(388),b=a(485),j=a(448);var O=null,g=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).dataGridRef=u.a.createRef(),o.state={opened:!0,openedStateMode:"shrink",revealMode:"slide",position:"right",dataSource:null},o.renderVersoes=o.renderVersoes.bind(Object(r.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(r.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o.onRowPrepared=o.onRowPrepared.bind(Object(r.a)(o)),o.fnDiagram=o.fnDiagram.bind(Object(r.a)(o)),"function"===typeof o.props.fnRenderVersoes&&o.props.fnRenderVersoes(o.renderVersoes),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.getFnDiagram&&this.props.getFnDiagram(this.fnDiagram)}},{key:"renderVersoes",value:function(){var e=this;m.a.get("processo/listar_versoes/",{processo_id:this.props.processo_id},(function(t){t.push({versao_processo_id:"rascunho",sequencia:"#N/D",publicacao:null,ativa:!1,versao_teste:!1,nova_versao_observacao:"",tipo_versao:"3",texto_tipo_versao:"#Rascunho"}),e.setState({dataSource:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.opened,i=t.openedStateMode,n=t.position,r=t.revealMode,s=this.props.scrollview;return this.props.btnToggle.unbind("click").click((function(){e.setState({opened:!e.state.opened})})),Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)(f.a,{opened:a,openedStateMode:i,position:n,revealMode:r,onContentReady:function(e){s.appendTo(s.parent().find(".dx-drawer-content"))},component:function(){return Object(o.jsx)("div",{style:{maxWidth:"50vh",width:"550px",overflow:"auto"},children:Object(o.jsxs)(h.default,{height:"calc(100vh - 45px)",ref:e.dataGridRef,keyExpr:"versao_processo_id",dataSource:e.state.dataSource,selection:{mode:"single"},groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},onToolbarPreparing:e.onToolbarPreparing,onSelectionChanged:e.onSelectionChanged,onRowPrepared:e.onRowPrepared,onInitialized:function(e){e.component.option("selectedRowKeys",["rascunho"])},children:[Object(o.jsx)(v.Column,{dataField:"sequencia"}),Object(o.jsx)(v.Column,{dataField:"texto_tipo_versao",caption:"Tipo",groupIndex:"0"}),Object(o.jsx)(b.a,{dataField:"publicacao",caption:"Publica\xe7\xe3o"}),",",Object(o.jsxs)(v.Column,{type:"buttons",visible:!e.props.readOnly,children:[Object(o.jsx)(v.Button,{icon:"fas fa-file-pdf",visible:function(e){return parseInt(e.row.data.tipo_versao)!==window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO},onClick:function(e){_.a.obter_token_publico((function(t){_.a.download(window.WS_URI+"processo/download_versao/?versao_processo_id="+e.row.data.versao_processo_id+"&empresa_filial_id="+_.a.temp.empresa+"&token_publico="+t)}))}}),Object(o.jsx)(v.Button,{icon:"fas fa-undo",visible:function(e){return parseInt(e.row.data.tipo_versao)!==window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO},onClick:function(t){window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aten\xe7\xe3o !',"Deseja restaurar a modelagem da vers\xe3o "+t.row.data.sequencia+" de "+t.row.data.texto_tipo_versao+'? <hr/><strong class="text-info">As altera\xe7\xf5es feitas na modelagem que n\xe3o foram versionadas ser\xe3o perdidas.</strong>',"Restaurar vers\xe3o",(function(){e.props.fnRestaurarVersao(t.row.data.versao_processo_id)}),!0)}}),Object(o.jsx)(v.Button,{icon:"fas fa-check",visible:function(e){return!e.row.data.ativa&&parseInt(e.row.data.tipo_versao)===window.VERSAO_PROCESSO_TIPO_VERSAO.AUTOMACAO},onClick:function(t){window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aten\xe7\xe3o !',"Deseja marcar como ativa esta vers\xe3o do processo?","Marcar como ativa",(function(){e.props.fnAtivarVersao(t.row.data.versao_processo_id,!1)}),!0)}}),Object(o.jsx)(v.Button,{icon:"fas fas fa-flask",visible:function(e){return!e.row.data.versao_teste&&parseInt(e.row.data.tipo_versao)===window.VERSAO_PROCESSO_TIPO_VERSAO.AUTOMACAO},onClick:function(t){window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aten\xe7\xe3o !',"Deseja marcar como teste esta vers\xe3o do processo?","Marcar como teste",(function(){e.props.fnAtivarVersao(t.row.data.versao_processo_id,!0)}),!0)}}),Object(o.jsx)(v.Button,{icon:"fas fa-comment",visible:function(e){return parseInt(e.row.data.tipo_versao)!==window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO},onClick:function(e){window.alertaPopUp(e.row.data.nome_publicador,e.row.data.nova_versao_observacao)}})]})]})})},height:"calc(100vh - 42px)"})})}},{key:"onSelectionChanged",value:function(e){var t=this,a=e.selectedRowsData[0];if(a){var o=function(){parseInt(a.tipo_versao)===window.VERSAO_PROCESSO_TIPO_VERSAO.RASCUNHO?t.props.fnPreencher():t.props.fnPreencher(null,null,a.versao_processo_id)};if(O)if(O._historyToolbar.bar.onChanged.listeners[1]&&O._historyToolbar.bar.onChanged.listeners[1].control.history.historyItems.length)Object(j.confirm)("Voc\xea possui altera\xe7\xf5es n\xe3o salvas, deseja continuar ?","Aten\xe7\xe3o !").then((function(e){e&&o()}));else o()}}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar vers\xe3o",text:"Nova vers\xe3o",onClick:function(){t.props.fnGerarVersao()},visible:!this.props.readOnly},location:"after",name:"BtnAddVersao",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}},{key:"onRowPrepared",value:function(e){"data"===e.rowType&&(e.data.ativa?(e.rowElement.removeClass("dx-row-alt"),e.rowElement.addClass("bg-success")):e.data.versao_teste&&(e.rowElement.removeClass("dx-row-alt"),e.rowElement.addClass("bg-warning")))}},{key:"fnDiagram",value:function(e){O=e}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(u.a.Component)},1201:function(e,t,a){"use strict";a.r(t);var o=a(391),i=a(372),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(408),m=a(452),_=a(531),h=a(872),v=a.n(h);var b=null,j=["fontName","fontSize","bold","italic","underline","fontColor"],O=["lineStyle","lineColor"],g=["layoutTreeTopToBottom","layoutTreeBottomToTop","layoutTreeLeftToRight","layoutTreeRightToLeft"],w=["pageSize","pageOrientation"],x=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).nodeOnInserted=o.nodeOnInserted.bind(Object(s.a)(o)),o.nodeOnRemoved=o.nodeOnRemoved.bind(Object(s.a)(o)),o.incluirDestino=o.incluirDestino.bind(Object(s.a)(o)),o.edgeOnUpdated=o.edgeOnUpdated.bind(Object(s.a)(o)),o.edgeOnRemoved=o.edgeOnRemoved.bind(Object(s.a)(o)),o.edgeOnRemoving=o.edgeOnRemoving.bind(Object(s.a)(o)),o.itemDblClick=o.itemDblClick.bind(Object(s.a)(o)),o.contentReady=o.contentReady.bind(Object(s.a)(o)),o.diagramRef=p.a.createRef(),o}return Object(r.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.fnGetInstanceDiagram&&this.props.fnGetInstanceDiagram(this.diagramRef.current.instance)}},{key:"render",value:function(){var e=this;return Object(i.jsxs)(v.a,{id:"diagram",ref:this.diagramRef,onItemDblClick:this.itemDblClick,onContentReady:this.contentReady,readOnly:"undefined"!==typeof this.props.diagramDataSource,height:"calc(100vh - 135px)",onCustomCommand:function(t){if("fullscreen"===t.name){var a=t.component.option("fullScreen");t.component.option("fullScreen",!a),a?e.props.div.find(".dx-drawer-panel-content").css("z-index",0):e.props.div.find(".dx-drawer-panel-content").css("z-index",1504)}},children:[Object(i.jsxs)(h.PropertiesPanel,{children:[Object(i.jsxs)(h.Tab,{title:"Estilo",children:[Object(i.jsx)(h.Group,{title:"Texto",commands:j}),Object(i.jsx)(h.Group,{title:"Objeto",commands:O})]}),Object(i.jsx)(h.Tab,{title:"Layout",children:Object(i.jsx)(h.Group,{title:"\xc1rvores",commands:g})}),Object(i.jsx)(h.Tab,{title:"Diagrama",children:Object(i.jsx)(h.Group,{title:"Propriedades da P\xe1gina",commands:w})})]}),Object(i.jsxs)(h.ViewToolbar,{children:[Object(i.jsx)(h.Command,{name:"zoomLevel"}),Object(i.jsx)(h.Command,{name:"fullscreen",text:"Tela Cheia",icon:"fullscreen"}),Object(i.jsx)(h.Command,{name:"export",icon:"export",items:["exportSvg","exportPng","exportJpg"]}),Object(i.jsx)(h.Command,{name:"Settings",icon:"preferences",items:["units","showGrid","snapToGrid","gridSize","simpleView","toolbox"]})]}),Object(i.jsx)(h.Nodes,{dataSource:new m.default({key:"id",data:this.props.nodesDataSource,onInserted:this.nodeOnInserted,onRemoving:this.nodeOnRemoved}),autoLayout:{type:"off"}}),Object(i.jsx)(h.Edges,{dataSource:new m.default({key:"id",data:this.props.edgesDataSource,onInserted:this.incluirDestino,onUpdated:this.edgeOnUpdated,onRemoving:this.edgeOnRemoving,onRemoved:this.edgeOnRemoved})}),Object(i.jsxs)(h.CustomShape,{category:"geral",type:"inicio",title:"In\xedcio",allowResize:!1,backgroundImageUrl:"assets/img/processo/atividade_inicio.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"In\xedcio",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(i.jsx)(h.ConnectionPoint,{x:.5,y:0}),Object(i.jsx)(h.ConnectionPoint,{x:.9,y:.5}),Object(i.jsx)(h.ConnectionPoint,{x:.5,y:1}),Object(i.jsx)(h.ConnectionPoint,{x:.1,y:.5})]}),Object(i.jsxs)(h.CustomShape,{category:"geral",type:"fim",title:"Fim",allowResize:!1,backgroundImageUrl:"assets/img/processo/atividade_fim.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Fim",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(i.jsx)(h.ConnectionPoint,{x:.5,y:0}),Object(i.jsx)(h.ConnectionPoint,{x:.9,y:.5}),Object(i.jsx)(h.ConnectionPoint,{x:.5,y:1}),Object(i.jsx)(h.ConnectionPoint,{x:.1,y:.5})]}),Object(i.jsxs)(h.CustomShape,{category:"geral",type:"atividade",title:"Atividade",allowResize:!1,backgroundImageUrl:"assets/img/processo/atividade.svg",backgroundImageLeft:.15,backgroundImageTop:.15,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:1,defaultHeight:.75,defaultText:"Atividade",allowEditText:!1,textLeft:0,textTop:0,textWidth:1,textHeight:1,children:[Object(i.jsx)(h.ConnectionPoint,{x:.5,y:0}),Object(i.jsx)(h.ConnectionPoint,{x:.9,y:.5}),Object(i.jsx)(h.ConnectionPoint,{x:.5,y:1}),Object(i.jsx)(h.ConnectionPoint,{x:.1,y:.5})]}),Object(i.jsxs)(h.CustomShape,{category:"geral",type:"exclusivo",title:"Gateway Exclusivo",allowResize:!1,backgroundImageUrl:"assets/img/processo/gateway_exclusivo.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Gateway Exclusivo",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(i.jsx)(h.ConnectionPoint,{x:.5,y:0}),Object(i.jsx)(h.ConnectionPoint,{x:.9,y:.5}),Object(i.jsx)(h.ConnectionPoint,{x:.5,y:1}),Object(i.jsx)(h.ConnectionPoint,{x:.1,y:.5})]}),Object(i.jsxs)(h.CustomShape,{category:"geral",type:"inclusivo",title:"Gateway Inclusivo",allowResize:!1,backgroundImageUrl:"assets/img/processo/gateway_inclusivo.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Gateway Inclusivo",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(i.jsx)(h.ConnectionPoint,{x:.5,y:0}),Object(i.jsx)(h.ConnectionPoint,{x:.9,y:.5}),Object(i.jsx)(h.ConnectionPoint,{x:.5,y:1}),Object(i.jsx)(h.ConnectionPoint,{x:.1,y:.5})]}),Object(i.jsxs)(h.CustomShape,{category:"geral",type:"paralelo",title:"Gateway Paralelo",allowResize:!1,backgroundImageUrl:"assets/img/processo/gateway_paralelo.svg",backgroundImageLeft:.15,backgroundImageTop:0,backgroundImageWidth:.7,backgroundImageHeight:.7,defaultWidth:.5,maxWidth:.5,defaultHeight:.5,maxHeight:.5,defaultText:"Gateway Paralelo",allowEditText:!1,textLeft:0,textTop:.7,textWidth:1,textHeight:.3,children:[Object(i.jsx)(h.ConnectionPoint,{x:.5,y:0}),Object(i.jsx)(h.ConnectionPoint,{x:.9,y:.5}),Object(i.jsx)(h.ConnectionPoint,{x:.5,y:1}),Object(i.jsx)(h.ConnectionPoint,{x:.1,y:.5})]}),Object(i.jsxs)(h.Toolbox,{children:[Object(i.jsx)(h.Group,{category:"eventos",title:"Eventos",expanded:!0,shapes:["inicio","fim"]}),Object(i.jsx)(h.Group,{category:"task",title:"Atividades",expanded:!0,shapes:["atividade"]}),Object(i.jsx)(h.Group,{category:"gateway",title:"Gateways",expanded:!0,shapes:["exclusivo","paralelo","inclusivo"]}),Object(i.jsx)(h.Group,{category:"texto",title:"Texto",expanded:!0,shapes:["text"]}),Object(i.jsx)(h.Group,{category:"containers",title:"Containers",expanded:!0})]}),Object(i.jsx)(h.ContextToolbox,{enabled:!0,category:"geral",shapeIconsPerRow:5,width:200})]})}},{key:"nodeOnInserted",value:function(e,t){var a=this.props.processo.elementos.findIndex((function(e){return e.elemento_tipo===window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE&&(-1===t.indexOf("_")?t===e.elem_key:t.split("_")[1]===e.id.toString())||e.elemento_tipo===window.PROCESSO_ELEMENTO_TIPO.GATEWAY&&(-1===t.indexOf("_")?t===e.elem_key:t.split("_")[1]===e.id.toString())}));if(-1===a){if(this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export()),"verticalContainer"!==e.type&&"horizontalContainer"!==e.type&&"text"!==e.type){var o=window.int_processo_elemento_tipo(e.type),i=null;o===window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?(i=window.clone_obj(_.defaultProcessoAtividade)).tipo=window.int_processo_atividade_tipo(e.type):o===window.PROCESSO_ELEMENTO_TIPO.GATEWAY&&((i=window.clone_obj(_.defaultProcessoGateway)).tipo=window.int_processo_gateway_tipo(e.type)),i.elemento_tipo=o,i.elem_key=t,i.descricao=e.text,this.props.fnSalvarElemento(i)}}else{this.props.processo.elementos[a].removido=!1;for(var n=0;n<this.props.processo.elementos[a].destinos.length;n++)this.props.processo.elementos[a].destinos[n].removido=!1;for(var r=0;r<this.props.processo.elementos.length;r++)for(var s=this.props.processo.elementos[r],c=0;c<s.destinos.length;c++){var l=s.destinos[c];(parseInt(l.id)&&l.id==this.props.processo.elementos[a].id||l.elem_key&&l.elem_key==this.props.processo.elementos[a].elem_key)&&(this.props.processo.elementos[r].destinos[c].removido=!1)}}}},{key:"nodeOnRemoved",value:function(e){this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export());for(var t=-1===e.indexOf("_")?e:e.split("_")[1],a="atividade"===e.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===e.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null,o=0;o<this.props.processo.elementos.length;o++){var i=this.props.processo.elementos[o];(i.id&&t===i.id.toString()&&a===i.elemento_tipo||t===i.elem_key)&&this.props.util.excluir_elemento(i,this.props.processo,(function(){}))}this.props.div.find('[key="'+t+'"]').length&&this.props.div.find('[key="'+t+'"]').parent().find(".btn_cancelar").trigger("click")}},{key:"incluirDestino",value:function(e){if(e.from&&e.to){"undefined"===typeof e.elemKey&&(e.elemKey=e.from+"__"+e.to);var t=-1===e.from.indexOf("_")?e.from:e.from.split("_")[1],a=-1===e.to.indexOf("_")?e.to:e.to.split("_")[1],o=null,i=null;this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export());for(var n=0;n<this.props.processo.diagrama.shapes.length;n++){var r=this.props.processo.diagrama.shapes[n];if(e.from===r.dataKey&&(o=r.key),e.to===r.dataKey&&(i=r.key),o&&i)break}e:for(var s=0;s<this.props.processo.elementos.length;s++){var c=this.props.processo.elementos[s];if(!c.removido&&c.id&&t===c.id.toString()||t===c.elem_key)for(var l=0;l<this.props.processo.elementos.length;l++){var d=this.props.processo.elementos[l];if(!d.removido&&(d.id&&a===d.id.toString()||a===d.elem_key)){this.props.processo.elementos[s].destinos.push({descricao:d.descricao,elem_key:d.elem_key,elemento_tipo:d.elemento_tipo,id:d.id?d.id:null,key:d.id?d.id:d.elem_key,opcional:!!d.opcional&&d.opcional,permite_retorno:!!d.permite_retorno&&d.permite_retorno,sequencia:d.sequencia,tipo:d.tipo,evento_enviar:null,filtro_evento_enviar:null,tipo_automacao:null});break e}}}}}},{key:"edgeOnUpdated",value:function(e,t){"undefined"===typeof t.elemKey&&(t.elemKey=t.from+"__"+t.to),null===t.from&&-1!==t.elemKey.indexOf("__")&&(t.from=t.elemKey.split("__")[0]),null===t.to&&-1!==t.elemKey.indexOf("__")&&(t.to=t.elemKey.split("__")[1]),this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export());var a=t.elemKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[0],o="atividade"===t.elemKey.split("__")[0].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===t.elemKey.split("__")[0].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null,i=t.elemKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[1],n=null;i&&(n="atividade"===t.elemKey.split("__")[1].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===t.elemKey.split("__")[1].split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null);for(var r=0;r<this.props.processo.elementos.length;r++){var s=this.props.processo.elementos[r];if(s.id&&a===s.id.toString()&&o===s.elemento_tipo||a===s.elem_key)for(var c=0;c<s.destinos.length;c++){var l=s.destinos[c];(l.id&&i===l.id.toString()&&n===l.elemento_tipo||i===l.elem_key)&&(this.props.processo.elementos[r].destinos[c].removido=!0)}}this.incluirDestino(t)}},{key:"edgeOnRemoving",value:function(e){var t=this;this.diagramRef.current.instance.getEdgeDataSource().store().byKey(e).then((function(e){var a=e.from?e.from.replaceAll("atividade_","").replaceAll("gateway_",""):null,o="atividade"===e.from.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===e.from.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null,i=e.to?e.to.replaceAll("atividade_","").replaceAll("gateway_",""):null,n=null;if(i&&(n="atividade"===e.to.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE:"gateway"===e.to.split("_")[0]?window.PROCESSO_ELEMENTO_TIPO.GATEWAY:null),a&&i)for(var r=0;r<t.props.processo.elementos.length;r++){var s=t.props.processo.elementos[r];if(s.id&&a===s.id.toString()&&o===s.elemento_tipo||a===s.elem_key)for(var c=0;c<s.destinos.length;c++){var l=s.destinos[c];(l.id&&i===l.id.toString()&&n===l.elemento_tipo||i===l.elem_key)&&(t.props.processo.elementos[r].destinos[c].removido=!0)}}}))}},{key:"edgeOnRemoved",value:function(e){this.props.processo.diagrama=JSON.parse(this.diagramRef.current.instance.export())}},{key:"itemDblClick",value:function(e){var t=this;if("shape"===e.item.itemType&&"text"!==e.item.type){var a=-1===e.item.dataItem.id.indexOf("_")?e.item.dataItem.id:e.item.dataItem.id.split("_")[1];if(b!==a){b=a;var o=this.props.div.find(".dx-drawer-panel-content .dx-datagrid").first().addClass("hidden").parent(),i=document.createElement("div");i.className="divTmp",i.style="padding: 0px;",o.find(".divTmp").remove(),o[0].appendChild(i);for(var n=window.int_processo_elemento_tipo(e.item.type),r=null,s=0;s<this.props.processo.elementos.length;s++){var c=this.props.processo.elementos[s];if(!c.removido&&(a===c.id.toString()||a===c.elem_key)&&n===c.elemento_tipo){r=c;break}}var l=function(){b=null,o.find(".dx-datagrid").first().removeClass("hidden"),t.props.div.find(".dx-drawer-panel-content").css("z-index",0)},d=function(a,o){e.component.getNodeDataSource().store().push([{type:"update",key:e.item.key,data:{text:a.descricao}}]),t.props.fnSalvarElemento(a,o)};n===window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?f.a.load("processo/atividade",(function(e,a){o.find(".modal-content").parent().removeClass().parent().removeClass(),a.onsave=d,a.onclose=l,a.show(r,window.FORMULARIO.EDITAR,t.props.processo,t.props.formulario,null,null,null,!0),t.diagramRef.current.instance.option("fullScreen")?t.props.div.find(".dx-drawer-panel-content").css("z-index",1504):t.props.div.find(".dx-drawer-panel-content").css("z-index",0)}),void 0,void 0,void 0,void 0,o.find(".divTmp")):n===window.PROCESSO_ELEMENTO_TIPO.GATEWAY&&f.a.load("processo/gateway",(function(e,a){o.find(".modal-content").parent().removeClass().parent().removeClass(),a.onsave=d,a.onclose=l,a.show(r,window.FORMULARIO.EDITAR,t.props.processo,null,null,t.props.formulario,null,!0),t.diagramRef.current.instance.option("fullScreen")?t.props.div.find(".dx-drawer-panel-content").css("z-index",1504):t.props.div.find(".dx-drawer-panel-content").css("z-index",0)}),void 0,void 0,void 0,void 0,o.find(".divTmp"))}}}},{key:"contentReady",value:function(e){var t=this;setTimeout((function(){if(t.diagramRef.current)if("undefined"!==typeof t.props.diagramDataSource&&""!=t.props.diagramDataSource)t.diagramRef.current.instance.import(t.props.diagramDataSource);else{var a=function(){var e=t.props.processo.diagrama.shapes.map((function(e){return e.key})),a=t.props.processo.diagrama.connectors.map((function(e){return e.key}));return Math.max.apply(Math,Object(o.a)(e).concat(Object(o.a)(a)))+1};if(t.props.processo&&t.props.processo.diagrama){for(var i=0,n=0;n<t.props.processo.diagrama.shapes.length;n++){var r=t.props.processo.diagrama.shapes[n];if("text"!==r.type&&"verticalContainer"!==r.type&&"horizontalContainer"!==r.type){for(var s=!1,c=window.int_processo_elemento_tipo(r.type),l=-1===r.dataKey.indexOf("_")?r.dataKey:r.dataKey.split("_")[1],d=0;d<t.props.processo.elementos.length;d++){var u=t.props.processo.elementos[d];u.elemento_tipo===c&&(parseInt(u.id)&&u.id.toString()===l||u.elem_key===l)&&(t.props.processo.diagrama.shapes[n].text=u.descricao,s=!0,t.props.processo.diagrama.shapes[n].type=window.str_processo_elemento_tipo(u.elemento_tipo,u.tipo),t.props.processo.elementos[d].encontrado=!0,t.props.processo.elementos[d].key=r.key);for(var p=0;p<u.destinos.length;p++){var f=u.destinos[p];f.elemento_tipo===c&&(parseInt(f.id)&&f.id.toString()===l||f.elem_key===l)&&(t.props.processo.elementos[d].destinos[p].key=r.key)}}s||(t.props.processo.diagrama.shapes.splice(n-i,1),i++)}}for(var m=0;m<t.props.processo.elementos.length;m++){var _=t.props.processo.elementos[m];_.encontrado||_.removido||t.props.processo.diagrama.shapes.push({key:a().toString(),dataKey:_.elem_key,text:_.descricao,type:window.str_processo_elemento_tipo(_.elemento_tipo,_.tipo),locked:!1,zIndex:0,x:0,y:0})}for(var h=0,v=0;v<t.props.processo.diagrama.connectors.length;v++){var b=!1,j=t.props.processo.diagrama.connectors[v],O=j.dataKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[0],g=j.dataKey.replaceAll("atividade_","").replaceAll("gateway_","").split("__")[1];if(O&&g){e:for(var w=0;w<t.props.processo.elementos.length;w++){var x=t.props.processo.elementos[w];if(parseInt(x.id)&&O===x.id.toString()||O===x.elem_key)for(var y=0;y<x.destinos.length;y++){var A=x.destinos[y];if(!A.removido&&(parseInt(A.id)&&g===A.id.toString()||g===A.elem_key)){b=!0,t.props.processo.elementos[w].destinos[y].encontrado=!0;break e}}}b||(t.props.processo.diagrama.connectors.splice(v-h,1),h++)}}for(var C=0;C<t.props.processo.elementos.length;C++)for(var S=t.props.processo.elementos[C],R=0;R<S.destinos.length;R++){var I=S.destinos[R];if(!I.encontrado&&!I.removido){t.props.processo.diagrama.connectors.length,t.props.processo.diagrama.connectors.length;t.props.processo.diagrama.connectors.push({key:a().toString(),dataKey:(parseInt(S.id)?(S.elemento_tipo==window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?"atividade_":"gateway_")+S.id:S.elem_key)+"__"+(parseInt(I.id)?(I.elemento_tipo==window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE?"atividade_":"gateway_")+I.id:I.elem_key),locked:!1,zIndex:0,points:[{x:0,y:0},{x:0,y:0}],beginItemKey:S.key,endItemKey:I.key})}}e.component.import(JSON.stringify(t.props.processo.diagrama))}}}))}}]),a}(p.a.Component);t.default=x},1202:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var o=a(372),i=a(380),n=a(419),r=a(890);function s(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.a)()})))}s.defaultProps={displayExpr:"descricao",valueExpr:"cargo_id",columns:[{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}]}},1203:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(389);var p=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;Object(i.a)(this,a),o=t.call(this,e);var n=window.cripto(u.a.token);return o.arquivoUrlSufixo=o.props.permissao_download?"&acao=abrir":"&acao=abrir#toolbar=0",o.arquivo=window.WS_URI+"documento/download/?documento_revisao_id="+o.props.documento_revisao_id+"&documento_id="+o.props.documento_id+"&token_publico="+n+"&tipo=S&login_anonimo="+(!0===u.a.login_anonimo?"true":"false"),o}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)("div",{children:Object(o.jsx)("iframe",{src:this.arquivo+this.arquivoUrlSufixo,style:{height:"calc(100vh - 47px)",width:"calc(100vw - 50px)"}})})})}}]),a}(d.a.Component);p.defaultProps={abaTitulo:"Visualizador de PDF",documento_revisao_id:0,documento_id:0,permissao_download:!0}},1204:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(389);var p=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;Object(i.a)(this,a),(o=t.call(this,e)).handleRotateLeft=function(){o.updateRotation("90")},o.handleRotateRight=function(){o.updateRotation("-90")},o.updateRotation=function(e){u.a.post("documento/girar_imagem/",{documento_revisao_id:o.props.documento_revisao_id,angulo:e},(function(e){var t=o.arquivo+"&t="+(new Date).getTime();o.refImg.current.src=t}))},o.refImg=d.a.createRef(null);var n=window.cripto(u.a.token);return o.arquivo=window.WS_URI+"documento/download/?documento_revisao_id="+o.props.documento_revisao_id+"&documento_id="+o.props.documento_id+"&token_publico="+n+"&tipo=S&login_anonimo="+(!0===u.a.login_anonimo?"true":"false"),o.containerStyles={display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",border:"2px solid #ccc",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",padding:"10px 50px"},o.imageStyles={maxWidth:"100%",width:"auto",height:"auto",marginTop:10,pointerEvents:"none"},o}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsxs)("div",{style:this.containerStyles,children:[Object(o.jsxs)("h4",{children:[Object(o.jsx)("i",{className:"fas fa-image"}),"\xa0",this.props.documento_nome]}),Object(o.jsxs)("span",{style:{fontSize:"1.1em",display:"block",marginBottom:10},children:[Object(o.jsx)("i",{className:"fas fa-info-circle"}),"\xa0Use a tecla ",Object(o.jsx)("strong",{children:"Shift"})," e o ",Object(o.jsx)("strong",{children:"scroll do mouse"})," para dar zoom na imagem."]}),Object(o.jsxs)("div",{className:"modal-body div_viewer",style:{textAlign:"center"},children:[Object(o.jsx)("button",{className:"btn btn-default",onClick:this.handleRotateLeft,children:Object(o.jsx)("i",{className:"fa fa-undo"})}),Object(o.jsx)("button",{className:"btn btn-default",onClick:this.handleRotateRight,children:Object(o.jsx)("i",{className:"fa fa-redo"})})]}),Object(o.jsx)("img",{ref:this.refImg,src:this.arquivo,alt:"Pr\xe9 visualiza\xe7\xe3o de imagem",style:this.imageStyles})]})})}},{key:"componentDidMount",value:function(){var e=this.refImg.current;window.wheelzoom(e),document.addEventListener("keydown",(function(t){"Shift"===t.key&&(e.style.pointerEvents="auto")})),document.addEventListener("keyup",(function(t){"Shift"===t.key&&(e.style.pointerEvents="none")}))}}]),a}(d.a.Component);p.defaultProps={abaTitulo:"Visualizador de Imagem",documento_revisao_id:0,documento_id:0,documento_nome:"Imagem",permissao_download:!0}},1205:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(389);var p=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;Object(i.a)(this,a),o=t.call(this,e);var n=window.cripto(u.a.token);return o.arquivo=window.WS_URI+"documento/download/?documento_revisao_id="+o.props.documento_revisao_id+"&documento_id="+o.props.documento_id+"&token_publico="+n+"&tipo=S&login_anonimo="+(!0===u.a.login_anonimo?"true":"false"),o.containerStyles={display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",border:"2px solid #ccc",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",padding:"10px"},o.videoStyles={maxWidth:"100%",width:"auto",height:"auto",marginTop:10},o}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsxs)("div",{style:this.containerStyles,children:[Object(o.jsxs)("h4",{style:{marginBottom:20},children:[Object(o.jsx)("i",{className:"fas fa-video"}),"\xa0",this.props.documento_nome]}),Object(o.jsx)("video",{src:this.arquivo,controls:!0,autoPlay:!0})]})})}}]),a}(d.a.Component);p.defaultProps={abaTitulo:"Visualizador de Video",documento_revisao_id:0,documento_id:0,documento_nome:"V\xeddeo",permissao_download:!0}},1206:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return d}));var o=a(372),i=a(380),n=a(376),r=a.n(n),s=a(551),c=a.n(s),l=a(696);function d(e){var t=e.pai_tabela,a=e.pai_id,n=e.selecionados,s=void 0===n?[]:n,d=e.onValueChanged,u=void 0===d?null:d,p=e.readOnly,f=void 0!==p&&p,m=e.stylingMode,_=void 0===m?"underlined":m,h=e.width,v=void 0===h?"auto":h,b=e.maxDisplayedTags,j=void 0===b?void 0:b,O=e.applyValueMode,g=void 0===O?"instantly":O,w=Object(l.c)({pai_tabela:t,pai_id:a,dx_grid:!1}),x=s;return Object(o.jsx)(c.a,{readOnly:f,showMultiTagOnly:!1,dataSource:w,defaultValue:x,displayExpr:"nome",valueExpr:"id",itemRender:function(e){e.id;var t=e.nome,a=e.cor_fundo,i=e.cor_fonte;return Object(o.jsx)("div",{title:t,style:{display:"flex",padding:"6px",borderRadius:"14px",backgroundColor:a||"white",color:i||"black",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:Object(o.jsx)("span",{className:"",children:t})})},showSelectionControls:!0,multiline:!0,onValueChanged:function(e){"function"===typeof u&&u(e.value)},placeholder:"Etiquetas",searchEnabled:!0,stylingMode:_,width:v,maxDisplayedTags:j,applyValueMode:g,tagRender:function(e){return function(e){var t=e.etiqueta,a=e.onMouseEnter;if(!t)return null;var n="string"===typeof t&&void 0!==j?t:t.nome,s=void 0!==j?{textOverflow:"ellipsis",overflow:"hidden",width:"120px",whiteSpace:"nowrap"}:{};return Object(o.jsx)(r.a.Fragment,{children:Object(o.jsxs)("div",{className:"dx-tag-content",onMouseEnter:function(e){return a(e,t)},style:Object(i.a)({backgroundColor:t.cor_fundo||"white",color:t.cor_fonte||"black"},s),children:[Object(o.jsx)("span",{children:n}),Object(o.jsx)("div",{className:"dx-tag-remove-button"})]})})}({etiqueta:e,onMouseEnter:function(e,t){}})}})}},1207:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(388);var f=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).dataGridRef=d.a.createRef(),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.fnGetInstanceDatagrid&&this.props.fnGetInstanceDatagrid(this.dataGridRef.current.instance)}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(u.default,{pager:{showPageSizeSelector:!1},elementAttr:{style:"height: 200px;"},ref:this.dataGridRef,dataSource:this.props.dataSource,groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},filterRow:{visible:!1},headerFilter:{visible:!1},editing:{mode:"cell",allowUpdating:!0,allowAdding:!0,allowDeleting:!0,useIcons:!0},children:Object(o.jsx)(p.Column,{dataField:"nome",caption:"Extens\xe3o Aceita"})})})}}]),a}(d.a.Component)},1208:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var o=a(372),i=a(380),n=a(419),r=a(885),s=a(413);function c(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.a)()})))}var l=[Object(o.jsx)(s.a,{width:"100%"},"nome")];c.defaultProps={aoAlterar:null,displayExpr:function(e){return e&&e.nome},children:l,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1}},1209:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var o=a(380),i=a(372),n=a(509),r=a.n(n),s=a(398);function c(e){for(var t,a,n=[],c=[window.ELEMENTO_TIPO.TEXTO,window.ELEMENTO_TIPO.INTEIRO,window.ELEMENTO_TIPO.INTEGRACAO],l=null!==(t=null===(a=e.formulario)||void 0===a?void 0:a.grupos)&&void 0!==t?t:[],d=0;d<l.length;d++)for(var u=l[d],p=0;p<u.elementos.length;p++){var f=window.clone_obj(u.elementos[p]);c.includes(+f.tipo)&&(f.grupo_nome=u.nome,n.push(f))}var m=new s.default({store:{type:"array",data:n,key:"id_elemento"},group:"grupo_nome"});return Object(i.jsx)(r.a,Object(o.a)(Object(o.a)({},e),{},{dataSource:m,grouped:!0,valueExpr:"id_elemento",displayExpr:"nome",searchEnabled:!0}))}},1210:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var o=a(380),i=a(372),n=a(423),r=a(376),s=a(691);function c(e){var t,a=Object(r.useState)(null!==(t=null===e||void 0===e?void 0:e.valor)&&void 0!==t?t:"0:00"),c=Object(n.a)(a,2),l=c[0],d=c[1],u=function(t){var a=function(e){var t=e.replace(/[^0-9]/g,""),a=parseInt(t.slice(0,-2),10)||0,o=parseInt(t.slice(-2),10)||0;return o>59&&(a+=Math.floor(o/60),o%=60),"".concat(a,":").concat(o.toString().padStart(2,"0"))}(t.component.option("value"));d(a),e.aoAlterar&&e.aoAlterar(a)};return Object(i.jsx)(s.TextBox,Object(o.a)(Object(o.a)({},e),{},{onValueChanged:function(t){var a=function(e){var t=e.replace(/[^0-9]/g,"");if(0===t.length)return"0:00";if(1===t.length)return"0:0".concat(t);if(2===t.length)return"0:".concat(t);var a=t.slice(0,-2),o=t.slice(-2);return"".concat(parseInt(a,10),":").concat(o)}(t.value);d(a),e.aoAlterar&&e.aoAlterar(a)},valueChangeEvent:"keyup change",value:l,onFocusIn:u,onFocusOut:function(t){u(t),e.fnOnFocusOut&&e.fnOnFocusOut()},readOnly:e.readOnly}))}c.defaultProps={placeholder:"0:00",aoAlterar:null,readOnly:!1}},1213:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(389),h=a(398),v=a(413),b=a(626),j=a(388);var O=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);O.defaultProps={dataField:"nivel",caption:"N\xedvel"};var g=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);g.defaultProps={dataField:"bloqueado",caption:"Bloqueado"};var w=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);w.defaultProps={caption:"Previs\xe3o de Retorno",dataField:"previsao_retorno",calculateCellValue:function(e){var t=e.tipo_gestao_tempo;return+t===window.CHAMADO_MOTIVO_TEMPO.DIAS_CORRIDOS?e.dias:+t===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS?e.horas_uteis:void 0}};var x=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);x.defaultProps={dataField:"tipo_previsao_retorno",caption:"Tipo Previs\xe3o Retorno",calculateCellValue:function(e){return window.tipo_gestao_tempo(e.tipo_gestao_tempo)}};var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);y.defaultProps={dataField:"encerramento_inatividade",caption:"Tempo Encerramento Inatividade",calculateCellValue:function(e){var t=e.tipo_gestao_tempo_encerramento;return+t===window.CHAMADO_MOTIVO_TEMPO.DIAS_CORRIDOS?e.dias_encerramento:+t===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS?e.horas_uteis_encerramento:void 0}};var A=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);A.defaultProps={dataField:"tipo_encerramento_inatividade",caption:"Tipo Encerramento Inatividade",calculateCellValue:function(e){return window.tipo_gestao_tempo(e.tipo_gestao_tempo_encerramento)}};var C=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);C.defaultProps={dataField:"tempo_resolucao_atendimento",caption:"Tempo Resolu\xe7\xe3o Atendimento",calculateCellValue:function(e){return e.horas_uteis_resolucao_atendimento}};var S=[Object(o.jsx)(v.a,{width:""},"Nome"),Object(o.jsx)(b.a,{width:180,disabled:!0,dropDownButtonTemplate:""},"Cor"),Object(o.jsx)(O,{},"Nivel"),Object(o.jsx)(g,{},"Bloqueado"),Object(o.jsx)(w,{dataField:"",visible:!1},"PrevisaoRetorno"),Object(o.jsx)(x,{dataField:"",visible:!1},"TipoPrevisaoRetorno"),Object(o.jsx)(A,{dataField:"",visible:!1},"TipoEncerramentoInatividade"),Object(o.jsx)(y,{dataField:"",visible:!1},"EncerramentoInatividade"),Object(o.jsx)(C,{dataField:"",visible:!1},"TempoResolucaoAtendimento")],R=a(432),I=a(550),P=a(449);var E=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Motivo de Chamado",text:"Adicionar",onClick:function(){window.View.load("motivos_chamados/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)}},location:"after",name:"BtnNovoMotivoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){window.View.load("motivos_chamados/configuracao",(function(e,t){t.onclose=function(){},t.show()}))},visible:window.App.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e,t=[].concat(Object(i.a)(S),[Object(o.jsxs)(j.Column,{type:"buttons",children:[Object(o.jsx)(P.a,{onClick:function(e){window.View.load("motivos_chamados/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.chamado_motivo_id,window.FORMULARIO.EDITAR)}))}},"btnEditar"),Object(o.jsx)(I.a,{onClick:function(e){window.View.load("motivos_chamados/detalhes",(function(t,a){a.show(e.row.data.chamado_motivo_id,window.FORMULARIO.VISUALIZAR)}))}},"BtnVisualizar"),Object(o.jsx)(R.a,{onClick:function(e){window.View.load("motivos_chamados/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.chamado_motivo_id,window.FORMULARIO.EXCLUIR)}))}},"BtnApagar")]},"btns")]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new h.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"chamado_motivo_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){_.a.get({route:"chamado_motivo/listar/",data:Object(m.a)(Object(m.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(m.a)(Object(m.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){_.a.get({route:"chamado_motivo/listar/",data:{dx_grid:!0,chamado_motivo_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),stateStoring:Object(f.stateStoring)("listarMotivoChamado"),children:t})})})})}}]),a}(p.a.Component);E.defaultProps={abaTitulo:"Motivos"};t.default=E},1214:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(398),h=a(389),v=a(388);var b=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(v.Column);b.defaultProps={dataField:"inicio",caption:"In\xedcio",dataType:"number",alignment:"left"};var j=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(v.Column);j.defaultProps={dataField:"fim",caption:"Fim",dataType:"number",alignment:"left"};var O=a(626),g=[Object(o.jsx)(b,{caption:"% In\xedcio"}),Object(o.jsx)(j,{caption:"% Fim"}),Object(o.jsx)(O.a,{caption:"Cor de Fundo"}),Object(o.jsx)(O.a,{caption:"Cor da Fonte",dataField:"cor_fonte"})],w=a(432),x=a(450);var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:new _.default({key:"cores_percentual_conclusao_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){h.a.get({route:"cores_percentual_conclusao/listar/",data:Object(m.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(m.a)(Object(m.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(g),[Object(o.jsxs)(v.Column,{type:"buttons",children:[Object(o.jsx)(w.a,{visible:function(e){return!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(x.a,{visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,selection:{mode:"multiple"},stateStoring:Object(f.stateStoring)("ListagemChamadoCorPercentualConclusao"),onToolbarPreparing:this.onToolbarPreparing,editing:{mode:"batch",allowUpdating:!0,useIcons:!0},children:e})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cores por Conclus\xe3o",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());h.a.post("/cores_percentual_conclusao/salvar_edicao_batch/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))}),"revertButton"===o.name&&(o.options.onClick=function(t){e.component.cancelEditData()})}}}]),a}(p.a.Component);y.defaultProps={abaTitulo:"Cores por % de conclus\xe3o"}},1215:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(398),h=a(389),v=a(448),b=a(413),j=a(388);var O=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);O.defaultProps={dataField:"tipo",caption:"Tipo"};var g=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(j.Column);g.defaultProps={dataField:"path",caption:"Caminho"};var w=a(860),x=a(510),y=[Object(o.jsx)(b.a,{}),Object(o.jsx)(O,{}),Object(o.jsx)(g,{}),Object(o.jsx)(w.a,{dataField:"data_exclusao",caption:"Data Exclus\xe3o"}),Object(o.jsx)(x.a,{dataField:"usuario_exclusao",caption:"Exclu\xeddo por"})],A=a(432),C=a(450);var S=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:new _.default({pageSize:20,key:"chave",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){h.a.get({route:"/documento/listar_documentos_pastas_excluidos/",data:Object(m.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(m.a)(Object(m.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(y),[Object(o.jsxs)(j.Column,{type:"buttons",children:[Object(o.jsx)(A.a,{onClick:function(e){Object(v.confirm)("Deseja excluir <strong>"+e.row.data.nome+"</strong> permanentemente?","Aten\xe7\xe3o").then((function(t){t&&("documento"===e.row.data.tipo.toLowerCase()?h.a.post("/documento/excluir/",{documento_id:e.row.data.registro_id,excluir:!0},(function(t){window.alert_saved("Documento exclu\xeddo com sucesso"),e.component.refresh()})):"pasta"===e.row.data.tipo.toLowerCase()&&h.a.post("/documento_pasta/excluir/",{documento_pasta_id:e.row.data.registro_id,permanente:!0},(function(t){window.alert_saved("Pasta exclu\xedda com sucesso"),e.component.refresh()})))}))}}),Object(o.jsx)(C.a,{onClick:function(e){Object(v.confirm)("Deseja restaurar <strong>"+e.row.data.nome+"</strong>?","Aten\xe7\xe3o").then((function(t){t&&("documento"===e.row.data.tipo.toLowerCase()?h.a.post("/documento/restaurar_documento/",{documento_id:e.row.data.registro_id},(function(t){window.alert_saved("Documento restaurado com sucesso"),e.component.refresh()})):"pasta"===e.row.data.tipo.toLowerCase()&&h.a.post("/documento_pasta/excluir/",{documento_pasta_id:e.row.data.registro_id,excluir:!1},(function(t){window.alert_saved("Pasta restaurada com sucesso"),e.component.refresh()})))}))}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,selection:{mode:"multiple"},stateStoring:Object(f.stateStoring)("ListagemLixeiraDocumentos"),onToolbarPreparing:this.onToolbarPreparing,pager:{visible:!0,showInfo:!0},children:e})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"clearformat",hint:"Esvaziar lixeira",text:"Esvaziar lixeira",onClick:function(t){e.component.getDataSource().store().load().done((function(t){var a=t.data,o=a.filter((function(e){return"documento"===e.tipo.toLowerCase()})).map((function(e){return e.registro_id})),i=a.filter((function(e){return"pasta"===e.tipo.toLowerCase()})).map((function(e){return e.registro_id}));(o.length>0||i.length>0)&&Object(v.confirm)("Deseja esvaziar a lixeira e excluir <strong>"+(o.length+i.length)+" registro(s)</strong> permanentemente?","Aten\xe7\xe3o").then((function(t){t&&(window.alert_info("Por favor, aguarde"),h.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(i),documentos:JSON.stringify(o),excluir:!0,exclusao_permanente:!0},(function(t){window.alert_saved("Lixeira esvaziada com sucesso"),e.component.refresh()})))}))}))}},showText:"always",location:"after",name:"BtnEsvaziarLixeira",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"trash",hint:"Excluir selecionados",text:"Excluir selecionados",onClick:function(t){var a=e.component.getSelectedRowsData(),o=a.filter((function(e){return"documento"===e.tipo.toLowerCase()})).map((function(e){return e.registro_id})),i=a.filter((function(e){return"pasta"===e.tipo.toLowerCase()})).map((function(e){return e.registro_id}));(o.length>0||i.length>0)&&Object(v.confirm)("Deseja excluir <strong>"+(o.length+i.length)+" registro(s)</strong> permanentemente?","Aten\xe7\xe3o").then((function(t){t&&h.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(i),documentos:JSON.stringify(o),excluir:!0,exclusao_permanente:!0},(function(t){window.alert_saved("Registros exclu\xeddos com sucesso"),e.component.refresh()}))}))}},showText:"always",location:"after",name:"BtnExcluirSelecionados",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"revert",hint:"Restaurar selecionados",text:"Restaurar selecionados",onClick:function(t){var a=e.component.getSelectedRowsData(),o=a.filter((function(e){return"documento"===e.tipo.toLowerCase()})).map((function(e){return e.registro_id})),i=a.filter((function(e){return"pasta"===e.tipo.toLowerCase()})).map((function(e){return e.registro_id}));(o.length>0||i.length>0)&&Object(v.confirm)("Deseja restaurar <strong>"+(o.length+i.length)+" registro(s)</strong>?","Aten\xe7\xe3o").then((function(t){t&&h.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(i),documentos:JSON.stringify(o),restaurar:!0},(function(t){window.alert_saved("Registros restaurados com sucesso"),e.component.refresh()}))}))}},showText:"always",location:"after",name:"BtnRestaurarSelecionados",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}}]),a}(p.a.Component);S.defaultProps={abaTitulo:"Lixeira de Documentos"}},1216:function(e,t,a){"use strict";a.r(t);var o=a(380),i=a(422),n=a.n(i),r=a(425),s=a(365),c=a(366),l=a(385),d=a(368),u=a(369),p=a(367),f=a(372),m=a(376),_=a.n(m),h=a(878),v=a.n(h),b=a(856),j=a(105),O=a(408),g=a(389),w=a(882),x=a(695),y=a(398),A=function(){return new y.default({paginate:!1,key:"id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(a,i){g.a.get({route:"grupo_ativos/listar/",data:Object(o.a)({nome:e.searchValue,dx_list:!0},t),func_response:function(e){a({data:e,key:"id"})},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var C=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).state=Object(o.a)(Object(o.a)({},i.state),i.propsToObjState()),i}return Object(c.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,dataSource:A(),instanceSelecaoPadraoTagBox:null!==(t=this.props.instanceSelecaoGruposAtivos)&&void 0!==t?t:null,aoAlterar:null!==(a=this.props.aoAlterar)&&void 0!==a?a:null,elementAttr:null!==(o=this.props.elementAttr)&&void 0!==o?o:null}}},{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}]),a}(x.a);C.defaultProps={placeholder:"Filtro por grupos de ativos",dataSource:A(),displayExpr:"nome",valueExpr:"id"};var S=a(884),R=a(508),I=a.n(R),P=a(63),E=a.n(P);var T=!1,D=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var o;return Object(s.a)(this,a),o=t.call(this,e),T=o.props.hoursOnly,o}return a}(I.a);D.defaultProps={type:"datetime",displayFormat:"HH:mm",onOpened:function(e){var t=e.component._popup._$content;E()(t.find("div.dx-box-item")[0]).addClass("hidden"),E()(t.find(".dx-button-today")[0]).closest(".dx-toolbar-before").addClass("hidden"),T&&(E()(t.find(".dx-texteditor-input")[1]).val("00").prop("disabled",!0).trigger("change"),E()(t.find(".dx-texteditor-input")[1]).closest(".dx-texteditor-container").find(".dx-texteditor-buttons-container").addClass("hidden"),E()(t.find(".dx-texteditor-input")[1]).css("padding-left","26px"))},onClosed:function(e){var t=e.component._popup._$content;E()(t.find("div.dx-box-item")[0]).removeClass("hidden"),E()(t.find(".dx-button-today")[0]).closest(".dx-toolbar-before").removeClass("hidden"),T&&(E()(t.find(".dx-texteditor-input")[1]).prop("disabled",!1),E()(t.find(".dx-texteditor-input")[1]).closest(".dx-texteditor-container").find(".dx-texteditor-buttons-container").removeClass("hidden"),E()(t.find(".dx-texteditor-input")[1]).css("padding-left",""))}};var k=a(620),M=a(871),N=a.n(M),F=a(448),L=a(509),U=a.n(L),B=a(551),V=a.n(B),z=function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,i,r,s,c,l=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:{},a=l.length>1&&void 0!==l[1]?l[1]:null,i=l.length>2&&void 0!==l[2]?l[2]:null,r="supervisor/listar_supervisionados/",s=function(e){var t=window.createLoadExtra(e);a&&a(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},c=function(e){i&&e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))},a){e.next=12;break}return e.next=9,g.a.get({route:r,data:t,func_response:s,func_fail:c,awaitReturn:!0});case 9:return e.abrupt("return",e.sent);case 12:g.a.get({route:r,data:t,func_response:s,func_fail:c});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=a(693);var H=null,q=null,W=null,K=null;function J(e){var t=e.appointmentData,a={overflow:"hidden",textOverflow:"ellipsis",position:"relative",top:-3},o={marginBottom:5};return t.data_feriado?Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(f.jsx)("div",{style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:Object(f.jsx)("span",{children:t.nome})}),Object(f.jsxs)("div",{children:[t.hora_inicio.substring(0,5)," - ",t.hora_fim.substring(0,5)]})]}),Z(t)]}):"undefined"!==typeof t.oportunidade_agenda_id&&+t.oportunidade_agenda_id>0?Object(f.jsxs)("div",{style:{color:t.agenda_tipo_cor_texto},children:[Object(f.jsxs)("div",{className:"row",style:{marginBottom:5,display:"flex"},children:[Object(f.jsxs)("div",{className:"col-xs-1",children:["S"===t.atividade_realizada&&Object(f.jsx)("span",{className:"label label-success",children:Object(f.jsx)("i",{className:"fa fa-check"})}),"N"===t.atividade_realizada&&Object(f.jsx)("span",{className:"label label-warning",children:Object(f.jsx)("i",{className:"fas fa-thumbtack"})})]}),Object(f.jsx)("div",{className:"col-xs-11",style:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:8},children:t.descricao})]}),Object(f.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(f.jsx)("div",{style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:Object(f.jsx)("small",{children:Object(f.jsx)("span",{className:"label label-default",children:t.tipo_agenda_oportunidade_descricao})})}),Object(f.jsxs)("div",{children:[t.hora_inicio.substring(0,5)," - ",t.duracao.substring(0,5)]})]}),X(t)]}):("S"===t.realizado&&("col-xs-11",a={overflow:"hidden",textOverflow:"ellipsis",position:"relative",top:-3,paddingLeft:10},o={marginBottom:5,display:"flex"}),Object(f.jsxs)("div",{style:{color:t.agenda_tipo_cor_texto},children:[Object(f.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(f.jsx)("div",{className:"divDescricaoClass",style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:"S"===t.agenda_tipo_particular&&+t.usuario_id!==+j.a.sessao.dados.usuario_id?"Evento particular":t.descricao}),Object(f.jsxs)("div",{children:[t.hora_inicio.substring(0,5)," - ",t.hora_fim.substring(0,5)]})]}),Object(f.jsxs)("div",{className:"row",style:o,children:[Object(f.jsx)("div",{className:"col-xs-1",style:{top:-3},children:"S"===t.realizado&&Object(f.jsx)("span",{className:"label label-success",children:Object(f.jsx)("i",{className:"fa fa-check"})})}),Object(f.jsx)("div",{className:"col-xs-11",style:a,children:Object(f.jsx)("span",{className:"label label-default",children:t.agenda_tipo_nome})})]}),Z(t)]}))}function Q(e){var t=e.targetedAppointmentData;if("undefined"!==typeof t.oportunidade_agenda_id&&+t.oportunidade_agenda_id>0)return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{style:{textAlign:"left"},children:[Object(f.jsxs)("div",{className:"row",style:{marginBottom:5},children:[Object(f.jsxs)("div",{className:"col-xs-1",children:["S"===t.atividade_realizada&&Object(f.jsx)("span",{className:"label label-success",children:Object(f.jsx)("i",{className:"fa fa-check"})}),"N"===t.atividade_realizada&&Object(f.jsx)("span",{className:"label label-warning",children:Object(f.jsx)("i",{className:"fas fa-thumbtack"})})]}),Object(f.jsx)("div",{className:"col-xs-11",style:{overflow:"hidden",textOverflow:"ellipsis",paddingLeft:8},children:t.descricao})]}),Object(f.jsxs)("div",{style:{marginBottom:5,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(f.jsx)("div",{style:{width:"calc(100% - 80px)",textOverflow:"ellipsis",overflow:"hidden"},children:Object(f.jsx)("small",{children:Object(f.jsx)("span",{className:"label label-default",children:t.tipo_agenda_oportunidade_descricao})})}),Object(f.jsxs)("div",{children:[t.hora_inicio.substring(0,5)," - ",t.duracao.substring(0,5)]})]}),X(t)]})});var a="col-xs-12",o={overflow:"hidden",textOverflow:"ellipsis"};return"S"===t.realizado&&(a="col-xs-11",o={overflow:"hidden",textOverflow:"ellipsis",paddingLeft:8}),Object(f.jsx)("div",{children:Object(f.jsxs)("div",{style:{textAlign:"left"},children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-xs-1",children:"S"===t.realizado&&Object(f.jsx)("span",{className:"label label-success",children:Object(f.jsx)("i",{className:"fa fa-check"})})}),Object(f.jsxs)("div",{className:a,style:o,children:["S"===t.agenda_tipo_particular&&+t.usuario_id!==+j.a.sessao.dados.usuario_id?"Evento particular":t.descricao,t.nome_ativo_reservado&&Object(f.jsx)("p",{children:Object(f.jsxs)("small",{children:["- Ativo: ",t.nome_ativo_reservado]})})]})]}),Object(f.jsxs)("div",{className:"row",style:{marginBottom:5},children:[Object(f.jsx)("div",{className:"col-md-6",children:Object(f.jsx)("small",{children:Object(f.jsx)("span",{className:"label label-default",children:t.agenda_tipo_nome})})}),Object(f.jsxs)("div",{className:"col-md-6",style:{textAlign:"right"},children:[t.hora_inicio.substring(0,5)," - ",t.hora_fim.substring(0,5)]})]}),Z(t),(t.projeto_nome||t.atividade_projeto_nome)&&Object(f.jsxs)("p",{children:[t.projeto_nome&&Object(f.jsxs)(_.a.Fragment,{children:[Object(f.jsx)("strong",{children:"- Projeto:"})," ",Object(f.jsx)("span",{children:t.projeto_nome}),Object(f.jsx)("br",{})]}),t.atividade_projeto_nome&&Object(f.jsxs)(_.a.Fragment,{children:[Object(f.jsx)("strong",{children:"- Atividade Projeto:"})," ",Object(f.jsx)("span",{children:t.atividade_projeto_nome})]})]})]})})}function Z(e){return Object(f.jsxs)(_.a.Fragment,{children:[e.cliente_nome&&Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"label label-info",children:"C"}),"\xa0",e.cliente_nome]}),e.fornecedor_nome&&Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"label label-warning",children:"F"}),"\xa0",e.fornecedor_nome]}),e.prospect_nome&&Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"label label-danger",children:"O"}),"\xa0",e.prospect_nome]}),e.empresa_nome&&Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"label label-primary",children:"E"}),"\xa0",e.empresa_nome]})]})}function X(e){var t="label label-default";return"C"===e.entidade_tipo?t="label label-info":"F"===e.entidade_tipo?t="label label-warning":"O"===e.entidade_tipo?t="label label-danger":"E"===e.entidade_tipo&&(t="label label-primary"),Object(f.jsx)(_.a.Fragment,{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:t,children:e.entidade_tipo}),"\xa0",e.entidade_nome]})})}var Y=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).requestTipoAgenda=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)();case 2:(t=e.sent).push({cor:"#33CCFF",nome:"CRM",tipo_agenda_id:"CRM"},{cor:"#D9534F",nome:"Feriado",tipo_agenda_id:"feriado"}),this.setState({dataSourceTipoAgenda:t});case 5:case"end":return e.stop()}}),e,this)}))),i.requestUsuariosPorGrupo=function(){var e=Object(r.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("usuario/usuarios_grupo_usuario_logado/",{grupo_usuarios_id:JSON.stringify(t),modulo:window.MODULOS.AGENDA},null,null,null,null,null,null,null,!0);case 2:a=e.sent,r=i.state.arrUsuariosSelecionados,i.state.arrUsuariosSelecionados.forEach((function(e,t){a.filter((function(t){return null!==t&&+t.usuario_id===+e})).length||(r[t]=null)})),r=r.filter((function(e){return null!==e})),j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},i.filtros_agenda_usuario),{},{grupos_usuarios:t})),i.setState({arrUsuarios:a,arrUsuariosSelecionados:r,arrGruposUsuariosSelecionados:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.requestAtivosPorGrupo=function(){var e=Object(r.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("grupo_ativos/buscar_ativos/",{grupos_ativos_id:JSON.stringify(t)},null,null,null,null,null,null,null,!0);case 2:a=e.sent,i.getKeySelecaoAtivo(),i.setState({dataSourceAtivos:a,arrGruposAtivosSelecionados:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getKeySelecaoUsuario=i.getKeySelecaoUsuario.bind(Object(l.a)(i)),i.getKeySelecaoAtivo=i.getKeySelecaoAtivo.bind(Object(l.a)(i)),i.requestUsuariosPorGrupo=i.requestUsuariosPorGrupo.bind(Object(l.a)(i)),i.requestAtivosPorGrupo=i.requestAtivosPorGrupo.bind(Object(l.a)(i)),i.getArrUsuario=i.getArrUsuario.bind(Object(l.a)(i)),i.getArrAtivo=i.getArrAtivo.bind(Object(l.a)(i)),i.getArrSupervisionado=i.getArrSupervisionado.bind(Object(l.a)(i)),i.handleUsuariosSelecionados=i.handleUsuariosSelecionados.bind(Object(l.a)(i)),i.calcularIntervaloHoras=i.calcularIntervaloHoras.bind(Object(l.a)(i)),i.schedulerRef=_.a.createRef(),i.keySelecaoUsuarioCount=0,i.keySelecaoAtivoCount=0,i.dataSourceEvento=[],i.state={dataSourceTipoAgenda:[],arrUsuarios:[],arrUsuariosSelecionados:[],dataSourceAtivos:[],arrGruposUsuariosSelecionados:[],arrGruposAtivosSelecionados:[],arrAtivosSelecionados:[],arrSupervisionados:[],arrSupervisionadosSelecionados:[],filtroHoraInicio:8,filtroHoraFim:19,valorHoraInicio:null,valorHoraFim:null,viewType:"timelineMonth",filtersState:"",intervaloHoras:30,maxAppointmentsPerCell:"auto",filtrosIntervaloHoras:[{tempo:30,nome:"30 minutos"},{tempo:60,nome:"1 hora"},{tempo:120,nome:"2 horas"},{tempo:180,nome:"3 horas"},{tempo:240,nome:"4 horas"}]},i.requestTipoAgenda(),i}return Object(c.a)(a,[{key:"loadFiltrosUsuario",value:function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get_parametro_usuario("filtros_agenda");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFiltrosUsuario();case 2:t=e.sent,this.filtros_agenda_usuario=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,o,i,r,s,c,l,d,u,p,f,m,_,h,v,O,g,w=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFiltrosUsuario();case 2:return t=e.sent,this.filtros_agenda_usuario=t,a=[],o=t.grupos_ativos?t.grupos_ativos:[],i=t.ativos?t.ativos:[],r=t.supervisionados?t.supervisionados:[],s=t.viewType?t.viewType:"timelineMonth",c="undefined"!==typeof t.filtersState?t.filtersState:"",l=t.hora_inicio?t.hora_inicio:8,d=t.hora_fim?t.hora_fim:19,u="undefined"!==typeof t.intervaloHoras?t.intervaloHoras:30,p="undefined"!==typeof t.maxAppointmentsPerCell?t.maxAppointmentsPerCell:"auto",f="undefined"!==typeof t.filtros_intervalo_horas?t.filtros_intervalo_horas:[{tempo:30,nome:"30 minutos"},{tempo:60,nome:"1 hora"},{tempo:120,nome:"2 horas"},{tempo:180,nome:"3 horas"},{tempo:240,nome:"4 horas"}],m=[{usuario_id:j.a.sessao.dados.usuario_id.toString(),nome:j.a.sessao.dados.nome}],_=[j.a.sessao.dados.usuario_id.toString()],(j.a.sessao.dados.admin||j.a.verifica_permissao(j.a.temp.empresa,"agenda_grupo_usuario")||j.a.verifica_permissao(j.a.temp.empresa,"agenda_todas"))&&(a=t.grupos_usuarios?t.grupos_usuarios:[],_=t.usuarios&&t.usuarios.length>0?t.usuarios:[j.a.sessao.dados.usuario_id.toString()]),(h=new Date).setHours(l),h.setMinutes(0),h.setSeconds(0),(v=new Date).setHours(d-1),v.setMinutes(0),v.setSeconds(0),O=h,g=v,this.dataSourceEvento=Object(b.a)(_,null,this),e.t0=this,e.t1=a,e.t2=m,e.t3=_,e.t4=o,e.t5=i,e.next=37,z({modulo:window.MODULOS.AGENDA,usuario_supervisor:j.a.sessao.dados.usuario_id});case 37:e.t6=e.sent,e.t7=r,e.t8=l,e.t9=d,e.t10=O,e.t11=g,e.t12=s,e.t13=c,e.t14=u,e.t15=p,e.t16=f,e.t17={arrGruposUsuariosSelecionados:e.t1,arrUsuarios:e.t2,arrUsuariosSelecionados:e.t3,arrGruposAtivosSelecionados:e.t4,arrAtivosSelecionados:e.t5,arrSupervisionados:e.t6,arrSupervisionadosSelecionados:e.t7,filtroHoraInicio:e.t8,filtroHoraFim:e.t9,valorHoraInicio:e.t10,valorHoraFim:e.t11,viewType:e.t12,filtersState:e.t13,intervaloHoras:e.t14,maxAppointmentsPerCell:e.t15,filtrosIntervaloHoras:e.t16},e.t18=function(){w.requestUsuariosPorGrupo(a),w.requestAtivosPorGrupo(o)},e.t0.setState.call(e.t0,e.t17,e.t18),""===c&&K.current&&K.current.instance.element().addClass("filterOpen");case 52:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getArrUsuario",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{usuario_id:null,nome:null},a=this.state.arrUsuarios.filter((function(t){return+t.usuario_id===+e}));if(1===a.length)return a[0];var o=this.state.arrSupervisionados.filter((function(t){return+t.supervisionado_id===+e}));return 1===o.length?{usuario_id:o[0].supervisionado_id,nome:o[0].supervisionado_nome}:t}},{key:"getArrAtivo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:null,nome:null},a=this.state.dataSourceAtivos.filter((function(t){return+t.id===+e}));return 1===a.length?a[0]:t}},{key:"getArrSupervisionado",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{supervisionado_id:null,supervisionado_nome:null},a=this.state.arrSupervisionados.filter((function(t){return+t.supervisionado_id===+e}));return 1===a.length?a[0]:t}},{key:"getKeySelecaoUsuario",value:function(){return this.keySelecaoUsuarioCount++}},{key:"getKeySelecaoAtivo",value:function(){return this.keySelecaoAtivoCount++}},{key:"handleUsuariosSelecionados",value:function(){for(var e=[],t=this.state.arrUsuariosSelecionados,a=this.state.arrSupervisionadosSelecionados,o=0;o<t.length;o++){var i=t[o];+i!==+j.a.sessao.dados.usuario_id?e.push(+i):e.unshift(+i)}for(var n=function(t){var o=a[t];e.filter((function(e){return+e===+o})).length||e.push(+o)},r=0;r<a.length;r++)n(r);return e}},{key:"calcularIntervaloHoras",value:function(e,t){for(var a=this,i=[],n=[30,60,120,180,240],r=0;r<n.length;r++){var s=n[r];if(0===60*(parseInt(t)-parseInt(e))%s){var c="";if(30==s)c="30 minutos";else c=s/60+" hora(s)";i.push({tempo:s,nome:c})}}var l=this.state.intervaloHoras;i.filter((function(e){return e.tempo==a.state.intervaloHoras})).length||(l=i[0].tempo),this.setState({filtrosIntervaloHoras:i,intervaloHoras:l,filtroHoraInicio:e,filtroHoraFim:t},(function(){j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},a.filtros_agenda_usuario),{},{filtros_intervalo_horas:i,hora_inicio:e,hora_fim:t}))}))}},{key:"render",value:function(){var e=this,t=this.state.arrAtivosSelecionados,a=this.state.arrUsuariosSelecionados,i=this.state.arrSupervisionadosSelecionados,n=[];K=this.schedulerRef;for(var r=0;r<t.length;r++){var s=this.getArrAtivo(t[r]),c=s.id,l=s.nome;n.push({chave:"a_".concat(c),nome:l,ativo_id:c,usuario_id:null,tipo:"ativo"})}for(var d=0;d<a.length;d++){var u=this.getArrUsuario(a[d]),p=u.usuario_id,m=u.nome,x={chave:"u_".concat(p),nome:m,usuario_id:p,ativo_id:null,tipo:"usuario"};+p!==+j.a.sessao.dados.usuario_id?n.push(x):n.unshift(x)}for(var y=function(t){var a=e.getArrSupervisionado(i[t]),o=a.supervisionado_id,r=a.supervisionado_nome;n.filter((function(e){return"usuario"===e.tipo&&+e.usuario_id===+o})).length||n.push({chave:"u_".concat(o),nome:r,usuario_id:o,ativo_id:null,tipo:"usuario"})},A=0;A<i.length;A++)y(A);var R=new Date,I=n.length?Object(f.jsxs)(_.a.Fragment,{children:[Object(f.jsxs)(v.a,{ref:this.schedulerRef,dataSource:Object(b.a)(this.handleUsuariosSelecionados(),this.state.arrAtivosSelecionados,this),cellDuration:this.state.intervaloHoras,maxAppointmentsPerCell:this.state.maxAppointmentsPerCell,appointmentRender:J,appointmentTooltipRender:Q,timeCellTemplate:function(t,a,o){if("month"!==e.state.viewType&&"timelineMonth"!==e.state.viewType&&"agenda"!==e.state.viewType&&"day"!==e.state.viewType&&"workWeek"!==e.state.viewType&&"week"!==e.state.viewType){var i=window.formatDate(t.date).substring(0,5);E()(o).append("<div><strong>".concat(i,"</strong><br /><span>").concat(t.text,"</span></div>"))}else E()(o).append("<small>".concat(t.text,"</small>"))},onAppointmentFormOpening:function(e){if(e.cancel=!0,"undefined"!==typeof e.appointmentData.oportunidade_agenda_id&&+e.appointmentData.oportunidade_agenda_id>0){var t=+e.appointmentData.representante_usuario_id!==+j.a.sessao.dados.usuario_id;O.a.load("oportunidade/atividade",(function(a,o){o.show(e.appointmentData.oportunidade_agenda_id,window.FORMULARIO.EDITAR,null,e.appointmentData.oportunidade_id,null,t),o.onclose=function(){e.component._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(e.component._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),e.component._dataSource.reload()}}))}else e.appointmentData.data_feriado||O.a.load("agenda/agenda_evento",(function(t,a){var o={evento_id:e.appointmentData.agenda_evento_id,usuario_id:e.appointmentData.usuario_id,dia:e.appointmentData.dia,usuario_nome:e.appointmentData.nome_ativo_reservado?e.appointmentData.nome_ativo_reservado:"usuario_nome",agenda_ativo_id:e.appointmentData.agenda_ativo_id,convidado_evento:e.appointmentData.convidado_evento,permissao_manutencao_agenda_ativo:e.appointmentData.permissao_manutencao_agenda_ativo};a.onclose=function(){e.component._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(e.component._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),e.component._dataSource.reload()},a.show(o)}))},onCellClick:function(o){O.a.load("agenda/agenda_evento",(function(n,r){var s={dia:window.formatDate(o.cellData.startDate,!0),hora_inicio:window.formatDateTime(o.cellData.startDate,!0).substr(-5),hora_fim:window.formatDateTime(o.component.option("selectedCellData")[o.component.option("selectedCellData").length-1].endDate,!0).substr(-5)},c=e.getArrUsuario(a.filter((function(e){return!!e&&"u_".concat(e)===o.cellData.groups.evento_usuario_id}))[0],null);c||(c=e.getArrUsuario(i.filter((function(e){return!!e&&"u_".concat(e)===o.cellData.groups.evento_usuario_id}))[0],null));var l=e.getArrAtivo(t.filter((function(e){return!!e&&"a_".concat(e)===o.cellData.groups.evento_usuario_id}))[0],null),d={evento_id:null,dia:s,usuario_id:null,agenda_ativo_id:null};c?(d.usuario_id=c.usuario_id,d.usuario_nome=c.nome):l&&(d.agenda_ativo_id=l.id,d.usuario_nome=l.nome),d.permissao_manutencao_agenda_ativo=l&&l.permissao_manutencao_agenda_ativo,r.onclose=function(){o.component._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(o.component._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),o.component._dataSource.reload()},r.show(d)}))},onAppointmentContextMenu:function(e){(H=e.appointmentData).data_feriado&&e.event.stopPropagation()},onCellContextMenu:function(e){var t=e.cellData;W=t},groups:["evento_usuario_id"],editing:!1,showAllDayPanel:!1,defaultCurrentDate:R,remoteFiltering:!0,crossScrollingEnabled:!0,onOptionChanged:function(t){"currentView"===t.name&&(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{viewType:t.value})),e.setState({viewType:t.value}))},currentView:this.state.viewType,onContentReady:function(t){setTimeout((function(){t.component.scrollTo(R),t.component._dimensionChanged()}),150);K&&K.current&&["timelineDay","timelineWorkWeek","timelineWeek","timelineMonth","month"].includes(e.state.viewType)&&(E()(K.current._element).find(".dx-scheduler-date-table-scrollable-content").height()<=E()(K.current._element).find(".dx-scheduler-date-table-scrollable-content").closest(".dx-scrollable-container").height()&&E()(K.current._element).find(".dx-scheduler-cell-sizes-vertical").attr("style","height: auto !important"),E()(K.current._element).find(".dx-scheduler-group-header-content").css("word-break","break-word"))},children:[Object(f.jsx)(h.Resource,{dataSource:this.state.dataSourceTipoAgenda,fieldExpr:"agenda_tipo_id",valueExpr:"tipo_agenda_id",colorExpr:"cor",useColorAsDefault:!0}),Object(f.jsx)(h.Resource,{dataSource:n,displayExpr:"nome",fieldExpr:"evento_usuario_id",valueExpr:"chave"}),Object(f.jsx)(h.View,{type:"day",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(f.jsx)(h.View,{type:"workWeek",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(f.jsx)(h.View,{type:"week",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(f.jsx)(h.View,{type:"month"}),Object(f.jsx)(h.View,{type:"timelineDay",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(f.jsx)(h.View,{type:"timelineWorkWeek",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(f.jsx)(h.View,{type:"timelineWeek",startDayHour:this.state.filtroHoraInicio,endDayHour:this.state.filtroHoraFim}),Object(f.jsx)(h.View,{type:"timelineMonth"})]}),Object(f.jsx)(N.a,{dataSource:[{name:"novo_evento",icon:"fas fa-plus",text:"Novo evento",onItemClick:function(o){K.current&&K.current.instance&&O.a.load("agenda/agenda_evento",(function(n,r){var s={dia:window.formatDate(o.startDate,!0),hora_inicio:window.formatDateTime(o.startDate,!0).substr(-5),hora_fim:window.formatDateTime(o.endDate,!0).substr(-5)},c=e.getArrUsuario(a.filter((function(e){return!!e&&"u_".concat(e)===o.evento_usuario_id}))[0],null);c||(c=e.getArrUsuario(i.filter((function(e){return!!e&&"u_".concat(e)===o.evento_usuario_id}))[0],null));var l=e.getArrAtivo(t.filter((function(e){return!!e&&"a_".concat(e)===o.evento_usuario_id}))[0],null),d={evento_id:null,dia:s,usuario_id:null,agenda_ativo_id:null};c?(d.usuario_id=c.usuario_id,d.usuario_nome=c.nome):l&&(d.agenda_ativo_id=l.id,d.usuario_nome=l.nome),d.permissao_manutencao_agenda_ativo=l&&l.permissao_manutencao_agenda_ativo,r.onclose=function(){K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),K.current.instance._dataSource.reload()},r.show(d)}))}},{name:"marcar_realizado",icon:"check",text:"Marcar como realizado",onItemClick:function(e){"S"===e.realizado?window.alert_info("O evento j\xe1 est\xe1 marcado como realizado"):Object(F.confirm)("Deseja marcar esse evento como realizado?","Aten\xe7\xe3o").then((function(t){t&&g.a.post("agenda_evento/alterar_agenda_realizado/",{agenda_evento_id:e.agenda_evento_id},(function(e){window.alert_saved("Evento realizado com sucesso"),K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),K.current.instance._dataSource.reload()}))}))}},{name:"copiar_evento",icon:"copy",text:"Copiar evento",onItemClick:function(e){g.a.get("agenda_evento/objeto/",{agenda_evento_id:e.agenda_evento_id},(function(e){q={agenda_evento_id:e.id,agenda_evento_origem:e.id,usuario_id:e.usuario_id,dia:e.dia,hora_inicio:e.hora_inicio,hora_fim:e.hora_fim,agenda_tipo_id:e.agenda_tipo_id,agenda_local_id:e.agenda_local_id,cliente_id:e.cliente_id,projeto_id:e.projeto_id,projeto_atividade_id:e.projeto_atividade_id,descricao:e.descricao,descricao_detalhada:e.descricao_detalhada,prospect_id:e.prospect_id,empresa_id:e.empresa_id,fornecedor_id:e.fornecedor_id,agenda_ativo_id:e.agenda_ativo_id,evento_pessoal:e.evento_pessoal,arr_convidados:e.arr_convidados},window.alert_info("Evento copiado")}))}},{name:"visualizar_atividade",icon:"bulletlist",text:"Visualizar atividade de projeto",onItemClick:function(e){O.a.load("atividade_projeto/detalhes",(function(t,a){a.show(e.projeto_id,e.projeto_atividade_id,window.FORMULARIO.EDITAR,null,null,e.atividade_projeto_nome)}),O.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:e.projeto_atividade_id})}},{name:"realizar_apontamento",icon:"clock",text:"Realizar apontamento",onItemClick:function(e){O.a.load("apontamento_projeto/detalhes",(function(t,a){a.show(null,window.FORMULARIO.NOVO,e.dia,e.projeto_id,e.cliente_id,e.cliente_nome,e.projeto_atividade_id,e.projeto_nome,e.startDate,e.endDate)}),O.a.ABA.MULTIPLAS)}},{name:"editar_oportunidade",icon:"bulletlist",text:"Editar Oportunidade",onItemClick:function(t){if(0==parseInt(t.oportunidade_id))return!1;O.a.load("oportunidade/detalhes",(function(a,o){o.onclose=function(){e.setState({})},o.show(t.oportunidade_id,window.FORMULARIO.EDITAR)}),O.a.ABA.MULTIPLAS,null,null,{oportunidadeId:t.oportunidade_id})}}],width:200,target:".dx-scheduler-appointment",onItemClick:function(e){e.itemData.onItemClick(H)},onShowing:function(e){for(var t=e.component.option("dataSource"),a=0;a<t.length;a++){var o=t[a];t[a].visible="CRM"!==H.agenda_tipo_id,"visualizar_atividade"!==o.name&&"realizar_apontamento"!==o.name||!H.cliente_id>0&&(t[a].visible=!1),"editar_oportunidade"===o.name&&(t[a].visible="CRM"==H.agenda_tipo_id&&"undefined"!==typeof H.oportunidade_id&&H.oportunidade_id>0)}e.component.option("dataSource",t)}}),Object(f.jsx)(N.a,{dataSource:[{icon:"fas fa-plus",text:"Novo evento",onItemClick:function(o){K.current&&K.current.instance&&O.a.load("agenda/agenda_evento",(function(n,r){var s={dia:window.formatDate(o.startDate,!0),hora_inicio:window.formatDateTime(o.startDate,!0).substr(-5),hora_fim:window.formatDateTime(o.endDate,!0).substr(-5)},c=e.getArrUsuario(a.filter((function(e){return!!e&&"u_".concat(e)===o.groups.evento_usuario_id}))[0],null);c||(c=e.getArrUsuario(i.filter((function(e){return!!e&&"u_".concat(e)===o.groups.evento_usuario_id}))[0],null));var l=e.getArrAtivo(t.filter((function(e){return!!e&&"a_".concat(e)===o.groups.evento_usuario_id}))[0],null),d={evento_id:null,dia:s,usuario_id:null,agenda_ativo_id:null};c?(d.usuario_id=c.usuario_id,d.usuario_nome=c.nome):l&&(d.agenda_ativo_id=l.id,d.usuario_nome=l.nome),d.permissao_manutencao_agenda_ativo=l&&l.permissao_manutencao_agenda_ativo,r.onclose=function(){K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),K.current.instance._dataSource.reload()},r.show(d)}))}},{text:"Colar evento",icon:"paste",onItemClick:function(e){if(q){var t=null,a=null,o="",i="",n=e.groups.evento_usuario_id.split("_"),r=n[0];"u"===r?t=n[1]:"a"===r&&(a=n[1]);var s=new Date(e.startDate),c=s.getDate().toString().padStart(2,"0"),l=(s.getMonth()+1).toString().padStart(2,"0"),d=s.getFullYear().toString()+"-"+l+"-"+c;if(parseInt(q.usuario_id)>0?o="usuario":parseInt(q.agenda_ativo_id)>0&&(o="ativo"),parseInt(t)>0?i="usuario":parseInt(a)>0&&(i="ativo"),o!==i)return void Object(F.alert)("N\xe3o \xe9 poss\xedvel copiar eventos de usu\xe1rios em ativos e vice-versa","Aviso");g.a.post("agenda_evento/salvar/",{agenda_evento_id:null,usuario_id:t,agenda_ativo_id:a,dia:d,hora_inicio:q.hora_inicio,hora_fim:q.hora_fim,agenda_tipo_id:q.agenda_tipo_id,agenda_local_id:q.agenda_local_id,cliente_id:q.cliente_id,projeto_id:q.projeto_id,projeto_atividade_id:q.projeto_atividade_id,descricao:q.descricao,descricao_detalhada:q.descricao_detalhada,prospect_id:q.prospect_id,empresa_id:q.empresa_id,fornecedor_id:q.fornecedor_id,agenda_evento_origem:q.agenda_evento_origem,evento_pessoal:q.evento_pessoal,arr_convidados:JSON.stringify(q.arr_convidados)},(function(e){K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),K.current.instance._dataSource.reload()}))}else window.alert_info("Nenhum evento copiado")}}],width:200,target:".dx-scheduler-date-table-cell",onItemClick:function(e){e.itemData.onItemClick(W)}})]}):null,P="border-radius: 5px; margin-right: 5px;";return this.state.dataSourceTipoAgenda.length?Object(f.jsxs)(_.a.Fragment,{children:[Object(f.jsx)("div",{style:{marginTop:5,marginBottom:5},children:Object(f.jsx)(k.ButtonGroup,{stylingMode:"contained",hoverStateEnabled:!1,selectionMode:"none",items:[{icon:"fas fa-plus",hint:"Novo evento",text:"Novo evento",elementAttr:{style:P},onItemClick:function(){K.current&&K.current.instance&&O.a.load("agenda/agenda_evento",(function(e,t){var a={evento_id:null,dia:{dia:window.formatDate(new Date,!0),hora_inicio:null,hora_fim:null},usuario_id:j.a.sessao.dados.usuario_id,usuario_nome:j.a.sessao.dados.nome};t.onclose=function(){K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].setDate(K.current.instance._dataSource._storeLoadOptions.filter[0][0][1][2].getDate()+1),K.current.instance._dataSource.reload()},t.show(a)}))}},{text:"Filtros",icon:"fas fa-filter",hint:"Exibir/esconder filtros",elementAttr:{style:P},onItemClick:function(){var t=K.current.instance.element();"hidden"===e.state.filtersState?(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.state.filtros_agenda_usuario),{},{filtersState:""})),e.setState({filtersState:""}),t.addClass("filterOpen")):(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.state.filtros_agenda_usuario),{},{filtersState:"hidden"})),e.setState({filtersState:"hidden"}),t.removeClass("filterOpen"))}},{icon:"fas fa-sync",hint:"Recarregar",elementAttr:{style:P},onItemClick:function(){K.current&&K.current.instance&&e.setState({})}},{icon:"fas fa-link",hint:"Gerar link ICS",elementAttr:{style:P},onItemClick:function(){O.a.load("agenda/ics_url_info",(function(e,t){t.show(j.a.sessao.dados.usuario_id)}))}},{icon:"fas fa-envelope",hint:"Enviar agenda por e-mail",elementAttr:{style:P},onItemClick:function(){O.a.load("agenda/email_cliente",(function(e,t){t.show()}))}}],onItemClick:function(e){"function"===typeof e.itemData.onItemClick&&e.itemData.onItemClick()}})}),Object(f.jsxs)("div",{className:this.state.filtersState,children:[Object(f.jsxs)("div",{className:"col-md-12 col-lg-6",style:{padding:"0px"},children:[Object(f.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(f.jsx)(D,{value:this.state.valorHoraInicio,label:"In\xedcio",labelMode:"floating",height:49,placeholder:"hh:mm",hoursOnly:!0,elementAttr:{class:"dx-theme-background-color"},onValueChanged:function(t){var a=new Date(t.value).time_now();a=Number(a.substring(0,2)),e.calcularIntervaloHoras(a,e.state.filtroHoraFim)}},"hora_inicio")}),Object(f.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(f.jsx)(D,{value:this.state.valorHoraFim,label:"Fim",labelMode:"floating",height:49,placeholder:"hh:mm",hoursOnly:!0,elementAttr:{class:"dx-theme-background-color"},onValueChanged:function(t){var a=new Date(t.value).time_now();a=Number(a.substring(0,2)),a+=1,e.calcularIntervaloHoras(e.state.filtroHoraInicio,a)}},"hora_fim")}),Object(f.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(f.jsx)(U.a,{dataSource:this.state.filtrosIntervaloHoras,displayExpr:"nome",valueExpr:"tempo",value:this.state.intervaloHoras,elementAttr:{class:"dx-theme-background-color"},placeholder:"Intervalo de horas",label:"Intervalos de",labelMode:"floating",height:49,onValueChanged:function(t){window.isEquivalent(e.state.intervaloHoras,t.value)||(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{intervaloHoras:t.value})),e.setState({intervaloHoras:t.value}))}})}),Object(f.jsx)("div",{className:"col-md-2",style:{padding:"1px"},children:Object(f.jsxs)("div",{className:"dx-editor-filled dx-tagbox dx-textbox dx-texteditor dx-texteditor-with-floating-label dx-theme-background-color dx-widget",style:{maxHeight:"49px",minWidth:"auto"},children:[Object(f.jsx)(G.Switch,{style:{margin:"20px 10px"},value:"unlimited"===this.state.maxAppointmentsPerCell,onValueChanged:function(t){j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{maxAppointmentsPerCell:t.value?"unlimited":"auto"})),e.setState({maxAppointmentsPerCell:t.value?"unlimited":"auto"})}}),Object(f.jsxs)("div",{className:"dx-texteditor-label",id:"dx-texteditor-label-e6b49a90-6b2e-572d-6742-de78e41a586e",children:[Object(f.jsx)("div",{className:"dx-label-before",style:{width:"0px"}}),Object(f.jsx)("div",{className:"dx-label",style:{maxWidth:"261px"},children:Object(f.jsx)("span",{"data-mark":!0,children:"Exibir tudo"})})]})]})}),(j.a.verifica_permissao(j.a.temp.empresa,"agenda_grupo_usuario")||j.a.verifica_permissao(j.a.temp.empresa,"agenda_todas")||j.a.sessao.dados.admin)&&Object(f.jsx)("div",{className:"col-md-4",style:{padding:"1px"},children:Object(f.jsx)(w.default,{label:"Filtro por grupos de usu\xe1rios",labelMode:"floating",selecionado:this.state.arrGruposUsuariosSelecionados,elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},aoAlterar:function(t){window.isEquivalent(e.state.arrGruposUsuariosSelecionados,t)||e.requestUsuariosPorGrupo(t)},maxDisplayedTags:1,modulo:window.MODULOS.AGENDA})})]}),Object(f.jsxs)("div",{className:"col-md-12 col-lg-6",style:{padding:"0px"},children:[Object(f.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(f.jsx)(V.a,{label:"Filtro por usu\xe1rios",labelMode:"floating",elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},items:this.state.arrUsuarios,value:this.state.arrUsuariosSelecionados,valueExpr:"usuario_id",displayExpr:"nome",showSelectionControls:!0,applyValueMode:"useButtons",maxDisplayedTags:1,noDataText:"Selecione os usu\xe1rios",onValueChanged:function(t){window.isEquivalent(e.state.arrUsuariosSelecionados,t.value)||(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{usuarios:t.value})),e.setState({arrUsuariosSelecionados:t.value}))}},"selecaoUsuarios")}),Object(f.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(f.jsx)(C,{label:"Filtro por grupos de ativos",labelMode:"floating",placeholder:"Selecione ...",selecionado:this.state.arrGruposAtivosSelecionados,elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},aoAlterar:function(t){j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{grupos_ativos:t})),e.requestAtivosPorGrupo(t)},maxDisplayedTags:1})}),Object(f.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(f.jsx)(S.default,{label:"Filtro por ativos",labelMode:"floating",placeholder:"Selecione ...",selecionado:this.state.arrAtivosSelecionados,items:this.state.dataSourceAtivos,elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},aoAlterar:function(t){window.isEquivalent(e.state.arrAtivosSelecionados,t)||(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{ativos:t})),e.setState({arrAtivosSelecionados:t}))},maxDisplayedTags:1,noDataText:"Selecione os grupos de ativos"},this.keySelecaoAtivoCount)}),Object(f.jsx)("div",{className:"col-md-3",style:{padding:"1px"},children:Object(f.jsx)(V.a,{label:"Filtro por supervisionados",labelMode:"floating",elementAttr:{class:"dx-theme-background-color",style:"max-height: 50px; min-width: auto;"},items:this.state.arrSupervisionados,value:this.state.arrSupervisionadosSelecionados,valueExpr:"supervisionado_id",displayExpr:"supervisionado_nome",showSelectionControls:!0,applyValueMode:"useButtons",maxDisplayedTags:1,onValueChanged:function(t){window.isEquivalent(e.state.arrSupervisionadosSelecionados,t.value)||(j.a.set_parametro_usuario("filtros_agenda",Object(o.a)(Object(o.a)({},e.filtros_agenda_usuario),{},{supervisionados:t.value})),e.setState({arrSupervisionadosSelecionados:t.value}))}},"selecaoSupervisionados")})]})]}),Object(f.jsx)("div",{style:{marginTop:5},children:I})]}):null}},{key:"Scheduler",get:function(){return this.schedulerRef.current?this.schedulerRef.current.instance:null}}]),a}(_.a.Component);Y.defaultProps={abaTitulo:"Agenda"};t.default=Y},1218:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return H}));var o=a(372),i=a(422),n=a.n(i),r=a(425),s=a(365),c=a(366),l=a(385),d=a(368),u=a(369),p=a(367),f=a(376),m=a.n(f),_=a(530),h=a.n(_),v=a(380),b=a(398),j=a(389),O=Object.freeze({agendaEvento:1,tarefaCartao:2,chamado:3,documentoAprovacaoAlcada:4,documentoDistribuicaoControlada:5,processoSolicitacaoAtividade:6,projetoAtividade:7,pdcaAtividade:9,crmOportunidade:10,crmOportunidadeOrcamento:11,crmOportunidadeAgenda:12}),g=[{id:O.agendaEvento,descricao:"Agenda Evento"},{id:O.tarefaCartao,descricao:"Tarefa Cart\xe3o"},{id:O.chamado,descricao:"Chamado"},{id:O.documentoAprovacaoAlcada,descricao:"Documento Aprova\xe7\xe3o"},{id:O.documentoDistribuicaoControlada,descricao:"Documento Distribui\xe7\xe3o"},{id:O.processoSolicitacaoAtividade,descricao:"Atividade de Processo"},{id:O.projetoAtividade,descricao:"Atividade de Projeto"},{id:O.pdcaAtividade,descricao:"Atividade de PDCA"},{id:O.crmOportunidade,descricao:"Oportunidade"},{id:O.crmOportunidadeOrcamento,descricao:"Oportunidade Or\xe7amento"},{id:O.crmOportunidadeAgenda,descricao:"Oportunidade Agenda"}],w=Object.freeze({noPrazo:"P",atrasado:"AT"}),x=[{id:w.noPrazo,descricao:"No prazo"},{id:w.atrasado,descricao:"Atrasado"}],y=function(){var e=Object(r.a)(n.a.mark((function e(){var t,a,o=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS,e.next=3,j.a.get("central_pendencias/listar_modulos/",{tipo_listagem:t},null,null,null,null,null,null,null,!0);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS;return new b.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"central_pendencias_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){j.a.get({route:"central_pendencias/listar/",data:Object(v.a)(Object(v.a)({},a),{},{tipo_listagem:e}),func_response:function(e){var a=window.createLoadExtra(e);t(Object(v.a)(Object(v.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){j.a.get({route:"central_pendencias/listar/",data:{central_pendencias_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:function(e){},update:function(e,t){},remove:function(e){}})},C=a(391),S=a(401),R=a(510),I=a(549),P=a(860),E=a(63),T=a.n(E),D=a(680),k=(a(413),a(854)),M=a(388),N=a(578),F=a(855),L=a(449),U=a(105),B=a(408);var V=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var o,i,n;Object(s.a)(this,a),(n=t.call(this,e)).state={filtroModulo:null!==(o=n.props.filtroModulo)&&void 0!==o?o:null,filtroEntidade:null!==(i=n.props.filtroEntidade)&&void 0!==i?i:null},n.onToolbarPreparing=n.onToolbarPreparing.bind(Object(l.a)(n)),n.handleRowClick=n.handleRowClick.bind(Object(l.a)(n)),n.stateStoring=n.stateStoring.bind(Object(l.a)(n)),n.handleAcessarRegistro=n.handleAcessarRegistro.bind(Object(l.a)(n));var r=[U.a.sessao.dados.supervisor_agenda,U.a.sessao.dados.supervisor_atendimento_relacionamento,U.a.sessao.dados.supervisor_chamado,U.a.sessao.dados.supervisor_documento,U.a.sessao.dados.supervisor_empenho,U.a.sessao.dados.supervisor_inovacao,U.a.sessao.dados.supervisor_processo,U.a.sessao.dados.supervisor_processo_grupo_usuario,U.a.sessao.dados.supervisor_processo_usuario,U.a.sessao.dados.supervisor_projeto,U.a.sessao.dados.supervisor_rede_social];return n.dataGridRef=m.a.createRef(),n.keyCount=0,n.gridStateStoring=n.stateStoring(),n.isSupervisor=r.filter((function(e){return"S"===e})),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(this.dataGridRef&&this.dataGridRef.current){var e=this.dataGridRef.current._instance;switch(this.state.filtroEntidade?e.option("filterValue",[[["entidade_codigo","=",this.state.filtroEntidade.codigo],"and",["entidade_tipo","=",this.state.filtroEntidade.tipo]]]):e.option("stateStoring",this.gridStateStoring),+this.state.filtroModulo){case N.a.agenda:e.option("filterValue",["tipo","=",O.agendaEvento]);break;case N.a.tarefas:e.option("filterValue",["tipo","=",O.tarefaCartao]);break;case N.a.chamado:e.option("filterValue",["tipo","=",O.chamado]);break;case N.a.documento:e.option("filterValue",[[["tipo","=",O.documentoAprovacaoAlcada],"or",["tipo","=",O.documentoDistribuicaoControlada]]]);break;case N.a.processo:e.option("filterValue",["tipo","=",O.processoSolicitacaoAtividade]);break;case N.a.projeto:e.option("filterValue",["tipo","=",O.projetoAtividade]);break;case N.a.pdca:e.option("filterValue",["tipo","=",O.pdcaAtividade]);break;case N.a.crm:e.option("filterValue",[[["tipo","=",O.crmOportunidade],"or",["tipo","=",O.crmOportunidadeAgenda],"or",["tipo","=",O.crmOportunidadeOrcamento]]])}}}},{key:"render",value:function(){var e=this,t=[].concat(Object(C.a)([Object(o.jsx)(R.a,{dataField:"modulo_id",caption:"M\xf3dulo",width:200,groupIndex:0,children:Object(o.jsx)(M.Lookup,{dataSource:N.b,displayExpr:"descricao",valueExpr:"id"})},"modulo_id"),Object(o.jsx)(R.a,{dataField:"tipo",caption:"Tipo",width:200,children:Object(o.jsx)(M.Lookup,{dataSource:g,displayExpr:"descricao",valueExpr:"id"})},"tipo"),Object(o.jsx)(k.a,{dataField:"entidade_tipo",caption:"Entidade Tipo"},"entidade_tipo"),Object(o.jsx)(D.a,{dataField:"entidade_codigo",caption:"Entidade C\xf3digo"},"entidade_codigo"),Object(o.jsx)(F.a,{dataField:"entidade_nome",caption:"Entidade Nome"},"entidade_nome"),Object(o.jsx)(R.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:200},"descricao"),Object(o.jsx)(I.default,{dataField:"usuario_responsavel_nome",caption:"Respons\xe1vel",dataFieldUsuarioId:"usuario_responsavel_id",width:200},"usuario_responsavel_nome"),Object(o.jsx)(R.a,{dataField:"grupo_responsavel_nome",caption:"Grupo Respons\xe1vel",width:200},"grupo_responsavel_nome"),Object(o.jsx)(P.a,{dataField:"prazo",caption:"Prazo",sortIndex:0,sortOrder:"asc",width:200},"prazo"),Object(o.jsx)(P.a,{dataField:"data_inicio",caption:"Data In\xedcio",sortIndex:0,sortOrder:"asc",width:200},"data_inicio"),Object(o.jsx)(R.a,{dataField:"situacao",caption:"Situa\xe7\xe3o",width:200,cellTemplate:function(e,t){var a="",o="";switch(t.data.situacao){case w.atrasado:a="label-danger",o="Atrasado";break;case w.noPrazo:default:a="label-info",o="No prazo"}e.css({textAlign:"center"}).addClass("bg-"+a),T()("<span>").text(o).css({color:"#FFF"}).appendTo(e)},children:Object(o.jsx)(M.Lookup,{dataSource:x,displayExpr:"descricao",valueExpr:"id"},"centralPendenciasSituacao")},"situacao")]),[Object(o.jsx)(M.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:Object(o.jsx)(L.a,{icon:"fa fa-external-link-square-alt",onClick:function(t){return e.handleAcessarRegistro(t,t.row.data)}})},"buttons")]);return Object(o.jsx)("div",{children:Object(o.jsx)(S.default,{ref:this.dataGridRef,style:{height:"calc(100vh - 230px)"},dataSource:A(this.props.tipoListagem),onToolbarPreparing:this.onToolbarPreparing,onRowClick:this.handleRowClick,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},width:"100%",children:t},this.getKey())})}},{key:"getKey",value:function(){return this.keyCount++}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){t.props.listPendencias(t.props.tipoListagem)}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"user",hint:"Minhas Pend\xeancias",text:"Minhas Pend\xeancias",onClick:function(){return t.props.listPendencias(window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS)},onInitialized:function(e){t.props.tipoListagem===window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnMinhasPendencias",locateInMenu:"auto"},{widget:"dxButton",visible:this.isSupervisor.length>0,options:{icon:"group",hint:"Pend\xeancias de Supervisionados",text:"Pend\xeancias de Supervisionados",onClick:function(){return t.props.listPendencias(window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_SUPERVISIONADOS)},onInitialized:function(e){t.props.tipoListagem===window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_SUPERVISIONADOS&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnPendenciasSupervisionados",locateInMenu:"auto"},{widget:"dxButton",visible:U.a.verifica_permissao(U.a.sessao.dados.empresa_filial_id,"admin_central_pendencias"),options:{icon:"fas fa-users",hint:"Todas Pend\xeancias",text:"Todas Pend\xeancias",onClick:function(){return t.props.listPendencias(window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_TODOS)},onInitialized:function(e){t.props.tipoListagem===window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.PENDENCIAS_TODOS&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnMinhasPendencias",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}},{key:"stateStoring",value:function(){return{enabled:!0,type:"custom",customLoad:function(){return U.a.get_parametro_usuario("central_pendencias_grid").datagrid},customSave:function(e){U.a.set_parametro_usuario("central_pendencias_grid",{datagrid:e})}}}},{key:"handleRowClick",value:function(e){var t=this;window.onDoubleClick(e,(function(){return t.handleAcessarRegistro(e,e.data)}))}},{key:"handleAcessarRegistro",value:function(e,t){var a,o,i=this,n=function(){i.props.listPendencias(i.props.tipoListagem)};switch(+t.tipo){case O.agendaEvento:B.a.load("agenda/agenda_evento",(function(e,a){a.onsave=n,a.show({evento_id:t.agenda_evento_id})}));break;case O.tarefaCartao:B.a.load("tarefa/detalhes_cartao",(function(e,a){a.onclose=n,a.show(t.tarefa_quadro_lista_cartao_id)}),B.a.ABA.SIM,null,null,{cartaoId:t.tarefa_quadro_lista_cartao_id});break;case O.chamado:B.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:t.chamado_id,onClose:n},(function(e,t){}),B.a.ABA.MULTIPLAS);break;case O.documentoAprovacaoAlcada:case O.documentoDistribuicaoControlada:B.a.load("central_documentos/documento",(function(e,a){a.onclose=n,a.show(t.documento_id,window.FORMULARIO.EDITAR)}),B.a.ABA.SIM);break;case O.processoSolicitacaoAtividade:B.a.load("solicitacao/detalhes",(function(e,a){a.show(t.solicitacao_atividade_id,window.FORMULARIO.EDITAR)}),B.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:t.solicitacao_atividade_id});break;case O.projetoAtividade:var r=null;a=t.projeto_id,o=function(){B.a.load("atividade_projeto/detalhes",(function(e,a){a.show(t.projeto_id,t.projeto_atividade_id,window.FORMULARIO.EDITAR,t.projeto_template,r,t.descricao.substr(0,10))}),B.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:t.projeto_atividade_id})},j.a.get("projeto/objeto/",{projeto_id:a},(function(e){r=null===e.equipe_toda||0===e.equipe_toda.length?e.equipe:window.object_to_array(e.equipe_toda),"undefined"!==typeof o&&o()}));break;case O.pdcaAtividade:B.a.load("pdca/atividades",(function(e,a){var o={pdca_id:t.pdca_id,numero:t.pdca_numero,objetivo:t.pdca_objetivo,data_inicio:t.pdca_data_inicio,data_fim:t.pdca_data_fim,progresso:t.pdca_progresso,situacao:t.pdca_situacao,situacao_id:t.pdca_situacao_id,dados_atividade:{pdca_atividade_id:t.pdca_atividade_id}};a.show(o,!0)}),B.a.ABA.MULTIPLAS,null,null,{pdcaId:t.pdca_id});break;case O.crmOportunidade:B.a.load("oportunidade/detalhes",(function(e,a){a.onclose=n,a.show(t.oportunidade_id,window.FORMULARIO.EDITAR)}),B.a.ABA.MULTIPLAS,null,null,{oportunidadeId:t.oportunidade_id});break;case O.crmOportunidadeAgenda:B.a.load("oportunidade/atividade",(function(e,a){var o=t.usuario_responsavel_id!==U.a.sessao.dados.usuario_id;a.onclose=n,a.show(t.oportunidade_agenda_id,window.FORMULARIO.EDITAR,null,t.oportunidade_id,null,o)}));break;case O.crmOportunidadeOrcamento:j.a.get("oportunidade_orcamento/objeto/",{oportunidade_orcamento_id:t.oportunidade_orcamento_id},(function(e){B.a.load("orcamento/detalhes",(function(a,o){o.onclose=n,o.show(window.FORMULARIO.VISUALIZAR,t.oportunidade_orcamento_id,e)}),B.a.ABA.MULTIPLAS)}))}}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(m.a.Component),z=a(930),G=a(864);var H=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var o,i;Object(s.a)(this,a),(i=t.call(this,e)).listPendencias=function(){var e=Object(r.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:a=e.sent,i.setState({countModulos:a.count_pendencias,chartModulos:a.chart_pendencias,tipoListagem:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.handleCardClick=i.handleCardClick.bind(Object(l.a)(i)),i.listPendencias=i.listPendencias.bind(Object(l.a)(i));var c=window.CENTRAL_PENDENCIAS_TIPO_LISTAGEM.MINHAS_PENDENCIAS;return i.keyCount=0,i.parametrosUsuario=U.a.get_parametro_usuario("central_pendencias_grid"),i.parametrosUsuario&&"undefined"!==typeof i.parametrosUsuario.tipoListagem&&null!==i.parametrosUsuario.tipoListagem&&(c=i.parametrosUsuario.tipoListagem),i.state={dataSource:[],countModulos:{},chartModulos:[],filtroModulo:null,filtroEntidade:null!==(o=i.props.filtroEntidade)&&void 0!==o?o:null,tipoListagem:c},i.listPendencias(c),i}return Object(c.a)(a,[{key:"render",value:function(){return Object(o.jsxs)(m.a.Fragment,{children:[Object(o.jsx)(z.default,{data:JSON.stringify(this.state.countModulos),isCentralPendencias:!0,fnHandleCardClick:this.handleCardClick}),Object(o.jsxs)(h.a,{swipeEnabled:!1,children:[Object(o.jsx)(_.Item,{title:"Lista",icon:"bulletlist",children:Object(o.jsx)(V,{tipoListagem:this.state.tipoListagem,listPendencias:this.listPendencias,filtroModulo:this.state.filtroModulo,filtroEntidade:this.state.filtroEntidade},"listarPendencias")}),Object(o.jsx)(_.Item,{title:"Gr\xe1ficos",icon:"chart",children:Object(o.jsx)(G.a,{customHeightCalcContainer:"230px",customHeightCalcCharts:"280px",dataSource:this.state.chartModulos,argumentField:"modulo",series:[{valueField:"atrasado",name:"Atrasado",color:"#b80000"},{valueField:"noPrazo",name:"No Prazo",color:"#699"}],seriesPie:[{argumentField:"desc_situacao",valueField:"qtd_situacao",name:"Situa\xe7\xe3o"}],customizePoint:function(e){var t=null;return"atrasado"===e.data.situacao?t="#b80000":"noPrazo"===e.data.situacao&&(t="#699"),{color:t}},chartTypes:["bar","pie","donut"]})})]},this.getKey())]})}},{key:"getKey",value:function(){return this.keyCount++}},{key:"handleCardClick",value:function(e,t){this.setState({filtroModulo:e})}}]),a}(m.a.Component);H.defaultProps={abaTitulo:"Central de Pend\xeancias"}},1219:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(530),f=a.n(p),m=a(401),_=a(391),h=a(422),v=a.n(h),b=a(425),j=a(529),O=a.n(j),g=a(389),w=a(105),x=a(861),y=a(483),A=a(623);function C(e){var t=e.card,a=e.main;switch(parseInt(t.situacao_id)){case window.PDCA_SITUACAO.NAO_INICIADO:t.label="danger";break;case window.PDCA_SITUACAO.EM_ANDAMENTO:t.label="info";break;case window.PDCA_SITUACAO.CONCLUIDO:t.label="success";break;default:t.label=""}return Object(o.jsxs)("div",{className:"card dx-card dx-theme-text-color dx-theme-background-color",children:[Object(o.jsx)("div",{className:"card-label card-label-".concat(t.label)}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:["ID: ",t.pdca_id]}),Object(o.jsx)("div",{className:"col-md-8 card-subject",children:t.numero})]}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",style:{paddingRight:"5px"},children:t.objetivo})}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"In\xedcio"}),Object(o.jsxs)("div",{className:"col-md-8",children:[Object(o.jsx)("i",{className:"fas fa-calendar-day"})," ",window.formatar_data_humano(t.data_inicio)]})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"Fim"}),Object(o.jsxs)("div",{className:"col-md-8",children:[Object(o.jsx)("i",{className:"fas fa-calendar-day"})," ",window.formatar_data_humano(t.data_fim)]})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"Progresso"}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsx)(x.ProgressBar,{min:0,max:100,value:parseInt(t.progresso),onContentReady:function(e){e.component.element().find(".dx-progressbar-container").css("height","10px")}})})]}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-4",style:{paddingRight:"0px"},children:"Bot\xf5es"}),Object(o.jsx)("div",{className:"col-md-8",style:{paddingRight:"0px"},children:A.a.buttons.map((function(e){var i={row:{data:t},component:{refresh:function(){a.requestLists(a.props.arrColumns)}}};return Object(o.jsx)(y.Button,{icon:e.icon,hint:e.hint,onClick:function(){e.onClick(i)},visible:!e.visible||e.visible(i)},window.md5(Math.random()+new Date))}))})]})]})}var S=a(862),R=a(1128),I=a.n(R);var P=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;Object(i.a)(this,a),(o=t.call(this,e)).requestLists=function(){var e=Object(b.a)(v.a.mark((function e(t){var a,o,i,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],o=0;case 2:if(!(o<t.length)){e.next=12;break}return i=t[o],e.next=6,this.requestList(i.id);case 6:n=e.sent,this.props.arrColumns[o].skip=0,a.push(n);case 9:o++,e.next=2;break;case 12:this.setState({lists:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.requestList=function(){var e=Object(b.a)(v.a.mark((function e(t,a){var o,i,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[this.props.columnFilterKey,"=",t],i=this.state.filterValue?[o,"and",this.state.filterValue]:o,e.next=4,g.a.get(this.props.route,{dx_grid:!0,skip:a||0,take:this.props.take,requireTotalCount:!0,filter:JSON.stringify(i)},null,null,null,null,null,null,null,!0);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),o.keyCount=0,o.getKey=o.getKey.bind(Object(r.a)(o));var n=o.props.arrColumns;return o.state={arrColumns:n,lists:[],filterValue:w.a.get_parametro_usuario("KanbanPdca")?w.a.get_parametro_usuario("KanbanPdca").filtro:null},o.requestLists(n),o}return Object(n.a)(a,[{key:"getKey",value:function(){return this.keyCount++}},{key:"render",value:function(){var e=this;return Object(o.jsxs)("div",{id:"kanban",className:"dx-theme-background-color",children:[Object(o.jsx)(O.a,{className:"scrollable-board",direction:"horizontal",showScrollbar:"always",children:this.state.lists.map((function(t,a){var i=e.state.arrColumns[a];return Object(o.jsx)(E,{title:i.descricao,index:a,cards:t,cardKey:e.props.cardKey,main:e},e.getKey())}))}),Object(o.jsx)(S.default,{fields:A.b,value:this.state.filterValue,onValueChanged:function(t){w.a.set_parametro_usuario("KanbanPdca",{filtro:t},(function(){e.setState({filterValue:t},(function(){return e.requestLists(e.state.arrColumns)}))}))}})]})}}]),a}(u.a.Component);function E(e){var t=e.title,a=e.index,i=e.cards,n=e.cardKey,r=e.main,s=function(){var e=Object(b.a)(v.a.mark((function e(t){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.arrColumns[a].skip+=r.props.take,e.next=3,r.requestList(r.props.arrColumns[a].id,r.props.arrColumns[a].skip);case 3:o=e.sent,(i=JSON.parse(JSON.stringify(r.state.lists)))[a].data=[].concat(Object(_.a)(i[a].data),Object(_.a)(o.data)),i[a].totalCount=o.totalCount,r.setState({lists:i});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"list ".concat(I.a.kanbanList),style:{height:"calc(100vh - 143px)"},children:[Object(o.jsx)("div",{className:"list-title dx-theme-text-color titulo_lista",children:t}),Object(o.jsx)(O.a,{style:{height:"calc(100vh - 174px)"},className:"scrollable-list",direction:"vertical",showScrollbar:"always",onReachBottom:i.data.length<i.totalCount?s:null,onScroll:function(e){r.props.arrColumns[a].scrollOffset=e.scrollOffset},onInitialized:function(e){setTimeout((function(){e.component.scrollTo(r.props.arrColumns[a].scrollOffset)}))},children:i.data.map((function(e){return Object(o.jsx)(C,{card:e,main:r},e[n].toString())}))})]})}P.defaultProps={take:20,arrColumns:[],listKey:null,route:null};var T=a(864),D=a(408);var k=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo PDCA",text:"Novo PDCA",onClick:function(e){D.a.load("pdca/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),D.a.ABA.SIM)}},location:"after",name:"BtnNovoMotivoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de motivos",text:"Recarregar motivos",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){D.a.load("pdca/configuracoes",(function(e,t){t.show()}))},visible:w.a.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e=[].concat(A.b);return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsxs)(f.a,{swipeEnabled:!1,children:[Object(o.jsx)(p.Item,{title:"Lista",icon:"fas fa-list",children:Object(o.jsx)(m.default,{style:{height:"calc(100vh - 79px)"},stateStoring:Object(m.stateStoring)("DataGridPdca"),groupPanel:{visible:!1},onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(A.c)({dx_grid:!0}),columns:e})}),Object(o.jsx)(p.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(o.jsx)(P,{arrColumns:window.PDCA_SITUACAO_LOOKUP,columnKey:"id",cardKey:"pdca_id",route:"pdca/listar/",columnFilterKey:"situacao_id"})}),Object(o.jsx)(p.Item,{title:"Gr\xe1ficos",icon:"fas fa-chart-bar",children:Object(o.jsx)(T.a,{route:"pdca/listar_contagem/",argumentField:"situacao",series:[{valueField:"qtde_nao_iniciado",name:"N\xe3o Iniciado",color:"#b80000"},{valueField:"qtde_andamento",name:"Em Andamento",color:"#699"},{valueField:"qtde_concluido",name:"Conclu\xeddo",color:"#008a2e"}],seriesPie:[{valueField:"qtde_situacao_id",name:"Situa\xe7\xe3o"}],customizePoint:function(e){var t=null;switch(parseInt(e.data.situacao_id)){case window.PDCA_SITUACAO.NAO_INICIADO:t="#b80000";break;case window.PDCA_SITUACAO.EM_ANDAMENTO:t="#699";break;case window.PDCA_SITUACAO.CONCLUIDO:t="#008a2e";break;default:t="#1cb2f5"}return{color:t}},chartTypes:["bar","pie","donut"]})})]})})})})}}]),a}(u.a.Component);k.defaultProps={abaTitulo:"PDCA - 5W2H"};t.default=k},1220:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(398),h=a(389),v=a(949),b=a(413),j=a(105),O=a(485),g=a(388),w=a(432),x=a(450);var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:new _.default({pageSize:20,key:"orcamento_template_word_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){h.a.get({route:"orcamento_template_word/listar/",data:Object(m.a)({},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(m.a)(Object(m.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),oportunidadeOrcamentoId:e.oportunidadeOrcamentoId||null,exibirDownloadDOCX:!e.exibirDownloadDOCX||!1!==e.exibirDownloadDOCX&&"N"!==e.exibirDownloadDOCX,exibirDownloadPDF:!e.exibirDownloadPDF||!1!==e.exibirDownloadPDF&&"N"!==e.exibirDownloadPDF},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(+this.state.oportunidadeOrcamentoId>0){var t="Gerar word do or\xe7amento #".concat(this.state.oportunidadeOrcamentoId);setTimeout((function(){return j.a.titulo_aba(e.props.html_id,t)}),1e3)}}},{key:"render",value:function(){var e=this,t=function(t,a){var o=1;j.a.temp.empresa&&(o=j.a.temp.empresa);!function(e,t,o){j.a.obter_token_publico((function(i){j.a.download(window.WS_URI+"oportunidade/gerar_word/?empresa_id="+e+"&oportunidade_orcamento_id="+t+"&orcamento_template_word_id="+o+"&tipo_download="+a+"&token_publico="+i)}))}(o,e.state.oportunidadeOrcamentoId,+t.row.data.orcamento_template_word_id)},a=[].concat(Object(i.a)([Object(o.jsx)(b.a,{},"nome"),Object(o.jsx)(O.a,{allowEditing:!1,dataField:"update_hora",caption:"Ultima Altera\xe7\xe3o"},"update_hora"),Object(o.jsx)(b.a,{allowEditing:!1,dataField:"update_usuario_nome",caption:"Nome do usu\xe1rio"},"update_usuario_nome"),j.a.verifica_permissao(j.a.temp.empresa,"orcamento_template_word")?Object(o.jsx)(v.a,{exibirPrevisao:!1},"input_arquivo"):null]),[Object(o.jsxs)(g.Column,{type:"buttons",children:[Object(o.jsx)(g.Button,{visible:function(t){return+e.state.oportunidadeOrcamentoId>0&&+t.row.data.documento_id>0&&e.state.exibirDownloadDOCX},hint:"Download",icon:"fas fa-file-word",text:"Download",onClick:function(e){t(e,"docx")}},"btn_download_word"),Object(o.jsx)(g.Button,{visible:function(t){return+e.state.oportunidadeOrcamentoId>0&&+t.row.data.documento_id>0&&e.state.exibirDownloadPDF},hint:"Download",icon:"fas fa-file-pdf",text:"Download",onClick:function(e){t(e,"pdf")}},"btn_download_pdf"),Object(o.jsx)(w.a,{visible:function(e){return!e.row.removed&&j.a.verifica_permissao(j.a.temp.empresa,"orcamento_template_word")},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}},"btn_apagar"),Object(o.jsx)(x.a,{visible:function(e){return e.row.removed&&j.a.verifica_permissao(j.a.temp.empresa,"orcamento_template_word")},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}},"btn_recuperar")]},"buttons")]);return Object(o.jsx)("div",{className:"template-word-listagem",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)",width:"100%"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagem_template_word"),editing:{mode:"batch",useIcons:!0,allowUpdating:j.a.verifica_permissao(j.a.temp.empresa,"orcamento_template_word")},selection:{mode:"multiple"},onInitNewRow:function(e){e.data={documento_id:0}},children:a},"grid_templates")})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Template Word",text:"Adicionar",visible:j.a.verifica_permissao(j.a.temp.empresa,"orcamento_template_word"),onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-word",hint:"Download do arquivo de exemplo docx",text:"Exemplo DOCX",visible:j.a.verifica_permissao(j.a.temp.empresa,"orcamento_template_word"),onClick:function(){j.a.download(window.WS_ROOT+"/webservice/manual/docx/OrcamentoTemplateWord.docx")}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a={datagrid:e.component.getController("editing").getChanges()};h.a.post("/orcamento_template_word/salvar/",a,(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}),[],null,["datagrid.documento_id"])})}}}]),a}(p.a.Component);y.defaultProps={abaTitulo:"Templates Word de Or\xe7amentos"}},1221:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(398),h=a(389),v=a(949),b=a(413),j=a(105),O=a(388),g=a(432),w=a(450);var x=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:new _.default({pageSize:20,key:"solicitacao_template_word_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){h.a.get({route:"solicitacao_template_word/listar/",data:Object(m.a)({},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(m.a)(Object(m.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),solicitacaoId:e.solicitacaoId||null,numero:e.numero||null,numero_solicitacao_por_processo:e.numeroSolicitacaoPorProcesso||"N",solicitacaoAtividadeId:e.solicitacaoAtividadeId||null},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(+this.state.solicitacaoId>0){var t="S"===this.state.numero_solicitacao_por_processo&&+this.state.numero>0?this.state.numero:this.state.solicitacaoId,a="Gerar word da solicita\xe7\xe3o #".concat(t);setTimeout((function(){return j.a.titulo_aba(e.props.html_id,a)}),1e3)}}},{key:"render",value:function(){var e=this,t=function(t,a){var o=1;j.a.temp.empresa&&(o=j.a.temp.empresa);var i,n,r,s;i=o,n=e.state.solicitacaoId,r=e.state.solicitacaoAtividadeId,s=+t.row.data.solicitacao_template_word_id,j.a.obter_token_publico((function(e){j.a.download(window.WS_URI+"solicitacao/gerar_word/?empresa_id="+i+"&solicitacao_id="+n+"&solicitacao_atividade_id="+r+"&solicitacao_template_word_id="+s+"&tipo_download="+a+"&token_publico="+e)}))},a=[].concat(Object(i.a)([Object(o.jsx)(b.a,{},"nome"),j.a.verifica_permissao(j.a.temp.empresa,"solicitacao_template_word")?Object(o.jsx)(v.a,{exibirPrevisao:!1},"input_arquivo"):null]),[Object(o.jsxs)(O.Column,{type:"buttons",children:[Object(o.jsx)(O.Button,{visible:function(t){return+e.state.solicitacaoId>0&&+t.row.data.documento_id>0&&(!j.a.verifica_permissao(j.a.temp.empresa,"restringir_solicitacao_pdf")||j.a.sessao.dados.admin)},hint:"Download",icon:"fas fa-file-word",text:"Download",onClick:function(e){t(e,"docx")}},"btn_download_word"),Object(o.jsx)(O.Button,{visible:function(t){return+e.state.solicitacaoId>0&&+t.row.data.documento_id>0},hint:"Download",icon:"fas fa-file-pdf",text:"Download",onClick:function(e){t(e,"pdf")}},"btn_download_pdf"),Object(o.jsx)(g.a,{visible:function(e){return!e.row.removed&&j.a.verifica_permissao(j.a.temp.empresa,"solicitacao_template_word")},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}},"btn_apagar"),Object(o.jsx)(w.a,{visible:function(e){return e.row.removed&&j.a.verifica_permissao(j.a.temp.empresa,"solicitacao_template_word")},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}},"btn_recuperar")]},"buttons")]);return Object(o.jsx)("div",{className:"template-word-listagem",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)",width:"100%"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagem_template_word"),editing:{mode:"batch",useIcons:!0,allowUpdating:j.a.verifica_permissao(j.a.temp.empresa,"solicitacao_template_word")},selection:{mode:"multiple"},onInitNewRow:function(e){e.data={documento_id:0}},children:a},"grid_templates")})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Template Word",text:"Adicionar",visible:j.a.verifica_permissao(j.a.temp.empresa,"solicitacao_template_word"),onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-word",hint:"Download do arquivo de exemplo docx",text:"Exemplo DOCX",visible:j.a.verifica_permissao(j.a.temp.empresa,"solicitacao_template_word"),onClick:function(){j.a.download(window.WS_ROOT+"/webservice/manual/docx/SolicitacaoTemplateWord.docx")}},location:"after",name:"BtnNovoTemplateWord",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a={datagrid:e.component.getController("editing").getChanges()};h.a.post("/solicitacao_template_word/salvar/",a,(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}),[],null,["datagrid.documento_id"])})}}}]),a}(p.a.Component);x.defaultProps={abaTitulo:"Templates Word de Solicita\xe7\xf5es"}},1222:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return P}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(869),p=a(530),f=a.n(p),m=a(422),_=a.n(m),h=a(425),v=a(385),b=a(105),j=a(408),O=a(454),g=a.n(O),w=a(923);var x=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={favorito:e.favorito},o.favoritar.bind(Object(v.a)(o)),o}return Object(n.a)(a,[{key:"favoritar",value:function(e){var t=this;window.favoritar_item("solicitacoes",this.props.processo_id,e),this.setState({favorito:e},(function(){t.props.callbackFavorito&&t.props.callbackFavorito(e)}))}},{key:"btnFavoritarClick",value:function(){this.favoritar(!0)}},{key:"btnDesfavoritarClick",value:function(){this.favoritar(!1)}},{key:"nova_solicitacao",value:function(e,t){j.a.load("solicitacao/nova",(function(a,o){o.onclose=t,o.show({processo_id:e})}))}},{key:"cardClick",value:function(e){j.a.loadReact(w.a,{processo_id:this.props.processo_id},(function(e){}),j.a.ABA.SIM)}},{key:"render",value:function(){var e=this;return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsxs)("div",{style:{margin:"5px",backgroundColor:"white",width:"200px",height:"150px",boxSizing:"border-box",boxShadow:"2px 2px 1px rgb(218, 218, 218)",borderRadius:"8px",cursor:"pointer"},onClick:this.cardClick.bind(this),children:[Object(o.jsx)("div",{style:{backgroundColor:this.props.cor,height:"10px",position:"relative",top:"140px",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"},children:"\xa0"}),Object(o.jsxs)("div",{style:{display:"block",marginLeft:"20px",marginRight:"20px"},children:[Object(o.jsx)("div",{style:{cursor:"auto"},onClick:function(e){return e.stopPropagation()},children:Object(o.jsx)(g.a,{children:[Object(o.jsx)(O.Item,{location:"before",locateInMenu:"never",children:Object(o.jsx)("img",{src:"assets/img/icones_bp/processos.svg",width:"16px",alt:""})},"icone"),Object(o.jsx)(O.Item,{location:"after",visible:!this.state.favorito,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Favoritar",hint:"Favoritar",icon:"far fa-star",stylingMode:"text",onClick:this.btnFavoritarClick.bind(this)}},"favoritar"),Object(o.jsx)(O.Item,{location:"after",visible:this.state.favorito,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Desfavoritar",hint:"Desfavoritar",icon:"fas fa-star",stylingMode:"text",onClick:this.btnDesfavoritarClick.bind(this)}},"desfavoritar"),Object(o.jsx)(O.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",visible:this.props.ativo,widget:"dxButton",options:{text:"Nova Solicita\xe7\xe3o",hint:"Nova Solicita\xe7\xe3o",icon:"fa fa-plus",stylingMode:"text",onClick:function(){return e.nova_solicitacao(e.props.processo_id)}}},"nova_solicitacao")]})}),Object(o.jsx)("div",{style:{fontSize:"12px",marginTop:"5px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",height:"44px"},title:this.props.titulo,children:this.props.titulo}),Object(o.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted",title:this.props.subtitulo,children:this.props.subtitulo}),this.props.ativo?"":Object(o.jsx)("label",{className:"label label-default",children:"Inativo"})]})]})})}}]),a}(d.a.Component);x.defaultProps={titulo:"Lorem ipsum dolor sit amet. Nunc a diam at risus congue cursus eget at justo.",icone:"",cor:"black",subtitulo:"Nulla facilisi. Donec suscipit lectus eget augue ultrices, at ullamcorper turpis efficitur. Praesent bibendum lobortis interdum. Phasellus fermentum congue erat, eget finibus ipsum",favorito:!1,ativo:!1};var y=a(859),A=a(691),C=a(531),S=a(492);var R=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={lista:e.lista,listaTodosProcessos:!1,info_tipo_listagem:'Listando "Meus Processos"'},o.listar.bind(Object(v.a)(o)),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listar();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listar",value:function(){var e=Object(h.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={listaTodosProcessos:this.state.listaTodosProcessos},e.t0=this,e.next=4,Object(C.listarProcessosDisponiveis)(t);case 4:e.t1=e.sent,e.t2={lista:e.t1},e.t0.setState.call(e.t0,e.t2);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"btnListarMeusProcessosClick",value:function(){this.setState({listaTodosProcessos:!1,info_tipo_listagem:'Listando "Meus Processos"'}),this.listar()}},{key:"btnListarTodosProcessosClick",value:function(){this.setState({listaTodosProcessos:!0,info_tipo_listagem:'Listando "Todos Processos"'}),this.listar()}},{key:"render",value:function(){var e=this,t=function(t){return Object(o.jsx)(x,{processo_id:t.processo_id,titulo:t.nome,subtitulo:t.categoria_processos_nome,cor:t.categoria_processos_cor_fundo,favorito:t.favorito,callbackFavorito:function(){return e.listar()},dias_corridos_data_referencia:t.dias_corridos_data_referencia,inicios:t.inicios,ativo:t.ativo},window.elem_key_random())},a=this.state.lista.filter((function(e){return!0===e.favorito})).map(t),i=[],n="",r=[],s=function(){i.push(Object(o.jsx)("div",{style:{flexBasis:"100%",height:0}})),i.push(Object(o.jsxs)(d.a.Fragment,{children:[Object(o.jsx)("div",{style:{display:"block",fontSize:"18px",marginLeft:"10px",marginTop:"10px"},children:n}),Object(o.jsx)("div",{style:{display:"inline-flex",flexWrap:"wrap"},children:r})]})),r=[]};this.state.lista.forEach((function(e){""!==n&&e.categoria_processos_nome!==n&&s(),n=e.categoria_processos_nome,r.push(t(e))})),s();var c=b.a.verifica_permissao(b.a.temp.empresa,"processo")?Object(o.jsx)(A.Button,{stylingMode:"text",onClick:function(e){j.a.loadReact(y.default,{},(function(e){}),j.a.ABA.SIM)},children:"Criar um processo..."}):null;return Object(o.jsxs)(d.a.Fragment,{children:[Object(o.jsx)(g.a,{children:[Object(o.jsx)(O.Item,{location:"before",visible:b.a.sessao.dados.admin||b.a.sessao.dados.tipo==window.USUARIO_TIPO.CLIENTE,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Listar Meus Processos",hint:"Listar Meus Processos",icon:"fa fa-user",stylingMode:"text",onClick:this.btnListarMeusProcessosClick.bind(this)}},"meus_processos"),Object(o.jsx)(O.Item,{location:"before",visible:b.a.sessao.dados.admin||b.a.sessao.dados.tipo==window.USUARIO_TIPO.CLIENTE,showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Listar Todos Processos",hint:"Listar Todos Processos",icon:"fa fa-users",stylingMode:"text",onClick:this.btnListarTodosProcessosClick.bind(this)}},"todos_processos"),Object(o.jsx)(O.Item,{location:"before",showText:"always",locateInMenu:"auto",text:this.state.info_tipo_listagem,cssClass:"text-muted"},"info_tipo_listagem")]}),Object(o.jsxs)(A.ScrollView,{useNative:!0,style:{height:"calc(100vh - 118px)"},children:[Object(o.jsxs)("div",{style:{display:0===a.length?"none":"block",fontSize:"18px",marginLeft:"10px",marginTop:"10px"},children:[Object(o.jsx)("i",{className:"fas fa-star"})," Favoritos"]}),Object(o.jsx)("div",{style:{display:0===a.length?"none":"inline-flex",flexWrap:"wrap"},children:a}),Object(o.jsx)("div",{children:i}),Object(o.jsx)("div",{style:{display:0===i.length?"flex":"none",justifyContent:"center",alignItems:"center",height:"calc(100vh - 85px)"},children:Object(o.jsxs)("div",{className:"text-muted",style:{padding:"10px",textAlign:"center",minHeight:"140px"},children:[Object(o.jsx)(S.b,{}),Object(o.jsx)("h5",{children:"Ainda n\xe3o h\xe1 processo"}),Object(o.jsx)("p",{children:"Seus processos ser\xe3o exibidos aqui"}),c]})})]})]})}}]),a}(d.a.Component);R.defaultProps={lista:[]};var I=a(920);var P=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={tabPanelSelectedIndex:e.filtro_solicitacao_numero?1:0},o}return Object(n.a)(a,[{key:"tabPanelOnSelectionChanged",value:function(e){this.setState({tabPanelSelectedIndex:e.selectedIndex})}},{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsxs)(f.a,{selectedIndex:this.state.tabPanelSelectedIndex,onSelectionChanged:this.tabPanelOnSelectionChanged.bind(this),swipeEnabled:!1,children:[Object(o.jsx)(p.Item,{title:"Processos",icon:"assets/img/icones_bp/processos.svg",children:Object(o.jsx)(R,{})}),Object(o.jsx)(p.Item,{title:"Minhas Atividades",icon:"fas fa-tasks",children:Object(o.jsxs)(f.a,{onSelectionChanged:this.tabPanelOnSelectionChanged.bind(this),swipeEnabled:!1,children:[Object(o.jsx)(p.Item,{title:"Lista",icon:"fas fa-list-ul",children:Object(o.jsx)(u.a,{filtro_solicitacao_numero:this.props.filtro_solicitacao_numero,filtro_tipo_listagem:this.props.filtro_tipo_listagem,filtro_solicitante:this.props.filtro_solicitante,filtro_responsavel:this.props.filtro_responsavel,filtro_cliente:this.props.filtro_cliente,subtractHeight:"72px"})}),Object(o.jsx)(p.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(o.jsx)(I.a,{processo_id:-1,subtractHeight:"72px",filtro_tipo:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS})})]})}),Object(o.jsx)(p.Item,{title:"Supervisionados",icon:"fas fa-tasks",visible:"S"===window.App.sessao.dados.supervisor_processo||"S"===window.App.sessao.dados.supervisor_processo_usuario||"S"===window.App.sessao.dados.supervisor_processo_grupo_usuario,children:Object(o.jsxs)(f.a,{onSelectionChanged:this.tabPanelOnSelectionChanged.bind(this),swipeEnabled:!1,children:[Object(o.jsx)(p.Item,{title:"Lista",icon:"fas fa-list-ul",children:Object(o.jsx)(u.a,{filtro_tipo_listagem:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,exibirAlertaFiltrosAdicionais:!1,subtractHeight:"72px"})}),Object(o.jsx)(p.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(o.jsx)(I.a,{processo_id:-1,subtractHeight:"72px",filtro_tipo:window.SOLICITACAO_FILTROS.SUPERVISIONADOS})})]})})]})})}}]),a}(d.a.Component);P.defaultProps={abaTitulo:"Solicita\xe7\xf5es de Processos"}},1223:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return C}));var o=a(372),i=a(391),n=a(380),r=a(365),s=a(366),c=a(385),l=a(368),d=a(369),u=a(367),p=a(376),f=a.n(p),m=a(408),_=a(401),h=a(398),v=a(389),b=a(388),j=a(484),O=a(413),g=a(617),w=a(886),x=a(694),y=a(887),A=[Object(o.jsx)(j.a,{dataField:"oportunidade_id"},"oportunidade_id"),Object(o.jsx)(O.a,{dataField:"nome_motivo_perda",caption:"Motivo Perda"},"nome_motivo_perda"),Object(o.jsx)(w.a,{dataField:"valor_negocio",caption:"Valor Neg\xf3cio"},"valor_negocio"),Object(o.jsx)(x.a,{dataField:"tipo_moeda_simbolo",caption:"Moeda"},"tipo_moeda_simbolo"),Object(o.jsx)(y.a,{dataField:"situacao"},"situacao"),Object(o.jsx)(g.a,{dataField:"data_situacao",caption:"Data Situa\xe7\xe3o"},"data_situacao"),Object(o.jsx)(O.a,{},"nome"),Object(o.jsx)(O.a,{dataField:"nome_entidade",caption:"Entidade"},"nome_entidade")];var C=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o,i,s,l;return Object(r.a)(this,a),(o=t.call(this,e)).state={motivoPerdaId:e.motivoPerdaId||null,diaInicio:e.diaInicio||null,diaFim:e.diaFim||null},o.state=Object(n.a)(Object(n.a)({},o.state),{},{dataSource:(i=o.state.motivoPerdaId,s=o.state.diaInicio,l=o.state.diaFim,new h.default({pageSize:20,key:"oportunidade_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){v.a.get({route:"motivo_perda_negocio_relatorio/listar/",data:Object(n.a)(Object(n.a)({},t),{},{dx_grid:!0,motivo_perda_id:i,dia_inicio:s,dia_fim:l}),func_response:function(t){var a=window.createLoadExtra(t);e(Object(n.a)(Object(n.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))}),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(A),[Object(o.jsx)(b.Column,{type:"buttons",children:Object(o.jsx)(b.Button,{visible:function(e){return+e.row.data.oportunidade_id>0},hint:"Visualizar Oportunidade",icon:"fa fa-pencil-alt",text:"Ver oportunidade",onClick:function(e){m.a.load("oportunidade/detalhes",(function(t,a){a.show(+e.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.row.data.oportunidade_id})}},"btn_visualizar")},"buttons")]);return Object(o.jsx)(_.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,editing:{allowUpdating:!1,allowDeleting:!1,allowAdding:!1},selection:{mode:"none"},children:e},"grid_relatorio")}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}}]),a}(f.a.Component);C.defaultProps={abaTitulo:"Relat\xf3rio Motivo de Perda de Neg\xf3cio",motivoPerdaId:null}},1224:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return C}));var o=a(372),i=a(391),n=a(380),r=a(365),s=a(366),c=a(385),l=a(368),d=a(369),u=a(367),p=a(376),f=a.n(p),m=a(408),_=a(401),h=a(398),v=a(389),b=a(388),j=a(484),O=a(413),g=a(617),w=a(886),x=a(694),y=a(887),A=[Object(o.jsx)(j.a,{dataField:"oportunidade_id"},"oportunidade_id"),Object(o.jsx)(O.a,{dataField:"nome_origem",caption:"Origem"},"nome_origem"),Object(o.jsx)(w.a,{dataField:"valor_negocio",caption:"Valor Neg\xf3cio"},"valor_negocio"),Object(o.jsx)(x.a,{dataField:"tipo_moeda_simbolo",caption:"Moeda"},"tipo_moeda_simbolo"),Object(o.jsx)(y.a,{dataField:"situacao"},"situacao"),Object(o.jsx)(g.a,{dataField:"data_situacao",caption:"Data Situa\xe7\xe3o"},"data_situacao"),Object(o.jsx)(O.a,{},"nome"),Object(o.jsx)(O.a,{dataField:"nome_entidade",caption:"Entidade"},"nome_entidade")];var C=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o,i,s,l;return Object(r.a)(this,a),(o=t.call(this,e)).state={oportunidadeOrigemId:e.oportunidadeOrigemId||null,diaInicio:e.diaInicio||null,diaFim:e.diaFim||null},o.state=Object(n.a)(Object(n.a)({},o.state),{},{dataSource:(i=o.state.oportunidadeOrigemId,s=o.state.diaInicio,l=o.state.diaFim,new h.default({pageSize:20,key:"oportunidade_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){v.a.get({route:"oportunidade_origem_relatorio/listar/",data:Object(n.a)(Object(n.a)({},t),{},{dx_grid:!0,oportunidade_origem_id:+i,dia_inicio:s,dia_fim:l}),func_response:function(t){var a=window.createLoadExtra(t);e(Object(n.a)(Object(n.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))}),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(A),[Object(o.jsx)(b.Column,{type:"buttons",children:Object(o.jsx)(b.Button,{visible:function(e){return+e.row.data.oportunidade_id>0},hint:"Visualizar Oportunidade",icon:"fa fa-pencil-alt",text:"Ver oportunidade",onClick:function(e){m.a.load("oportunidade/detalhes",(function(t,a){a.show(+e.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),m.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.row.data.oportunidade_id})}},"btn_visualizar")},"buttons")]);return Object(o.jsx)(_.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,editing:{allowUpdating:!1,allowDeleting:!1,allowAdding:!1},selection:{mode:"none"},children:e},"grid_relatorio")}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}}]),a}(f.a.Component);C.defaultProps={abaTitulo:"Relat\xf3rio Oportunidades por Origem",oportunidadeOrigemId:null}},1225:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(422),r=a.n(n),s=a(425),c=a(365),l=a(366),d=a(385),u=a(368),p=a(369),f=a(367),m=a(376),_=a.n(m),h=a(408),v=a(389),b=a(105),j=a(401),O=a(388),g=a(888),w=a(413);var x=function(e){Object(u.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(f.a)(e);if(t()){var i=Object(f.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(p.a)(this,a)}}(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return a}(O.Column);x.defaultProps={dataField:"consulta_integracao_id",caption:"Consulta Integra\xe7\xe3o"};var y=a(485),A=a(449),C=a(432),S=a(450),R=a(931),I=a(889);var P=function(e){Object(u.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(f.a)(e);if(t()){var i=Object(f.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(p.a)(this,a)}}(a);function a(e){var o;return Object(c.a)(this,a),(o=t.call(this,e)).getDatasourceConsultaIntegracao=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("consulta_integracao/listar/",null,null,null,null,null,null,null,null,!0);case 2:t=e.sent,this.setState({datasourceConsultaIntegracao:t});case 4:case"end":return e.stop()}}),e,this)}))),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(d.a)(o)),o.dataGrid=null,o.state={datasourceConsultaIntegracao:[]},o.getDatasourceConsultaIntegracao(),o}return Object(l.a)(a,[{key:"onToolbarPreparing",value:function(e){this.dataGrid=e.component;var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cubo",text:"Adicionar",visible:b.a.verifica_permissao(b.a.temp.empresa,"cricao_cubos"),onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=e.component.getController("editing").getChanges();Object(g.c)(a,(function(t){e.component.saveEditData()}))})}}},{key:"render",value:function(){var e,t=this,a=[].concat(Object(i.a)((e=this.state.datasourceConsultaIntegracao,[Object(o.jsx)(w.a,{},"nome"),Object(o.jsx)(x,{lookup:{dataSource:e,displayExpr:"nome",valueExpr:"consulta_id"}},"consulta_id"),Object(o.jsx)(y.a,{allowEditing:!1,dataField:"ultima_execucao",caption:"Ultima Execu\xe7\xe3o",width:180,allowGrouping:!1,allowHeaderFiltering:!1},"ultima_execucao")])),[Object(o.jsxs)(O.Column,{type:"buttons",children:[Object(o.jsx)(O.Button,{icon:"event",hint:"Job Scheduler",visible:function(e){return!e.row.isNewRow&&(b.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(e){h.a.load("job_scheduler/detalhes",(function(t,a){a.onclose=function(){e.component.refresh()},a.show(e.row.data.job_scheduler_id,e.row.data.job_scheduler_id?window.FORMULARIO.EDITAR:window.FORMULARIO.NOVO,e.row.key)}))}}),Object(o.jsx)(O.Button,{icon:"pulldown",hint:"Executar Job",visible:function(e){return!e.row.isNewRow&&+e.row.data.situacao===window.JOB_SCHEDULER_SITUACAO.AGUARDANDO&&"S"===e.row.data.ativo&&(b.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(e){v.a.post("job_scheduler/executar/",{job_scheduler_id:e.row.data.job_scheduler_id},(function(t){e.component.refresh(),window.alert_modal("Valida\xe7\xe3o",window.nl2br(t.log_ultima_execucao))})),window.setTimeout(e.component.refresh())}}),Object(o.jsx)(O.Button,{icon:"group",hint:b.a.lang.tarefa.gerenciar_equipe,visible:function(e){return!e.row.isNewRow&&(b.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(e){h.a.loadReact(R.default,{cubo_id:e.row.data.cubo_id,abaTitulo:"Equipe "+e.row.data.nome,onClose:function(){e.component.refresh()}},(function(e){}),h.a.ABA.MULTIPLAS)}}),Object(o.jsx)(A.a,{icon:"dx-icon dx-icon-datafield",hint:"Visualizar Cubo",name:"visualizar_cubo",visible:function(e){return!e.row.isNewRow},onClick:function(e){h.a.loadReact(I.default,{cubo_id:e.row.data.cubo_id,abaTitulo:e.row.data.nome},(function(e){}),h.a.ABA.SIM)}}),Object(o.jsx)(C.a,{visible:function(e){return!e.row.removed&&!e.row.data.padrao&&(b.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(e){t.dataGrid.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(S.a,{visible:function(e){return e.row.removed&&(b.a.sessao.dados.admin||+e.row.data.tipo_permissao===window.TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(e){t.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"buttons")]);return Object(o.jsx)(_.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(j.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(j.stateStoring)("ListagemDataGridCubo"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(g.b)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:b.a.verifica_permissao(b.a.temp.empresa,"cricao_cubos"),allowAdding:!1,allowDeleting:!1},children:a})})})})}}]),a}(_.a.Component);P.defaultProps={abaTitulo:"Cubo"};t.default=P},1226:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(413),f=a(485),m=[Object(o.jsx)(p.a,{dataField:"versao",caption:"Vers\xe3o"},"versao"),Object(o.jsx)(f.a,{dataField:"execucao",caption:"Execu\xe7\xe3o",sortIndex:0,sortOrder:"desc"},"execucao")],_=a(380),h=a(398),v=a(389),b=a(105);var j=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(u.default,{style:{height:"calc(100vh - 150px)",width:"100%"},dataSource:new h.default({pageSize:20,key:"versao",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){v.a.get({route:"dbu/listar_historico_de_atualizacoes/",data:Object(_.a)({session_id:b.a.sessao},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(_.a)(Object(_.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),searchPanel:!1,groupPanel:!1,selection:{mode:"multiple"},children:m})})})})}}]),a}(d.a.Component);j.defaultProps={abaTitulo:"Hist\xf3rico de Atualiza\xe7\xf5es"};t.default=j},1227:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(422),n=a.n(i),r=a(380),s=a(425),c=a(423),l=a(376),d=a(508),u=a.n(d),p=a(419),f=a(398),m=a(389),_=function(e,t,a){m.a.post({route:"/apontamento_projeto/salvar_tela_apontamento_simples/",data:{apontamentos:e,usuario_id:t},func_response:function(e){"function"===typeof a&&a()},func_fail:function(e){}})};function h(e){return Object(o.jsx)(p.default,Object(r.a)({},Object(r.a)(Object(r.a)({},e),{},{dataSource:new f.default({paginate:!0,pageSize:20,key:"tecnico_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){m.a.get({route:"/tecnico/listar/",data:Object(r.a)({dx_grid:!0,apontamento_rapido:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(r.a)(Object(r.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){m.a.get({route:"/tecnico/listar/",data:{dx_grid:!0,tecnico_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})})))}h.defaultProps={valueExpr:"tecnico_id",displayExpr:"nome",dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridSearchPanelEnabled:!1,columns:[{dataField:"nome",caption:"Nome"}]};var v=a(401),b=a(63),j=a.n(b),O=a(105);function g(){var e=null,t=null,a=null,i=null;"S"===O.a.sessao.dados.tecnico&&(e=O.a.sessao.dados.tecnico_id.toString(),t=O.a.sessao.dados.usuario_id);var d=new Date;d.setDate(1);var p=window.pad(d.getMonth()+1,2),f=d.getFullYear(),b=new Date(f,p,1),g=new Date(f,p,0);a=f+"-"+p+"-"+window.pad(b.getDate(),2),i=f+"-"+p+"-"+window.pad(g.getDate(),2);var w=O.a.get_parametro_usuario("apontamento_simples");Object.keys(w).length&&(t=+w.usuario_id>0?w.usuario_id:t,a=w.data_inicio?w.data_inicio:a,i=w.data_fim?w.data_fim:i,e=w.tecnico_id?w.tecnico_id:e);var x=Object(l.useState)(a),y=Object(c.a)(x,2),A=y[0],C=y[1],S=Object(l.useState)(i),R=Object(c.a)(S,2),I=R[0],P=R[1],E=Object(l.useState)(t),T=Object(c.a)(E,2),D=T[0],k=T[1],M=Object(l.useState)(e),N=Object(c.a)(M,2),F=N[0],L=N[1],U=Object(l.useState)([]),B=Object(c.a)(U,2),V=B[0],z=B[1],G=Object(l.useState)([]),H=Object(c.a)(G,2),q=H[0],W=H[1],K=Object(l.useState)({}),J=Object(c.a)(K,2),Q=J[0],Z=J[1];function X(){return Y.apply(this,arguments)}function Y(){return(Y=Object(s.a)(n.a.mark((function e(){var t,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(A&&I&&A>I)){e.next=6;break}window.alertaPopUp("Valida\xe7\xe3o","A <strong>Data In\xedcio</strong> n\xe3o pode ser maior que a <strong>Data Fim</strong>"),C(a),P(i),e.next=13;break;case 6:if(!(A&&I&&D)){e.next=13;break}return t=O.a.get_parametro_usuario("apontamento_simples"),O.a.set_parametro_usuario("apontamento_simples",Object(r.a)(Object(r.a)({},t),{},{data_inicio:A,data_fim:I,usuario_id:D,tecnico_id:F})),e.next=11,m.a.get({route:"/apontamento_projeto/buscar_dados_listagem_apontamento_simples/",data:{data_inicio:A,data_fim:I,usuario_id:D},awaitReturn:!0});case 11:o=e.sent,z(o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(l.useEffect)((function(){X()}),[A,I,D]),Object(l.useEffect)((function(){!function(){if(V.length){for(var e=[{dataField:"projeto_codigo_nome",caption:"C\xf3d./Nome Projeto",width:250,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0,visible:!1},{dataField:"projeto_codigo",caption:"C\xf3d. Projeto",width:150,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0},{dataField:"projeto_nome",caption:"Projeto",width:200,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0},{dataField:"projeto_atividade_nome",caption:"Atividade",width:200,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!1,fixed:!0},{dataField:"soma_horas_atividade_periodo",caption:"Total Atividade",dataType:"number",alignment:"left",width:200,allowEditing:!1,allowFixing:!1,allowReordering:!1,allowHiding:!0,fixed:!0}],t={totalItems:[{column:"soma_horas_atividade_periodo",summaryType:"sum",skipEmptyValues:!0,displayFormat:"{0}"}]},a=V[0],o=Object.keys(a).filter((function(e){if(e.indexOf("-")>-1){var t=e.split("-");if(4===t[0].length&&2===t[1].length&&2===t[2].length)return e}})),i=function(a){var i=o[a],n=window.formatar_data_humano(i);e.push({dataField:i,caption:n,width:85,allowEditing:!0,allowHeaderFiltering:!1,allowFiltering:!1,allowGrouping:!1,allowReordering:!1,allowSorting:!1,allowFixing:!1,allowHiding:!1,dataType:"number",headerCellTemplate:function(e,t){j()(e).text(n);var a=t.column.dataField,o=new Date(a+" 00:00:00"),i=window.getDateNow(!0),r=o.getDay(),s=[],c=null;if(O.a.sessao.dados.feriados.length&&(s=O.a.sessao.dados.feriados.filter((function(e){return e.data_feriado===a}))).length&&(c=s[0].nome),a===i){var l="Hoje"+(c?" ("+c+")":"");6===r&&(l="Hoje (S\xe1bado"+(c?" | "+c+")":")")),0===r&&(l="Hoje (Domingo"+(c?" | "+c+")":")")),j()(e).addClass("text-info").css({fontWeight:"bold"}).parent().css({backgroundColor:"rgba(49, 112, 143, 0.2)"}).attr("title",l)}else if(6===r||0===r){var d="";6===r&&(d="S\xe1bado"+(c?" ("+c+")":"")),0===r&&(d="Domingo"+(c?" ("+c+")":"")),j()(e).addClass("text-muted").css({fontWeight:"bold"}).parent().css({backgroundColor:"rgba(119, 119, 119, 0.2)"}).attr("title",d)}else s.length&&j()(e).addClass("text-danger").css({fontWeight:"bold"}).parent().css({backgroundColor:"rgba(169, 68, 66, 0.2)"}).attr("title","Feriado ("+c+")")},cellTemplate:function(e,t){if(j()(e).css({borderLeft:"1px solid rgba(119, 119, 119, 0.2)",borderRight:"1px solid rgba(119, 119, 119, 0.2)"}),"data"===t.rowType&&t.value){j()(e).text(t.value);for(var a=t.column.dataField,o=t.data,i=Object.keys(o),n=Object.values(o),r=null,s=0;s<i.length;s++){var c=i[s],l=n[s],d=c.indexOf("__")>-1?c.split("__"):[];if(d[0]===a&&"apontamento_padrao"==d[1]){r=l;break}}"S"===r&&j()(e).addClass("text-warning").css({fontWeight:"bolder",backgroundColor:"rgba(138, 109, 0, 0.2)",border:"1px solid rgba(138, 109, 0)"}).attr("title","Apontamento bloqueado para edi\xe7\xe3o, pois foi realizado pela tela de Apontamento de Atividades")}},validationRules:[{type:"custom",validationCallback:function(e){for(var t=e.value,a=Object.keys(e.data),o=Object.values(e.data),i=e.column.dataField,n=!0,r=0;r<a.length;r++){var s=a[r],c=o[r],l=s.indexOf("__")>-1?s.split("__"):[];if(l[0]===i&&"apontamento_padrao"===l[1]&&"S"===c){n=!1;break}}if(n&&t&&!Number.isInteger(t)){var d=t.toString().split(".");if(0!==+d[1]&&5!==+d[1])return!1}return!0},message:"Permitido somente valores inteiros ou exatos."},{type:"custom",validationCallback:function(e){for(var t=e.value,a=Object.keys(e.data),o=Object.values(e.data),i=e.column.dataField,n=!0,r=0;r<a.length;r++){var s=a[r],c=o[r],l=s.indexOf("__")>-1?s.split("__"):[];if(l[0]===i&&"apontamento_padrao"===l[1]&&"S"===c){n=!1;break}}return!(n&&t&&parseInt(t)>24)},message:"Apontamento maior que 24h n\xe3o permitido."}]}),t.totalItems.push({column:i,summaryType:"sum",skipEmptyValues:!0,displayFormat:"{0}"})},n=0;n<o.length;n++)i(n);Z(t),W(e)}}()}),[V]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-2",children:[Object(o.jsx)("label",{children:"Data In\xedcio"}),Object(o.jsx)(u.a,{type:"date",displayFormat:"dd/MM/yyyy",showClearButton:!0,value:A,onValueChanged:function(e){var t=window.formatDate(e.value,!0);C(t)},style:{backgroundColor:"#FFF"}})]}),Object(o.jsxs)("div",{className:"col-md-2",children:[Object(o.jsx)("label",{children:"Data Fim"}),Object(o.jsx)(u.a,{type:"date",displayFormat:"dd/MM/yyyy",showClearButton:!0,value:I,onValueChanged:function(e){var t=window.formatDate(e.value,!0);P(t)},style:{backgroundColor:"#FFF"}})]}),Object(o.jsxs)("div",{className:"col-md-4",children:[Object(o.jsx)("label",{children:"T\xe9cnico"}),Object(o.jsx)(h,{selecionado:F,aoAlterar:function(e,t){L(e),k(t.usuario_id)},dropDownBoxStyle:{backgroundColor:"#FFF"}})]})]}),V.length&&q.length&&Object(o.jsx)("div",{className:"row",style:{marginTop:10},children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(v.default,{remoteOperations:{groupPaging:!0,paging:!0,filtering:!0,sorting:!0,grouping:!0,summary:!1},dataSource:V,style:{height:"calc(100vh - 110px)"},keyExpr:"projeto_atividade_id",columns:q,summary:Q,columnChooser:{enabled:!0},editing:{mode:"batch",allowAdding:!1,allowDeleting:!1,useIcons:!1,allowUpdating:!0},stateStoring:{enabled:!0,type:"custom",customSave:function(e){var t=Object(r.a)(Object(r.a)({},e),{},{columns:function(e){var t=["projeto_codigo_nome","projeto_codigo","projeto_nome","projeto_atividade_nome","soma_horas_atividade_periodo"];return e.filter((function(e){return t.includes(e.dataField)}))}(e.columns)}),a=O.a.get_parametro_usuario("apontamento_simples");O.a.set_parametro_usuario("apontamento_simples",Object(r.a)(Object(r.a)({},a),{},{dataGrid:t}))},customLoad:function(){return Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=O.a.get_parametro_usuario("apontamento_simples"))||!t.dataGrid){e.next=3;break}return e.abrupt("return",t.dataGrid);case 3:case"end":return e.stop()}}),e)})))()}},onToolbarPreparing:function(e){var t=[{widget:"dxButton",options:{icon:"help",hint:"Ajuda",text:"Ajuda",onClick:function(e){window.open(O.a.manual_link("log/BPM8214"),"_blank").focus()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(e){return X()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=e.component.getController("validating")._validationState,o=!1;if(a.length)for(var i=0;i<a.length;i++){if(!1===a[i].isValid){o=!0;break}}if(o)window.alertaPopUp("Valida\xe7\xe3o","Realize os ajustes dos valores inv\xe1lidos antes de continuar");else{for(var n=function(){var t=window.CircularJSON.stringify(e.component.getController("editing").getChanges());_(t,D,X)},r=e.component.getController("editing").getChanges(),s=[],c=0;c<r.length;c++)for(var l=r[c].data,d=Object.keys(l),u=Object.values(l),p=0;p<u.length;p++){var f=u[p];0===Number(f)&&(s.includes(d[p].format_date())||s.push(d[p].format_date()))}s.length?window.alertaPopUp("Aten\xe7\xe3o","Foram encontrados alguns apontamentos com valor 0 (zero) ou vazio. Esses apontamentos, caso existam, ser\xe3o exclu\xeddos.<br><br>Tem certeza que deseja continuar e salvar as altera\xe7\xf5es?<br><br>".concat(s.join("<br>")),"Sim, salvar altera\xe7\xf5es",(function(){n()}),"N\xe3o, cancelar altera\xe7\xf5es",(function(){return!1})):n()}})}},onEditingStart:function(e){for(var t=Object.keys(e.data),a=Object.values(e.data),o=e.column.dataField,i={},n=0;n<t.length;n++){var r=t[n],s=a[n],c=r.indexOf("__")>-1?r.split("__"):[];c[0]===o&&("apontamento_padrao"===c[1]&&(i.apontamento_padrao=s),"apontamento_projeto_simples_id"===c[1]&&(i.apontamento_projeto_simples_id=s))}"S"===i.apontamento_padrao&&(e.cancel=!0)}})})})]})}g.defaultProps={abaTitulo:"Apontamento Simples"}},1228:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(376),n=a(401),r=a(389),s=a(573),c=Object.freeze({microsoft:1}),l=[{id:c.microsoft,descricao:"Microsoft"}],d=Object.freeze({desconectado:0,conectado:1,expirado:2}),u=(d.desconectado,d.conectado,d.expirado,function(e){e.dx_grid;return Object(s.createStore)({key:"id",loadUrl:"".concat(window.WS_URI,"/oauth_client/listar/"),insertUrl:"".concat(window.WS_URI,"/oauth_client/salvar/"),updateUrl:"".concat(window.WS_URI,"/oauth_client/salvar/"),deleteUrl:"".concat(window.WS_URI,"/oauth_client/salvar/"),onBeforeSend:function(e,t){t.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},t.headers=r.a.dxHeaders()}})}),p=a(388),f=a(413),m=a(485),_=a(682),h={display:"flex"},v={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},b=function(e){var t=e.onRefresh,a=void 0===t?null:t;return[Object(o.jsx)(f.a,{children:Object(o.jsx)(p.RequiredRule,{})},"nome"),Object(o.jsxs)(p.Column,{dataField:"provedor",caption:"Provedor",width:"150px",children:[Object(o.jsx)(p.Lookup,{dataSource:l,displayExpr:"descricao",valueExpr:"id"}),Object(o.jsx)(p.RequiredRule,{})]},"provedor"),Object(o.jsx)(p.Column,{dataField:"client_id",caption:"Client ID",width:"150px",children:Object(o.jsx)(p.RequiredRule,{})},"client_id"),Object(o.jsx)(p.Column,{dataField:"client_secret",caption:"Client Secret",width:"150px",children:Object(o.jsx)(p.RequiredRule,{})},"client_secret"),Object(o.jsx)(p.Column,{dataField:"url_authorize",caption:"URL Authorize",width:"150px",children:Object(o.jsx)(p.RequiredRule,{})},"url_authorize"),Object(o.jsx)(p.Column,{dataField:"url_access_token",caption:"URL Access Token",width:"150px",children:Object(o.jsx)(p.RequiredRule,{})},"url_access_token"),Object(o.jsx)(p.Column,{dataField:"scope",caption:"Escopo",width:"150px"},"scope"),Object(o.jsx)(p.Column,{dataField:"redirect_url",caption:"URL de Redirecionamento",width:"150px",allowEditing:!1,cellRender:function(e){var t,a,i,n;return Object(o.jsxs)("div",{style:h,children:[Object(o.jsx)("div",{style:v,children:null===(t=e.row)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.redirect_url}),Object(o.jsx)(_.default,{style:{padding:"0px"},url:null===(i=e.row)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.redirect_url,children:Object(o.jsx)("span",{className:"far fa-copy"})})]})}},"redirect_url"),Object(o.jsx)(m.a,{dataField:"expires_in_datetime",caption:"Expira em",width:"150px",allowEditing:!1},"expires_in_datetime"),Object(o.jsxs)(p.Column,{type:"buttons",children:[Object(o.jsx)(p.Button,{icon:"fas fa-plug",hint:"Solicitar Acesso",visible:function(e){var t,a,o,i;return!!(null===(t=e.row)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)&&((null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.situacao)||d.desconectado)==d.desconectado},onClick:function(e){var t,o;if(!(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.id))return!1;!function(e,t){r.a.post({route:"oauth_client/obter_token_acesso/",data:{oauth_client_id:e},func_response:t})}(e.row.data.id,(function(e){window.open(e.authorization_url,"_blank"),window.alertaPopUp("Solicitar Acesso","Para a autentica\xe7\xe3o voc\xea ser\xe1 redirecionado automaticamente para o endere\xe7o do provedor.","Continuar",(function(){a&&a()}))}))}}),Object(o.jsx)(p.Button,{hint:"Atualizar Token Expirado",visible:function(e){var t,a,o,i;return!!(null===(t=e.row)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)&&((null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.situacao)||d.desconectado)==d.expirado},onClick:function(e){var t,o;if(!(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.id))return!1;!function(e,t){r.a.post({route:"oauth_client/refresh_token/",data:{oauth_client_id:e},func_response:t})}(e.row.data.id,(function(e){a&&a()}))},children:Object(o.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(o.jsx)("span",{className:"fas fa-plug text-muted"}),Object(o.jsx)("span",{className:"fas fa-sync text-primary icon-on-top"})]})}),Object(o.jsx)(p.Button,{icon:"fas fa-sign-out-alt",hint:"Desconectar",visible:function(e){var t,a,o,i;return!!(null===(t=e.row)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id)&&((null===(o=e.row)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.situacao)||d.desconectado)!==d.desconectado},onClick:function(e){var t,o;if(!(null===e||void 0===e||null===(t=e.row)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.id))return!1;window.alertaPopUp("Desconectar","Os dados de conex\xe3o ser\xe3o perdidos. Deseja continuar?","Continuar",(function(){!function(e,t){r.a.post({route:"oauth_client/desconectar/",data:{oauth_client_id:e},func_response:t})}(e.row.data.id,(function(e){a&&a()}))}),"Cancelar")}}),Object(o.jsx)(p.Button,{name:"delete"})]},"botoes")]},j=a(483),O=a.n(j);function g(e){var t=this,a=(e.html_id,Object(i.useRef)(null)),s=function(){a.current&&a.current.instance.refresh()};return Object(o.jsx)("div",{style:{width:"100%"},children:Object(o.jsxs)(n.default,{ref:a,style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(n.stateStoring)("listagem_oauth_client"),dataSource:u({}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!0,allowDeleting:!0},onEditorPreparing:function(e){var a=e.component,o=e.row&&e.row.rowIndex;if("dataRow"===e.parentType&&"provedor"===e.dataField){var i=e.editorOptions.onValueChanged;e.editorOptions.onValueChanged=function(n){i.call(t,e),e.setValue(n.value),n.value===c.microsoft&&a.cellValue(o,"scope","openid profile email offline_access https://outlook.office.com/IMAP.AccessAsUser.All https://outlook.office.com/SMTP.Send")}}},onSaving:function(e){e.cancel=!0,e.changes.length&&(e.promise=new Promise((function(t,a){!function(e){var t=e.alteracoes,a=e.func_response,o=e.func_fail;if(!t)return!1;r.a.post({route:"oauth_client/salvar/",data:{alteracoes:t},func_response:a,func_fail:o})}({alteracoes:e.changes,func_response:function(a){t(a),e.component.refresh(!0).done((function(){e.component.cancelEditData()}))},func_fail:function(e){return a(e)}})})))},children:[b({onRefresh:s}),Object(o.jsxs)(p.Toolbar,{children:[Object(o.jsx)(p.Item,{location:"after",name:"addRowButton"}),Object(o.jsx)(p.Item,{location:"after",name:"saveButton"}),Object(o.jsx)(p.Item,{location:"after",name:"revertButton"}),Object(o.jsx)(p.Item,{location:"after",locateInMenu:"auto",children:Object(o.jsx)(O.a,{icon:"refresh",onClick:s})})]})]})})}g.defaultProps={abaTitulo:"Aplicativos Conectados (OAuth Client)"}},1229:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(389),h=a(398),v=a(484),b=a(413),j=a(626),O=a(838),g=[Object(o.jsx)(v.a,{dataField:"tipo_agenda_id"},"Id"),Object(o.jsx)(b.a,{width:""},"Nome"),Object(o.jsx)(j.a,{width:180,disabled:!0,dropDownButtonTemplate:""},"Cor"),Object(o.jsx)(O.a,{dataField:"notificar_antes",caption:"Notificar Antes"},"Notificar Antes")],w=a(388),x=a(432),y=a(550),A=a(449);var C=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Tipo Agenda",text:"Adicionar",onClick:function(){window.View.load("tipo_agenda/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}))}},location:"after",name:"BtnNovoTipoAgenda",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarTipoAgenda=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e,t=[].concat(Object(i.a)(g),[Object(o.jsxs)(w.Column,{type:"buttons",children:[Object(o.jsx)(A.a,{onClick:function(e){window.View.load("tipo_agenda/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.tipo_agenda_id,window.FORMULARIO.EDITAR)}))}},"btnEditar"),Object(o.jsx)(y.a,{onClick:function(e){window.View.load("tipo_agenda/detalhes",(function(t,a){a.show(e.row.data.tipo_agenda_id,window.FORMULARIO.VISUALIZAR)}))}},"BtnVisualizar"),Object(o.jsx)(x.a,{onClick:function(e){window.View.load("tipo_agenda/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.tipo_agenda_id,window.FORMULARIO.EXCLUIR)}))}},"BtnApagar")]},"btns")]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new h.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"tipo_agenda_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){_.a.get({route:"tipo_agenda/listar/",data:Object(m.a)(Object(m.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(m.a)(Object(m.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){_.a.get({route:"tipo_agenda/listar/",data:{dx_grid:!0,tipo_agenda_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),stateStoring:Object(f.stateStoring)("listarTipoAgenda"),groupPanel:{visible:!1},children:t})})})})}}]),a}(p.a.Component);C.defaultProps={abaTitulo:"Tipo de Agenda"};t.default=C},1230:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(380),_=a(389),h=a(398),v=a(680),b=a(413),j=[Object(o.jsx)(v.a,{dataField:"codigo"},"Codigo"),Object(o.jsx)(b.a,{width:""},"nome"),Object(o.jsx)(b.a,{width:"",dataField:"agenda_local",caption:"Local da Agenda"},"agenda_local"),Object(o.jsx)(b.a,{width:"",dataField:"agenda_motivo",caption:"Motivo"},"agenda_motivo")],O=a(388),g=a(432),w=a(550),x=a(449);var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Agenda de Ativos",text:"Adicionar",onClick:function(){var t={tipo:window.FORMULARIO.NOVO,agenda_ativo_id:null};window.View.load("agenda_ativo/detalhes",(function(a,o){o.show(t),o.onclose=e.component.refresh}),window.View.ABA.SIM)}},location:"after",name:"BtnNovoAtivoAgenda",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarAgendaAtivo=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-cog",hint:"Configurar prefer\xeancias",text:"Configurar prefer\xeancias",onClick:function(){window.View.load("agenda_ativo/configuracoes",(function(e,t){t.show()}),window.View.ABA.NAO)}},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e,t=[].concat(Object(i.a)(j),[Object(o.jsxs)(O.Column,{type:"buttons",children:[Object(o.jsx)(x.a,{onClick:function(e){var t={tipo:window.FORMULARIO.EDITAR,agenda_ativo_id:e.row.data.id};window.View.load("agenda_ativo/detalhes",(function(a,o){o.onclose=e.component.refresh,o.show(t)}),window.View.ABA.SIM)}},"btnEditar"),Object(o.jsx)(w.a,{onClick:function(e){var t={tipo:window.FORMULARIO.VISUALIZAR,agenda_ativo_id:e.row.data.id};window.View.load("agenda_ativo/detalhes",(function(e,a){a.show(t)}),window.View.ABA.SIM)}},"BtnVisualizar"),Object(o.jsx)(g.a,{onClick:function(e){var t={tipo:window.FORMULARIO.EXCLUIR,agenda_ativo_id:e.row.data.id};window.View.load("agenda_ativo/detalhes",(function(a,o){o.onclose=e.component.refresh,o.show(t)}),window.View.ABA.SIM)}},"BtnApagar")]},"btns")]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new h.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){_.a.get({route:"agenda_ativo/listar/",data:Object(m.a)(Object(m.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(m.a)(Object(m.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){_.a.get({route:"agenda_ativo/listar/",data:{dx_grid:!0,id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),stateStoring:Object(f.stateStoring)("listarAgendaAtivo"),groupPanel:{visible:!1},children:t})})})})}}]),a}(p.a.Component);y.defaultProps={abaTitulo:"Agenda de Ativos"};t.default=y},1231:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(419),m=a(684),_=a(432),h=a(450),v=a(618),b=a(380),j=a(398),O=a(389),g=a(681),w=a(388),x=a(465),y=a(877);function A(e){var t=e.nome,a=e.tipo,i=(e.id,"C"===a?"info":"F"===a?"warning":"O"===a?"primary":"danger");return Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{className:"label label-"+i,children:a}),"\xa0",t]})}var C=a(452);var S=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o,n;return Object(i.a)(this,a),(o=t.call(this,e)).dataGridRef=u.a.createRef(),o.state={dataSource:(n=o.props.chamado_motivo_id,new j.default({key:"id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){O.a.get({route:"chamado_motivo/listar_entidades_tempo_atendimento/",data:Object(b.a)({dx_grid:!0,chamado_motivo_id:n},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(b.a)(Object(b.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))},o.getDataSourceCalendariosTrabalho.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.getDataGridEntidadesMotivo&&this.props.getDataGridEntidadesMotivo(this.dataGridRef)}},{key:"getDataSourceCalendariosTrabalho",value:function(){return new C.default({key:"calendario_trabalho_id",data:this.props.calendarios_trabalho_lista})}},{key:"render",value:function(){var e=this;return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsxs)(p.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},onToolbarPreparing:this.onToolbarPreparing,editing:{mode:"batch",allowUpdating:!0,useIcons:!0},children:[Object(o.jsx)(w.Column,{caption:"Entidade ID",dataField:"entidade_id",allowEditing:!1,visible:!1},"entidade_id"),Object(o.jsx)(w.Column,{caption:"Prioridade ID",dataField:"chamado_prioridade_id",allowEditing:!1,visible:!1},"chamado_prioridade_id"),Object(o.jsx)(w.Column,{caption:"Resolu\xe7\xe3o Calend\xe1rio Trabalho ID",dataField:"resolucao_calendario_trabalho_id",allowEditing:!1,visible:!1},"resolucao_calendario_trabalho_id"),Object(o.jsx)(w.Column,{caption:"Previs\xe3o Retorno Calend\xe1rio Trabalho ID",dataField:"previsao_retorno_calendario_trabalho_id",allowEditing:!1,visible:!1},"previsao_retorno_calendario_trabalho_id"),Object(o.jsx)(w.Column,{caption:"Tipo",dataField:"entidade_tipo",allowEditing:!1,width:80,visible:!1},"entidade_tipo"),Object(o.jsx)(w.Column,{caption:"Entidade",dataField:"entidade_nome",cellRender:function(e){return Object(o.jsx)(A,{nome:e.data.entidade_nome,tipo:e.data.entidade_tipo,id:e.data.entidade_id})},editCellRender:function(e){return Object(o.jsx)(f.default,{dataSource:Object(v.a)(),valueExpr:"id",aoAlterar:function(t,a){e.component.cellValue(e.rowIndex,"entidade_id",t.id),e.component.cellValue(e.rowIndex,"entidade_tipo",a.tipo),e.component.cellValue(e.rowIndex,"entidade_nome",a.nome_fantasia?a.nome_fantasia:a.razao_social),e.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome Fantasia",dataField:"nome_fantasia"},{caption:"Raz\xe3o Social",dataField:"razao_social"},{catpion:"Tipo",datafield:"tipo",calculateCellValue:function(e){switch(e.tipo){case"C":return"Cliente";case"O":return"Organiza\xe7\xe3o";case"F":return"Fornecedor";case"E":return"Empresa"}}}]})}},"entidade_nome"),Object(o.jsx)(w.Column,{caption:"Prioridade",dataField:"prioridade_nome",editCellRender:function(e){return Object(o.jsx)(f.default,{dataSource:Object(g.a)({listar_opcao_todas:!0}),valueExpr:"chamado_prioridade_id",aoAlterar:function(t,a){e.component.cellValue(e.rowIndex,"chamado_prioridade_id",t),e.component.cellValue(e.rowIndex,"prioridade_nome",a.nome),e.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome",dataField:"nome"}]})}},"prioridade_nome"),this.props.utiliza_resolucao_atendimento&&Object(o.jsx)(w.Column,{caption:"Horas Resolu\xe7\xe3o",dataField:"horas_resolucao",calculateCellValue:function(e){return window.format_time(e.horas_resolucao)},allowFiltering:!1,allowHeaderFiltering:!0,editCellRender:function(e){return Object(o.jsx)(x.TextBox,{mask:Object(m.a)("000:00"),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:function(t){e.component.cellValue(e.rowIndex,e.column.dataField,t.value)},stylingMode:"filled",value:window.format_time(e.value)})}},"horas_resolucao"),this.props.utiliza_resolucao_atendimento&&Object(o.jsx)(w.Column,{caption:"Resolu\xe7\xe3o Calend\xe1rio de Trabalho",dataField:"resolucao_calendario_trabalho_nome",editCellRender:function(t){return Object(o.jsx)(f.default,{dataSource:e.getDataSourceCalendariosTrabalho(),valueExpr:"calendario_trabalho_id",displayExpr:function(e){return(null===e||void 0===e?void 0:e.nome)||""},aoAlterar:function(e,a){t.component.cellValue(t.rowIndex,"resolucao_calendario_trabalho_id",e),t.component.cellValue(t.rowIndex,"resolucao_calendario_trabalho_nome",a?a.nome:null),t.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome",dataField:"nome"}],showClearButton:!0,selecionado:t.data.resolucao_calendario_trabalho_id})}},"resolucao_calendario_trabalho_nome"),parseInt(this.props.tipo_tempo_previsao)===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&Object(o.jsx)(w.Column,{caption:"Horas Previs\xe3o Retorno",dataField:"horas_previsao_retorno",calculateCellValue:function(e){return window.format_time(e.horas_previsao_retorno)},allowFiltering:!1,allowHeaderFiltering:!0,editCellRender:function(e){return Object(o.jsx)(x.TextBox,{mask:Object(m.a)("000:00"),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:function(t){e.component.cellValue(e.rowIndex,e.column.dataField,t.value)},stylingMode:"filled",value:window.format_time(e.value)})}},"horas_previsao_retorno"),parseInt(this.props.tipo_tempo_previsao)===window.CHAMADO_MOTIVO_TEMPO.DIAS_CORRIDOS&&Object(o.jsx)(w.Column,{caption:"Dias Previs\xe3o Retorno",dataField:"dias_previsao_retorno",allowFiltering:!1,allowHeaderFiltering:!0,editCellRender:function(e){return Object(o.jsx)(y.NumberBox,{onValueChanged:function(t){e.component.cellValue(e.rowIndex,e.column.dataField,t.value)},stylingMode:"filled",value:e.value})}},"dias_previsao_retorno"),parseInt(this.props.tipo_tempo_previsao)===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&Object(o.jsx)(w.Column,{caption:"Previs\xe3o Retorno Calend\xe1rio de Trabalho",dataField:"previsao_retorno_calendario_trabalho_nome",editCellRender:function(t){return Object(o.jsx)(f.default,{dataSource:e.getDataSourceCalendariosTrabalho(),valueExpr:"calendario_trabalho_id",displayExpr:function(e){return(null===e||void 0===e?void 0:e.nome)||""},aoAlterar:function(e,a){t.component.cellValue(t.rowIndex,"previsao_retorno_calendario_trabalho_id",e),t.component.cellValue(t.rowIndex,"previsao_retorno_calendario_trabalho_nome",a?a.nome:null),t.component.refresh()},dataGridWidth:520,columns:[{caption:"Nome",dataField:"nome"}],showClearButton:!0,selecionado:t.data.previsao_retorno_calendario_trabalho_id})}},"previsao_retorno_calendario_trabalho_nome"),Object(o.jsxs)(w.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(o.jsx)(_.a,{visible:function(e){return!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(h.a,{visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"botoes")]},"datagrid_entidades")})}},{key:"onToolbarPreparing",value:function(e){var t=[{template:'<label style="left: -10px; position: relative;">Controle de Tempo de Atendimento por Entidade</label>',location:"before",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Entidade",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnAddEntidade",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"==o.name&&(o.options.visible=!1)}}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(u.a.Component);S.defaultProps={chamado_motivo_id:null,utiliza_resolucao_atendimento:!1,tipo_tempo_previsao:null,calendarios_trabalho_lista:null}},1232:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(380),f=a(389),m=a(398),_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new m.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},load:function(o){var i=window.loadOptionsToActionParams(o);return new Promise((function(o,n){f.a.get({route:"entidade_historico/listar_historico_cadastral/",data:Object(p.a)({entidade_tipo:e,entidade_id:t,data_hora:a},i),func_response:function(e){var t=window.createLoadExtra(e);o(Object(p.a)(Object(p.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},h=a(388),v=a(413),b=a(510),j=[Object(o.jsx)(v.a,{dataField:"elemento_nome",caption:"Campo"},"elemento_nome"),Object(o.jsx)(b.a,{caption:"Antes",dataField:"valor_anterior",width:150},"valor_anterior"),Object(o.jsx)(b.a,{caption:"Depois",dataField:"valor_atualizado",width:150},"valor_atualizado"),Object(o.jsx)(v.a,{dataField:"grupo_nome",caption:"Grupo"},"grupo_nome"),Object(o.jsx)(v.a,{dataField:"tabela_nome",caption:"Tabela"},"tabela_nome"),Object(o.jsx)(h.Column,{dataField:"tabela_linha",caption:"Linha",width:60},"tabela_linha"),Object(o.jsx)(v.a,{dataField:"id_elemento",caption:"ID Elemento"},"id_elemento"),Object(o.jsx)(v.a,{dataField:"usuario_nome",caption:"Usu\xe1rio"},"usuario_nome")];var O=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(u.default,{elementAttr:{style:"max-height: 300px"},dataSource:_(this.props.entidade_tipo,this.props.entidade_id,this.props.data_hora),groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},filterRow:{visible:!1},children:j})})}}]),a}(d.a.Component);O.defaultProps={entidade_tipo:null,entidade_id:null,data_hora:null}},1233:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(530),p=a.n(u),f=a(380),m=a(391),_=a(385),h=a(401),v=a(443),b=a(943),j=a(388),O=a(449),g=a(408),w=a(105),x=a(448),y=a(398),A=a(898);var C=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;Object(i.a)(this,a),(o=t.call(this,e)).getKey=o.getKey.bind(Object(_.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(_.a)(o)),o.onContextMenuPreparing=o.onContextMenuPreparing.bind(Object(_.a)(o)),o.stateStoring=o.stateStoring.bind(Object(_.a)(o)),o.handleSelectBoxChange=o.handleSelectBoxChange.bind(Object(_.a)(o)),o.onContentReady=o.onContentReady.bind(Object(_.a)(o)),o.onRowClick=o.onRowClick.bind(Object(_.a)(o)),o.dataGridRef=d.a.createRef(),o.keyCount=0,o.parametrosUsuario=w.a.get_parametro_usuario("listagem_chamados"),o.gridStateStoring=o.stateStoring(),o.filtro_tipo_listagem="string"===typeof o.props.filtro_tipo_listagem||"number"===typeof o.props.filtro_tipo_listagem?o.props.filtro_tipo_listagem:null;var n=window.CHAMADO_FILTRO.MEUS_CHAMADOS;return o.parametrosUsuario&&"undefined"!==typeof o.parametrosUsuario.tipoListagem&&null!==o.parametrosUsuario.tipoListagem&&(n=o.parametrosUsuario.tipoListagem),null!==o.filtro_tipo_listagem&&(n=o.filtro_tipo_listagem),o.state={dataSource:Object(v.a)(n,null,!0,-1),tipoListagem:n},o}return Object(n.a)(a,[{key:"getKey",value:function(){return this.keyCount++}},{key:"render",value:function(){var e=this,t=[].concat(Object(m.a)(Object(b.b)(this.props.html_id)),[Object(o.jsx)(j.Column,{type:"buttons",children:Object(o.jsx)(O.a,{icon:"fa fa-comments",onClick:function(t){return e.handleAcessarChamado(t,t.row.data.id)}},"btn_acessar_chamado")},"coluna_botoes")]);return Object(o.jsx)("div",{children:Object(o.jsx)(h.default,{ref:this.dataGridRef,style:{height:"calc(100vh - 80px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,onContextMenuPreparing:this.onContextMenuPreparing,onContentReady:this.onContentReady,stateStoring:this.gridStateStoring,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},onRowClick:this.onRowClick,onRowPrepared:function(e){if("data"===e.rowType){var t=e.rowElement;e.data.situacao==window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO&&t.css("font-weight","bold")}},exportCustomizeExcelCell:function(e){var t=e.gridCell;if(t&&("data"===t.rowType&&["sla_tempo_reacao","sla_tempo_resolucao","sla_tempo_total","sla_tempo_solicitante","sla_tempo_encerrado","sla_tempo_reacao_real","sla_tempo_resolucao_real","sla_tempo_total_real","sla_tempo_solicitante_real"].includes(t.column.dataField)&&(t.column.dataType="number",e.numberFormat="[h]:mm",e.value&&window.fn_converter_horas_para_segundos(e.value)>0))){var a=new Date("1900-01-01 00:00:00");a.setSeconds(window.fn_converter_horas_para_segundos(e.value)-86400),e.value=a}},children:t},this.getKey())})}},{key:"stateStoring",value:function(){return{enabled:!0,type:"custom",customLoad:function(){return w.a.get_parametro_usuario("listagem_chamados").datagrid},customSave:function(e){w.a.set_parametro_usuario("listagem_chamados",{datagrid:e})}}}},{key:"handleSelectBoxChange",value:function(e){var t=this;if(this.dataGridRef&&this.dataGridRef.current&&this.dataGridRef.current._instance&&e.selectedItem&&+e.selectedItem.id!==+this.state.tipoListagem){var a=function(a){e.component.option("value",a),t.setState({dataSource:Object(v.a)(a,null,!0,-1),tipoListagem:a},(function(){+t.state.tipoListagem!==window.CHAMADO_FILTRO.TODOS&&w.a.set_parametro_usuario("listagem_chamados",Object(f.a)(Object(f.a)({},t.parametrosUsuario),{},{tipoListagem:t.state.tipoListagem}))}))},o=this.dataGridRef.current._instance;o._resetPageIndex=!0,o._clearSelectedRows=!0;var i=null;switch(e.selectedItem.id){case 1:i=window.CHAMADO_FILTRO.MEUS_CHAMADOS,a(i);break;case 2:i=window.CHAMADO_FILTRO.EM_ABERTO,a(i);break;case 3:i=window.CHAMADO_FILTRO.ENCERRADOS,a(i);break;case 8:i=window.CHAMADO_FILTRO.MINHAS_SOLICITACOES_EM_ABERTO,a(i);break;case 9:i=window.CHAMADO_FILTRO.MINHAS_SOLICITACOES_ENCERRADAS,a(i);break;case 10:Object(x.confirm)("Listar todos os Chamados poder\xe1 levar um tempo. Deseja continuar?","Aten\xe7\xe3o").then((function(e){e?(i=window.CHAMADO_FILTRO.TODOS,a(i)):(i=window.CHAMADO_FILTRO.MEUS_CHAMADOS,a(i))}));break;case 11:i=window.CHAMADO_FILTRO.MEUS_RASCUNHOS,a(i);break;case 12:i=window.CHAMADO_FILTRO.CHAMADOS_ACOMPANHAMENTO,a(i);break;default:i=window.CHAMADO_FILTRO.MEUS_CHAMADOS,a(i)}}}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{id:1,descricao:"Minhas P\xeandencias",categoria:"Meus"},{id:2,descricao:"Chamados em Aberto",categoria:"Geral"},{id:3,descricao:"Chamados Encerrados",categoria:"Geral"},{id:8,descricao:"Meus Chamados em Aberto",categoria:"Meus"},{id:9,descricao:"Meus Chamados Encerrados",categoria:"Meus"},{id:10,descricao:"Todos Chamados",categoria:"Geral"},{id:12,descricao:"Chamados com meu e-mail de acompanhamento",categoria:"Meus",visible:!0===!!w.a.sessao.dados.email},{id:11,descricao:"Meus Rascunhos",categoria:"Meus"}],o=[{widget:"dxTextBox",location:"after",locateInMenu:"auto",options:{width:"140px",placeholder:"N\xba Chamado",buttons:[{location:"before",name:"pesquisar",options:{icon:"search",disabled:!0}}],onEnterKey:function(e){var t,a=e.component.option("value");if(null!==a&&""!==a.trim())for(var o=a.replace(/\r\n/g,"\r").replace(/\n/g,"\r").replace(/\r/g," ").split(" "),i=0;i<o.length;i++)""!==(t=o[i]).trim()&&g.a.loadReact(A.default,{chamadoId:t.trim()},(function(){}),g.a.ABA.MULTIPLAS)}}},{widget:"dxSelectBox",locateInMenu:"auto",options:{dataSource:new y.default({store:a,group:"categoria"}),width:"250px",placeholder:"Filtrar por",valueExpr:"id",displayExpr:"descricao",value:this.state.tipoListagem,grouped:!0,onSelectionChanged:this.handleSelectBoxChange},location:"after"},{widget:"dxButton",options:{icon:"plus",hint:"Novo Chamado",text:"Novo Chamado",onClick:function(){setTimeout((function(){return g.a.loadReact(A.default,{},(function(e,t){}),g.a.ABA.MULTIPLAS)}))}},showText:"always",location:"after",name:"BtnNovoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){g.a.load("chamado/configuracoes",(function(e,t){t.show()}))},visible:w.a.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-tasks",hint:"Reclassificar Chamados Selecionados",text:"Reclassificar Chamados Selecionados",onClick:function(){if(t.dataGridRef&&t.dataGridRef.current){var a=t.dataGridRef.current._instance.getSelectedRowsData();new y.default({store:a,pageSize:0}).load().done((function(a){t.handleReclassificarChamado(e,a)}))}},visible:w.a.verifica_permissao(w.a.sessao.dados.empresa_filial_id,"reclassificar_chamado")},showText:"inMenu",location:"after",name:"BtnReclassificarSelecionados",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(o,e.toolbarOptions.items)}},{key:"onContextMenuPreparing",value:function(e){var t=this;"header"===e.target&&Array.isArray(e.items)&&e.items.push(Object(h.itemRestaurarEstadoDasColunas)(e));var a=e.component.getSelectedRowsData();new y.default({store:a,pageSize:0}).load().done((function(a){e.row&&"data"===e.row.rowType&&(e.items=[{text:"Visualizar chamado",onItemClick:function(){t.handleAcessarChamado(e,e.row.data.id)}},{text:"Reclassificar chamado",visible:w.a.verifica_permissao(w.a.sessao.dados.empresa_filial_id,"reclassificar_chamado"),onItemClick:function(){t.handleReclassificarChamado(e,[e.row.data])}},{text:"Visualizar chamados selecionados",visible:a.length,onItemClick:function(){for(var o=0;o<a.length;o++){var i=a[o];t.handleAcessarChamado(e,i.id)}}},{text:"Reclassificar chamados selecionados",visible:w.a.verifica_permissao(w.a.sessao.dados.empresa_filial_id,"reclassificar_chamado")&&a.length,onItemClick:function(){t.handleReclassificarChamado(e,a)}}])}))}},{key:"onContentReady",value:function(e){e.component._clearState&&(e.component.state({}),e.component._clearState=!1),e.component._clearSelectedRows&&(e.component.clearSelection(),e.component._clearSelectedRows=!1),e.component._resetPageIndex&&(e.component.pageIndex(0),e.component._resetPageIndex=!1),setTimeout((function(){return e.component.updateDimensions()}),100)}},{key:"handleAcessarChamado",value:function(e,t){g.a.loadReact(A.default,{chamadoId:t,onClose:e.component.refresh},(function(e,t){}),g.a.ABA.MULTIPLAS)}},{key:"handleReclassificarChamado",value:function(e,t){if(t.length){for(var a=!0,o=null,i=0;i<t.length;i++){var n=t[i];o&&+o!==+n.tipo_gestao_tempo?a=!1:o=+n.tipo_gestao_tempo}a?g.a.load("chamado/reprogramar",(function(a,i){i.onclose=function(){e.component._clearSelectedRows=!0,e.component.refresh()},i.show(t,o)})):Object(x.alert)("Falha ao reclassificar!<br><br>N\xe3o \xe9 poss\xedvel reclassificar chamados de tipo de previs\xe3o de retorno diferentes (horas e dias)","Aviso")}else Object(x.alert)("Nenhum chamado selecionado para reclassifica\xe7\xe3o","Aviso")}},{key:"onRowClick",value:function(e){var t=this;window.onDoubleClick(e,(function(){t.handleAcessarChamado(e,e.data.id)}))}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(d.a.Component);var S=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"componentDidMount",value:function(){if(this.props.html_id&&w.a.PE.Chamado_Listagem_show_antes)try{w.a.PE.Chamado_Listagem_show_antes(document.getElementById(this.props.html_id))}catch(e){console.log(e)}}},{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)(p.a,{swipeEnabled:!1,children:Object(o.jsx)(u.Item,{title:"Chamados",icon:"comment",children:Object(o.jsx)(C,{html_id:this.props.html_id,filtro_tipo_listagem:this.props.filtro_tipo_listagem})})})})}}]),a}(d.a.Component);S.defaultProps={abaTitulo:"Chamados"}},1234:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(105),u=a(389),p=a(408),f=a(376),m=a.n(f),_=a(454),h=a.n(_),v=a(388),b=a.n(v),j=a(576),O=a(602),g=[{id:"amarelo",nome:"Amarelo",corPrimaria:"#debb00"},{id:"azul_escuro",nome:"Azul Escuro",corPrimaria:"#002245"},{id:"azul_claro",nome:"Azul Claro",corPrimaria:"#3575e8"},{id:"azul",nome:"Azul",corPrimaria:"#030394"},{id:"cinza",nome:"Cinza",corPrimaria:"#474747"},{id:"laranja_escuro",nome:"Laranja Escuro",corPrimaria:"#944e03"},{id:"laranja",nome:"Laranja",corPrimaria:"#de6f00"},{id:"preto",nome:"Preto",corPrimaria:"#000"},{id:"roxo",nome:"Roxo",corPrimaria:"#4e0394"},{id:"roxo_escuro",nome:"Roxo Escuro",corPrimaria:"#270843"},{id:"verde_claro",nome:"Verde Claro",corPrimaria:"#289403"},{id:"verde_escuro",nome:"Verde Escuro",corPrimaria:"#174308"},{id:"vermelho",nome:"Vermelho",corPrimaria:"#be0101"},{id:"vermelho_escuro",nome:"Vermelho Escuro",corPrimaria:"#6b0606"},{id:"rosa",nome:"Rosa",corPrimaria:"#ff31f5"}];var w=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={temaSelecionadoId:"",temaSelecionadoNome:"",temaSelecionadoCorPrimaria:"",loaderBloqueio:!1,menuLateral:!1,buscaAutomatica:!1},o.tema_inicial="preto",o.menuLateralChanged=o.menuLateralChanged.bind(Object(r.a)(o)),o.loaderBloqueioChanged=o.loaderBloqueioChanged.bind(Object(r.a)(o)),o.buscaAutomaticaChanged=o.buscaAutomaticaChanged.bind(Object(r.a)(o)),o.onSelectionChanged=o.onSelectionChanged.bind(Object(r.a)(o)),o.obterParametros=o.obterParametros.bind(Object(r.a)(o)),o.salvar=o.salvar.bind(Object(r.a)(o)),o.obterParametros(),o}return Object(n.a)(a,[{key:"render",value:function(){var e=this,t={icon:"fas fa-save",text:"Salvar",onClick:function(){e.salvar()}},a={icon:"fas fa-times",text:"Cancelar",onClick:function(){d.a.aplicar_tema(e.tema_inicial),p.a.unload(e.props.html_id)}};return Object(o.jsx)(m.a.Fragment,{children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-6",children:Object(o.jsx)("div",{className:"panel panel-default",children:Object(o.jsxs)(b.a,{dataSource:g,selection:{mode:"single"},selectedRowKeys:[this.state.temaSelecionadoId],showBorders:!0,hoverStateEnabled:!0,keyExpr:"id",onSelectionChanged:this.onSelectionChanged,rowAlternationEnabled:!1,children:[Object(o.jsx)(v.Column,{dataField:"nome",caption:"Nome"}),Object(o.jsx)(v.Column,{dataField:"corPrimaria",caption:"Cor",cellRender:function(t){return e.renderCorPrimaria(t.data.corPrimaria)}})]})})}),Object(o.jsx)("div",{className:"col-md-6",children:Object(o.jsxs)("div",{className:"panel panel-default",children:[Object(o.jsx)("div",{className:"panel-heading",children:Object(o.jsx)("h3",{className:"panel-title",children:"Configura\xe7\xf5es"})}),Object(o.jsxs)("div",{className:"panel-body",children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-12",children:["Tema: ",this.state.temaSelecionadoNome]}),Object(o.jsxs)("div",{className:"col-md-12",style:{display:"inline-flex"},children:["Cor prim\xe1ria:\xa0 ",this.renderCorPrimaria(this.state.temaSelecionadoCorPrimaria)]})]}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(j.CheckBox,{value:this.state.menuLateral,onValueChanged:this.menuLateralChanged,text:"Menu Lateral"})})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(j.CheckBox,{value:this.state.loaderBloqueio,onValueChanged:this.loaderBloqueioChanged,text:"Loader com bloqueio de tela"})})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(j.CheckBox,{value:this.state.buscaAutomatica,onValueChanged:this.buscaAutomaticaChanged,text:"Busca autom\xe1tica no combobox"})})})]}),Object(o.jsx)("div",{className:"panel-footer",children:Object(o.jsxs)(h.a,{style:{backgroundColor:"transparent"},children:[Object(o.jsx)(_.Item,{location:"before",widget:"dxButton",options:t}),Object(o.jsx)(_.Item,{location:"before",widget:"dxButton",options:a})]})})]})})]})})}},{key:"renderCorPrimaria",value:function(e){return Object(o.jsx)("div",{style:{width:"100px",height:"100%",backgroundColor:e},children:"\xa0"})}},{key:"obterParametros",value:function(){var e=this;u.a.get("tema/get_parametros/",null,(function(t){e.tema_inicial=t.tema,e.setState({temaSelecionadoId:t.tema,temaSelecionadoNome:g.find((function(e){return e.id===t.tema})).nome,temaSelecionadoCorPrimaria:g.find((function(e){return e.id===t.tema})).corPrimaria,loaderBloqueio:"S"===t.loader_bloqueio,menuLateral:"S"===t.menu_lateral,buscaAutomatica:"S"===t.busca_automatica})}))}},{key:"salvar",value:function(){var e=this;u.a.post("tema/salvar",{tema:this.state.temaSelecionadoId,loader_bloqueio:this.state.loaderBloqueio,menu_lateral:this.state.menuLateral,busca_automatica:this.state.buscaAutomatica},(function(t){Object(O.default)("Tema alterado com sucesso."),p.a.unload(e.props.html_id)}))}},{key:"menuLateralChanged",value:function(e){this.setState({menuLateral:e.value})}},{key:"loaderBloqueioChanged",value:function(e){this.setState({loaderBloqueio:e.value})}},{key:"buscaAutomaticaChanged",value:function(e){this.setState({buscaAutomatica:e.value})}},{key:"onSelectionChanged",value:function(e){var t=e.selectedRowsData;if(!t||0===t.length)return!1;var a=t[0];if(!a)return!1;d.a.aplicar_tema(a.id),this.setState({temaSelecionadoId:a.id,temaSelecionadoNome:a.nome,temaSelecionadoCorPrimaria:a.corPrimaria})}}]),a}(m.a.Component);w.defaultProps={abaTitulo:"Temas"};t.default=w},1235:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var o=a(372),i=a(423),n=a(376),r=a(389),s=a(105),c=a(365),l=a(368),d=a(369),u=a(367),p=a(624);var f=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return a}(a.n(p).a);f.defaultProps={allowSortingBySummary:!1,allowSorting:!1,allowFiltering:!0,showBorders:!0,showColumnTotals:!1,showColumnGrandTotals:!1,showRowTotals:!1,showRowGrandTotals:!1,allowExpandAll:!0};var m=a(625),_=a.n(m),h=a(1122),v=a(1123),b=a(914),j=a(669),O=a(508),g=a.n(O),w=a(483),x=a(1124),y=a.n(x);function A(e){s.a.titulo_aba(e.html_id,"Aloca\xe7\xe3o de executores");var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],l=a[1],d=Object(n.useState)(null),u=Object(i.a)(d,2),O=u[0],x=u[1],A=Object(n.useState)(null),C=Object(i.a)(A,2),S=C[0],R=C[1],I=Object(n.useState)(null),P=Object(i.a)(I,2),E=P[0],T=P[1],D=Object(n.useState)(null),k=Object(i.a)(D,2),M=k[0],N=k[1];function F(){r.a.get({route:"/atividade_projeto/relatorio_alocacao_executores/",data:{data_inicio:window.formatDate(E,!0),data_fim:window.formatDate(M,!0)},func_response:function(e){for(var t=0;t<e.length;t++)e[t].dia_alocado=new Date("".concat(e[t].dia_alocado," 23:59:59"));l(e)},func_fail:function(e){}})}Object(n.useEffect)((function(){!function(){var e=new Date,t=e.getDate()-e.getDay(),a=t+6,o=new Date(new Date(e).setDate(t)),i=new Date(new Date(e).setDate(a));T(o),N(i)}()}),[]),Object(n.useEffect)((function(){E&&M&&F()}),[E,M]),Object(n.useEffect)((function(){O&&S&&(O.bindChart(S,{dataFieldsDisplayMode:"splitPanes",alternateDataFields:!1}),setTimeout((function(){S.refresh(),O._$element.css("height","calc(100vh - 332px)")})))}),[O,S]);var L=new j.default({fields:[{caption:"Executor",dataField:"usuario_executor_nome",area:"row",sortBySummaryField:"HorasAlocadas",width:200,isMeasure:!1},{caption:"Projeto",dataField:"projeto_nome",area:"row"},{caption:"C\xf3digo do Projeto",dataField:"projeto_codigo",area:"row"},{caption:"Horas Alocadas",dataField:"horas_alocadas",dataType:"number",summaryType:"sum",area:"data"},{caption:"Dia Alocado",dataField:"dia_alocado",dataType:"date",area:"column",isMeasure:!1},{groupName:"dia_alocado",groupInterval:"day",visible:!0}],store:c});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:y.a.filtrosData,children:[Object(o.jsx)(g.a,{applyValueMode:"useButtons",value:E,min:new Date(1900,1,1),max:M,onValueChanged:function(e){return T(e.value)}}),Object(o.jsx)(g.a,{applyValueMode:"useButtons",value:M,min:E,max:new Date(2222,12,31),onValueChanged:function(e){return N(e.value)}}),Object(o.jsx)(w.Button,{icon:"refresh",style:{cursor:"pointer"},onClick:function(){return F()}})]}),Object(o.jsx)("div",{className:y.a.pivotChart,children:Object(o.jsxs)(_.a,{ref:function(e){return R(e?e.instance:null)},children:[Object(o.jsx)(m.Size,{height:200}),Object(o.jsx)(m.Tooltip,{enabled:!0}),Object(o.jsx)(m.CommonSeriesSettings,{type:"bar"}),Object(o.jsx)(m.AdaptiveLayout,{width:450})]})}),Object(o.jsxs)(f,{id:"pivotgrid_alocao_executores",dataSource:L,onExporting:function(e){var t=new h.Workbook,a=t.addWorksheet("Alocacao_Executores");Object(b.exportPivotGrid)({component:e.component,worksheet:a}).then((function(){t.xlsx.writeBuffer().then((function(e){Object(v.saveAs)(new Blob([e],{type:"application/octet-stream"}),"Alocacao_Executores_".concat(window.formatDate(new Date,!0),".xlsx"))}))})),e.cancel=!0},ref:function(e){return x(e?e.instance:null)},children:[Object(o.jsx)(p.FieldChooser,{enabled:!0}),Object(o.jsx)(p.FieldPanel,{showColumnFields:!1,showDataFields:!1,showFilterFields:!1,showRowFields:!0,allowFieldDragging:!0,visible:!0}),Object(o.jsx)(p.Export,{enabled:!0}),Object(o.jsx)(p.StateStoring,{enabled:!0,type:"custom",customLoad:function(){return s.a.get_parametro_usuario("alocacao_executores_pivotgrid")},customSave:function(e){return s.a.set_parametro_usuario("alocacao_executores_pivotgrid",e)}})]})]})}},1236:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(380),f=a(389),m=a(398),_={dataField:"logo_id",caption:"Logo",cellTemplate:function(e,t){var a=t.data.logo_id;if(a){var o=window.WS_URI+"documento/midia/?documento_id="+a+"&token_midia="+window.App.sessao.token_midia;e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}else o="assets/img/img.svg",e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}};var h={dataField:"codigo",caption:"C\xf3digo"},v={dataField:"unidade",caption:"Unidade"},b={dataField:"nome_fantasia",caption:"Nome Fantasia"},j={dataField:"razao_social",caption:"Raz\xe3o Social"},O={dataField:"telefone1",caption:"Telefone 1"},g={dataField:"telefone2",caption:"Telefone 2"},w={dataField:"telefone3",caption:"Telefone 3"},x={dataField:"telefone4",caption:"Telefone 4"},y={enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarFornecedores")},customSave:function(e){window.App.set_parametro_usuario("listarFornecedores",e)}};var A=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={fornecedorLogo:"",fornecedorCodigo:"",fornecedorUnidade:"",fornecedorNomeFantasia:"",fornecedorRazaoSocial:"",fornecedorTelefone1:"",fornecedorTelefone2:"",fornecedorTelefone3:"",fornecedorTelefone4:""},o}return Object(n.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo fornecedor",text:"Novo fornecedor",onClick:function(){window.View.load("fornecedor/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")},location:"after",name:"BtnNovoFornecedor",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de fornecedores",text:"Recarregar fornecedores",onClick:function(){this.listarFornecedores=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("fornecedor/configuracoes",(function(e,t){t.onclose=onclose,t.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(u.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new m.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"fornecedor_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){f.a.get({route:"fornecedor/listar/",data:Object(p.a)(Object(p.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(p.a)(Object(p.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){f.a.get({route:"fornecedor/listar/",data:{dx_grid:!0,fornecedor_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),stateStoring:y,columns:[_,h,v,b,j,O,g,w,x,{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.fornecedor_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")},{hint:"Criar Unidade",icon:"fas fa-plus",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.fornecedor_id,window.FORMULARIO.CRIAR_UNIDADE)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")},{hint:"Hist\xf3rico Entidade",icon:"fas fa-file",cssClass:"icon_black",onClick:function(e){window.View.load("entidade_historico/listar",(function(t,a){a.show(e.row.data.fornecedor_id,"F")}),window.View.ABA.MULTIPLAS)}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(t,a){a.show(e.row.data.fornecedor_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:function(e){window.View.load("fornecedor/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.fornecedor_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"fornecedor")}]}]})})})});var e}}]),a}(d.a.Component);A.defaultProps={abaTitulo:"Fornecedores"};t.default=A},1237:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(380),f=a(389),m=a(398),_={dataField:"codigo",caption:"C\xf3digo"},h={dataField:"unidade",caption:"Unidade"},v={dataField:"nome_fantasia",caption:"Nome Fantasia"},b={dataField:"razao_social",caption:"Raz\xe3o Social"},j={dataField:"telefone1",caption:"Telefone 1"},O={dataField:"telefone2",caption:"Telefone 2"},g={dataField:"telefone3",caption:"Telefone 3"},w={dataField:"telefone4",caption:"Telefone 4"},x=function(){var e="icon_black";return{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.prospect_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},{hint:"Criar Unidade",icon:"fas fa-plus",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.prospect_id,window.FORMULARIO.CRIAR_UNIDADE)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},{hint:"Efetivar Organiza\xe7\xe3o",icon:"fas fa-check",cssClass:e,visible:function(e){return"N"===e.row.data.efetivado&&window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},onClick:function(e){var t=new window.Validation;t.add(new window.ValidationMessage(window.Validation.CODES.ERR_FIELD,"Deseja efetivar "+e.row.data.nome_fantasia)),window.alert_modal("Organiza\xe7\xe3o",t,"Efetivar",(function(){f.a.post("prospect/efetivar",{prospect_id:e.row.data.prospect_id},(function(t){window.alert_saved(t.nome_fantasia+" efetivado com sucesso"),e.component.refresh()}))}),!0)}},{hint:"Hist\xf3rico Entidade",icon:"fas fa-file",cssClass:e,onClick:function(e){window.View.load("entidade_historico/listar",(function(t,a){a.show(e.row.data.prospect_id,"O")}),window.View.ABA.MULTIPLAS)}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(t,a){a.show(e.row.data.prospect_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:e,onClick:function(e){window.View.load("prospect/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.prospect_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")}]}},y={stateStoring:{enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarProspects")},customSave:function(e){window.App.set_parametro_usuario("listarProspects",e)}},export:{enabled:!0,fileName:"Relat\xf3rio de usu\xe1rios "+window.agora(),allowExportSelectedData:!0}};var A=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={prospectCodigo:"",prospectUnidade:"",prospectNomeFantasia:"",prospectRazaoSocial:"",prospectTelefone1:"",prospectTelefone2:"",prospectTelefone3:"",prospectTelefone4:""},o}return Object(n.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Nova organiza\xe7\xe3o",text:"Nova organiza\xe7\xe3o",onClick:function(){window.View.load("prospect/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},location:"after",name:"BtnNovaOrganizacao",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de organiza\xe7\xf5es",text:"Recarregar organiza\xe7\xf5es",onClick:function(){this.listarProspects=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-import",hint:"Importar",onClick:function(){window.View.load("prospect/importar",(function(e,t){t.onclose=onclose,t.show()}))},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"prospect")},location:"after",name:"BtnImportar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("prospect/configuracoes",(function(e,t){t.onclose=onclose,t.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(u.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new m.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"prospect_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){f.a.get({route:"prospect/listar/",data:Object(p.a)(Object(p.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(p.a)(Object(p.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){f.a.get({route:"prospect/listar/",data:{dx_grid:!0,prospect_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),dataGridConfig:y,columns:[_,h,v,b,j,O,g,w,x()]})})})});var e}}]),a}(d.a.Component);A.defaultProps={abaTitulo:"Organiza\xe7\xf5es"};t.default=A},1238:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(380),m=a(389),_=a(398),h={dataField:"logo_id",caption:"Logo",cellTemplate:function(e,t){var a=t.data.logo_id;if(a){var o=window.WS_URI+"documento/midia/?documento_id="+a+"&token_midia="+window.App.sessao.token_midia;e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}else o="assets/img/img.svg",e.html('<div style="text-align: center; margin-top: 3px;"><img style="border-radius: 50%; height: 50px; width: 50px" class="imagem_responsavel" src="'+o+'"></div>')}};var v={dataField:"codigo",caption:"C\xf3digo",width:200},b={dataField:"unidade",caption:"Unidade",width:200},j={dataField:"nome_fantasia",caption:"Nome Fantasia",width:200},O={dataField:"razao_social",caption:"Raz\xe3o Social",width:200},g={dataField:"telefone1",caption:"Telefone 1",width:200},w={dataField:"telefone2",caption:"Telefone 2",width:200},x={dataField:"telefone3",caption:"Telefone 3",width:200},y={dataField:"telefone4",caption:"Telefone 4",width:200},A={dataField:"cep",caption:"CEP",visible:!1,width:200},C={dataField:"endereco",caption:"Endere\xe7o",visible:!1,width:200},S={dataField:"numero",caption:"N\xfamero",visible:!1,width:200},R={dataField:"complemento",caption:"Complemento",visible:!1,width:200},I={dataField:"bairro",caption:"Bairro",visible:!1,width:200},P={dataField:"municipio",caption:"Munic\xedpio",visible:!1,width:200},E={dataField:"uf_sigla",caption:"UF Sigla",visible:!1,width:200},T={dataField:"uf",caption:"UF",visible:!1,width:200},D={dataField:"pais",caption:"Pa\xeds",visible:!1,width:200},k={dataField:"cnpj",caption:"CNPJ",visible:!1,width:200},M={dataField:"inscricao",caption:"Inscri\xe7\xe3o Estadual",visible:!1,width:200},N={dataField:"id_estrangeiro",caption:"ID Estrangeiro",visible:!1,width:200},F={dataField:"inscricao_municipal",caption:"Inscri\xe7\xe3o Municipal",visible:!1,width:200},L={dataField:"site",caption:"Site",visible:!1,width:200},U={dataField:"email_principal",caption:"Email Principal",visible:!1,width:200},B=function(e){return{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.cliente_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS,null,null,{clienteId:e.row.data.cliente_id})},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&e&&"N"===e.somente_consulta_cliente},{hint:"Criar Unidade",icon:"fas fa-plus",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.cliente_id,window.FORMULARIO.CRIAR_UNIDADE)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&e&&"N"===e.somente_consulta_cliente},{hint:"Hist\xf3rico Entidade",icon:"fas fa-file",cssClass:"icon_black",onClick:function(e){window.View.load("entidade_historico/listar",(function(t,a){a.show(e.row.data.cliente_id,"C")}),window.View.ABA.MULTIPLAS)}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(t,a){a.show(e.row.data.cliente_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS,null,null,{clienteId:e.row.data.cliente_id})}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:function(e){window.View.load("cliente/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.cliente_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&e&&"N"===e.somente_consulta_cliente}]}},V={enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarClientes")},customSave:function(e){window.App.set_parametro_usuario("listarClientes",e)}};var z=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={clienteLogo:"",clienteCodigo:"",clienteUnidade:"",clienteNomeFantasia:"",clienteRazaoSocial:"",clienteTelefone1:"",clienteTelefone2:"",clienteTelefone3:"",clienteTelefone4:"",clienteParametros:null},o.getParametrosCliente=o.getParametrosCliente.bind(Object(r.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"getParametrosCliente",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;m.a.get("cliente/get_parametros/",null,(function(o){a.setState({clienteParametros:o},(function(){t&&e.component.repaint()}))}))}},{key:"componentDidMount",value:function(){this.getParametrosCliente()}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo cliente",text:"Novo cliente",onClick:function(){window.View.load("cliente/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")&&this.state.clienteParametros&&"N"===this.state.clienteParametros.somente_consulta_cliente},location:"after",name:"BtnNovoCliente",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de clientes",text:"Recarregar clientes",onClick:function(){this.listarClientes=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-file-import",hint:"Importar",onClick:function(){window.View.load("cliente/importar",(function(t,a){a.onclose=e.component.refresh,a.show()}))},visible:window.App.verifica_permissao(window.App.sessao.dados.empresa_filial_id,"cliente")},location:"after",name:"BtnImportar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("cliente/configuracoes",(function(a,o){o.onclose=function(){t.getParametrosCliente(e,!0)},o.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}},{key:"render",value:function(){return null!==this.state.clienteParametros&&Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(p.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(t={dx_grid:!0},new _.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"cliente_id",load:function(e){var a=window.loadOptionsToActionParams(e);return new Promise((function(e,o){m.a.get({route:"cliente/listar/",data:Object(f.a)(Object(f.a)({},a),t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(f.a)(Object(f.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){m.a.get({route:"cliente/listar/",data:{dx_grid:!0,cliente_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),stateStoring:V,columns:(e=this.state.clienteParametros,[h,v,b,j,O,g,w,x,y,A,C,S,R,I,P,E,T,D,k,M,N,F,L,U,B(e)])})})})});var e,t}}]),a}(u.a.Component);z.defaultProps={abaTitulo:"Clientes"};t.default=z},1239:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(380),f=a(389),m=a(398),_=a(448),h=[{dataField:"formulario_id",caption:"ID"},{dataField:"nome",caption:"Nome"},{dataField:"tipo_formulario_descritivo",caption:"Tipo Formul\xe1rio"},{type:"buttons",buttons:[{hint:"Editar",icon:"edit",cssClass:"icon_black",onClick:function(e){window.View.load("formulario/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.formulario_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS,null,null,{formularioId:e.row.data.formulario_id})}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("formulario/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.formulario_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Clonar",icon:"copy",cssClass:"icon_black",onClick:function(e){window.View.load("formulario/clonar",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.nome,e.row.data.formulario_id)}))}},{hint:"Exportar",icon:"export",cssClass:"icon_black",onClick:function(e){f.a.get("formulario/objeto/",{formulario_id:e.row.data.formulario_id},(function(t){var a=encodeURIComponent(JSON.stringify(t)),o=document.createElement("a");o.setAttribute("download",e.row.data.nome+".nbpf"),o.setAttribute("href","data:application/json;charset=utf-8,"+a),o.click()}))}},{hint:"Excluir",icon:"trash",cssClass:"icon_black",onClick:function(e){var t=!1,a="",o="";f.a.get("formulario/get_parametros/",null,(function(i){i.formulario_cliente_id===e.row.data.formulario_id&&null!=i.formulario_cliente_id&&(t=!0,o="Cliente"),i.formulario_prospect_id===e.row.data.formulario_id&&null!=i.formulario_prospect_id&&(t=!0,a="Organiza\xe7\xe3o",o=""!==o?o+" e "+a:a),t?Object(_.alert)("Este formul\xe1rio est\xe1 sendo utilizado em cadastros de <strong>"+o+"</strong>. Por gentileza, desfa\xe7a o v\xednculo antes de prosseguir com a exclus\xe3o.","Aviso"):window.View.load("formulario/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.formulario_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)}))}}]}];var v=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Formul\xe1rio",text:"Novo Formul\xe1rio",onClick:function(){window.View.load("formulario/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS,null,null,{formularioId:null})}},location:"after",name:"BtnNovoFormulario",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-upload",hint:"Importar Formul\xe1rio",text:"Importar",onClick:function(){window.View.load("formulario/importacao",(function(t,a){a.onclose=e.component.refresh,a.show()}))}},location:"after",name:"BtnImportarFormulario",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(u.default,{style:{height:"calc(100vh - 50px)"},dataSource:(e={dx_grid:!0},new m.default({key:"formulario_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){f.a.get({route:"formulario/listar/",data:Object(p.a)(Object(p.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(p.a)(Object(p.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),columns:h,pager:{showPageSizeSelector:!0,allowedPageSizes:[25,50,100],showInfo:!0},onToolbarPreparing:this.onToolbarPreparing,export:{enabled:!0,fileName:"Listagem_Formularios_"+window.agora(),allowExportSelectedData:!1},stateStoring:{enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listagemModelagemFormulario")},customSave:function(e){window.App.set_parametro_usuario("listagemModelagemFormulario",e)}}})})})});var e}}]),a}(d.a.Component);v.defaultProps={abaTitulo:"Formul\xe1rios"}},1240:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(626),f=a(388),m=a(380),_=a(398),h=a(389);var v=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).gridRef=d.a.createRef(null),o}return Object(n.a)(a,[{key:"render",value:function(){var e=this,t={hint:"Adicionar Categoria de Processos",text:"Adicionar",icon:"plus",onClick:function(t){e.gridRef.current.instance.addRow()}},a={hint:"Recarregar listagem",text:"Recarregar",icon:"refresh",onClick:function(t){e.gridRef.current.instance.refresh()}},i={hint:"Salvar altera\xe7\xf5es",text:"Salvar",icon:"save",onClick:function(t){var a=e.gridRef.current.instance.option("editing.changes");a.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.length&&h.a.post({route:"/categoria_processos/salvar/",data:{data:window.CircularJSON.stringify(e)},func_response:function(e){e?(window.alert_saved("Altera\xe7\xf5es salvas com sucesso"),"function"===typeof t&&t()):window.alert_fail("Falha ao salvar altera\xe7\xf5es")},func_fail:function(e){window.alert_fail("Falha ao salvar altera\xe7\xf5es"),console.error("Falha ao salvar Categorias de Processos"),console.error(e)}})}(a,(function(){e.gridRef.current.instance.cancelEditData(),e.gridRef.current.instance.refresh()})):window.alert_info("Nenhuma altera\xe7\xe3o foi realizada")}};return Object(o.jsxs)(u.default,{ref:this.gridRef,dataSource:new _.default({pageSize:20,key:"categoria_processos_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){h.a.get({route:"/categoria_processos/listar/",data:Object(m.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(m.a)(Object(m.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){h.a.get({route:"/categoria_processos/listar/",data:{dx_grid:!0,id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),style:{height:"calc(100vh - 50px)"},editing:{mode:"batch",allowUpdating:!0},children:[Object(o.jsx)(f.Column,{dataField:"nome",caption:"Nome",dataType:"string"},"column_nome"),Object(o.jsx)(p.a,{caption:"Cor de Fundo",dataField:"cor_fundo"},"cor_fundo"),Object(o.jsxs)(f.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(o.jsx)(f.Button,{icon:"trash",hint:"Marcar para exclus\xe3o",onClick:function(t){return e.gridRef.current.instance.deleteRow(t.row.rowIndex)},visible:function(e){return!e.row.removed}},"btn_delete"),Object(o.jsx)(f.Button,{icon:"revert",hint:"Desmarcar exclus\xe3o",onClick:function(t){return e.gridRef.current.instance.undeleteRow(t.row.rowIndex)},visible:function(e){return e.row.removed}},"btn_restore")]},"column_buttons"),Object(o.jsxs)(f.Toolbar,{children:[Object(o.jsx)(f.Item,{widget:"dxButton",options:a,showText:"inMenu"}),Object(o.jsx)(f.Item,{widget:"dxButton",options:t}),Object(o.jsx)(f.Item,{widget:"dxButton",options:i,showText:"inMenu"}),Object(o.jsx)(f.Item,{name:"revertButton"})]})]})}}]),a}(d.a.Component);v.defaultProps={abaTitulo:"Categoria de Processos"}},1241:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(679),_=a(413),h=[Object(o.jsx)(_.a,{caption:"Grupo Motivo"})],v=a(105),b=a(408),j=a(388),O=a(449),g=a(432);var w=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Grupo de Motivos",text:"Adicionar",onClick:function(){b.a.loadReact(window.views.grupoMotivoChamado.Detalhes.default,{grupoMotivoChamadoId:null,onClose:e.component.refresh},(function(e){}),b.a.ABA.SIM)}},location:"after",name:"BtnNovoMotivoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){if(!v.a.sessao.dados.admin)return window.alert_modal("Valida\xe7\xe3o","Sem permiss\xe3o para alterar as configura\xe7\xf5es!","Ok",(function(){return!1})),!1;b.a.load("grupo_motivo_chamado/configuracao",(function(e,t){t.show()}))},visible:window.App.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e=[].concat(Object(i.a)(h),[Object(o.jsxs)(j.Column,{type:"buttons",children:[Object(o.jsx)(O.a,{onClick:function(e){b.a.loadReact(window.views.grupoMotivoChamado.Detalhes.default,{grupoMotivoChamadoId:e.row.data.grupo_id,onClose:e.component.refresh},(function(e){}),b.a.ABA.SIM)}}),Object(o.jsx)(g.a,{onClick:function(e){Object(m.d)(e.row.data.grupo_id,(function(){return e.component.refresh()}),(function(){return e.component.refresh()}))}})]})]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)",width:"100%"},stateStoring:Object(f.stateStoring)("DataGridGrupoMotivoList"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(m.a)({dx_grid:!0}),children:e})})})})}}]),a}(p.a.Component);w.defaultProps={abaTitulo:"Grupos de Motivos"};t.default=w},1242:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(850),_=a(413),h=a(547),v=[Object(o.jsx)(_.a,{caption:"Avalia\xe7\xe3o",width:200}),Object(o.jsx)(h.a,{width:200}),Object(o.jsx)(h.a,{dataField:"avaliacao_cliente",caption:"Habilitar para Clientes",width:200}),Object(o.jsx)(h.a,{dataField:"avaliacao_colaborador",caption:"Habilitar para Colaboradores",width:200}),Object(o.jsx)(h.a,{dataField:"avaliacao_fornecedor",caption:"Habilitar para Fornecedores",width:200}),Object(o.jsx)(h.a,{dataField:"avaliacao_organizacao",caption:"Habilitar para Organiza\xe7\xf5es",width:200})],b=a(408),j=a(388),O=a(432),g=a(450);var w=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o.dataGrid=null,o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){this.dataGrid=e.component;var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Avalia\xe7\xe3o",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarMotivoChamado=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"preferences",hint:"Configura\xe7\xf5es",text:"Configura\xe7\xf5es",onClick:function(){b.a.load("nota_avaliacao/configuracoes",(function(e,t){t.show()}))},visible:window.App.sessao.dados.admin},showText:"inMenu",location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=e.component.getController("editing").getChanges();Object(m.b)(a,(function(t){e.component.saveEditData()}))})}}},{key:"render",value:function(){var e=this,t=[].concat(Object(i.a)(v),[Object(o.jsxs)(j.Column,{type:"buttons",children:[Object(o.jsx)(O.a,{visible:function(e){return!e.row.removed&&!e.row.data.padrao},onClick:function(t){return e.dataGrid.deleteRow(t.row.rowIndex)}}),Object(o.jsx)(g.a,{visible:function(e){return e.row.removed},onClick:function(t){e.dataGrid.undeleteRow(t.row.rowIndex),t.event.preventDefault()}})]})]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(f.stateStoring)("DataGridNotaAvaliacao"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(m.a)({dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},onInitNewRow:function(e){e.data.padrao=!1,e.data.avaliacao_cliente=!1,e.data.avaliacao_colaborador=!1,e.data.avaliacao_fornecedor=!1,e.data.avaliacao_organizacao=!1},onCellClick:function(e){if(e.column&&"padrao"===e.column.dataField&&!0===e.value){var t=[];e.row.isNewRow&&(t=e.component.getController("editing").getChanges().map((function(e){return e.data}))),e.component.getDataSource()._items.forEach((function(e){return t.push(e)})),t.forEach((function(t,a){a!==e.row.rowIndex&&(!0===e.component.cellValue(a,e.column.dataField)&&e.component.cellValue(a,e.column.dataField,!1))}))}},children:t})})})})}}]),a}(p.a.Component);w.defaultProps={abaTitulo:"Classifica\xe7\xe3o de Avalia\xe7\xe3o"};t.default=w},1243:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var o=a(372),i=a(391),n=a(380),r=a(365),s=a(366),c=a(385),l=a(368),d=a(369),u=a(367),p=a(376),f=a.n(p),m=a(401),_=a(389),h=a(398),v=a(388),b=a(602);var j=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state=Object(n.a)(Object(n.a)({},o.state),o.propsToObjState()),o.onReorder=o.onReorder.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"propsToObjState",value:function(){return{dataSource:(e={dx_grid:!0},new h.default({key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){_.a.get({route:"menu_personalizado/listar/",data:Object(n.a)(Object(n.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(n.a)(Object(n.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),allowReordering:!0};var e}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo Menu Personalizado",text:"Novo Menu Personalizado",onClick:function(){window.View.load("menu_personalizado/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}))}},location:"after",name:"BtnNovoMenuPersonalizado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"onReorder",value:function(e){var t=e.component.getVisibleRows(),a=Object(i.a)(this.state.dataSource._items),o=t[e.fromIndex].data,n=o.ordem,r=a.indexOf(t[e.toIndex].data);_.a.post({route:"/menu_personalizado/alterar_ordem/",data:{menu_personalizado_id:o.id,old_ordem:n,new_ordem:r},func_response:function(t){e.component.refresh(),Object(b.default)("Recarregue a p\xe1gina para que a ordena\xe7\xe3o tenha efeito no Menu Lateral")}})}},{key:"render",value:function(){return Object(o.jsx)(f.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",id:"teste",children:Object(o.jsx)(m.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,stateStoring:{enabled:!0,type:"custom",customLoad:function(){return window.App.get_parametro_usuario("listagem_menu_personalizado")},customSave:function(e){window.App.set_parametro_usuario("listagem_menu_personalizado",e)}},columns:[{caption:"Nome",dataField:"nome",allowHiding:!1,cellTemplate:function(e,t){var a=t.data.nome;if(a){var o=t.data.imagem_id,i=null!==t.data.url_menu_img&&""!==t.data.url_menu_img?t.data.url_menu_img:"assets/img/integracao.svg",n=o?window.WS_URI+"documento/midia/?&tamanho=20&documento_id="+o+"&token_midia="+window.App.sessao.token_midia:i;e.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+n+'"><span style="margin-left: 5px;">'+a+"</span></div>")}}},{caption:"URL",dataField:"url_menu_personalizado"},{caption:"Permiss\xe3o",dataField:"permissao_necessaria"},{caption:"Ativo",dataField:"menu_personalizado_ativo"},{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:"icon_black",onClick:function(e){window.View.load("menu_personalizado/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.id,window.FORMULARIO.EDITAR)}))}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:"icon_black",onClick:function(e){window.View.load("menu_personalizado/detalhes",(function(t,a){a.show(e.row.data.id,window.FORMULARIO.VISUALIZAR)}))}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:"icon_black",onClick:function(e){window.View.load("menu_personalizado/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.id,window.FORMULARIO.EXCLUIR)}))}}]}],onToolbarPreparing:this.onToolbarPreparing,groupPanel:{visible:!1},sorting:{mode:"none"},children:Object(o.jsx)(v.RowDragging,{allowReordering:this.state.allowReordering,onReorder:this.onReorder,dropFeedbackMode:"push"})})})})})}}]),a}(f.a.Component);j.defaultProps={abaTitulo:"Menus Personalizados"}},1244:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var o=a(372),i=a(391),n=a(380),r=a(365),s=a(366),c=a(385),l=a(368),d=a(369),u=a(367),p=a(376),f=a.n(p),m=a(401),_=a(388),h=a(681),v=a(413),b=a(547),j=[Object(o.jsx)(v.a,{}),Object(o.jsx)(b.a,{})],O=a(389),g=a(432),w=a(450);var x=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state=Object(n.a)(Object(n.a)({},o.state),o.propsToObjState()),o.onReorder=o.onReorder.bind(Object(c.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(c.a)(o)),o.listRef=f.a.createRef(),o}return Object(s.a)(a,[{key:"propsToObjState",value:function(){return{allowReordering:!0,dataSource:Object(h.a)()}}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Prioridade",text:"Adicionar",onClick:function(){t.setState({allowReordering:!1}),e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var o=0;o<e.toolbarOptions.items.length;o++){var i=e.toolbarOptions.items[o];"saveButton"===i.name&&(i.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());O.a.post("/chamado_prioridades/salvar_dxdatagrid/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))}),"revertButton"===i.name&&(i.options.onClick=function(a){t.setState({allowReordering:!0}),e.component.cancelEditData()})}}},{key:"onReorder",value:function(e){var t=e.component.getVisibleRows(),a=Object(i.a)(this.state.dataSource._items),o=t[e.fromIndex].data,n=o.ordem,r=null;r=-1===a.indexOf(t[e.toIndex].data)?a.indexOf(a[e.toIndex])+1:a.indexOf(t[e.toIndex].data)+1,O.a.post({route:"/chamado_prioridades/alterar_ordem/",data:{chamado_prioridade_id:o.chamado_prioridade_id,old_ordem:n,new_ordem:r},func_response:function(t){e.component.refresh()}})}},{key:"render",value:function(){var e=[].concat(Object(i.a)(j),[Object(o.jsxs)(_.Column,{type:"buttons",children:[Object(o.jsx)(g.a,{visible:function(e){return!e.row.removed&&!1===e.row.data.padrao},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(w.a,{visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]);return Object(o.jsx)("div",{children:Object(o.jsxs)(m.default,{ref:this.listRef,style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,columnChooser:{visible:!1},groupPanel:{visible:!1},selection:{mode:"multiple"},stateStoring:Object(h.b)(),editing:{mode:"batch",allowUpdating:!0,useIcons:!0},onCellClick:function(e){if(e.column&&"padrao"===e.column.dataField&&!0===e.value){var t=[];e.row.isNewRow&&(t=e.component.getController("editing").getChanges().map((function(e){return e.data}))),e.component.getDataSource()._items.forEach((function(e){return t.push(e)})),t.forEach((function(t,a){a!==e.row.rowIndex&&(!0===e.component.cellValue(a,e.column.dataField)&&e.component.cellValue(a,e.column.dataField,!1))}))}},onInitNewRow:function(e){e.data.padrao=!1},children:[e,Object(o.jsx)(_.RowDragging,{allowReordering:this.state.allowReordering,onReorder:this.onReorder,dropFeedbackMode:"push"})]})})}},{key:"list",get:function(){return this.listRef.current?this.listRef.current.instance:null}}]),a}(f.a.Component);x.defaultProps={abaTitulo:"Prioridades de Chamados"}},1245:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(866),_=a(484),h=a(510),v=[Object(o.jsx)(_.a,{dataField:"categoria_pdca_id",caption:"#",allowEditing:!1,fixed:!0,fixedPosition:"left",width:60}),Object(o.jsx)(h.a,{dataField:"nome",caption:"Nome"})],b=a(388),j=a(432),O=a(450),g=a(389);var w=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:Object(m.a)()},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(v),[Object(o.jsxs)(b.Column,{type:"buttons",children:[Object(o.jsx)(j.a,{visible:function(e){return!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(O.a,{visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},style:{height:"calc(100vh - 45px)"},children:e})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar \xc1rea de PDCA",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());g.a.post("/categoria_pdca/salvar/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}]),a}(p.a.Component);w.defaultProps={abaTitulo:"Categorias de PDCA"}},1246:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(867),_=a(413),h=a(547),v=[Object(o.jsx)(_.a,{dataField:"descricao"},"descricao"),Object(o.jsx)(h.a,{dataField:"padrao_chamados",caption:"Padr\xe3o Chamados"},"padrao_chamados"),Object(o.jsx)(h.a,{dataField:"padrao_documentos",caption:"Padr\xe3o Documentos"},"padrao_documentos"),Object(o.jsx)(h.a,{dataField:"padrao_processos",caption:"Padr\xe3o Processos"},"padrao_processos"),Object(o.jsx)(h.a,{dataField:"padrao_projeto",caption:"Padr\xe3o Projeto"},"padrao_projeto"),Object(o.jsx)(h.a,{dataField:"padrao_atendimento_relacionamento",caption:"Padr\xe3o CRM"},"padrao_atendimento_relacionamento"),Object(o.jsx)(h.a,{dataField:"padrao_sistema",caption:"Padr\xe3o Sistema"},"padrao_sistema"),Object(o.jsx)(h.a,{dataField:"controle_acessos",caption:"Controle Acessos",allowEditing:!1},"controle_acessos")],b=a(388),j=a(449),O=a(432),g=a(450),w=a(408),x=a(389);var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:Object(m.a)()},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(v),[Object(o.jsxs)(b.Column,{type:"buttons",children:[Object(o.jsx)(j.a,{icon:"fas fa-lock",hint:"Editar permiss\xf5es",name:"editar_permissoes",visible:function(e){return!e.row.isNewRow&&!("Arquivo ZIP"===e.row.data.descricao)},onClick:function(e){w.a.load("assunto/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.assunto_id,window.FORMULARIO.EDITAR)}))}}),Object(o.jsx)(O.a,{visible:function(e){return!e.row.removed&&!("Arquivo ZIP"===e.row.data.descricao)},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(g.a,{visible:function(e){return e.row.removed&&!("Arquivo ZIP"===e.row.data.descricao)},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagem_assunto_documento"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},onCellClick:function(e){if(e.column&&["padrao_chamados","padrao_documentos","padrao_processos","padrao_projeto","padrao_atendimento_relacionamento","padrao_sistema"].includes(e.column.dataField)&&!0===e.value){var t=[];e.row.isNewRow&&(t=e.component.getController("editing").getChanges().map((function(e){return e.data}))),e.component.getDataSource()._items.forEach((function(e){return t.push(e)})),t.forEach((function(t,a){a!==e.row.rowIndex&&(!0===e.component.cellValue(a,e.column.dataField)&&e.component.cellValue(a,e.column.dataField,!1))}))}},onInitNewRow:function(e){e.data.padrao_chamados=!1,e.data.padrao_documentos=!1,e.data.padrao_processos=!1,e.data.padrao_projeto=!1,e.data.padrao_atendimento_relacionamento=!1,e.data.padrao_sistema=!1,e.data.controle_acessos=!1},onEditorPreparing:function(e){"dataRow"===e.parentType&&"Arquivo ZIP"===e.row.data.descricao&&(e.editorOptions.disabled=!0)},children:e})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Assunto",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoAssunto",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());x.a.post("/assunto/salvar_dx_grid/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}]),a}(p.a.Component);y.defaultProps={abaTitulo:"Assuntos de Documentos"}},1247:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(868),_=a(413),h=a(547),v=[Object(o.jsx)(_.a,{}),Object(o.jsx)(h.a,{dataField:"padrao_chamados",caption:"Padr\xe3o Chamados"}),Object(o.jsx)(h.a,{dataField:"padrao_documentos",caption:"Padr\xe3o Documentos"}),Object(o.jsx)(h.a,{dataField:"padrao_processos",caption:"Padr\xe3o Processos"}),Object(o.jsx)(h.a,{dataField:"padrao_projeto",caption:"Padr\xe3o Projeto"}),Object(o.jsx)(h.a,{dataField:"padrao_atendimento_relacionamento",caption:"Padr\xe3o CRM"}),Object(o.jsx)(h.a,{dataField:"padrao_sistema",caption:"Padr\xe3o Sistema"}),Object(o.jsx)(h.a,{dataField:"controle_acessos",caption:"Controle Acessos",allowEditing:!1})],b=a(388),j=a(449),O=a(432),g=a(450),w=a(408),x=a(389);var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:Object(m.a)()},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=[].concat(Object(i.a)(v),[Object(o.jsxs)(b.Column,{type:"buttons",children:[Object(o.jsx)(j.a,{icon:"fas fa-lock",hint:"Editar permiss\xf5es",name:"editar_permissoes",visible:function(e){return!e.row.isNewRow&&!("Arquivo ZIP"===e.row.data.nome)},onClick:function(e){w.a.load("tipo_documento/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.tipo_documento_id,window.FORMULARIO.EDITAR)}))}}),Object(o.jsx)(O.a,{visible:function(e){return!e.row.removed&&!("Arquivo ZIP"===e.row.data.nome)},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(g.a,{visible:function(e){return e.row.removed&&!("Arquivo ZIP"===e.row.data.nome)},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagem_tipo_documento"),editing:{mode:"batch",useIcons:!0,allowUpdating:!0},selection:{mode:"multiple"},onCellClick:function(e){if(e.column&&["padrao_chamados","padrao_documentos","padrao_processos","padrao_projeto","padrao_atendimento_relacionamento","padrao_sistema"].includes(e.column.dataField)&&!0===e.value){var t=[];e.row.isNewRow&&(t=e.component.getController("editing").getChanges().map((function(e){return e.data}))),e.component.getDataSource()._items.forEach((function(e){return t.push(e)})),t.forEach((function(t,a){a!==e.row.rowIndex&&(!0===e.component.cellValue(a,e.column.dataField)&&e.component.cellValue(a,e.column.dataField,!1))}))}},onInitNewRow:function(e){e.data.padrao_chamados=!1,e.data.padrao_documentos=!1,e.data.padrao_processos=!1,e.data.padrao_projeto=!1,e.data.padrao_atendimento_relacionamento=!1,e.data.padrao_sistema=!1,e.data.controle_acessos=!1},onEditorPreparing:function(e){"dataRow"===e.parentType&&"Arquivo ZIP"===e.row.data.nome&&(e.editorOptions.disabled=!0)},children:e})})}},{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Tipo",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoTipo",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.onClick=function(t){var a=window.CircularJSON.stringify(e.component.getController("editing").getChanges());x.a.post("/tipo_documento/salvar_dx_grid/",{data:a},(function(t){var a=!0===t?"success":"error",o=!0===t?"Altera\xe7\xf5es salvas com sucesso":"Falha ao salvar altera\xe7\xf5es";window.alert_tooltip(o,a),!0===t&&(e.component.cancelEditData(),setTimeout((function(){e.component.refresh()})))}))})}}}]),a}(p.a.Component);y.defaultProps={abaTitulo:"Tipos de Documentos"}},1248:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(885),_=a(484),h=a(413),v=a(510),b=[Object(o.jsx)(_.a,{dataField:"consulta_id",caption:"#"}),Object(o.jsx)(h.a,{dataField:"nome",caption:"Nome"}),Object(o.jsx)(v.a,{dataField:"banco_dados_nome",caption:"Tipo"}),Object(o.jsx)(v.a,{dataField:"database_nome",caption:"Database"})],j=a(388),O=a(449),g=a(432),w=a(550),x=a(408);var y=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:Object(m.a)()},o.handleAcessarConsultaIntegracao=o.handleAcessarConsultaIntegracao.bind(Object(s.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=[].concat(Object(i.a)(b),[Object(o.jsxs)(j.Column,{type:"buttons",children:[Object(o.jsx)(w.a,{onClick:function(t){return e.handleAcessarConsultaIntegracao(t,t.row.data.consulta_id,window.FORMULARIO.VISUALIZAR)}}),Object(o.jsx)(O.a,{onClick:function(t){return e.handleAcessarConsultaIntegracao(t,t.row.data.consulta_id,window.FORMULARIO.EDITAR)}}),Object(o.jsx)(g.a,{onClick:function(t){return e.handleAcessarConsultaIntegracao(t,t.row.data.consulta_id,window.FORMULARIO.EXCLUIR)}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagem_consulta_integracao"),selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},children:t})})}},{key:"handleAcessarConsultaIntegracao",value:function(e,t,a){x.a.load("consulta_integracao/detalhes",(function(o,i){i.onclose=e.component.refresh,i.show(t,a)}))}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Consulta de Integra\xe7\xe3o",text:"Adicionar",onClick:function(e){return t.handleAcessarConsultaIntegracao(e,null,window.FORMULARIO.NOVO)}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}]),a}(p.a.Component);y.defaultProps={abaTitulo:"Consultas de Integra\xe7\xe3o"}},1249:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return R}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(413),_=a(547),h=a(844),v=a(510),b=a(617),j=a(63),O=a.n(j),g=[Object(o.jsx)(m.a,{dataField:"nome_fantasia",caption:"Nome Fantasia"},"nome_fantasia"),Object(o.jsx)(m.a,{dataField:"razao_social",caption:"Raz\xe3o Social"},"razao_social"),Object(o.jsx)(_.a,{dataField:"padrao",caption:"Empresa Padr\xe3o",width:180,calculateCellValue:function(e){return"S"==e.padrao}},"empresa_padrao"),Object(o.jsx)(h.a,{dataField:"cnpj"},"cnpj"),Object(o.jsx)(b.a,{dataField:"vigencia_de",caption:"V\xe1lida De"},"vigencia_de"),Object(o.jsx)(b.a,{dataField:"vigencia_ate",caption:"V\xe1lida At\xe9"},"vigencia_ate"),Object(o.jsx)(v.a,{caption:"Status Licen\xe7a",dataField:"licenca_valida_descricao",cellTemplate:function(e,t){var a="",o="";switch(t.data.licenca_valida){case!0:a="label-success",o="V\xe1lida";break;case!1:a="label-danger",o="Inv\xe1lida"}e.css({textAlign:"center"}).addClass("bg-"+a),O()("<label>").text(o).css({color:"#FFF"}).appendTo(e)}},"licenca")],w=a(388),x=a(449),y=a(432),A=a(408),C=a(389),S=a(105);var R=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={dataSource:[]},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o.listar_empresas=o.listar_empresas.bind(Object(s.a)(o)),o.listar_empresas(),o}return Object(r.a)(a,[{key:"listar_empresas",value:function(){var e=this;C.a.get("empresa/listar/",null,(function(t){e.setState({dataSource:t})}))}},{key:"render",value:function(){var e=this,t=[].concat(Object(i.a)(g),[Object(o.jsxs)(w.Column,{type:"buttons",children:[Object(o.jsx)(x.a,{onClick:function(t){A.a.load("empresa/detalhes",(function(a,o){o.onclose=e.listar_empresas,o.show(t.row.data.empresa_id,window.FORMULARIO.EDITAR,t.row.data.licenca_valida)}),A.a.ABA.MULTIPLAS)}}),Object(o.jsx)(y.a,{onClick:function(t){A.a.load("empresa/detalhes",(function(a,o){o.onclose=e.listar_empresas,o.show(t.row.data.empresa_id,window.FORMULARIO.EXCLUIR,t.row.data.licenca_valida)}),A.a.ABA.MULTIPLAS)}})]})]);return Object(o.jsx)("div",{children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 45px)"},dataSource:this.state.dataSource,onToolbarPreparing:this.onToolbarPreparing,stateStoring:Object(f.stateStoring)("listagem_empresa_filial"),selection:{mode:"multiple"},children:t})})}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{widget:"dxDropDownButton",options:{icon:"key",hint:"Renovar Licen\xe7as",text:"Renovar Licen\xe7as",dropDownOptions:{width:322},items:[{text:"Renovar Licen\xe7as Autom\xe1ticamente",icon:"refresh",onClick:function(e){C.a.get("empresa/licenca/renovar/",null,(function(e){var a="";e.log.forEach((function(e){return a+=e+"<br>"})),window.alert_modal("Renova\xe7\xe3o autom\xe1tica",a),t.listar_empresas()}))}},{text:"Testar Comunica\xe7\xe3o Com Servido de Licen\xe7as",icon:"link",onClick:function(e){C.a.post("empresa/licenca/testar_servidor/",null,(function(e){}))}}]},showText:"inMenu",location:"after",name:"BtnRenovar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Empresa",text:"Adicionar",onClick:function(){A.a.load("empresa/detalhes",(function(e,a){a.onclose=t.listar_empresas,a.show(null,window.FORMULARIO.NOVO,!!S.a.temp.empresa)}),A.a.ABA.MULTIPLAS)}},location:"after",name:"BtnAdicionar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){t.listar_empresas()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items)}}]),a}(p.a.Component);R.defaultProps={abaTitulo:"Empresas"}},1250:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(376),n=a.n(i),r=a(105),s=(a(389),a(401)),c=a(696),l=a(380),d=a(388),u=a(413),p=a(870),f=a.n(p),m=a(419),_=function(e){return Object(o.jsxs)("div",{style:{display:"flex",marginLeft:"-3px"},children:[Object(o.jsx)("div",{style:{backgroundColor:e.value,width:"17px",height:"17px",border:"1px solid",borderColor:"rgba(0, 0, 0, .12)",marginRight:"10px"},children:"\xa0"}),Object(o.jsx)("div",{children:e.value})]})},h=function(e){var t,a=e.data.pai_id?null:Object(o.jsxs)(n.a.Fragment,{children:[Object(o.jsx)("span",{className:"fa fa-globe"}),"\xa0"]});return Object(o.jsxs)("div",{children:[a,Object(o.jsx)("div",{className:"label",style:{backgroundColor:e.data.cor_fundo,color:e.data.cor_fonte||(t=e.data.cor_fundo,t||(t="#000"),"#"==t.substr(0,1)&&(t=t.substr(1)),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=128?"black":"white")},children:e.data.nome})]})},v=function(e){var t=Object(i.useCallback)((function(t){e.data.setValue(t.value)}),[e]);return Object(o.jsx)(f.a,{defaultValue:e.data.value,onValueChanged:t})},b=function(e){var t=[];return Array.isArray(e.value)&&e.value.forEach((function(e){var a=window.USUARIO_TIPO_LOOKUP.filter((function(t){return t.id==e}))[0]||null;a&&t.push(a.descricao)})),t.join(", ")},j=function(e){var t,a=Object(i.useCallback)((function(t,a){e.data.setValue(t)}),[e]);return Object(o.jsx)(m.default,Object(l.a)({},Object(l.a)(Object(l.a)({},e),{},{selecionado:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.value)||null,dataSource:Object(c.d)(),columns:["descricao"],selectionMode:"multiple",valueExpr:"id",displayExpr:"descricao",aoAlterar:a})))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=function(t){return!e||e===t.row.data.pai_id};return[Object(o.jsx)(u.a,{dataField:"nome",caption:"Etiqueta",cellRender:h,width:"250px",children:Object(o.jsx)(d.RequiredRule,{})},"nome"),Object(o.jsx)(d.Column,{dataField:"cor_fundo",cellRender:_,editCellComponent:v,children:Object(o.jsx)(d.RequiredRule,{})},"cor_fundo"),Object(o.jsx)(d.Column,{dataField:"cor_fonte",cellRender:_,editCellComponent:v,children:Object(o.jsx)(d.RequiredRule,{})},"cor_fonte"),Object(o.jsx)(d.Column,{dataField:"usuario_tipo",cellRender:b,editCellComponent:j,allowHeaderFiltering:!1,allowFiltering:!1,allowSearch:!1,allowSorting:!1,allowGrouping:!1,children:Object(o.jsx)(d.RequiredRule,{})},"usuario_tipo"),Object(o.jsx)(d.Column,{type:"buttons",children:Object(o.jsx)(d.Button,{name:"delete",visible:t})},"botoes")]};function g(e){var t=e.html_id,a=e.titulo,i=e.pai_tabela,n=e.pai_id;setTimeout((function(){return r.a.titulo_aba(t,"Etiquetas: "+(a||i+" - "+n))}));return Object(o.jsx)("div",{style:{width:"100%"},children:Object(o.jsx)(s.default,{style:{height:"calc(100vh - 80px)",width:"100%"},stateStoring:Object(s.stateStoring)("listagem_etiquetas"),dataSource:Object(c.a)({pai_tabela:i,pai_id:n,dx_grid:!0}),editing:{mode:"batch",allowUpdating:!0,allowAdding:!0,allowDeleting:!0},onInitNewRow:function(e){e.data.pai_tabela=i,e.data.pai_id=n},onEditingStart:function(e){n>0&&!e.data.pai_id&&(e.cancel=!0)},onSaving:function(e){e.cancel=!0,e.changes.length&&(e.promise=new Promise((function(t,a){Object(c.b)({pai_tabela:i,pai_id:n,alteracoes:e.changes,func_response:function(a){t(a),e.component.refresh(!0).done((function(){e.component.cancelEditData()}))},func_fail:function(e){return a(e)}})})))},children:O(n)})})}g.defaultProps={abaTitulo:"Etiquetas",pai_id:null}},1251:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return w}));var o=a(422),i=a.n(o),n=a(372),r=a(425),s=a(423),c=a(376),l=a(875),d=a.n(l),u=a(575),p=a.n(u),f=a(388),m=a.n(f),_=a(63),h=a.n(_),v=a(389),b=function(){var e=Object(r.a)(i.a.mark((function e(t){var a,o,n,r,s,c,l,d,u,p,f,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get({route:"/atividade_projeto/listar_todas_atividades_gantt/",data:{projeto_id:t},awaitReturn:!0});case 2:if(a=e.sent,o={tasks:[],dependencies:[],resources:[],resourceAssignments:[]},a.length)for(n=1,r=0;r<a.length;r++){if(s=a[r],c=s.previsao_inicio?new Date(s.previsao_inicio):null,l=s.prazo?new Date(s.prazo):null,d=s.conclusao?new Date(s.conclusao):null,o.tasks.push({id:"P"===s.tipo_atividade?"raiz":+s.id,parentId:"P"===s.tipo_atividade?-1:s.pai_id?+s.pai_id:"raiz",codigo:s.codigo,title:s.atividade_simplificada,start:c instanceof Date&&!isNaN(c)?c:null,end:l instanceof Date&&!isNaN(l)?l:null,conclusao:d instanceof Date&&!isNaN(d)?d:null,progress:s.porcentagem?+s.porcentagem:0,status:+s.status,sequencia:s.sequencia,executores:s.recursos}),s.predecessoras.length)for(u=0;u<s.predecessoras.length;u++)p=s.predecessoras[u],o.dependencies.push({id:n,predecessorId:+p.id,successorId:+s.id,type:0}),n++;if(s.recursos)for(f=function(e){var t=s.recursos[e];o.resources.some((function(e){return e.id===parseInt(t.id)}))||o.resources.push({id:parseInt(t.id),nome:t.nome}),o.resourceAssignments.push({id:o.resourceAssignments.length+1,taskId:parseInt(s.id),resourceId:parseInt(t.id)})},m=0;m<s.recursos.length;m++)f(m)}return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=a(1182),O=a.n(j),g=a(105);function w(e){var t={text:"Legendas",hint:"Legendas",icon:"bulletlist",stylingMode:"text",onClick:function(e){window.alertaPopUp("Legendas",(function(e){for(var t=h()("<div>"),a=h()("<ul>").appendTo(t),o=["#4796CE","#35B86B","#8B8B8B","#DE6175","#F78119"],i=[" Em andamento"," Conclu\xeddo"," Cancelado"," Atrasado"," N\xe3o Iniciado"],n=0;n<o.length;n++){var r=h()("<li>").appendTo(a);h()("<span>").addClass(O.a.progress).css({backgroundColor:o[n],display:"inline-block",width:50,height:12}).appendTo(r),h()("<span>").text(i[n]).css({fontSize:17}).appendTo(r)}h()(e).append(t)}),"Ok",(function(){}),null,null,500,250)}},a={hint:"Recarregar",icon:"refresh",stylingMode:"text",onClick:function(e){ne()}},o={icon:"fas fa-file-export",hint:"Exportar Gantt",text:"Exportar Gantt",onClick:function(){g.a.obter_token_publico((function(t){var a=window.WS_URI+"projeto/exportar_gantt_projeto/?token_publico="+t+"&colunas="+_($).join(",")+"&projeto_id="+e.projeto_id;window.open(a,"_blank")}))}},u=g.a.get_parametro_usuario("gantt_colunas");"undefined"===typeof u.visiveis&&(u.visiveis=["title","sequencia","codigo","start","end","conclusao","progress"]),"undefined"===typeof u.ordem&&(u.ordem=["title","sequencia","codigo","start","end","conclusao","progress"]);var _=function(e){var t=[];return u.ordem.forEach((function(a){for(var o=0;o<e.length;o++){var i=e[o];if("string"===typeof i&&i===a||i.id===a){t.push(i);break}}})),e.forEach((function(e){u.ordem.includes("string"===typeof e?e:e.id)||t.push(e)})),t},v="Nome",j="Sequ\xeancia",w="C\xf3digo",x="Previs\xe3o In\xedcio",y="Prazo",A="Data Conclus\xe3o",C="Porc. Conclus\xe3o",S=Object(c.useState)([]),R=Object(s.a)(S,2),I=R[0],P=R[1],E=Object(c.useState)([]),T=Object(s.a)(E,2),D=T[0],k=T[1],M=Object(c.useState)([]),N=Object(s.a)(M,2),F=N[0],L=N[1],U=Object(c.useState)([]),B=Object(s.a)(U,2),V=B[0],z=B[1],G=Object(c.useState)("days"),H=Object(s.a)(G,2),q=H[0],W=H[1],K=Object(c.useState)(0),J=Object(s.a)(K,2),Q=J[0],Z=J[1],X=Object(c.useState)(u.visiveis),Y=Object(s.a)(X,2),$=Y[0],ee=Y[1],te=Object(c.useState)(_([{id:"title",nome:v},{id:"sequencia",nome:j},{id:"codigo",nome:w},{id:"start",nome:x},{id:"end",nome:y},{id:"conclusao",nome:A},{id:"progress",nome:C}])),ae=Object(s.a)(te,2),oe=ae[0],ie=ae[1];function ne(){return re.apply(this,arguments)}function re(){return(re=Object(r.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e.projeto_id);case 2:a=t.sent,P(a.tasks.length?a.tasks:[]),k(a.dependencies.length?a.dependencies:[]),L(a.resources.length?a.resources:[]),z(a.resourceAssignments.length?a.resourceAssignments:[]);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function se(e,t){var a=h()("<div>"),o=h()("<span>").text(t.data.title+" ").appendTo(a);"raiz"===t.data.id||t.data.start||t.data.end||(e.parent().css({backgroundColor:"#FFABAB"}).attr("title","A atividade n\xe3o possui Previs\xe3o de In\xedcio e Prazo definidos."),h()("<i>").addClass("fas fa-exclamation-triangle").css({color:"#CC6600"}).appendTo(o)),e.append(a)}function ce(e){return"".concat(e.progress,"%")}Object(c.useEffect)((function(){ne()}),[]),Object(c.useEffect)((function(){Z(Q+1)}),[I,D,F,V]);return Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsxs)(d.a,{taskListWidth:900,scaleType:q,scaleTypeRange:{max:"years",min:"minutes"},rootValue:-1,height:"calc(100vh - 50px)",filterRow:{visible:!0},headerFilter:{visible:!0},onOptionChanged:function(e){"scaleType"===e.name&&W(e.value)},taskContentRender:function(e){var t=e.taskData,a=e.taskSize,o="#3498DB",i=e.taskResources.map((function(e){return e.text})).join(", ");if("raiz"===t.id)switch(t.status){case window.PROJETO_STATUS.CONCLUIDO:o="#35B86B";break;case window.PROJETO_STATUS.NAO_INICIADO:o="#F78119";break;case window.PROJETO_STATUS.CANCELADO:o="#8B8B8B";break;default:o="#4796CE"}else switch(t.status){case window.PROJETO_STATUS_ATIVIDADES.PROGRAMADO:o="#D3D3D3";break;case window.PROJETO_STATUS_ATIVIDADES.NAO_INICIADO:o="#F78119";break;case window.PROJETO_STATUS_ATIVIDADES.CONCLUIDO:o="#35B86B";break;case window.PROJETO_STATUS_ATIVIDADES.ATRASADO:o="#DE6175";break;case window.PROJETO_STATUS_ATIVIDADES.CANCELADA:o="#8B8B8B";break;default:o="#4796CE"}return Object(n.jsxs)("div",{className:"div-custom-task",style:{width:"".concat(a.width,"px"),background:"".concat(o)},children:[Object(n.jsxs)("div",{className:O.a.taskWrapper,children:[Object(n.jsx)("div",{className:O.a.taskTitle,children:t.title}),Object(n.jsx)("div",{className:O.a.taskRow,children:"".concat(i)})]}),Object(n.jsx)("div",{className:O.a.progress,style:{width:"".concat(t.progress,"%")}})]})},children:[Object(n.jsxs)(l.Toolbar,{children:[Object(n.jsx)(l.Item,{name:"collapseAll"}),Object(n.jsx)(l.Item,{name:"expandAll"}),Object(n.jsx)(l.Item,{name:"separator"}),Object(n.jsx)(l.Item,{name:"zoomIn"}),Object(n.jsx)(l.Item,{name:"zoomOut"}),Object(n.jsx)(l.Item,{name:"separator"}),Object(n.jsx)(l.Item,{children:Object(n.jsx)(p.a,{dataSource:oe,value:$,keyExpr:"id",valueExpr:"id",deferRendering:!1,displayExpr:"nome",placeholder:"Colunas",onValueChanged:function(e){g.a.set_parametro_usuario("gantt_colunas",e.value||[]),ee({visiveis:e.value||[]})},dropDownOptions:{width:300},dropDownButtonRender:function(e){return Object(n.jsx)("i",{className:"dx-icon dx-icon-column-chooser",style:{maxHeight:"100%",maxWidth:"100%",fontSize:"16px",marginTop:"6px"}})},contentRender:function(){return Object(n.jsxs)(m.a,{height:345,keyExpr:"id",dataSource:oe,hoverStateEnabled:!0,selectedRowKeys:$,onSelectionChanged:function(e){g.a.set_parametro_usuario("gantt_colunas",{visiveis:e.selectedRowKeys.length&&e.selectedRowKeys||[]}),ee(e.selectedRowKeys.length&&e.selectedRowKeys||[])},rowDragging:{allowReordering:!0,onReorder:function(e){var t=e.component.getVisibleRows(),a=oe.findIndex((function(a){return a.id===t[e.toIndex].data.id})),o=oe.findIndex((function(t){return t.id===e.itemData.id})),i=oe;i.splice(o,1),i.splice(a,0,e.itemData),ie(i);var n=oe.map((function(e){return e.id}));g.a.set_parametro_usuario("gantt_colunas",{ordem:n}),e.component.refresh(),ne()}},children:[Object(n.jsx)(f.Column,{caption:"Coluna",dataField:"nome"}),Object(n.jsx)(f.Selection,{mode:"multiple"}),Object(n.jsx)(f.Scrolling,{mode:"virtual"})]})}})}),Object(n.jsx)(l.Item,{name:"separator"}),Object(n.jsx)(l.Item,{widget:"dxButton",options:t}),Object(n.jsx)(l.Item,{widget:"dxButton",options:a}),Object(n.jsx)(l.Item,{name:"separator"}),Object(n.jsx)(l.Item,{widget:"dxButton",showText:"always",options:o})]}),Object(n.jsx)(l.Tasks,{keyExpr:"id",dataSource:I}),Object(n.jsx)(l.Dependencies,{keyExpr:"id",dataSource:D}),Object(n.jsx)(l.Resources,{keyExpr:"id",textExpr:"nome",dataSource:F}),Object(n.jsx)(l.ResourceAssignments,{keyExpr:"id",resourceIdExpr:"resourceId",taskIdExpr:"taskId",dataSource:V}),function(){var e=[];return oe.forEach((function(t){switch(t.id){case"title":e.push(Object(n.jsx)(l.Column,{dataField:"title",caption:v,width:200,cellTemplate:se,visible:$.includes("title")}));break;case"sequencia":e.push(Object(n.jsx)(l.Column,{dataField:"sequencia",caption:j,width:100,visible:$.includes("sequencia")}));break;case"codigo":e.push(Object(n.jsx)(l.Column,{dataField:"codigo",caption:w,width:100,visible:$.includes("codigo")}));break;case"start":e.push(Object(n.jsx)(l.Column,{dataField:"start",caption:x,width:150,visible:$.includes("start"),allowHeaderFiltering:!1}));break;case"end":e.push(Object(n.jsx)(l.Column,{dataField:"end",caption:y,width:150,visible:$.includes("end"),allowHeaderFiltering:!1}));break;case"conclusao":e.push(Object(n.jsx)(l.Column,{dataField:"conclusao",caption:A,width:150,visible:$.includes("conclusao"),allowHeaderFiltering:!1}));break;case"progress":e.push(Object(n.jsx)(l.Column,{dataField:"progress",caption:C,width:150,visible:$.includes("progress"),alignment:"left",calculateDisplayValue:ce}))}})),e.push(Object(n.jsx)(l.Column,{dataField:"status",caption:"Status",width:150,visible:!1})),e}()]},Q)})})}w.defaultProps={abaTitulo:"Projeto Gantt"}},1252:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(388),f=a(380),m=a(398),_=a(389);var h=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).dxGridRef=d.a.createRef(null),o}return Object(n.a)(a,[{key:"render",value:function(){var e,t={icon:"refresh",hint:"Recarregar",onClick:function(e){this.dxGridRef.current.instance.refresh()}.bind(this)};return this.props.projeto_id&&Object(o.jsx)(d.a.Fragment,{children:Object(o.jsxs)(u.default,{ref:this.dxGridRef,dataSource:(e=this.props.projeto_id,new m.default({pageSize:20,key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){_.a.get({route:"/projeto/listar_historico_baseline/",data:Object(f.a)({projeto_id:e,dx_grid:!0},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(f.a)(Object(f.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){_.a.get({route:"/projeto/listar_historico_baseline/",data:{dx_grid:!0,historico_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),style:{height:"calc(100vh - 50px)"},children:[Object(o.jsx)(p.Column,{width:100,dataField:"id",caption:"#",dataType:"number",alignment:"left",fixed:!0,fixedPosition:"left"}),Object(o.jsx)(p.Column,{dataField:"insert_hora",caption:"Criado em",dataType:"datetime",allowHeaderFiltering:!1}),Object(o.jsx)(p.Column,{dataField:"insert_usuario_nome",caption:"Criado por",dataType:"string"}),Object(o.jsx)(p.Column,{dataField:"sequencia",caption:"Sequ\xeancia",dataType:"number",alignment:"left"}),Object(o.jsx)(p.Column,{type:"buttons",children:Object(o.jsx)(p.Button,{icon:"fas fa-trash",hint:"Excluir Baseline",onClick:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};function a(){_.a.post("/projeto/excluir_historico_baseline/",{historico_id:e},(function(e){window.alert_saved("Baseline exclu\xedda com sucesso."),"function"===typeof t&&t()}))}window.alertaPopUp("Excluir baseline","Deseja excluir a <strong>Baseline #".concat(e,"</strong>?<br><br>Todos registros desse hist\xf3rico ser\xe3o perdidos com a exclus\xe3o."),"Sim, excluir",a,"N\xe3o, cancelar")}(e.row.data.id,this.dxGridRef.current.instance.refresh)}.bind(this)})}),Object(o.jsxs)(p.Toolbar,{children:[Object(o.jsx)(p.Item,{name:"exportButton",location:"after"}),Object(o.jsx)(p.Item,{location:"after",widget:"dxButton",options:t})]})]},"baseline_projeto_".concat(this.props.projeto_id))})}}]),a}(d.a.Component);h.defaultProps={abaTitulo:"Baseline Projeto"}},1253:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(883),_=a(413),h=[Object(o.jsx)(_.a,{width:"100%"},"Nome")],v=a(388),b=a(432),j=a(550),O=a(449);var g=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Grupo de Usu\xe1rios",text:"Adicionar",onClick:function(){window.View.load("grupo_usuarios/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}))}},location:"after",name:"BtnNovoGrupoUsuario",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarGrupoUsuarios=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e=[].concat(Object(i.a)(h),[Object(o.jsxs)(v.Column,{type:"buttons",children:[Object(o.jsx)(O.a,{visible:function(e){return parseInt(e.row.data.tipo_grupo_usuario)===window.TIPO_GRUPO_USUARIO.GRUPO_PERSONALIZADO},onClick:function(e){window.View.load("grupo_usuarios/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.grupo_usuarios_id,window.FORMULARIO.EDITAR)}))}},"btnEditar"),Object(o.jsx)(v.Button,{name:"permissoes",hint:"Permissoes",icon:"fas fa-lock",onClick:function(e){window.View.load("usuario/permissoes",(function(t,a){a.onclose=onclose,a.show(null,window.FORMULARIO.EDITAR,null,null,e.row.data.grupo_usuarios_id)}))}},"BtnPermissoes"),Object(o.jsx)(v.Button,{name:"clonar",hint:"Clonar",icon:"fas fa-clone",onClick:function(e){window.View.load("grupo_usuarios/clonar",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.nome,e.row.data.grupo_usuarios_id)}))}},"BtnClonar"),Object(o.jsx)(j.a,{onClick:function(e){window.View.load("grupo_usuarios/detalhes",(function(t,a){a.show(e.row.data.grupo_usuarios_id,window.FORMULARIO.VISUALIZAR)}))}},"BtnVisualizar"),Object(o.jsx)(b.a,{visible:function(e){return parseInt(e.row.data.tipo_grupo_usuario)===window.TIPO_GRUPO_USUARIO.GRUPO_PERSONALIZADO},onClick:function(e){window.View.load("grupo_usuarios/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.grupo_usuarios_id,window.FORMULARIO.EXCLUIR)}))}},"BtnApagar")]},"btns")]);return Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(f.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(m.a)(null,null,!0,!0),stateStoring:Object(f.stateStoring)("listarGrupoUsuarios"),groupPanel:{visible:!1},children:e})})})})}}]),a}(p.a.Component);g.defaultProps={abaTitulo:"Grupo de Usu\xe1rios"};t.default=g},1254:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(380),m=a(389),_=a(398),h=a(388),v=a(432),b=a(550),j=a(449),O=a(413);var g=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Grupo de Ativos",text:"Adicionar",onClick:function(){var t={tipo:window.FORMULARIO.NOVO,grupo_ativos_id:null};window.View.load("grupo_ativos/detalhes",(function(a,o){o.show(t),o.onclose=e.component.refresh}),window.View.ABA.SIM)}},location:"after",name:"BtnNovoGrupoativos",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){this.listarGrupoativos=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){var e,t=[Object(o.jsx)(O.a,{width:""},"nome"),Object(o.jsxs)(h.Column,{type:"buttons",children:[Object(o.jsx)(j.a,{onClick:function(e){var t={tipo:window.FORMULARIO.EDITAR,grupo_ativos_id:e.row.data.id};window.View.load("grupo_ativos/detalhes",(function(a,o){o.onclose=e.component.refresh,o.show(t)}),window.View.ABA.SIM)}},"btnEditar"),Object(o.jsx)(b.a,{onClick:function(e){var t={tipo:window.FORMULARIO.VISUALIZAR,grupo_ativos_id:e.row.data.id};window.View.load("grupo_ativos/detalhes",(function(e,a){a.show(t)}),window.View.ABA.SIM)}},"BtnVisualizar"),Object(o.jsx)(v.a,{onClick:function(e){var t={tipo:window.FORMULARIO.EXCLUIR,grupo_ativos_id:e.row.data.id};window.View.load("grupo_ativos/detalhes",(function(a,o){o.onclose=e.component.refresh,o.show(t)}),window.View.ABA.SIM)}},"BtnApagar")]},"btns")];return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(p.default,{style:{height:"calc(100vh - 46px)",width:"100%"},onToolbarPreparing:this.onToolbarPreparing,dataSource:(e={dx_grid:!0},new _.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){m.a.get({route:"grupo_ativos/listar/",data:Object(f.a)(Object(f.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(f.a)(Object(f.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){m.a.get({route:"grupo_ativos/listar/",data:{dx_grid:!0,id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),stateStoring:Object(p.stateStoring)("listarGrupoAtivos"),groupPanel:{visible:!1},children:t})})})})}}]),a}(u.a.Component);g.defaultProps={abaTitulo:"Grupos de Agenda de Ativos"};t.default=g},1255:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var o=a(372),i=a(380),n=a(419),r=a(389),s=a(398);function c(e){var t;return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:new s.default({key:"chave",load:function(e){return window.loadOptionsToActionParams(e),new Promise((function(e,t){r.a.get({route:"permissoes/todas/",data:null,func_response:function(t){e(t)},func_fail:function(e){e.validation&&t(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return{chave:e}}}),dropDownContainer:null!==(t=e.dropDownContainer)&&void 0!==t?t:void 0,remoteOperations:!1})))}c.defaultProps={columns:[{dataField:"alias",caption:"Nome"},{dataField:"modulo",caption:"M\xf3dulo",groupIndex:0},{dataField:"chave",caption:"Chave"}],displayExpr:function(e){return e&&e.chave},placeholder:"Permiss\xe3o necess\xe1ria",agrupaColunas:!0,dataGridRemoteOperations:!1}},1256:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(380),m=a(398),_=a(389),h=a(573);var v=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o,n;return Object(i.a)(this,a),(o=t.call(this,e)).dataGridRef=u.a.createRef(),o.meta_id=o.props.meta_id,o.state={dataSource:(n=o.meta_id,new m.default({pageSize:20,key:"registro_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){_.a.get({route:"metas_vendas/listar_metas_eventos/",data:Object(f.a)({dx_grid:!0,metas_vendas_id:n},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(f.a)(Object(f.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),columns:[{dataField:"representante_id",caption:"Representante",lookup:{dataSource:Object(h.createStore)({key:"representante_id",loadUrl:window.WS_URI+"representante/listar/",onBeforeSend:function(e,t){t.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},t.headers=_.a.dxHeaders(),t.data.dx_grid=!0,t.data=window.spread(t.data)}}),displayExpr:"nome_fantasia",valueExpr:"representante_id"}},{dataField:"tipo_agenda_oportunidade_id",caption:"Tipo Evento",lookup:{dataSource:Object(h.createStore)({key:"tipo_agenda_oportunidade_id",loadUrl:window.WS_URI+"tipo_agenda_oportunidade/listar/",onBeforeSend:function(e,t){t.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},t.headers=_.a.dxHeaders(),t.data.dx_grid=!0,t.data=window.spread(t.data)}}),displayExpr:"descricao",valueExpr:"tipo_agenda_oportunidade_id"}},{dataField:"quantidade",caption:"Quantidade",dataType:"number",align:"left"},{type:"buttons",buttons:[{hint:"Excluir",icon:"trash",visible:function(e){return!e.row.removed},onClick:function(e){return e.component.deleteRow(e.row.rowIndex)}},{hint:"Recuperar",icon:"revert",visible:function(e){return e.row.removed},onClick:function(e){e.component.undeleteRow(e.row.rowIndex),e.event.preventDefault()}}]}]},o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.getDataGridRef&&this.props.getDataGridRef(this.dataGridRef)}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(p.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,columns:this.state.columns,onToolbarPreparing:this.onToolbarPreparing,selection:{mode:"multiple"},stateStoring:this.meta_id>0?Object(p.stateStoring)("ListagemMetaEventos_meta_".concat(this.meta_id)):null,editing:{mode:"batch",allowUpdating:!0,useIcons:!0}})})}},{key:"onToolbarPreparing",value:function(e){console.log(this.dataGridRef);var t=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Meta de Evento",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items);for(var a=0;a<e.toolbarOptions.items.length;a++){var o=e.toolbarOptions.items[a];"saveButton"===o.name&&(o.options.visible=!1)}}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(u.a.Component)},1257:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var o=a(372),i=a(380),n=a(419),r=a(398),s=a(389);function c(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:new r.default({paginate:!0,pageSize:20,key:"documento_pasta_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){s.a.get({route:"documento_pasta/listar/",data:Object(i.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(i.a)(Object(i.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){s.a.get({route:"documento_pasta/listar/",data:{dx_grid:!0,documento_pasta_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})})))}c.defaultProps={placeholder:"Selecionar Pasta",valueExpr:"documento_pasta_id",displayExpr:"path",dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,columns:[{dataField:"nome",caption:"Nome",dataType:"string",allowHeaderFiltering:!1,selectedFilterOperation:"contains"},{dataField:"path",caption:"Caminho",dataType:"string",allowHeaderFiltering:!1,sortIndex:0,sortOrder:"asc"}]}},1258:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(401),f=a(388),m=a(380),_=a(398),h=a(389),v=a(105);var b=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).cellRender=function(e){var t=null;if(e.data.foto_id){var a=window.WS_URI+"documento/midia/?&tamanho=28&documento_id="+e.data.foto_id+"&token_midia="+v.a.sessao.token_midia;t=Object(o.jsx)("img",{alt:"avatar",style:{height:"28px",width:"28px",borderRadius:"25em",margin:"0 0 0 4px"},src:a,title:e.data.nome})}else t=Object(o.jsx)("div",{style:{width:"28px",height:"28px",backgroundColor:"#dfe1e6",borderRadius:"25em",color:"#172b4d",lineHeight:"28px",textAlign:"center",display:"inlineBlock",margin:"0 0 0 4px",verticalAlign:"middle"},children:Object(o.jsx)("span",{style:{fontWeight:600},title:e.data.nome,children:window.obter_iniciais(e.data.nome)})});var i=function(e){return e===window.getDateNow(!0)?"hoje - "+window.dia_semana(window.format_ToDate(e).getDay()):e===window.formatDate(window.getDateNow().addDay(1),!0)?"amanh\xe3 - "+window.dia_semana(window.format_ToDate(e).getDay()):window.formatar_data_humano(e)+" - "+window.dia_semana(window.format_ToDate(e).getDay())},n=null,r=null;return parseInt(e.data.tipo_aniversario)===window.TIPO_ANIVERSARIO.NASCIMENTO?(n=Object(o.jsxs)("div",{style:{marginLeft:"10px"},children:[e.data.nome," da \xc1rea ",e.data.area_nome," ",Object(o.jsx)("br",{})," Aniversariante ",i(e.data.data_aniversario)]}),r=Object(o.jsx)("i",{style:{marginLeft:"15px",fontSize:"24px"},className:"fas fa-birthday-cake text-primary"})):parseInt(e.data.tipo_aniversario)===window.TIPO_ANIVERSARIO.EMPRESA&&(n=Object(o.jsxs)("div",{style:{marginLeft:"10px"},children:[e.data.nome," da \xc1rea ",e.data.area_nome," ",Object(o.jsx)("br",{})," Completa ",e.data.qtde_anos," Ano(s) de empresa ",i(e.data.data_aniversario)]}),r=Object(o.jsx)("i",{style:{marginLeft:"15px",fontSize:"24px"},className:"fas fa-briefcase text-primary"})),Object(o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[t,n,r]})},n.dataGridRef=u.a.createRef(),n.cellRender=n.cellRender.bind(Object(r.a)(n)),n}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(p.default,{pager:{showPageSizeSelector:!1},elementAttr:{style:"max-height: 300px"},ref:this.dataGridRef,dataSource:new _.default({pageSize:20,load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){h.a.get({route:"aniversariantes/listar/",data:Object(m.a)({},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(m.a)(Object(m.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),groupPanel:{visible:!1},columnChooser:{enabled:!1},searchPanel:{visible:!1},export:{enabled:!1},filterPanel:{visible:!1},filterRow:{visible:!1},showColumnHeaders:!1,noDataText:"Parece que n\xe3o tem ningu\xe9m fazendo aniver\xe1rio nos pr\xf3ximos 30 dias",onInitialized:function(e){setTimeout((function(){e.component.element().find(".dx-datagrid").css("border-radius","10px"),e.component.element().find(".dx-datagrid-rowsview").css("border","none")}))},children:Object(o.jsx)(f.Column,{cellRender:this.cellRender})})})}}]),a}(u.a.Component)},1259:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(575),f=a.n(p),m=a(388),_=a.n(m),h=a(380),v=a(398),b=a(389),j=function(e){return new v.default({pageSize:20,key:"chave",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){b.a.get({route:"/projeto/listar_executores_projetos_devextreme/",data:Object(h.a)({projeto_id:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(h.a)(Object(h.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(t){return!!t&&new Promise((function(a,o){b.a.get({route:"/projeto/listar_executores_projetos_devextreme/",data:{chave:t,projeto_id:e},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var O=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).dataGridRef=u.a.createRef(null),o.dropDownBoxRef=u.a.createRef(null),o.dataGridRender=o.dataGridRender.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.aoIniciarComponente&&this.props.aoIniciarComponente(this)}},{key:"render",value:function(){return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)(f.a,{ref:this.dropDownBoxRef,dataSource:j(this.props.projeto_id),valueExpr:"chave",displayExpr:"nome",placeholder:"Selecione os executores da atividade",contentRender:this.dataGridRender})})}},{key:"dataGridRender",value:function(){var e=this;return Object(o.jsx)(_.a,{ref:this.dataGridRef,dataSource:j(this.props.projeto_id),hoverStateEnabled:!0,selection:{mode:"multiple"},remoteOperations:!0,filterRow:{visible:!0},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},columns:[{dataField:"nome",caption:"Nome",dataType:"string"},{dataField:"tipo_executor",caption:"Tipo",dataType:"string",allowFiltering:!1,calculateCellValue:function(e){return"usuario"===e.tipo_executor?"[U] Usu\xe1rio":"grupo_usuarios"===e.tipo_executor?"[G] Grupo de Usu\xe1rios":void 0}}],children:Object(o.jsx)(m.Toolbar,{children:Object(o.jsx)(m.Item,{name:"btnConfirmarSelecao",location:"before",widget:"dxButton",options:{hint:"Confirmar",text:"Confirmar",icon:"fas fa-check",onClick:function(){if(e.dataGridRef.current&&e.dropDownBoxRef.current&&"function"===typeof e.props.aoConfirmarSelecao){var t=e.dataGridRef.current.instance,a=e.dropDownBoxRef.current.instance;e.props.aoConfirmarSelecao(t,a)}}}})})})}}]),a}(u.a.Component)},1260:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(380),f=a(398),m=a(389),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new f.default({pageSize:20,key:"log_id",load:function(a){var o=window.loadOptionsToActionParams(a);return new Promise((function(a,i){m.a.get({route:"/documento/listar_historico/",data:Object(p.a)({documento_id:e,documento_pasta_id:t,dx_grid:!0},o),func_response:function(e){var t=window.createLoadExtra(e);a(Object(p.a)(Object(p.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(a){return!!a&&new Promise((function(o,i){m.a.get({route:"/documento/listar_historico/",data:{documento_id:e,documento_pasta_id:t,dx_grid:!0,log_documento_id:a},func_response:function(e){o(e.data)},func_fail:function(e){e.validation&&i(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var h=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)(u.default,{dataSource:_(this.props.documento_id,this.props.documento_pasta_id),style:{height:"calc(100vh - 205px)"},columns:[{dataField:"usuario_nome",caption:"Usu\xe1rio",dataType:"string"},{dataField:"acao",caption:"A\xe7\xe3o",dataType:"string",allowFiltering:!1,allowHeaderFiltering:!0,lookup:{valueExpr:"id",displayExpr:"descricao",dataSource:[{id:"0",descricao:"Inclus\xe3o"},{id:"1",descricao:"Altera\xe7\xe3o"},{id:"2",descricao:"Exclus\xe3o"},{id:"3",descricao:"Movido"},{id:"4",descricao:"Envio de Vers\xe3o"},{id:"5",descricao:"Visualiza\xe7\xe3o"},{id:"6",descricao:"Aprovado"},{id:"7",descricao:"Reprovado"},{id:"8",descricao:"Download"},{id:"9",descricao:"Vers\xe3o Ativada"},{id:"10",descricao:"Vers\xe3o Exclu\xedda"},{id:"11",descricao:"Aprova\xe7\xe3o Estornada"},{id:"12",descricao:"Reprova\xe7\xe3o Estornada"},{id:"13",descricao:"Bloqueio"},{id:"14",descricao:"Desbloqueio"},{id:"15",descricao:"Substitu\xeddo"},{id:"16",descricao:"Download por URL"},{id:"17",descricao:"Novo link para download"},{id:"18",descricao:"Restaurado"}]}},{dataField:"quando",caption:"Realizado em",dataType:"datetime",format:"dd/MM/yyyy HH:mm",allowHeaderFiltering:!1,sortOrder:"desc"},{dataField:"detalhes",caption:"Detalhes",dataType:"string"}]},"grid_historico_documentos")})}}]),a}(d.a.Component)},1261:function(e,t,a){"use strict";a.r(t),a.d(t,"periodicidade",(function(){return b})),a.d(t,"dataSourcePeriodicidade",(function(){return j})),a.d(t,"default",(function(){return O}));var o=a(372),i=a(391),n=a(376),r=a.n(n),s=a(401),c=a(388),l=a(398),d=a(551),u=a.n(d),p=a(408),f=(a(454),a(63)),m=a.n(f),_=a(389),h=a(105);function v(e){var t=e.html_id,a=e.formularioId,i=void 0===a?null:a,s=e.valoresIniciais,c=void 0===s?[]:s,l=e.aoConfirmar,d=void 0===l?null:l,u=e.aoCancelar,f=void 0===u?null:u,v=r.a.createRef(),b={};b.html=m()('<div class="scrollview aba_personalizado" style="background-color: #ffffff;"><div class="titulo_formulario">Campos Personalizados</div><div class="form-editor"><div class="form-grupos panel-body" style="padding: 0px;"></div><div class="form-grupo" template-grupo template-ref="" style="display: none;"><div><h3 class="text-primary lbl_grupo_nome"></h3></div></div><div class="form-grupo-campo" template-campo template-ref="" style="display: none;"><div class="div_campo form-group"><span class="lbl_obrigatorio text-danger">* </span><label class="lbl_nome">{Nome}</label><div class="div_input"></div></div></div></div></div>'),b.html_id=t,b.aba_personalizado=b.html,b.titulo_formulario=b.html.find(".titulo_formulario"),b.form_editor=b.html.find(".form-editor"),b.form_grupos=b.html.find(".form-grupos"),b.template_grupo=b.html.find("[template-grupo]"),b.template_campo=b.html.find("[template-campo]"),b.campos_personalizados=[],b.lbl_nome=b.html.find(".lbl_nome");Object(n.useEffect)((function(){window.require(["./assets/view/formulario/util"],(function(e){_.a.get("formulario/objeto/",{formulario_id:i},(function(t){b.formulario=t,Array.isArray(c)&&c.forEach((function(e){b.formulario.grupos.forEach((function(t){t.elementos.forEach((function(t){e.id_elemento===t.id_elemento&&(t.valor=e.valor)}))}))})),(new e).render_previsao({div_formulario:b,template_campo:b.template_campo,template_grupo:b.template_grupo,obj_formulario:b.formulario,disabled_all:!1,liberar_campos:!0}),m()(v.current).html(b.form_editor[0])}))})),h.a.titulo_aba(t,"Valores Iniciais")}),[]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsxs)("div",{className:"pull-right",children:[Object(o.jsx)("button",{type:"button",className:"btn btn-default",onClick:function(){p.a.unload(t),f&&f()},children:"Cancelar"}),Object(o.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){p.a.unload(t);var e=[];b.formulario.grupos.forEach((function(t){t.elementos.forEach((function(t){if(t.valor){if(Array.isArray(t.valor)&&0===t.valor.length)return;e.push({id_elemento:t.id_elemento,valor:t.valor})}}))})),d&&d(e)},children:"Confirmar"})]}),Object(o.jsx)("span",{children:"Valores Iniciais"})]})}),Object(o.jsx)("div",{ref:v,className:"scrollview",style:{backgroundColor:"#ffffff"}})]})}var b=[{ID:1,descricao:"Primeiro dia de cada m\xeas",categoria:"Dias do m\xeas"},{ID:2,descricao:"Dia 2 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:3,descricao:"Dia 3 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:4,descricao:"Dia 4 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:5,descricao:"Dia 5 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:6,descricao:"Dia 6 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:7,descricao:"Dia 7 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:8,descricao:"Dia 8 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:9,descricao:"Dia 9 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:10,descricao:"Dia 10 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:12,descricao:"Dia 12 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:13,descricao:"Dia 13 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:14,descricao:"Dia 14 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:15,descricao:"Dia 15 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:16,descricao:"Dia 16 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:17,descricao:"Dia 17 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:18,descricao:"Dia 18 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:19,descricao:"Dia 19 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:20,descricao:"Dia 20 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:21,descricao:"Dia 21 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:22,descricao:"Dia 22 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:23,descricao:"Dia 23 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:24,descricao:"Dia 24 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:25,descricao:"Dia 25 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:26,descricao:"Dia 26 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:27,descricao:"Dia 27 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:28,descricao:"Dia 28 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:29,descricao:"Dia 29 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:30,descricao:"Dia 30 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:31,descricao:"Dia 31 de cada m\xeas",categoria:"Dias do m\xeas"},{ID:32,descricao:"\xdaltimo dia de cada m\xeas",categoria:"Dias do m\xeas"},{ID:33,descricao:"Todo Domingo",categoria:"Dias da semana"},{ID:34,descricao:"Toda Segunda-feira",categoria:"Dias da semana"},{ID:35,descricao:"Toda Ter\xe7a-feira",categoria:"Dias da semana"},{ID:36,descricao:"Toda Quarta-feira",categoria:"Dias da semana"},{ID:37,descricao:"Toda Quinta-feira",categoria:"Dias da semana"},{ID:38,descricao:"Toda Sexta-feira",categoria:"Dias da semana"},{ID:39,descricao:"Todo S\xe1bado",categoria:"Dias da semana"}],j=new l.default({store:b,group:"categoria"});function O(e){e.processoId;var t=e.formularioId,a=void 0===t?null:t,n=e.data,l=void 0===n?[]:n,d=(e.html_id,e.onRowRemoved),f=void 0===d?null:d,m=e.onRowInserted,_=void 0===m?null:m,h=r.a.createRef();return Object(o.jsxs)(s.default,{ref:h,style:{width:"100%"},dataSource:l,keyExpr:"id",remoteOperations:!1,onInitNewRow:function(e){e.data.id="n_"+window.random_hash(),e.data.ativo="N",e.data.quantidade=1,e.data.formulario_valores_iniciais=[]},headerFilter:{visible:!1},filterPanel:{visible:!1},filterRow:{visible:!1},sorting:{mode:"none"},groupPanel:{visible:!1},searchPanel:{visible:!1},columnChooser:{enabled:!1},export:{enabled:!1},onRowRemoved:f,onRowInserted:_,onSaved:function(e){return console.log(e)},children:[Object(o.jsx)(c.Editing,{mode:"row",allowUpdating:!0,allowDeleting:!0,allowAdding:!0}),Object(o.jsx)(c.Column,{dataField:"ativo",dataType:"boolean",calculateCellValue:function(e){return"S"===e.ativo||!0===e.ativo},trueText:"S",falseText:"N",width:"80px",caption:"Ativo"}),Object(o.jsx)(c.Column,{dataField:"dias",width:"220px",caption:"Iniciar solicita\xe7\xf5es automaticamente em",editCellComponent:function(e){return Object(o.jsx)(u.a,{dataSource:j,defaultValue:"string"===typeof e.data.value?JSON.parse(e.data.value):e.data.value||[],valueExpr:"ID",displayExpr:"descricao",grouped:!0,showSelectionControls:!0,maxDisplayedTags:2,showMultiTagOnly:!1,applyValueMode:"useButtons",onValueChanged:function(t){e.data.setValue(t.value)},onSelectionChanged:function(t){e.data.component.updateDimensions()}})},cellTemplate:function(e,t){var a=("string"===typeof t.value?JSON.parse(t.value):t.value||[]).map((function(e){for(var t=0;t<b.length;t++){var a=b[t];if(a.ID==e)return a.descricao}})).join(", ");e.append(a||"\xa0")},children:Object(o.jsx)(c.RequiredRule,{})}),Object(o.jsx)(c.Column,{dataField:"hora_abertura",dataType:"datetime",format:"HH:mm",editorOptions:{displayFormat:"HH:mm",useMaskBehavior:!0,type:"time"},width:"100px",caption:"Hora abertura",children:Object(o.jsx)(c.RequiredRule,{})}),Object(o.jsxs)(c.Column,{dataField:"quantidade",dataType:"number",editorOptions:{type:"fixedPoint"},width:"90px",caption:"Qtde por solicitante",children:[Object(o.jsx)(c.RequiredRule,{}),Object(o.jsx)(c.Format,{type:"fixedPoint"})]}),Object(o.jsx)(c.Column,{dataField:"enviar_automaticamente",dataType:"boolean",calculateCellValue:function(e){return"S"===e.enviar_automaticamente||!0===e.enviar_automaticamente},trueText:"S",falseText:"N",width:"80px",caption:"Enviar automaticamente"}),Object(o.jsx)(c.Column,{dataField:"ultima_execucao",dataType:"datetime",width:"150px",caption:"\xdaltima execu\xe7\xe3o",allowEditing:!1}),Object(o.jsxs)(c.Column,{type:"buttons",children:[Object(o.jsx)(c.Button,{name:"edit"}),Object(o.jsx)(c.Button,{name:"delete"}),Object(o.jsx)(c.Button,{hint:"Valores Iniciais",icon:"fas fa-list-alt",visible:function(e){return!!e.row.data.id},onClick:function(e){var t=e.row.data.formulario_valores_iniciais?Object(i.a)("string"===typeof e.row.data.formulario_valores_iniciais?JSON.parse(e.row.data.formulario_valores_iniciais):e.row.data.formulario_valores_iniciais||[]):null;p.a.loadReact(v,{formularioId:a,valoresIniciais:t,aoConfirmar:function(t){h.current&&h.current.instance.getDataSource().store().update(e.row.key,{formulario_valores_iniciais:t})}},(function(e){}),p.a.ABA.SIM)}})]})]})}},1262:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(380),n=a(419),r=a(398),s=a(389),c=a(413),l=a(842),d=a(843),u=a(105);function p(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:new r.default({pageSize:20,key:"contato_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){s.a.get({route:"contato/listar_para_selecao/",data:t,func_response:function(t){var a=window.createLoadExtra(t);e(Object(i.a)(Object(i.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){s.a.get({route:"contato/listar_para_selecao/",data:{contato_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),dataGridOnToolbarPreparing:function(t){var a=[{widget:"dxButton",options:{icon:"plus",hint:"Novo Contato",text:"Novo Contato",visible:u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"contatos")&&!!e.entidadeTipo&&!!e.entidadeId,onClick:function(a){window.View.load("contato/detalhes",(function(a,o){o.onsave=function(){return t.component.instance().refresh()},o.show(null,window.FORMULARIO.NOVO,null,"",e.entidadeTipo,e.entidadeId)}),window.View.ABA.MULTIPLAS)}},showText:"always",location:"after",name:"btnNovoContato",locateInMenu:"auto"}];t.toolbarOptions.items=window.add_botao_dx_toolbar(a,t.toolbarOptions.items)}})))}p.defaultProps={displayExpr:"descricao",valueExpr:"contato_id",children:[Object(o.jsx)(c.a,{width:"30%"},"nome"),Object(o.jsx)(l.a,{},"email"),Object(o.jsx)(d.a,{dataField:"telefone1",caption:"Telefone 1"},"telefone1"),Object(o.jsx)(d.a,{dataField:"telefone2",caption:"Telefone 2"},"telefone2"),Object(o.jsx)(d.a,{dataField:"telefone3",caption:"Telefone 3"},"telefone3"),Object(o.jsx)(d.a,{dataField:"telefone4",caption:"Telefone 4"},"telefone4")]}},1263:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var o=a(380),i=a(372),n=Object.freeze({usuario:0,grupoUsuarios:1}),r=[{id:n.usuario,descricao:"Usu\xe1rio"},{id:n.grupoUsuarios,descricao:"Grupo de Usu\xe1rio"}],s=a(509),c=a.n(s);function l(e){return Object(i.jsx)(c.a,Object(o.a)(Object(o.a)({},e),{},{dataSource:r,valueExpr:"id",displayExpr:"descricao",searchEnabled:!0}))}},1274:function(e,t,a){window.views={},window.views.agenda={},window.views.agenda.ListagemEventosRecorrentes=a(1103),window.views.chamado={},window.views.chamado.Detalhes=a(898),window.views.chamado.Listagem=a(1233),window.views.temas={},window.views.temas.SelecionarTema=a(1234),window.views.alocacaoExecutoresProjeto={},window.views.alocacaoExecutoresProjeto.ListagemAlocacoes=a(1235),window.views.fornecedores={},window.views.fornecedores.Listagem=a(1236),window.views.prospects={},window.views.prospects.Listagem=a(1237),window.views.clientes={},window.views.clientes.Listagem=a(1238),window.views.modelagemFormulario={},window.views.modelagemFormulario.Listagem=a(1239),window.views.processos={},window.views.processos.Listagem=a(859),window.views.processos.ListagemCategoriaProcessos=a(1240),window.views.motivo_chamados={},window.views.motivo_chamados.Listagem=a(1213),window.views.grupoMotivoChamado={},window.views.grupoMotivoChamado.Listagem=a(1241),window.views.grupoMotivoChamado.Detalhes=a(1125),window.views.nota_avaliacao={},window.views.nota_avaliacao.Listagem=a(1242),window.views.agendaContatos={},window.views.agendaContatos.Listagem=a(1126),window.views.menuPersonalizado={},window.views.menuPersonalizado.ListagemMenuPersonalizado=a(1243),window.views.ChamadoPrioridade={},window.views.ChamadoPrioridade.ChamadoPrioridadeListagem=a(1244),window.views.ChamadoCorPercentualConclusao={},window.views.ChamadoCorPercentualConclusao.ChamadoCorPercentualConclusaoListagem=a(1214),window.views.LixeiraDocumentos={},window.views.LixeiraDocumentos.ListagemLixeiraDocumentos=a(1215),window.views.ChamadoClassificacao={},window.views.ChamadoClassificacao.Listagem=a(1127),window.views.pdca={},window.views.pdca.Listagem=a(1219),window.views.pdca.ListagemCategoriasPDCA=a(1245),window.views.assunto_documento={},window.views.assunto_documento.AssuntoDocumentoListagem=a(1246),window.views.tipo_documento={},window.views.tipo_documento.TipoDocumentoListagem=a(1247),window.views.orcamento_template_word={},window.views.orcamento_template_word.OrcamentoTemplateWordListagem=a(1220),window.views.solicitacao_template_word={},window.views.solicitacao_template_word.SolicitacaoTemplateWordListagem=a(1221),window.views.solicitacao_processo={},window.views.solicitacao_processo.Listagem=a(1222),window.views.solicitacao_processo.ListagemAtividadesMasterDetail=a(689),window.views.formulario={},window.views.formulario.TextoHistorico=a(1178),window.views.tipo_moeda={},window.views.tipo_moeda.Listagem=a(1179),window.views.agendaEvento={},window.views.agendaEvento.Listagem=a(1216),window.views.central_pendencias={},window.views.central_pendencias.Listagem=a(1218),window.views.consulta_integracao={},window.views.consulta_integracao.Listagem=a(1248),window.views.motivo_perda_negocio={},window.views.motivo_perda_negocio.Relatorio=a(1223),window.views.oportunidade_origem={},window.views.oportunidade_origem.Relatorio=a(1224),window.views.cubo={},window.views.cubo.Listagem=a(1225),window.views.cubo.Detalhes=a(889),window.views.cubo.ListagemEquipe=a(931),window.views.admin={},window.views.admin.AtualizacaoHistorico=a(1226),window.views.empresa={},window.views.empresa.Listagem=a(1249),window.views.etiqueta={},window.views.etiqueta.Listagem=a(1250),window.views.projeto={},window.views.projeto.ProjetoGantt=a(1251),window.views.projeto.HistoricoBaseline=a(1252),window.views.apontamento_simples={},window.views.apontamento_simples.Listagem=a(1227),window.views.cargo={},window.views.cargo.ListagemCargo=a(1183),window.views.permissoes={},window.views.permissoes.DataGridPermissoes=a(1184),window.views.documentos={},window.views.documentos.Listagem=a(891),window.views.ClassificacaoMovimentacaoFinanceira={},window.views.ClassificacaoMovimentacaoFinanceira.ListagemClassificacaoMovimentacaoFinanceira=a(1186),window.views.Referencias={},window.views.Referencias.ReferenciasQuadroTarefas=a(1187),window.views.Referencias.ReferenciasPDCA=a(1188),window.views.oauth_client={},window.views.oauth_client.Listagem=a(1228),window.views.grupo_usuarios={},window.views.grupo_usuarios.Listagem=a(1253),window.views.tipo_agenda={},window.views.tipo_agenda.Listagem=a(1229),window.views.agenda_ativo={},window.views.agenda_ativo.Listagem=a(1230),window.views.grupo_ativos={},window.views.grupo_ativos.Listagem=a(1254),window.views.entidade={},window.views.entidade.EntidadeCard=a(621),window.components={},window.components.DataGridPadrao=a(401),window.components.SelecaoPadrao=a(419),window.components.SelecaoUsuario=a(1189),window.components.Referencias=a(627),window.components.MovimentacaoFinanceira=a(1190),window.components.SelecaoGrupoUsuarios=a(882),window.components.Cockpit=a(930),window.components.Filtro=a(862),window.components.Favoritos=a(933),window.components.ListagemPermissoes=a(1255),window.components.FormularioPersonalizado=a(685),window.components.CardNotas=a(934),window.components.HomeDrawerRight=a(1193),window.components.MetasEventoCRM=a(1256),window.components.SelecaoFormulario=a(918),window.components.SelecaoTipoMoeda=a(1194),window.components.TextBoxCPFCNPJ=a(1195),window.components.SelecaoEmails=a(1196),window.components.SelecaoChamadoMotivo=a(839),window.components.MotivoChamadoEntidades=a(1231),window.components.SelecaoCategoriaPDCA=a(1197),window.components.SelecaoProjeto=a(852),window.components.SelecaoPasta=a(1257),window.components.NovaVotacao=a(1198),window.components.Votacao=a(1199),window.components.Aniversariantes=a(1258),window.components.EntidadeHistoricoCadastral=a(1232),window.components.ProcessoDrawerRight=a(1200),window.components.ProcessoDiagram=a(1201),window.components.SelecaoEntidade=a(841),window.components.SelecaoProjetoAtividadeExecutor=a(1259),window.components.SelecaoCargo=a(1202),window.components.DocumentoHistorico=a(1260),window.components.DropDownVisoes=a(932),window.components.VisualizarPDFAba=a(1203),window.components.VisualizarImagemAba=a(1204),window.components.VisualizarVideoAba=a(1205),window.components.DropDownEtiquetas=a(1206),window.components.ExtensoesCampoAnexo=a(1207),window.components.DataGridProcessoRecorrencia=a(1261),window.components.SelecaoConsultaIntegracao=a(1208),window.components.SelecaoAtivos=a(884),window.components.SelecaoContato=a(1262),window.components.SelecaoTipoUsuarioGrupo=a(1263),window.components.SelecaoFormularioCampo=a(1209),window.components.CopiarLink=a(682),window.components.TextBoxHora=a(1210),window.components.ColunaUsuario=a(549),window.functions={},window.functions.CNPJ=a(894),window.datasource={},window.datasource.defaultProcessoAtividade=a(531).defaultProcessoAtividade,window.datasource.defaultProcessoGateway=a(531).defaultProcessoGateway,window.datasource.oportunidade=a(688)},389:function(e,t,a){"use strict";t.a="undefined"!==typeof window.WS?window.WS:{}},401:function(e,t,a){"use strict";a.r(t),a.d(t,"removeColunasNaoExistentes",(function(){return u})),a.d(t,"stateStoring",(function(){return p})),a.d(t,"itemRestaurarEstadoDasColunas",(function(){return f}));var o=a(380),i=a(372),n=a(376),r=a.n(n),s=a(388),c=a.n(s),l=a(105),d=r.a.forwardRef((function(e,t){var a;return Object(i.jsx)(c.a,Object(o.a)(Object(o.a)({export:{enabled:!0,fileName:"Exportacao_"+window.agora(),allowExportSelectedData:e.selection&&"multiple"===e.selection.mode,customizeExcelCell:null!==(a=e.exportCustomizeExcelCell)&&void 0!==a?a:null}},e),{},{ref:t}))})),u=function(e,t){e.filterValue&&(e.filterValue=function e(a){if(Array.isArray(a)){if(a.length>1&&"string"===typeof a[0]&&"string"===typeof a[1]&&!t.includes(a[0]))return window.alert_warning('Coluna "'+a[0]+'" n\xe3o existe e estava sendo utilizada em filtros.'),!1;for(var o=0;o<a.length;o++){var i=a[o];if(Array.isArray(i)&&!e(i))return!1}}return!0}(e.filterValue)?e.filterValue:[]);var a;return e.columns&&(e.columns=(a=e.columns,Array.isArray(a)?a.filter((function(e){return e.dataField&&t.includes(e.dataField)})):a)),e},p=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{enabled:!0,type:"custom",customLoad:function(){if(!e)return!1;var i=l.a.get_parametro_usuario(e);return t&&(i=u(i,t)),a||(i.searchText=null),Object(o.a)({},i)},customSave:function(t){if(!e)return!1;l.a.set_parametro_usuario(e,t,null,!1)}}},f=function(e){return{text:"Restaurar estado das colunas",visible:!0,beginGroup:!0,onItemClick:function(t){window.DevExpress.ui.dialog.confirm("Os filtros, ordena\xe7\xf5es, agrupamentos, posi\xe7\xe3o, tamanho, sele\xe7\xe3o e visibilidade das colunas desta listagem ser\xe3o restauradas ao estado padr\xe3o. <b>Deseja continuar?</b>","Restaurar estado das colunas").done((function(t){t&&(e.component._clearState=!0,e.component._clearSelectedRows=!0,e.component.refresh())}))}}};d.defaultProps={selection:{mode:"single"},showBorders:!0,hoverStateEnabled:!0,rowAlternationEnabled:!0,remoteOperations:!0,pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},filterPanel:{visible:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!0},columnFixing:{enabled:!0},searchPanel:{visible:!window.detectmob(),width:200,placeholder:"Pesquisa geral"},allowColumnReordering:!0,allowColumnResizing:!0,columnResizingMode:"widget",columnChooser:{enabled:!0,allowSearch:!0,mode:window.detectmob()?"select":"dragAndDrop"},onContextMenuPreparing:function(e){"header"===e.target&&Array.isArray(e.items)&&e.items.push(f(e))},onContentReady:function(e){e.component._clearState&&(e.component.state({}),e.component._clearState=!1),setTimeout((function(){return e.component.updateDimensions()}),100)}},t.default=d},408:function(e,t,a){"use strict";t.a="undefined"!==typeof window.View?window.View:{}},413:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"nome",caption:"Nome",width:150}},419:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var o=a(422),i=a.n(o),n=a(425),r=a(380),s=a(372),c=a(365),l=a(366),d=a(385),u=a(368),p=a(369),f=a(367),m=a(376),_=a.n(m),h=a(401),v=a(575),b=a.n(v);var j=function(e){Object(u.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(f.a)(e);if(t()){var i=Object(f.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(p.a)(this,a)}}(a);function a(e){var o;return Object(c.a)(this,a),(o=t.call(this,e)).state={selecionado:e.selecionado?Array.isArray(e.selecionado)?e.selecionado:[e.selecionado]:null,selecionadoPropriedades:null},o.filterEditorElement=void 0,o.dropDownBoxRef=_.a.createRef(),o.dataGridRef=_.a.createRef(),o.syncDataGridSelection=o.syncDataGridSelection.bind(Object(d.a)(o)),o.dataGrid_onSelectionChanged=o.dataGrid_onSelectionChanged.bind(Object(d.a)(o)),o.onOpened=o.onOpened.bind(Object(d.a)(o)),o.ajustarTamanhoJanela=o.ajustarTamanhoJanela.bind(Object(d.a)(o)),o.dataGridRender=o.dataGridRender.bind(Object(d.a)(o)),o}return Object(l.a)(a,[{key:"componentDidMount",value:function(){"function"===typeof this.props.getDropDownRef&&this.props.getDropDownRef(this.dropDownBoxRef)}},{key:"componentDidUpdate",value:function(e){this.props.atualizarValorAutomaticamente&&e.selecionado!=this.props.selecionado&&this.setState({selecionado:this.props.selecionado})}},{key:"render",value:function(){var e;return Object(s.jsx)(b.a,{ref:this.dropDownBoxRef,dataSource:this.props.dataSource,value:this.state.selecionado,deferRendering:null===(e=this.props.deferRendering)||void 0===e||e,valueExpr:this.props.valueExpr,displayExpr:this.props.displayExpr,placeholder:this.props.placeholder,showClearButton:this.props.showClearButton,onValueChanged:this.syncDataGridSelection,contentRender:this.dataGridRender,onOpened:this.onOpened,stylingMode:this.props.stylingMode,fieldRender:this.props.fieldRender,readOnly:this.props.readOnly,visible:"boolean"!==typeof this.props.visible||this.props.visible,width:this.props.width,dropDownOptions:{resizeEnabled:!0,container:this.props.dropDownContainer,width:this.props.dataGridWidth||"100%"},style:this.props.dropDownBoxStyle})}},{key:"dataGridRender",value:function(){var e=this,t={visible:!window.detectmob()&&this.props.dataGridSearchPanelEnabled,width:200,placeholder:"Pesquisa Geral"},a={enabled:this.props.dataGridExportEnabled,fileName:"Exportacao_"+window.agora(),allowExportSelectedData:!0},o={enabled:this.props.dataGridColumnChooserEnabled,allowSearch:!0,mode:window.detectmob()?"select":"dragAndDrop"},i={};this.props.columns&&(i.columns=this.props.columns);return Object(s.jsx)(h.default,Object(r.a)(Object(r.a)({ref:this.dataGridRef,dataSource:this.props.dataSource,stateStoring:this.props.stateStoring,hoverStateEnabled:!0,selectedRowKeys:this.state.selecionado,onSelectionChanged:this.dataGrid_onSelectionChanged,searchPanel:t,groupPanel:{visible:this.props.agrupaColunas}},i),{},{selection:{mode:this.props.selectionMode?this.props.selectionMode:"single"},keyExpr:this.props.keyExpr,export:a,columnChooser:o,onToolbarPreparing:this.props.dataGridOnToolbarPreparing,remoteOperations:this.props.dataGridRemoteOperations,onCellPrepared:function(t){if("filter"===t.rowType&&0===t.columnIndex){var a=t.cellElement;e.filterEditorElement=a.find(".dx-texteditor-input")}},children:this.props.children}))}},{key:"syncDataGridSelection",value:function(e){if(null===e.value)this.setState({selecionado:null,selecionadoPropriedades:null}),this.props.aoAlterar(null,null,this.dataGridRef.current?this.dataGridRef.current._instance:null,this.dropDownBoxRef.current?this.dropDownBoxRef.current._instance:null);else if(!window.isEquivalent(e.previousValue,e.value)&&this.props.aoAlterar){var t=this.state.selecionado&&this.state.selecionado.length>0?this.state.selecionado[0]:null,a=this.state.selecionado&&this.state.selecionadoPropriedades&&this.state.selecionadoPropriedades.length>0?this.state.selecionadoPropriedades[0]:null;this.props.aoAlterar(t,a,this.dataGridRef.current?this.dataGridRef.current._instance:null,this.dropDownBoxRef.current?this.dropDownBoxRef.current._instance:null)}}},{key:"dataGrid_onSelectionChanged",value:function(){var e=Object(n.a)(i.a.mark((function e(t){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("single"!==this.props.selectionMode){e.next=7;break}if(0!==t.selectedRowKeys.length){e.next=3;break}return e.abrupt("return");case 3:this.dropDownBox&&this.dropDownBox.close(),this.setState({selecionado:t.selectedRowKeys,selecionadoPropriedades:t.selectedRowsData}),e.next=8;break;case 7:"multiple"===this.props.selectionMode&&(a=t.selectedRowKeys,o=t.selectedRowsData,t.component.option("value",a),this.setState({selecionado:a,selecionadoPropriedades:o}),this.props.aoAlterar&&this.props.aoAlterar(a,o));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ajustarTamanhoJanela",value:function(e,t){var a=window.App.get_parametro_usuario(this.props.parametroFullScreen);a.fullScreen!==e.component._popup.option("fullScreen")&&(window.App.set_parametro_usuario(this.props.parametroFullScreen,{fullScreen:e.component._popup.option("fullScreen")}),t?e.component._popup.option("fullScreen",a.fullScreen):e.component._popup.option("fullScreen",e.component._popup.option("fullScreen"))),e.component._popup.option("fullScreen")?(e.component._popup.content().parents(".dx-popup-fullscreen").css("max-height","none").css("overflow-y","scroll"),e.component._popup.content().parents(".dx-popup-wrapper").css("width","100%").css("max-height","100vh").css("height","100%"),e.component._popup.content().css("overflow","")):e.component._popup.content().css("overflow","auto"),e.component._popup.content().children().on("dxmousewheel",(function(e){e.stopPropagation()})),this.dataGrid&&this.dataGrid.refresh()}},{key:"onOpened",value:function(e){var t=this,a=this;e.component._popup.option("toolbarItems",[{widget:"dxButton",location:"after",options:{icon:"fa fa-window-restore",onClick:function(t){e.component._popup.option("fullScreen",!e.component._popup.option("fullScreen")),a.ajustarTamanhoJanela(e,!1)}}},{widget:"dxButton",location:"after",options:{icon:"fa fa-times ",onClick:function(t){e.component._popup.hide()}}}]),e.component._popup.option("showTitle",!0),this.ajustarTamanhoJanela(e,!0),setTimeout((function(){if(t.props.columnFilterFocus){var a=t.dataGridRef.current.instance.getVisibleColumnIndex(t.props.columnFilterFocus);e.component._popup.content().find(".dx-datagrid-headers .dx-texteditor-input")[a].focus()}else e.component._popup.content().find(".dx-toolbar .dx-texteditor-input").focus()}),500)}},{key:"dropDownBox",get:function(){return this.dropDownBoxRef.current?this.dropDownBoxRef.current.instance:null}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(_.a.Component);j.defaultProps={columns:null,dataSource:null,placeholder:"Pesquisar",aoAlterar:null,valueExpr:null,keyExpr:null,displayExpr:null,stylingMode:"filled",showClearButton:!1,readOnly:!1,stateStoring:null,fieldRender:null,visible:!0,width:null,agrupaColunas:!1,parametroFullScreen:null,selectionMode:"single",getDropDownRef:null,dropDownContainer:void 0,dropDownBoxStyle:{},dataGridSearchPanelEnabled:!0,dataGridExportEnabled:!0,dataGridColumnChooserEnabled:!0,dataGridOnToolbarPreparing:void 0,dataGridRemoteOperations:!0,dataGridWidth:void 0,columnFilterFocus:null}},432:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Button);c.defaultProps={name:"excluir",hint:"Excluir",icon:"trash"}},443:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return p}));var o=a(380),i=(a(105),a(389)),n=(a(408),a(398)),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:function(n){var s=window.loadOptionsToActionParams(n);return new Promise((function(n,c){i.a.get({route:"chamado/listar/",data:Object(o.a)({dx_grid:!0,situacao:e,numero_chamado:t,sla:a?"S":"N",tempo_inativo:a?"S":"N",limite:r},s),func_response:function(e){var t=window.createLoadExtra(e);n(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&c(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado/listar/",data:{dx_grid:!0,situacao:window.CHAMADO_FILTRO.TODOS,numero_chamado:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},s=function(e,t,a){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"usuario_id",load:function(n){var r=window.loadOptionsToActionParams(n);return new Promise((function(n,s){i.a.get({route:"chamado/listar_solicitantes_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e,entidade_tipo:t,entidade_id:a},r),func_response:function(e){var t=window.createLoadExtra(e);n(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&s(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado/listar_solicitantes_para_selecao/",data:{dx_grid:!0,usuario_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},c={dataField:"nome",caption:"Nome"},l=function(e,t,a,r){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"usuario_id",load:function(n){var s=window.loadOptionsToActionParams(n);return new Promise((function(n,c){i.a.get({route:"chamado/listar_responsaveis_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e,entidade_tipo:t,entidade_id:a,motivo_id:r},s),func_response:function(e){var t=window.createLoadExtra(e);n(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&c(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado/listar_responsaveis_para_selecao/",data:{dx_grid:!0,usuario_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},d=function(e){return new n.default({key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"chamado/listar_situacao_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado/listar_situacao_para_selecao/",data:{dx_grid:!0,situacao_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},u=function(e,t,a){i.a.post({route:"chamado/salvar",data:e,func_response:function(e){!0===e.chamado.rascunho?window.alert_info("Rascunho salvo com sucesso"):window.alert_saved("Reclassifica\xe7\xe3o salva com sucesso"),t&&t(e)},func_fail:function(e){window.alert_fail("Falhou"),a&&a(e)}})},p=function(e,t,a,o){i.a.post({route:"mensagem/salvar_horas_trabalhadas",data:{mensagem_id:e,horas_trabalhadas:t},func_response:function(e){window.alert_info("Horas trabalhadas salva com sucesso"),a&&a(e)},func_fail:function(e){window.alert_fail("Falhou"),o&&o(e)}})}},449:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Button);c.defaultProps={name:"editar",hint:"Editar",icon:"edit"}},450:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Button);c.defaultProps={name:"recuperar",hint:"Recuperar",icon:"revert"}},484:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"id",caption:"#",width:90}},485:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"datahora",caption:"Data",dataType:"date",format:"dd/MM/yyyy HH:mm",width:150}},492:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return f}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l);function u(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}var p=function(e){Object(r.a)(a,e);var t=u(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)("div",{style:{height:"10px"}})}}]),a}(d.a.Component),f=function(e){Object(r.a)(a,e);var t=u(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return Object(o.jsx)("div",{style:{width:"10px"}})}}]),a}(d.a.Component)},510:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataType:"string"}},531:function(e,t,a){"use strict";a.r(t),a.d(t,"defaultProcessoAtividade",(function(){return u})),a.d(t,"defaultProcessoGateway",(function(){return p})),a.d(t,"colunaProcessoId",(function(){return f})),a.d(t,"colunaProcessoNome",(function(){return m})),a.d(t,"colunaProcessoCategoria",(function(){return _})),a.d(t,"colunaProcessoAtivo",(function(){return h})),a.d(t,"colunaProcessoVersao",(function(){return v})),a.d(t,"colunaProcessoPublicacao",(function(){return b})),a.d(t,"colunaProcessoSolicitacoes",(function(){return j})),a.d(t,"processoBotoes",(function(){return O})),a.d(t,"processoColunas",(function(){return g})),a.d(t,"stateStoring",(function(){return w})),a.d(t,"listarProcessos",(function(){return x})),a.d(t,"listarProcessosDisponiveis",(function(){return y})),a.d(t,"listarProcessosQuadroAtividades",(function(){return A})),a.d(t,"objetoProcesso",(function(){return C}));var o=a(422),i=a.n(o),n=a(425),r=a(380),s=a(389),c=a(408),l=a(398),d=a(105),u={id:0,elemento_tipo:window.PROCESSO_ELEMENTO_TIPO.ATIVIDADE,descricao:"",instrucao_trabalho:"",tipo:window.PROCESSO_ATIVIDADE_TIPO.INICIO,usuarios_responsaveis:[],grupos_usuarios_responsaveis:[],responsavel_obrigatorio:!1,grupo_usuarios_responsaveis_obrigatorio:!1,notifica_solicitante:!0,notifica_responsavel:!0,emails_notificacao:"",email_terceiros:!1,email_terceiros_entrega:!1,tempo_prazo_execucao:null,permite_reprogramar:!0,dias_limite_reprogramacao:null,informar_motivo_reprogramacao:!1,notificar_reprogramacao_solicitante:!1,notificar_reprogramacao_responsavel:!1,notificar_reprogramacao_supervisores:!1,notificar_altresponsavel_solicitante:!1,notificar_altresponsavel_responsavel:!1,notificar_altresponsavel_supervisores:!1,acumular_tempo:!1,notifica_vencto_horas_antes:null,notifica_vencto_solicitante:!1,notifica_vencto_responsavel:!1,emails_notificacao_vencto:"",acao_projeto_template:!1,destinos:[],permissoes_formulario:[],removido:!1,notifica_senha:!1,notifica_formulario:!1,envia_anexos_inicio:!1,envia_anexos:!1,tipo_prazo_execucao:0,dias_prazo_execucao:null,acao_projeto_template_conclusao:null,notifica_formulario_entrega:!1,notifica_solicitante_entrega:!0,notifica_responsavel_entrega:!0,emails_notificacao_entrega:"",data_referencia:null,ocultar_numero_no_inicio:!1,ocultar_numero_na_entrega:!1,solicitante_responsavel:!1,enviar_obs:!1,enviar_obs_predecessora:!1,notifica_corpo_formulario:!1,notifica_corpo_formulario_entrega:!1,atividade_responsavel_automatico_id:!1,atividade_responsavel_automatico_elem_key:null,atividade_superior_imediato_responsavel_id:null,atividade_superior_imediato_responsavel_elem_key:null,multiplos_responsaveis:!1,tornar_superior_imediato_responsavel:!1,responsavel_anonimo:!1,executor_responsavel_automatico:!1},p={id:0,elemento_tipo:window.PROCESSO_ELEMENTO_TIPO.GATEWAY,descricao:"",tipo:0,destinos:[],permissoes_formulario:[],removido:!1,evento_enviar:null,bloqueio_decisao:!1,filtro_evento_enviar:null,tipo_automacao:null},f={dataField:"processo_id",caption:"Id"},m={dataField:"nome",caption:"Nome"},_={dataField:"categoria_processos_nome",caption:"Categoria"},h={dataField:"ativo",caption:"Ativo"},v={dataField:"versao_processo",caption:"Vers\xe3o"},b={dataField:"versao_publicacao",caption:"Publica\xe7\xe3o"},j={dataField:"sequencia_solicitacoes",caption:"Solicita\xe7\xf5es"},O=function(){var e="icon_black";return{type:"buttons",buttons:[{hint:"Editar",icon:"fas fa-pencil-alt",cssClass:e,visible:d.a.verifica_permissao(d.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.processo_id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS,null,null,{processoId:e.row.data.processo_id})}},{hint:"Etiquetas",icon:"fas fa-tags",cssClass:e,visible:d.a.verifica_permissao(d.a.temp.empresa,"etiqueta_processo"),onClick:function(e){c.a.loadReact(window.views.etiqueta.Listagem.default,{pai_tabela:"processo",pai_id:e.row.data.processo_id,titulo:e.row.data.nome},(function(e){}),c.a.ABA.MULTIPLAS)}},{hint:"Clonar processo",icon:"copy",cssClass:e,visible:d.a.verifica_permissao(d.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/clonar",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.nome,e.row.data.processo_id)}),window.View.ABA.MULTIPLAS)}},{hint:"Exportar",icon:"export",cssClass:e,visible:d.a.verifica_permissao(d.a.temp.empresa,"processo"),onClick:function(e){s.a.get("processo/objeto/",{processo_id:e.row.data.processo_id,exportacao:!0},(function(t){var a=encodeURIComponent(JSON.stringify(t)),o=document.createElement("a");o.setAttribute("download",e.row.data.nome+".nbpm"),o.setAttribute("href","data:application/json;charset=utf-8,"+a),o.click()}))}},{hint:"Visualizar",icon:"fas fa-eye",cssClass:e,visible:d.a.verifica_permissao(d.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/detalhes",(function(t,a){a.show(e.row.data.processo_id,window.FORMULARIO.VISUALIZAR)}),window.View.ABA.MULTIPLAS)}},{hint:"Excluir",icon:"fas fa-trash-alt",cssClass:e,visible:d.a.verifica_permissao(d.a.temp.empresa,"processo"),onClick:function(e){window.View.load("processo/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data.processo_id,window.FORMULARIO.EXCLUIR)}),window.View.ABA.MULTIPLAS)}}]}},g=function(){return[f,m,_,h,v,b,j,O()]},w={enabled:!0,type:"custom",customLoad:function(e){return window.App.get_parametro_usuario("listarProcessos")},customSave:function(e){window.App.set_parametro_usuario("listarProcessos",e)}},x=function(e){return new l.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"processo_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){s.a.get({route:"processo/listar/",data:Object(r.a)(Object(r.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(r.a)(Object(r.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){s.a.get({route:"processo/listar/",data:{dx_grid:!0,processo_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},y=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get({route:"/solicitacao/listar_processos/",data:t,awaitReturn:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(n.a)(i.a.mark((function e(t){var a,o,n,r,c,l,d,u,p,f,m,_,h,v,b,j,O,g,w,x;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.processo_id,o=t.filtro_status,n=void 0===o?null:o,r=t.filtro_tipo,c=t.solicitacao_codigo,l=void 0===c?null:c,d=t.solicitacao_descricao,u=void 0===d?null:d,p=t.cliente_nome,f=void 0===p?null:p,m=t.solicitante_nome,_=void 0===m?null:m,h=t.responsavel_nome,v=void 0===h?null:h,b=t.etiqueta_nome,j=void 0===b?null:b,O=t.processo_atividade_id,g=void 0===O?null:O,w=t.skip,x=void 0===w?0:w,0!==parseInt(a)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,s.a.get({route:"/solicitacao/processo_quadro_atividades/",data:{processo_id:a,filtro_status:n,filtro_tipo:r,solicitacao_codigo:l,solicitacao_descricao:u,cliente_nome:f,solicitante_nome:_,responsavel_nome:v,etiqueta_nome:j,processo_atividade_id:g,skip:x},awaitReturn:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==parseInt(t)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,s.a.get({route:"/processo/objeto/",data:{processo_id:t},awaitReturn:!0});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},547:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={caption:"Padr\xe3o",dataField:"padrao",dataType:"boolean",alignment:"center"}},548:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(105);function p(e){var t,a,i,n,r,s={width:(null!==(t=e.tamanho)&&void 0!==t?t:"28")+"px",height:(null!==(a=e.tamanho)&&void 0!==a?a:"28")+"px",backgroundColor:"#dfe1e6",borderRadius:"25em",color:"#172b4d",lineHeight:(null!==(i=e.tamanho)&&void 0!==i?i:"28")+"px",textAlign:"center",display:"inline-block",verticalAlign:"middle"};return!0===e.margemFlutuante&&(s.marginLeft="-"+f.defaultProps.margemFlutuantePx+"px"),Object(o.jsx)("div",{style:s,children:Object(o.jsx)("span",{style:{fontWeight:"600"},title:(n=e.titulo||"",r=e.nome||"",((n||"")+" "+(r||"")).trim()),children:window.obter_iniciais(e.nome||e.titulo)})})}var f=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).ref=d.a.createRef(),o}return Object(n.a)(a,[{key:"thumbUrl",value:function(e){return e.documentoId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&documento_id="+e.documentoId+"&token_midia="+u.a.sessao.token_midia:e.documentoRevisaoId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&documento_revisao_id="+e.documentoRevisaoId+"&token_midia="+u.a.sessao.token_midia:e.usuarioId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&usuario_id="+e.usuarioId+"&token_midia="+u.a.sessao.token_midia:e.clienteId?window.WS_URI+"documento/midia/?tamanho="+e.tamanho+"&cliente_id="+e.clienteId+"&token_midia="+u.a.sessao.token_midia:void 0}},{key:"render",value:function(){var e=this,t=((this.props.titulo||"")+" "+(this.props.nome||"")).trim(),a=this.thumbUrl(this.props),i={borderRadius:"25em",display:"none"};return!0===this.props.margemFlutuante&&(i.marginLeft="-"+this.props.margemFlutuantePx+"px"),Object(o.jsxs)("div",{ref:this.ref,title:t,children:[Object(o.jsx)(p,{nome:this.props.nome,titulo:this.props.titulo,margemFlutuante:this.props.margemFlutuante,tamanho:this.props.tamanho}),Object(o.jsx)("img",{src:a,height:this.props.tamanho,width:this.props.tamanho,style:i,title:t,onLoad:function(t){e.ref.current.getElementsByTagName("img").item(0).style.display="block",e.ref.current.getElementsByTagName("div").item(0).style.display="none"}})]})}}]),a}(d.a.Component);f.defaultProps={tamanho:28,titulo:"",margemFlutuante:!1,margemFlutuantePx:8}},549:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l})),a.d(t,"cellRender",(function(){return d}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388);var l=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column),d=function(e){var t,a="assets/img/imagem_usuario_padrao.svg",i=null!==(t=null===e||void 0===e?void 0:e.marginTop)&&void 0!==t?t:"3px";if(e.column.dataFieldUsuarioId&&e.data[e.column.dataFieldUsuarioId]){var n=+e.data[e.column.dataFieldUsuarioId];n>0&&(a=window.WS_URI+"documento/midia/?&tamanho=20&usuario_id="+n+"&token_midia="+window.App.sessao.token_midia)}var r=e.text;return r?Object(o.jsxs)("div",{style:{marginTop:i},children:[Object(o.jsx)("img",{style:{height:"20px",width:"20px",borderRadius:"25em"},className:"imagem_responsavel",src:a,onError:function(e){e.target.onerror=null,e.target.src="assets/img/imagem_usuario_padrao.svg"},alt:r}),Object(o.jsx)("span",{style:{marginLeft:"5px"},children:r})]}):null};l.defaultProps={dataField:"usuario_id",dataType:"string",caption:"Usu\xe1rio",width:120,cellRender:d}},550:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Button);c.defaultProps={name:"visualizar",hint:"Visualizar",icon:"fas fa-eye"}},578:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var o=Object.freeze({chamado:1,processo:2,projeto:3,documento:4,crm:5,relacionamento:5,agenda:6,social:7,empenho:8,inovacao:9,pdca:10,tarefas:11}),i=[{id:o.chamado,descricao:"Chamados"},{id:o.processo,descricao:"Processos"},{id:o.projeto,descricao:"Projetos"},{id:o.documento,descricao:"Documentos"},{id:o.crm,descricao:"CRM"},{id:o.agenda,descricao:"Agenda"},{id:o.social,descricao:"Social"},{id:o.empenho,descricao:"Empenho"},{id:o.inovacao,descricao:"Inova\xe7\xe3o"},{id:o.pdca,descricao:"PDCA"},{id:o.tarefas,descricao:"Tarefas"}]},617:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"data",caption:"Data",dataType:"date",format:"dd/MM/yyyy",width:150}},618:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var o=a(380),i=a(389),n=a(398),r=Object.freeze({cliente:"C",organizacao:"O",empresa:"E",fornecedor:"F"}),s=[{id:r.cliente,descricao:"Cliente"},{id:r.organizacao,descricao:"Organiza\xe7\xe3o"},{id:r.empresa,descricao:"Empresa"},{id:r.fornecedor,descricao:"Fornecedor"}],c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:["tipo","id"],load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"agenda_contatos/listar/",data:Object(o.a)({dx_grid:!0,desconsiderar_contato:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){if(!e)return!1;var t=e.id,a=e.tipo;return!(!t&&!a)&&new Promise((function(e,o){i.a.get({route:"agenda_contatos/listar/",data:{dx_grid:!0,entidade_id:t,entidade_tipo:a},func_response:function(t){e(t.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},619:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l}));var o=a(380),i=a(389),n=a(398),r={dataField:"nome",caption:"Nome",dataType:"string"},s=[r,{dataField:"email",caption:"E-mail",dataType:"string"}],c=function(e){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"usuario_id",load:function(t){var a=window.loadOptionsToActionParams(t);return a.usuario=t.searchValue,new Promise((function(t,n){i.a.get({route:"usuario/listar_usuarios_email/",data:Object(o.a)(Object(o.a)({dx_grid:!0},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},l=function(e){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id_usuario_grupo",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"usuario/listar_usuarios_grupos/",data:Object(o.a)(Object(o.a)({},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"usuario/listar_usuarios_grupos/",data:{dx_grid:!0,id_usuario_grupo:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},621:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(105),p=a(408),f=a(492),m=a(548);var _=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e,t=this,a=!1;switch(this.props.tipo){case window.TIPO_ENTIDADE.CLIENTE:a=!0===u.a.sessao.dados.admin||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"cliente")||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"cliente_somente_leitura");break;case window.TIPO_ENTIDADE.EMPRESA:a=!0===u.a.sessao.dados.admin;break;case window.TIPO_ENTIDADE.FORNECEDOR:a=!0===u.a.sessao.dados.admin||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"fornecedor")||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"fornecedor_somente_leitura");break;case window.TIPO_ENTIDADE.ORGANIZACAO:a=!0===u.a.sessao.dados.admin||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"prospect")||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"prospect_somente_leitura")}var i=a?Object(o.jsx)("div",{onClick:a?function(e){var a=null;switch(t.props.tipo){case window.TIPO_ENTIDADE.CLIENTE:a=!0===u.a.sessao.dados.admin||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"cliente")?window.FORMULARIO.EDITAR:window.FORMULARIO.VISUALIZAR,p.a.load("cliente/detalhes",(function(e,o){o.show(t.props.id,a)}),window.View.ABA.MULTIPLAS,null,null,{clienteId:t.props.id});break;case window.TIPO_ENTIDADE.EMPRESA:!0===u.a.sessao.dados.admin&&p.a.load("empresa/detalhes",(function(e,a){a.show(t.props.id,window.FORMULARIO.VISUALIZAR)}),p.a.ABA.MULTIPLAS);break;case window.TIPO_ENTIDADE.FORNECEDOR:a=!0===u.a.sessao.dados.admin||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"fornecedor")?window.FORMULARIO.EDITAR:window.FORMULARIO.VISUALIZAR,p.a.load("fornecedor/detalhes",(function(e,o){o.show(t.props.id,a)}),window.View.ABA.MULTIPLAS);break;case window.TIPO_ENTIDADE.ORGANIZACAO:a=!0===u.a.sessao.dados.admin||u.a.verifica_permissao(u.a.sessao.dados.empresa_filial_id,"prospect")?window.FORMULARIO.EDITAR:window.FORMULARIO.VISUALIZAR,p.a.load("prospect/detalhes",(function(e,o){o.show(t.props.id,a)}),window.View.ABA.MULTIPLAS)}}:null,style:{cursor:"pointer",textDecoration:"underline"},children:this.props.nome}):Object(o.jsx)("div",{children:this.props.nome});return Object(o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(o.jsx)(m.a,{tamanho:null!==(e=this.props.tamanho)&&void 0!==e?e:28,documentoId:this.props.logoId,imgAlternativa:"assets/img/imagem_empresa_padrao.svg",titulo:window.DescricaoTipoEntidade(this.props.tipo),nome:this.props.nome}),Object(o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(o.jsx)(f.a,{}),i,Object(o.jsx)(f.a,{})]})]})}}]),a}(d.a.Component)},622:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return c}));var o=a(380),i=a(389),n=a(398),r=Object.freeze({concluida:1,cancelada:2,andamento:3,atrasada:4}),s=[{id:r.andamento,descricao:"Andamento"},{id:r.concluida,descricao:"Conclu\xedda"},{id:r.cancelada,descricao:"Cancelada"},{id:r.atrasada,descricao:"Atrasada"}],c=function(e){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"solicitacao/listar/",data:Object(o.a)({dx_grid:!0,id_solicitacao:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"solicitacao/listar/",data:{solicitacao_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},623:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return p}));var o=a(380),i=a(389),n=a(398),r=a(408),s=a(105),c=a(63),l=a.n(c),d={type:"buttons",buttons:[{hint:"Atividades",icon:"folder",cssClass:"icon_black",onClick:function(e){r.a.load("pdca/atividades",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data)}),r.a.ABA.MULTIPLAS,null,null,{pdcaId:e.row.data.pdca_id})}},{hint:"Editar",icon:"edit",cssClass:"icon_black",onClick:function(e){r.a.load("pdca/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data,window.FORMULARIO.EDITAR)}),r.a.ABA.MULTIPLAS,null,null,{pdcaId:e.row.data.pdca_id})},visible:function(e){return f(e.row.data.equipe)}},{hint:"Refer\xeancias",icon:"fas fa-link",cssClass:"icon_black",onClick:function(e){r.a.loadReact(window.views.Referencias.ReferenciasPDCA.default,{pdca_id:e.row.data.pdca_id,abaTitulo:"Refer\xeancias - PDCA #".concat(e.row.data.pdca_id)})}},{hint:"Favoritar",icon:"far fa-star",cssClass:"icon_black",visible:function(e){return!window.verifica_favorito("pdcas",e.row.data.pdca_id)},onClick:function(e){m(e,!0)}},{hint:"Desfavoritar",icon:"fas fa-star",cssClass:"icon_black",visible:function(e){return window.verifica_favorito("pdcas",e.row.data.pdca_id)},onClick:function(e){m(e,!1)}},{hint:"Excluir",icon:"fa fa-trash",cssClass:"icon_black",onClick:function(e){r.a.load("pdca/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(e.row.data,window.FORMULARIO.EXCLUIR)}),r.a.ABA.SIM)},visible:function(e){return f(e.row.data.equipe)}}]},u=[{caption:"ID",dataField:"pdca_id",width:60,dataType:"number"},{dataField:"numero",caption:"C\xf3digo",width:90},{caption:"Objetivo",dataField:"objetivo"},{caption:"Categoria",dataField:"categoria_pdca_nome"},{dataField:"data_inicio",caption:"Data In\xedcio",dataType:"date",format:"dd/MM/yyyy",width:90},{dataField:"data_fim",caption:"Data Fim",dataType:"date",format:"dd/MM/yyyy",width:90},{caption:"Progresso",dataField:"progresso",width:100,cellTemplate:function(e,t){l()("<div />").attr({class:"cls","data-key":t.key}).dxProgressBar({min:0,max:100,value:t.data.progresso,hint:t.data.progresso+"%",statusFormat:function(e){return"Progresso: ".concat(100*e,"%")}}).appendTo(e),e.find(".dx-progressbar-container").css("height","10px")}},{caption:"Situa\xe7\xe3o",dataField:"situacao_id",allowFiltering:!1,allowHeaderFiltering:!0,alignment:"center",width:120,cellTemplate:function(e,t){var a="";switch(t.data.situacao){case"N\xe3o Iniciado":a="label-danger";break;case"Em Andamento":a="label-info";break;case"Conclu\xeddo":a="label-success";break;default:a="label-danger"}e.addClass("bg-"+a),l()("<span class='label "+a+"'>"+t.data.situacao+"</span>").appendTo(e)},headerFilter:{dataSource:[{text:"N\xe3o Iniciado",value:["situacao_id","=",0]},{text:"Em Andamento",value:["situacao_id","=",1]},{text:"Conclu\xeddo",value:["situacao_id","=",2]}]}},d],p=function(){return new n.default({pageSize:20,key:"pdca_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){i.a.get({route:"/pdca/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"/pdca/listar/",data:{dx_grid:!0,pdca_id:e},func_response:function(e){t(e.data)},func_fail:function(e){a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},f=function(e){if(!0===s.a.sessao.dados.admin)return!0;var t=!1;return l()(e).each((function(e,a){s.a.sessao.dados.usuario_id===Number(a.usuario_id)&&"S"===a.gerente&&(t=!0)})),t},m=function(e,t){window.favoritar_item("pdcas",e.row.data.pdca_id,t),e.component.refresh()}},626:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388),c=a(63),l=a.n(c);var d=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);d.defaultProps={dataField:"cor",caption:"Cor",cellTemplate:function(e,t){var a=!1,o="dropDownButton";null!==t.column.disabled&&""!==t.column.disabled&&"boolean"===typeof t.column.disabled&&(a=t.column.disabled),null!==t.column.dropDownButtonTemplate&&"string"===typeof t.column.dropDownButtonTemplate&&(o=t.column.dropDownButtonTemplate),l()("<div>").dxColorBox({onInitialized:function(e){e.component.option("value",t.data[t.column.dataField])},onValueChanged:function(e){t.component.cellValue(t.rowIndex,t.column.dataField,e.value)},disabled:a,dropDownButtonTemplate:o}).appendTo(e)},alignment:"center",allowEditing:!1}},627:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Te}));var o=a(422),i=a.n(o),n=a(425),r=a(372),s=a(391),c=a(380),l=a(365),d=a(366),u=a(385),p=a(368),f=a(369),m=a(367),_=a(376),h=a.n(_),v=a(514),b=a.n(v),j=a(401),O=a(105),g=a(389),w=[{id:0,descricao:"Interno"},{id:1,descricao:"Externo"}],x=a(388),y=a(408),A=a(492),C=a(465),S=a.n(C),R=a(509),I=a.n(R),P=a(851),E=a.n(P),T=a(483),D=a(454),k=a.n(D),M=a(419),N=a(443);function F(e){return Object(r.jsx)(M.default,Object(c.a)({},Object(c.a)(Object(c.a)({},e),{},{dataSource:Object(N.a)(window.CHAMADO_FILTRO.TODOS)})))}F.defaultProps={placeholder:"Pesquisar Chamado",displayExpr:function(e){return e&&e.id+" "+e.assunto},visible:!0,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1};var L=a(398),U=function(e){return[{dataField:"S"===e?"numero":"solicitacao_id",dataType:"number",caption:"#",width:100},{dataField:"processo_nome",caption:"Processo",minWidth:100},{dataField:"atividade_descricao",caption:"Atividade",minWidth:100},{dataField:"usuario_solicitacao_nome",caption:"Solicitante",cellTemplate:function(e,t){var a=t.data.usuario_solicitante_foto_id,o=a?window.WS_URI+"documento/midia/?&tamanho=20&documento_id="+a+"&token_midia="+O.a.sessao.token_midia:"assets/img/imagem_usuario_padrao.svg",i=t.data.usuario_solicitacao_nome;e.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+o+'"><span style="margin-left: 5px;">'+i+"</span></div>")},width:100},{dataField:"usuario_responsavel_nome",dataType:"string",caption:"Respons\xe1vel",width:100},{dataField:"data",caption:"In\xedcio Atividade",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.data)return e.data.format_date_time()}},{dataField:"prazo_execucao",caption:"Prazo",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.prazo_execucao)return e.prazo_execucao.format_date_time()}},{dataField:"situacao",caption:"Situa\xe7\xe3o da Atividade",minWidth:120,lookup:{dataSource:[{id:"1",descricao:"Conclu\xedda"},{id:"5",descricao:"Retornada"},{id:"9",descricao:"Cancelada"},{id:"4",descricao:"N\xe3o entregue"},{id:"0",descricao:"Andamento"},{id:"3",descricao:"Atrasada"}],displayExpr:"descricao",valueExpr:"id"}}]},B=function(e){return{hint:"Visualizar Atividade",icon:"fas fa-edit",visible:function(e){return!0===O.a.sessao.dados.admin||!0===e.row.data.acesso_supervisor||!0===e.row.data.permissao_acesso},onClick:function(t){e&&e(),y.a.load("solicitacao/detalhes",(function(e,a){a.show(t.row.data.solicitacao_atividade_id,window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:t.row.data.solicitacao_atividade_id})}}},V=(B(),a(686)),z=a(687),G=a(622),H=a(484),q=a(485),W=a(413);var K=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return a}(x.Column);K.defaultProps={dataField:"solicitacao_situacao",caption:"Situa\xe7\xe3o",width:100,cellRender:function(e){var t="label-default",a="n/a";switch(+e.value){case G.b.andamento:t="label-info",a="Andamento";break;case G.b.concluida:t="label-success",a="Conclu\xedda";break;case G.b.cancelada:t="label-danger",a="Cancelada";break;case G.b.atrasada:t="label-danger",a="Atrasada"}return Object(r.jsx)("span",{className:"label ".concat(t),children:a})},children:Object(r.jsx)(x.Lookup,{dataSource:G.c,displayExpr:"descricao",valueExpr:"id"})};var J=a(549),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"N";return[Object(r.jsx)(H.a,{dataField:"S"===e?"numero":"id"}),Object(r.jsx)(q.a,{dataField:"data_solicitacao",caption:"Data Solicita\xe7\xe3o"}),Object(r.jsx)(q.a,{dataField:"data_finalizacao",caption:"Data Finaliza\xe7\xe3o"}),Object(r.jsx)(W.a,{dataField:"descricao",caption:"Descri\xe7\xe3o"}),Object(r.jsx)(W.a,{dataField:"processo_nome",caption:"Processo"}),Object(r.jsx)(K,{}),Object(r.jsx)(J.default,{dataField:"usuario_nome",dataFieldUsuarioId:"usuario_id",caption:"Solicitante"})]};function Z(e){return Object(r.jsx)(M.default,Object(c.a)(Object(c.a)({},Object(c.a)(Object(c.a)({},e),{},{dataSource:Object(G.a)()})),{},{children:Q(O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo)}))}function X(e){return Object(r.jsx)(M.default,Object(c.a)({},Object(c.a)(Object(c.a)({},e),{},{dataSource:(t=window.SOLICITACAO_FILTROS.TODAS,new L.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"solicitacao_atividade_id",load:function(e){var a=window.loadOptionsToActionParams(e);return new Promise((function(e,o){g.a.get({route:"solicitacao/listar_todas/",data:Object(c.a)({dx_grid:!0,situacao:t},a),func_response:function(t){var a=window.createLoadExtra(t);e(Object(c.a)(Object(c.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){g.a.get({route:"solicitacao/listar_todas/",data:{dx_grid:!0,situacao:window.SOLICITACAO_FILTROS.TODAS,solicitacao_atividade_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})),columns:U(O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo)})));var t}Z.defaultProps={placeholder:"Pesquisar Solicita\xe7\xe3o",displayExpr:function(e){return e&&("S"===O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.id)+" "+e.processo_nome},visible:!0,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1};X.defaultProps={placeholder:"Pesquisar Solicita\xe7\xe3o Atividade",displayExpr:function(e){return e&&("S"===O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.solicitacao_id)+" "+e.atividade_descricao},visible:!0};var Y=a(852),$=a(63),ee=a.n($);var te=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).preencherAtividadeProjeto=function(e){var t=this;window.require(["react","react-dom","./assets/view/atividade_projeto/ListarAtividadeProjeto"],(function(a,o,i){var n;t.divComponenteAtividades&&o.unmountComponentAtNode(t.divComponenteAtividades),t.listarAtividadeProjeto=a.createElement(i,null,null),o.render(t.listarAtividadeProjeto,t.divComponenteAtividades),t.listarAtividadeProjeto.props.setParams({div:ee()(t.divComponenteAtividades),data:e,dropdown:!0,dropdown_disabled:!1,somente_leitura:!0,atividade_selecionada:null!==(n=t.state.selecionado)&&void 0!==n?n:null,ao_selecionar:function(e){t.setState({selecionado:e}),t.props.aoAlterar&&t.props.aoAlterar(t.state.selecionado)},parametro_usuario:"atividade_projeto_referencias"})}))},o.obterAtividadesProjeto=function(e){var t=this;g.a.get({route:"atividade_projeto/listar/",data:{projeto_id:null!==e&&void 0!==e?e:this.state.projetoId},func_response:function(e){e.atividades.push({atividade_simplificada:e.projeto.nome,id:"raiz",projeto_atividade_sintetica_pai_id:null,tipo_atividade:"P",marco:!1,horas_previstas:"000:00"}),t.preencherAtividadeProjeto(e)}})},o.state=Object(c.a)(Object(c.a)({},o.state),o.propsToObjState()),o.listarAtividadeProjeto=null,o.divComponenteAtividadesRef=h.a.createRef(),o.preencherAtividadeProjeto=o.preencherAtividadeProjeto.bind(Object(u.a)(o)),o.obterAtividadesProjeto=o.obterAtividadesProjeto.bind(Object(u.a)(o)),o}return Object(d.a)(a,[{key:"propsToObjState",value:function(){var e,t,a;return{selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,projetoId:null!==(t=this.props.projetoId)&&void 0!==t?t:null,dropDownContainer:null!==(a=this.props.dropDownContainer)&&void 0!==a?a:void 0}}},{key:"componentDidMount",value:function(){this.state.projetoId&&this.obterAtividadesProjeto()}},{key:"componentDidUpdate",value:function(e,t){e.projetoId===this.props.projetoId&&e.projetoAtividadeId===this.props.projetoAtividadeId&&e.selecionado===this.props.selecionado&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState()),e.projetoId!==this.props.projetoId&&this.obterAtividadesProjeto(this.props.projetoId)}},{key:"componentWillUnmount",value:function(){this.desmontarListarAtividadeProjeto()}},{key:"desmontarListarAtividadeProjeto",value:function(){var e=this;window.require(["react-dom"],(function(t){e.divComponenteAtividades&&t.unmountComponentAtNode(e.divComponenteAtividades)}))}},{key:"render",value:function(){return Object(r.jsx)("div",{ref:this.divComponenteAtividadesRef})}},{key:"divComponenteAtividades",get:function(){var e;return null!==(e=this.divComponenteAtividadesRef.current)&&void 0!==e?e:null}}]),a}(h.a.Component);te.defaultProps={placeholder:"Pesquisar Atividade de Projeto",columns:V.d,visible:!0,key:window.random_hash()};var ae=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return a}(x.Column);ae.defaultProps={dataField:"referencia_nivel",caption:"N\xedvel",width:130,groupIndex:0,children:Object(r.jsx)(x.Lookup,{dataSource:w,displayExpr:"descricao",valueExpr:"id"})};var oe=a(943);var ie=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return a}(x.Button);ie.defaultProps={dataField:"solicitacao_id",text:"Visualizar Solicita\xe7\xe3o",icon:"fas fa-edit",cssClass:"icon_solicitacao",onClick:function(e){var t=e.column.buttons.filter((function(e){return"SolicitacaoBotaoVisualizar"===e.btnNome}));if(0===t.length)return!1;var a=t[0];a.callbackBtns&&a.callbackBtns(),y.a.loadReact(window.views.solicitacao_processo.Listagem.default,{filtro_solicitacao_numero:"S"!==O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.row.data[a.dataField]:e.row.data[a.dataFieldNumero]},(function(e){}),y.a.ABA.SIM_E_RECARREGAR_SE_ESTIVER_ABERTA)},btnNome:"SolicitacaoBotaoVisualizar"};var ne=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return a}(x.Button);ne.defaultProps={dataField:"id",text:"Visualizar chamado",icon:"fas fa-edit",onClick:function(e){var t=e.column.buttons.filter((function(e){return"ChamadoBotaoVisualizar"===e.btnNome}));if(0===t.length)return!1;var a=t[0];a.callbackBtns&&a.callbackBtns(),y.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:e.row.data.id},(function(e,t){}),y.a.ABA.MULTIPLAS)},btnNome:"ChamadoBotaoVisualizar"};var re=a(856);var se=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).state=Object(c.a)(Object(c.a)({},o.state),o.propsToState()),o}return Object(d.a)(a,[{key:"propsToState",value:function(){var e,t,a;return{dataSource:Object(re.b)(),selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,fnAoAlterar:"function"===typeof this.props.aoAlterar?this.props.aoAlterar:function(){},componentWidth:null!==(t=this.props.width)&&void 0!==t?t:null,dataGridWidth:null!==(a=this.props.dataGridWidth)&&void 0!==a?a:null}}}]),a}(M.default),ce=[Object(r.jsx)(x.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string",width:120},"descricao"),Object(r.jsx)(x.Column,{dataField:"usuario_nome",caption:"Usu\xe1rio",dataType:"string"},"usuario_nome"),Object(r.jsx)(x.Column,{dataField:"dia",caption:"Dia",dataType:"date",allowHeaderFiltering:!1},"dia"),Object(r.jsx)(x.Column,{dataField:"hora_inicio",caption:"In\xedcio",dataType:"string"},"hora_inicio"),Object(r.jsx)(x.Column,{dataField:"hora_fim",caption:"Fim",dataType:"string"},"hora_fim"),Object(r.jsx)(x.Column,{dataField:"agenda_tipo_nome",caption:"Tipo",dataType:"string"},"agenda_tipo_nome"),Object(r.jsx)(x.Column,{dataField:"agenda_local_nome",caption:"Local",dataType:"string"},"agenda_local_nome"),Object(r.jsx)(x.Column,{dataField:"realizado",caption:"Realizado",dataType:"string",calculateCellValue:function(e){return"S"===e.realizado?"Sim":"N\xe3o"}},"realizado")];se.defaultProps={key:window.random_hash(),displayExpr:"descricao",valueExpr:"agenda_evento_id",placeholder:"Selecione o Evento",children:ce,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1};var le=a(688);function de(e){var t,a,o,i=e.selecionado?[e.selecionado]:null,n=null!==(t=e.readOnly)&&void 0!==t?t:null,s="function"===typeof e.aoAlterar?e.aoAlterar:function(){},c=null!==(a=e.width)&&void 0!==a?a:null,l=null!==(o=e.dataGridWidth)&&void 0!==o?o:null;return Object(r.jsx)(h.a.Fragment,{children:Object(r.jsx)(M.default,{dataSource:Object(le.listarParaSelecionar)(),valueExpr:e.valueExpr,displayExpr:e.displayExpr,placeholder:e.placeholder,columns:e.columns,aoAlterar:s,selecionado:i,readOnly:n,width:c,dataGridWidth:l,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1})})}var ue=function(e){switch(e){case window.OPORTUNIDADE_SITUACAO.ABERTA:return"Aberta";case window.OPORTUNIDADE_SITUACAO.ATRASADA:return"Atrasada";case window.OPORTUNIDADE_SITUACAO.ESTAGNADA:return"Estagnada";case window.OPORTUNIDADE_SITUACAO.GANHA:return"Ganha";case window.OPORTUNIDADE_SITUACAO.PERDIDA:return"Perdida";default:return"N/D"}},pe=[{dataField:"oportunidade_id",caption:"#",dataType:"number",alignment:"left"},{dataField:"oportunidade_nome",caption:"Nome",dataType:"string"},{dataField:"oportunidade_situacao",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:function(e){return ue(e.oportunidade_situacao)}},{dataField:"representante_nome",caption:"Representante",dataType:"string"},{dataField:"cliente_nome",caption:"Cliente",dataType:"string"},{dataField:"prospect_nome",caption:"Prospect",dataType:"string"}];de.defaultProps={valueExpr:"oportunidade_id",displayExpr:function(e){return e&&e.oportunidade_nome},placeholder:"Selecione a Oportunidade",columns:pe};var fe=function(e){return new L.default({pageSize:20,key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){g.a.get({route:"/tarefa_quadro_lista/listar/",data:Object(c.a)(Object(c.a)({},a),{},{tarefa_quadro_id:e}),func_response:function(e){var a=window.createLoadExtra(e);t(Object(c.a)(Object(c.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(t){return!!t&&new Promise((function(a,o){g.a.get({route:"/tarefa_quadro_lista/listar/",data:{tarefa_quadro_id:e,lista_id:t},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var me=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).propsToState=o.propsToState.bind(Object(u.a)(o)),o.state=Object(c.a)(Object(c.a)({},o.state),o.propsToState()),o}return Object(d.a)(a,[{key:"propsToState",value:function(){var e,t,a;return{dataSource:new L.default({pageSize:20,key:"id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){g.a.get({route:"tarefa_quadro/listar/",data:Object(c.a)({},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(c.a)(Object(c.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){g.a.get({route:"tarefa_quadro/listar/",data:{quadro_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}),selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e&&e,fnAoAlterar:"function"===typeof this.props.aoAlterar?this.props.aoAlterar:function(){},componentWidth:null!==(t=this.props.width)&&void 0!==t?t:null,dataGridWidth:null!==(a=this.props.dataGridWidth)&&void 0!==a?a:null}}}]),a}(M.default),_e=[Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"})];me.defaultProps={valueExpr:"id",displayExpr:"nome",placeholder:"Selecione o Quadro",children:_e,key:window.random_hash(),dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1};var he=function(e){return new L.default({pageSize:20,key:"id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){g.a.get({route:"/tarefa_quadro_lista_cartao/listar_para_selecao/",data:Object(c.a)({tarefa_quadro_id:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(c.a)(Object(c.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(t){return!!t&&new Promise((function(a,o){g.a.get({route:"/tarefa_quadro_lista_cartao/listar_para_selecao/",data:{tarefa_quadro_id:e,cartao_id:t},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var ve=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).state=Object(c.a)(Object(c.a)({},o.state),o.propsToState()),o}return Object(d.a)(a,[{key:"propsToState",value:function(){var e,t,a;return{dataSource:he(this.props.quadro_id),selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,fnAoAlterar:"function"===typeof this.props.aoAlterar?this.props.aoAlterar:function(){},componentWidth:null!==(t=this.props.width)&&void 0!==t?t:null,dataGridWidth:null!==(a=this.props.dataGridWidth)&&void 0!==a?a:null}}},{key:"componentDidUpdate",value:function(e){e.quadro_id!=this.props.quadro_id&&this.setState({dataSource:he(this.props.quadro_id)})}}]),a}(M.default),be=[Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"})];ve.defaultProps={valueExpr:"id",displayExpr:"nome",placeholder:"Selecione o Cart\xe3o",children:be,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,key:window.random_hash()};var je=a(623);var Oe=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).propsToState=o.propsToState.bind(Object(u.a)(o)),o.state=Object(c.a)(Object(c.a)({},o.state),o.propsToState()),o}return Object(d.a)(a,[{key:"propsToState",value:function(){var e,t,a;return{dataSource:Object(je.c)(),selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,fnAoAlterar:"function"===typeof this.props.aoAlterar?this.props.aoAlterar:function(){},componentWidth:null!==(t=this.props.width)&&void 0!==t?t:null,dataGridWidth:null!==(a=this.props.dataGridWidth)&&void 0!==a?a:null}}}]),a}(M.default),ge=[Object(r.jsx)(x.Column,{dataField:"pdca_id",caption:"#",dataType:"number",alignment:"left"}),Object(r.jsx)(x.Column,{dataField:"numero",caption:"C\xf3digo",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date"}),Object(r.jsx)(x.Column,{dataField:"data_fim",caption:"Fim",dataType:"date"}),Object(r.jsx)(x.Column,{dataField:"situacao_id",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:function(e){switch(+e.situacao_id){case window.PDCA_SITUACAO.NAO_INICIADO:return"N\xe3o Iniciado";case window.PDCA_SITUACAO.EM_ANDAMENTO:return"Em Andamento";case window.PDCA_SITUACAO.CONCLUIDO:return"Conclu\xeddo"}}})];Oe.defaultProps={valueExpr:"pdca_id",displayExpr:"numero",placeholder:"Selecione o PDCA",children:ge,key:window.random_hash(),dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1};var we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new L.default({pageSize:20,key:"pdca_atividade_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){g.a.get({route:"/pdca_atividade/listar/",data:Object(c.a)({dx_grid:!0,pdca_id:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(c.a)(Object(c.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(t){return!!t&&new Promise((function(a,o){g.a.get({route:"/pdca_atividade/listar/",data:{dx_grid:!0,pdca_id:e,pdca_atividade_id:t},func_response:function(e){a(e.data)},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})};var xe=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).state=Object(c.a)(Object(c.a)({},o.state),o.propsToState()),o}return Object(d.a)(a,[{key:"propsToState",value:function(){var e,t,a;return{dataSource:we(this.props.pdca_id),selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,fnAoAlterar:"function"===typeof this.props.aoAlterar?this.props.aoAlterar:function(){},componentWidth:null!==(t=this.props.width)&&void 0!==t?t:null,dataGridWidth:null!==(a=this.props.dataGridWidth)&&void 0!==a?a:null}}},{key:"componentDidUpdate",value:function(e){e.pdca_id!=this.props.pdca_id&&this.setState({dataSource:we(this.props.pdca_id)})}}]),a}(M.default),ye=[Object(r.jsx)(x.Column,{dataField:"que",caption:"O Qu\xea",dataType:"string"},"que"),Object(r.jsx)(x.Column,{dataField:"porque",caption:"Por qu\xea",dataType:"string"},"porque"),Object(r.jsx)(x.Column,{dataField:"quem_nome",caption:"Quem",dataType:"string"},"quem_nome"),Object(r.jsx)(x.Column,{dataField:"onde",caption:"Onde",dataType:"string"},"onde"),Object(r.jsx)(x.Column,{dataField:"como",caption:"Como",dataType:"string"},"como"),Object(r.jsx)(x.Column,{dataField:"quanto",caption:"Quanto",dataType:"number",format:{type:"currency",precision:2},allowHeaderFiltering:!1},"quanto"),Object(r.jsx)(x.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date",allowHeaderFiltering:!1},"data_inicio"),Object(r.jsx)(x.Column,{dataField:"data_fim",caption:"Fim",dataType:"date",allowHeaderFiltering:!1},"data_fim"),Object(r.jsx)(x.Column,{dataField:"data_conclusao",caption:"Conclus\xe3o",dataType:"date",allowHeaderFiltering:!1},"data_conclusao")];xe.defaultProps={valueExpr:"pdca_atividade_id",displayExpr:"que",placeholder:"Selecione a atividade do PDCA",children:ye,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,key:window.random_hash()};var Ae=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).propsToState=o.propsToState.bind(Object(u.a)(o)),o.state=Object(c.a)(Object(c.a)({},o.state),o.propsToState()),o}return Object(d.a)(a,[{key:"propsToState",value:function(){var e,t,a;return{dataSource:Object(z.b)(),selecionado:this.props.selecionado?[this.props.selecionado]:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,fnAoAlterar:"function"===typeof this.props.aoAlterar?this.props.aoAlterar:function(){},componentWidth:null!==(t=this.props.width)&&void 0!==t?t:null,dataGridWidth:null!==(a=this.props.dataGridWidth)&&void 0!==a?a:null}}}]),a}(M.default),Ce=[Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"assunto_descricao",caption:"Assunto",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"tipo_documento_nome",caption:"Tipo",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"pasta",caption:"Pasta",dataType:"string"})];Ae.defaultProps={valueExpr:"documento_id",displayExpr:"nome",placeholder:"Selecione o documento",children:Ce,key:window.random_hash(),dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1};var Se=a(423),Re=a(577),Ie=a.n(Re),Pe=a(918);function Ee(e){var t=e.key,a=void 0===t?"":t,o=e.title,i=void 0===o?"":o,n=e.visible,s=void 0!==n&&n,l=e.popupWidth,d=void 0===l?"80vw":l,u=e.popupHeight,p=void 0===u?void 0:u,f=e.popupContent,m=void 0===f?null:f,v=e.tipoPredefinido,b=void 0===v?null:v,j=e.parametrosAdicionaisSalvar,O=void 0===j?{}:j,w=e.aoEsconder,x=void 0===w?function(){}:w,A=e.aoSalvar,C=void 0===A?function(){}:A,R=Object(_.useRef)(null),P=Object(_.useRef)(null),E=Object(_.useRef)(null),T=Object(_.useRef)(null),D=Object(_.useRef)(null),k=Object(_.useRef)(null);Object(_.useEffect)((function(){"boolean"===typeof s&&L(s)}),[s]);var M=Object(_.useState)(null!==s&&void 0!==s&&s),N=Object(Se.a)(M,2),F=N[0],L=N[1],U=Object(_.useState)(function(){if(null!==b&&""!==b)switch(b){case"novoTarefaQuadro":return function(){var e={text:"Salvar",onClick:function(){var e,t,a,o,i,n=R.current.instance,r=P.current.dropDownBoxRef.current.instance,s=E.current.instance,l=T.current.instance,d=null!==(e=n.option("value"))&&void 0!==e?e:null,u=null!==(t=(null!==(a=r.option("value"))&&void 0!==a?a:[])[0])&&void 0!==t?t:null,p=null!==(o=s.option("value"))&&void 0!==o?o:null,f=null!==(i=l.option("value"))&&void 0!==i?i:null;d?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.a.post({route:"/tarefa_quadro/salvar/",data:{data:JSON.stringify(e),defaultSave:!0},func_response:function(e){window.alert_saved("Quadro de Tarefas cadastrado com sucesso"),z();var t="function"===typeof C?C:function(){};t(),y.a.load("tarefa/detalhes",(function(a,o){o.onclose=t,o.show(e)}),y.a.ABA.SIM)},func_fail:function(){window.alert_fail("Falha ao cadastrar Quadro de Tarefas")}})}(Object(c.a)(Object(c.a)({},O),{},{nome:d,formulario_tarefa_quadro_lista_cartao_id:u,redimensionar_colunas:p,particular:f})):window.alertaPopUp("Valida\xe7\xe3o","O nome do Quadro \xe9 obrigat\xf3rio.")}},t={text:"Cancelar",onClick:function(){z()}};return[Object(r.jsx)(Re.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"after",showText:"always",options:e}),Object(r.jsx)(Re.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"before",showText:"always",options:t})]}();case"novoTarefaCartao":return function(){var e={text:"Salvar",onClick:function(){var e,t,a=k.current.instance,o=null!==(e=D.current.instance.option("value"))&&void 0!==e?e:null,i=null!==(t=a.option("value"))&&void 0!==t?t:null;if(o)if(i){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.a.post({route:"/tarefa_quadro_lista_cartao/salvar/",data:Object(c.a)({},e),func_response:function(e){window.alert_saved("Cart\xe3o cadastrado com sucesso"),z();var t="function"===typeof C?C:function(){};t(),y.a.load("tarefa/detalhes_cartao",(function(a,o){o.onclose=t,o.show(e.id)}),y.a.ABA.SIM,null,null,{cartaoId:e.id})},func_fail:function(){window.alert_fail("Falha ao cadastrar Cart\xe3o")}})}(Object(c.a)(Object(c.a)({},O),{},{nome:i,tarefa_quadro_lista_id:o}))}else window.alertaPopUp("Valida\xe7\xe3o","O nome do Cart\xe3o \xe9 obrigat\xf3rio.");else window.alertaPopUp("Valida\xe7\xe3o","A Lista \xe9 obrigat\xf3ria para o cadastro do Cart\xe3o.")}},t={text:"Cancelar",onClick:function(){z()}};return[Object(r.jsx)(Re.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"after",showText:"always",options:e}),Object(r.jsx)(Re.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"before",showText:"always",options:t})]}();default:return G()}return G()}()),B=Object(Se.a)(U,2),V=B[0];B[1];return Object(r.jsx)("div",{className:"DxPopup",children:Object(r.jsx)(Ie.a,{id:"popup_".concat(a||Math.random()),title:null!==i&&void 0!==i?i:"",visible:F,contentRender:function(){if(null===b||""===b)return null!==m&&""!==m?m:H();switch(b){case"novoTarefaQuadro":return function(){var e={display:"flex",flexDirection:"column",gap:16},t={display:"block"},a=[{descricao:"Sim",valor:"S"},{descricao:"N\xe3o",valor:"N"}];return Object(r.jsx)(h.a.Fragment,{children:Object(r.jsxs)("div",{style:e,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{style:t,children:"Nome"}),Object(r.jsx)(S.a,{ref:R,placeholder:"Digite o nome do Quadro"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{style:t,children:"Formul\xe1rio Vinculado"}),Object(r.jsx)(Pe.default,{ref:P})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{style:t,children:"Redimensionar Colunas"}),Object(r.jsx)(I.a,{ref:E,dataSource:a,displayExpr:"descricao",valueExpr:"valor",defaultValue:"N"})]})]})})}();case"novoTarefaCartao":return function(){var e={display:"flex",flexDirection:"column",gap:16},t={display:"block"};return Object(r.jsx)(h.a.Fragment,{children:Object(r.jsxs)("div",{style:e,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Lista"}),Object(r.jsx)(I.a,{ref:D,dataSource:fe(O.tarefa_quadro_id),valueExpr:"id",displayExpr:"nome"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{style:t,children:"Nome"}),Object(r.jsx)(S.a,{ref:k,placeholder:"Digite o nome do Cart\xe3o"})]})]})})}();default:H()}},dragEnabled:!1,hideOnOutsideClick:!1,showCloseButton:!0,onHiding:z,width:d,height:p,children:V},"key_".concat(a||Math.random()))});function z(){L(!F),"function"===typeof x&&x()}function G(){var e={text:"Ok",onClick:function(){z()}};return Object(r.jsx)(Re.ToolbarItem,{widget:"dxButton",toolbar:"bottom",showText:"always",options:e})}function H(){return Object(r.jsx)("p",{children:"..."})}}a(689);var Te=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).state=Object(c.a)({isComponenteCarregado:!1,relacionamentos:[],selectedItemKeys:[],salvando:!1,exibirSelecionarTarefaCartao:!1,selecaoCartaoQuadroId:null,exibirSelecionarAtividadeProjeto:!1,exibirSelecionarAtividadeProjetoId:null,popupNovoQuadroVisible:!1,popupNovoCartaoVisible:!1,exibirSelecionarPDCAAtividade:!1,PDCASelecionadoId:null},o.propsToObjState()),o.aoAlterarVisualizacaoTabela=o.aoAlterarVisualizacaoTabela.bind(Object(u.a)(o)),o.aoAlterarVisualizacaoId=o.aoAlterarVisualizacaoId.bind(Object(u.a)(o)),o.aoAlterarVinculoId=o.aoAlterarVinculoId.bind(Object(u.a)(o)),o.aoSelecionarAgenda=o.aoSelecionarAgenda.bind(Object(u.a)(o)),o.aoSelecionarTarefaQuadro=o.aoSelecionarTarefaQuadro.bind(Object(u.a)(o)),o.aoSelecionarTarefaCartao=o.aoSelecionarTarefaCartao.bind(Object(u.a)(o)),o.aoSelecionarChamado=o.aoSelecionarChamado.bind(Object(u.a)(o)),o.aoSelecionarSolicitacao=o.aoSelecionarSolicitacao.bind(Object(u.a)(o)),o.aoSelecionarSolicitacaoAtividade=o.aoSelecionarSolicitacaoAtividade.bind(Object(u.a)(o)),o.aoSelecionarProjeto=o.aoSelecionarProjeto.bind(Object(u.a)(o)),o.aoSelecionarProjetoAtividade=o.aoSelecionarProjetoAtividade.bind(Object(u.a)(o)),o.aoSelecionarPDCA=o.aoSelecionarPDCA.bind(Object(u.a)(o)),o.aoSelecionarPDCAComAtividade=o.aoSelecionarPDCAComAtividade.bind(Object(u.a)(o)),o.aoSelecionarPDCAAtividade=o.aoSelecionarPDCAAtividade.bind(Object(u.a)(o)),o.aoSelecionarOportunidade=o.aoSelecionarOportunidade.bind(Object(u.a)(o)),o.aoSelecionarDocumento=o.aoSelecionarDocumento.bind(Object(u.a)(o)),o.aoAlterarVinculoTabela=o.aoAlterarVinculoTabela.bind(Object(u.a)(o)),o.confirmarVinculo=o.confirmarVinculo.bind(Object(u.a)(o)),o.reiniciar=o.reiniciar.bind(Object(u.a)(o)),o.callbackBtns=o.callbackBtns.bind(Object(u.a)(o)),o.onClickRemoverReferencia=o.onClickRemoverReferencia.bind(Object(u.a)(o)),o.onClickCancelar=o.onClickCancelar.bind(Object(u.a)(o)),o.onClickExpandir=o.onClickExpandir.bind(Object(u.a)(o)),o.onClickRetrair=o.onClickRetrair.bind(Object(u.a)(o)),o.onClickRefresh=o.onClickRefresh.bind(Object(u.a)(o)),o.onClickNovoEvento=o.onClickNovoEvento.bind(Object(u.a)(o)),o.onClickNovoChamado=o.onClickNovoChamado.bind(Object(u.a)(o)),o.onClickNovaSolicitacao=o.onClickNovaSolicitacao.bind(Object(u.a)(o)),o.onClickNovoDocumento=o.onClickNovoDocumento.bind(Object(u.a)(o)),o.onClickNovoDocumentoMultiplo=o.onClickNovoDocumentoMultiplo.bind(Object(u.a)(o)),o.onClickNovoProjeto=o.onClickNovoProjeto.bind(Object(u.a)(o)),o.onClickNovoQuadro=o.onClickNovoQuadro.bind(Object(u.a)(o)),o.onClickNovoTarefaCartao=o.onClickNovoTarefaCartao.bind(Object(u.a)(o)),o.onClickNovoPDCA=o.onClickNovoPDCA.bind(Object(u.a)(o)),o.onClickNovoPDCAAtividade=o.onClickNovoPDCAAtividade.bind(Object(u.a)(o)),o.obterReferencias=o.obterReferencias.bind(Object(u.a)(o)),o.aoAlterarAcordeaoSelecionado=o.aoAlterarAcordeaoSelecionado.bind(Object(u.a)(o)),o.renderTitulo=o.renderTitulo.bind(Object(u.a)(o)),o.renderDataGrid=o.renderDataGrid.bind(Object(u.a)(o)),o}return Object(d.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,i,n,r,s;return{tabela:null!==(e=this.props.tabela)&&void 0!==e?e:null,id:null!==(t=this.props.id)&&void 0!==t?t:null,callbackBtns:null!==(a=this.props.callbackBtns)&&void 0!==a?a:null,documentoPastaId:null!==(o=this.props.documentoPastaId)&&void 0!==o?o:null,entidadeId:null!==(i=this.props.entidadeId)&&void 0!==i?i:null,entidadeTipo:null!==(n=this.props.entidadeTipo)&&void 0!==n?n:null,adicionais:null!==(r=this.props.adicionais)&&void 0!==r?r:null,dropDownContainer:null!==(s=this.props.dropDownContainer)&&void 0!==s?s:void 0}}},{key:"componentDidUpdate",value:function(e,t){e.tabela===this.props.tabela&&e.id===this.props.id||this.setState(this.propsToObjState())}},{key:"componentDidMount",value:function(){this.obterReferencias()}},{key:"obterReferencias",value:function(e){var t,a,o=this;this.state.tabela&&this.state.id>0&&(t=this.state.tabela,a=this.state.id,new Promise((function(e,o){g.a.get({route:"referencia/listar/",data:{tabela:t,id:a},func_response:function(t){e(t)}})}))).then((function(t){var a={};e&&(a={vincularId:null,referenciarTabela:null,salvando:!1}),o.setState(Object(c.a)({relacionamentos:t,selectedItemKeys:o.state.selectedItemKeys,isComponenteCarregado:!0},a))}))}},{key:"aoAlterarVisualizacaoTabela",value:function(e){var t=this;this.setState({tabela:e.value},(function(){return t.obterReferencias()}))}},{key:"aoAlterarVisualizacaoId",value:function(e){var t=this;this.setState({id:e.value},(function(){return t.obterReferencias()}))}},{key:"aoAlterarVinculoTabela",value:function(e){this.setState({referenciarTabela:e.value})}},{key:"aoAlterarVinculoId",value:function(e){this.setState({vincularId:e.value})}},{key:"aoSelecionarAgenda",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarTarefaQuadro",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a?this.setState({vincularId:e},(function(){return t.confirmarVinculo()})):this.setState({exibirSelecionarTarefaCartao:!0,selecaoCartaoQuadroId:e})}},{key:"aoSelecionarTarefaCartao",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarChamado",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarSolicitacao",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarSolicitacaoAtividade",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarProjeto",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a?this.setState({vincularId:e},(function(){return t.confirmarVinculo()})):this.setState({exibirSelecionarAtividadeProjeto:!0,exibirSelecionarAtividadeProjetoId:e})}},{key:"aoSelecionarProjetoAtividade",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarPDCA",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarPDCAComAtividade",value:function(e){this.setState({exibirSelecionarPDCAAtividade:!0,PDCASelecionadoId:e})}},{key:"aoSelecionarPDCAAtividade",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarOportunidade",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"aoSelecionarDocumento",value:function(e){var t=this;this.setState({vincularId:e},(function(){return t.confirmarVinculo()}))}},{key:"confirmarVinculo",value:function(){var e,t,a,o=this;if(this.state.referenciarTabela&&""!==this.state.referenciarTabela&&this.state.vincularId&&""!==this.state.vincularId){this.setState({salvando:!0,exibirSelecionarAtividadeProjeto:!1}),e={tabela_a:this.state.tabela,id_a:this.state.id,tabela_b:this.state.referenciarTabela,id_b:this.state.vincularId},t=function(){o.obterReferencias(!0)},a=function(){o.reiniciar()},g.a.post({route:"referencia/salvar",data:e,func_response:function(e){window.alert_saved("Relacionamento salvo com sucesso"),t&&t(e)},func_fail:function(e){window.alert_fail("Falhou"),a&&a(e)}})}}},{key:"aoAlterarAcordeaoSelecionado",value:function(e){var t=Object(s.a)(this.state.selectedItemKeys);e.removedItems.forEach((function(e){var a=t.indexOf(e.tabela);a>=0&&t.splice(a,1)})),e.addedItems.length&&(t=[].concat(Object(s.a)(t),[e.addedItems[0].tabela])),this.setState({selectedItemKeys:t})}},{key:"renderTitulo",value:function(e){var t=this,o=Object(r.jsx)("div",{children:e.registros.map((function(e,a){return 10===a?Object(r.jsx)("button",{type:"button",className:"btn btn-link",style:{paddingLeft:0,paddingRight:10,paddingTop:0,paddingBottom:0},children:"..."},e.referencia_id):a>10?null:Object(r.jsxs)("button",{type:"button",className:"btn btn-link",style:{paddingLeft:0,paddingRight:10,paddingTop:0,paddingBottom:0},onClick:function(a){return t.abrirTituloLinkReferencia(e,a)},children:[t.labelTituloLinkReferencia(e)," "]},e.referencia_id)}))}),i=e.tabela,n=a.tabelas.filter((function(t){return t.id===e.tabela}));return n&&n.length>0&&(i=n[0].descricao),Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)("div",{className:"pull-right",style:{paddingRight:"25px"},children:Object(r.jsx)("span",{className:"badge",children:e.registros.length})}),Object(r.jsxs)("div",{style:{display:"flex",alignSelf:"center"},children:[Object(r.jsx)("div",{children:i}),Object(r.jsx)(A.a,{}),Object(r.jsx)("div",{children:o})]})]})}},{key:"renderDataGrid",value:function(e){switch(e.tabela){case"chamado":return this.renderDataGridChamado(e.registros);case"oportunidade":return this.renderDataGridOportunidade(e.registros);case"solicitacao":return this.renderDataGridSolicitacao(e.registros);case"solicitacao_atividade":return this.renderDataGridSolicitacaoAtividade(e.registros);case"projeto":return this.renderDataGridProjeto(e.registros);case"projeto_atividade":return this.renderDataGridProjetoAtividade(e.registros);case"documento":return this.renderDataGridDocumento(e.registros);case"agenda_evento":return this.renderDataGridAgendaEvento(e.registros);case"pdca":return this.renderDataGridPdca(e.registros);case"pdca_atividade":return this.renderDataGridPdcaAtividade(e.registros);case"tarefa_quadro":return this.renderDataGridTarefaQuadro(e.registros);case"tarefa_quadro_lista_cartao":return this.renderDataGridTarefaQuadroListaCartao(e.registros)}}},{key:"callbackBtns",value:function(){"function"===typeof this.state.callbackBtns&&this.state.callbackBtns()}},{key:"onClickRemoverReferencia",value:function(e){var t=this,a=function(){t.obterReferencias()};window.DevExpress.ui.dialog.confirm("A refer\xeancia ser\xe1 removida. <b>Deseja continuar?</b>","Remover refer\xeancia").done((function(o){var i,n,r;o&&(i={tabela_a:t.state.tabela,id_a:t.state.id,tabela_b:e.row.data.referencia_tabela,id_b:e.row.data.referencia_id},n=a,g.a.post({route:"referencia/excluir",data:i,func_response:function(e){window.alert_saved("Relacionamento exclu\xeddo com sucesso"),n&&n(e)},func_fail:function(e){window.alert_fail("Falhou"),r&&r(e)}}))}))}},{key:"reiniciar",value:function(){this.setState({vincularId:null,referenciarTabela:null,salvando:!1})}},{key:"onClickCancelar",value:function(e){this.reiniciar()}},{key:"onClickRefresh",value:function(e){this.obterReferencias()}},{key:"onClickExpandir",value:function(e){this.setState({selectedItemKeys:this.state.relacionamentos.map((function(e){return e.tabela}))})}},{key:"onClickRetrair",value:function(e){this.setState({selectedItemKeys:[]})}},{key:"onClickNovoEvento",value:function(e){var t=this,a=function(){t.obterReferencias()};this.callbackBtns();var o={evento_id:null,dia:{dia:window.formatDate(new Date,!0),hora_inicio:null,hora_fim:null},usuario_id:O.a.sessao.dados.usuario_id,usuario_nome:O.a.sessao.dados.nome,referencia_tabela:this.state.tabela,referencia_id:this.state.id};y.a.load("agenda/agenda_evento",(function(e,t){t.onclose=a,t.show(o)}))}},{key:"onClickNovoQuadro",value:function(e){var t="undefined"===typeof e||e;this.setState({popupNovoQuadroVisible:t})}},{key:"onClickNovoTarefaCartao",value:function(e){var t="undefined"===typeof e||e;this.setState({popupNovoCartaoVisible:t})}},{key:"onClickNovoChamado",value:function(e){var t,a,o,i,n=this;this.callbackBtns();var r={};switch(this.state.tabela){case"pdca_atividade":r={pdcaAtividadeId:this.state.id,pdcaId:null!==(t=null===(a=this.state.adicionais)||void 0===a?void 0:a.pdca_id)&&void 0!==t?t:null,assunto:"PDCA #"+(null!==(o=null===(i=this.state.adicionais)||void 0===i?void 0:i.pdca_id)&&void 0!==o?o:"")+" | Atividade #"+this.state.id}}y.a.loadReact(window.views.chamado.Detalhes.default,Object(c.a)({referenciaTabela:this.state.tabela,referenciaId:this.state.id,entidadeId:this.state.entidadeId,entidadeTipo:this.state.entidadeTipo,onClose:function(){n.obterReferencias()}},r),(function(e,t){}),y.a.ABA.MULTIPLAS),this.reiniciar()}},{key:"onClickNovaSolicitacao",value:function(e){var t=this;this.callbackBtns(),y.a.load("solicitacao/nova",(function(e,a){a.onclose=function(){t.obterReferencias()},a.referencia_tabela=t.state.tabela,a.referencia_id=t.state.id,a.show()})),this.reiniciar()}},{key:"onClickNovoDocumento",value:function(e){var t=this;this.callbackBtns(),y.a.load("central_documentos/documento",(function(e,a){a.onclose=function(){t.obterReferencias()},a.referencia_tabela=t.state.tabela,a.referencia_id=t.state.id,a.show(null,window.FORMULARIO.NOVO,t.state.documentoPastaId,null,null,null,null,null,null)}),y.a.ABA.MULTIPLAS),this.reiniciar()}},{key:"onClickNovoDocumentoMultiplo",value:function(e){var t=this;this.callbackBtns(),y.a.load("upload/envio_multiplo",(function(e,a){a.onclose=function(){t.obterReferencias()},a.referencia_tabela=t.state.tabela,a.referencia_id=t.state.id,a.show(t.state.documentoPastaId)}),y.a.ABA.SIM),this.reiniciar()}},{key:"onClickNovoProjeto",value:function(e){var t=this,a=function(){t.obterReferencias()};this.callbackBtns(),y.a.load("projeto/detalhes",(function(e,o){o.onclose=a,o.show({referencia:{referencia_tabela:t.state.tabela,referencia_id:t.state.id}},window.FORMULARIO.NOVO)}),y.a.ABA.MULTIPLAS)}},{key:"onClickNovoPDCA",value:function(e){var t=this;y.a.load("pdca/detalhes",(function(e,a){a.onclose=function(){t.obterReferencias()},a.show(null,window.FORMULARIO.NOVO,{referencia_tabela:t.state.tabela,referencia_id:t.state.id})}),y.a.ABA.SIM)}},{key:"onClickNovoPDCAAtividade",value:function(e){var t=this;y.a.load("pdca/atividades",(function(e,a){a.onclose=function(){t.obterReferencias()},a.show({pdca_id:t.state.PDCASelecionadoId},!1,{referencia_tabela:t.state.tabela,referencia_id:t.state.id})}),y.a.ABA.SIM)}},{key:"acessarAgendaEvento",value:function(e){var t=this;y.a.load("agenda/agenda_evento",(function(a,o){o.onclose=t.onClickRefresh,o.show({evento_id:e})}))}},{key:"acessarTarefaQuadro",value:function(e){var t=this;y.a.load("tarefa/detalhes",(function(a,o){o.onclose=t.onClickRefresh,o.show({id:e})}),y.a.ABA.SIM,null,null,{tarefaQuadroId:e})}},{key:"acessarTarefaQuadroCartao",value:function(e){var t=this;y.a.load("tarefa/detalhes_cartao",(function(a,o){o.onclose=t.onClickRefresh,o.show(e)}),y.a.ABA.SIM,null,null,{cartaoId:e})}},{key:"acessarChamado",value:function(e){y.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:e},(function(e,t){}),y.a.ABA.MULTIPLAS)}},{key:"acessarProjeto",value:function(e){var t=this;y.a.load("projeto/detalhes",(function(a,o){o.onclose=t.onClickRefresh,o.show(e,window.FORMULARIO.EDITAR)}),y.a.ABA.SIM)}},{key:"acessarSolicitacao",value:function(e){y.a.loadReact(window.views.solicitacao_processo.Listagem.default,{filtro_solicitacao_numero:e},(function(e){}),y.a.ABA.SIM_E_RECARREGAR_SE_ESTIVER_ABERTA)}},{key:"acessarSolicitacaoAtividade",value:function(e){y.a.load("solicitacao/detalhes",(function(t,a){a.show(e,window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:e})}},{key:"acessarDocumento",value:function(e){y.a.load("central_documentos/documento",(function(t,a){a.show(e,window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS)}},{key:"acessarProjetoAtividade",value:function(e,t){y.a.load("atividade_projeto/detalhes",(function(a,o){o.show(e,t,window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:t})}},{key:"acessarPDCA",value:function(e){var t=this;y.a.load("pdca/detalhes",(function(a,o){o.onclose=t.onClickRefresh,o.show({pdca_id:e},window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS,null,null,{pdcaId:e})}},{key:"acessarPDCAAtividade",value:function(e,t){var a=this;y.a.load("pdca/atividades",(function(o,i){i.onclose=a.onClickRefresh,i.show({pdca_id:e,pdca_atividade_id:t})}),y.a.ABA.MULTIPLAS,null,null,{pdcaId:e})}},{key:"acessarOportunidade",value:function(e,t){y.a.load("oportunidade/detalhes",(function(e,a){a.show(t,window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS,null,null,{oportunidadeId:t})}},{key:"abrirTituloLinkReferencia",value:function(e,t){switch(this.callbackBtns(),e.referencia_tabela){case"agenda_evento":this.acessarAgendaEvento(e.agenda_evento_id);break;case"tarefa_quadro":this.acessarTarefaQuadro(e.id);break;case"tarefa_quadro_lista_cartao":this.acessarTarefaQuadroCartao(e.id);break;case"chamado":this.acessarChamado(e.id);break;case"solicitacao":this.acessarSolicitacao(e.id);break;case"solicitacao_atividade":this.acessarSolicitacaoAtividade(e.solicitacao_atividade_id);break;case"documento":this.acessarDocumento(e.documento_id);break;case"projeto":this.acessarProjeto(e.id);break;case"projeto_atividade":this.acessarProjetoAtividade(e.projeto_id,e.id);break;case"oportunidade":this.acessarOportunidade(e.funil_vendas_id,e.oportunidade_id);break;case"pdca":this.acessarPDCA(e.pdca_id);break;case"pdca_atividade":this.acessarPDCAAtividade(e.pdca_id,e.pdca_atividade_id)}}},{key:"labelTituloLinkReferencia",value:function(e){var t=function(e){return Object(r.jsx)("div",{className:"referencia_titulo_link",title:e,children:e})};switch(e.referencia_tabela){case"agenda_evento":return t(e.dia.format_date()+" "+e.agenda_tipo_nome);case"chamado":return t("#"+e.id+" "+e.assunto);case"solicitacao":return t("#"+("S"===O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.id)+" "+e.processo_nome);case"solicitacao_atividade":return t("#"+("S"===O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?e.numero:e.solicitacao_id)+" "+e.atividade_descricao);case"documento":return t(e.nome);case"projeto":return t("#"+e.codigo+" "+e.nome);case"projeto_atividade":return t("#"+e.codigo+" "+e.atividade_simplificada);case"tarefa_quadro":return t("#"+e.id+" "+e.nome);case"tarefa_quadro_lista_cartao":return t(e.nome+" ("+e.quadro_nome+")");case"oportunidade":return t("#"+e.oportunidade_id+" ("+e.nome+" / "+e.funil+")");case"pdca":return t("#"+e.numero+" "+e.objetivo);case"pdca_atividade":return t("#"+e.pdca_numero+" "+(e.que||e.porque||e.quem_nome||e.como));default:return""}}},{key:"renderDataGridChamado",value:function(e){var t=[Object(r.jsx)(ae,{})].concat(Object(s.a)(Object(oe.a)(this.props.html_id)),[Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(ne,{dataField:"chamado_id",callbackBtns:this.callbackBtns}),Object(r.jsx)(x.Button,{text:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO}})]})]);return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(j.default,{dataSource:e,remoteOperations:!1,children:t}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridSolicitacao",value:function(e){var t=[Object(r.jsx)(ae,{})].concat(Object(s.a)(Q(window.App.sessao.dados.parametro_processo.numero_solicitacao_por_processo)),[Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(ie,{dataField:"id",dataFieldNumero:"numero",callbackBtns:this.callbackBtns}),Object(r.jsx)(x.Button,{text:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO}})]})]);return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsxs)(j.default,{width:"100%",dataSource:e,remoteOperations:!1,onRowPrepared:function(e){"data"===e.rowType&&setTimeout((function(){var t=e.component.getCellElement(e.rowIndex,"solicitacao_situacao");if(t){var a=t.text();if(a.trim().length){t.css("color","#FFF").css("text-align","center");var o="Andamento"===a?"#669999":"Conclu\xedda"===a?"#008A2E":"N\xe3o entregue"===a?"#E68A00":"Retornada"===a||"Cancelada"===a||"Atrasada"===a?"#B80000":"#000000DE";t.css("background",o)}}}))},children:[t,Object(r.jsx)(x.MasterDetail,{enabled:!0,template:function(){var e=Object(n.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.a.render(h.a.createElement(window.views.solicitacao_processo.ListagemAtividadesMasterDetail.default,{data:a.data}),t[0]);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})]}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridSolicitacaoAtividade",value:function(e){return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(j.default,{dataSource:e,remoteOperations:!1,columns:[this.colunaReferenciaNivel].concat(Object(s.a)(U(O.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo)),[{type:"buttons",fixed:!0,fixedPosition:"right",buttons:[B(this.callbackBtns),{hint:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO}}]}]),onRowPrepared:function(e){"data"===e.rowType&&setTimeout((function(){var t=e.component.getCellElement(e.rowIndex,"situacao");if(t){var a=t.text();if(a.trim().length){t.css("color","#FFF").css("text-align","center");var o="Andamento"===a?"#669999":"Conclu\xedda"===a?"#008A2E":"N\xe3o entregue"===a?"#E68A00":"Retornada"===a||"Cancelada"===a||"Atrasada"===a?"#B80000":"#000000DE";t.css("background",o)}}}))}}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridProjeto",value:function(e){var t=this;return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"codigo",caption:"C\xf3digo",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"cliente_nome",caption:"Cliente",dataType:"string",calculateCellValue:function(e){return e.cliente_nome||e.cliente_razao_social}}),Object(r.jsx)(x.Column,{dataField:"status_nome",caption:"Status",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"inicio",caption:"In\xedcio",dataType:"date",allowHeaderFiltering:!1}),Object(r.jsx)(x.Column,{dataField:"fim",caption:"Fim",dataType:"date",allowHeaderFiltering:!1}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar Projeto",onClick:function(e){t.acessarProjeto(e.row.data.id)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridProjetoAtividade",value:function(e){return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(j.default,{dataSource:e,remoteOperations:!1,columns:[this.colunaReferenciaNivel].concat(Object(s.a)(V.d),[{type:"buttons",fixed:!0,fixedPosition:"right",buttons:[Object(V.c)(this.callbackBtns),{hint:"Remover Refer\xeancia",icon:"fas fa-trash",onClick:this.onClickRemoverReferencia,visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO}}]}]),onRowPrepared:function(e){"data"===e.rowType&&setTimeout((function(){var t=e.component.getCellElement(e.rowIndex,"status");if(t){var a=t.text();if(a.trim().length){var o="Cancelada"===a?"default":"Andamento"===a?"info":"Conclu\xeddo"===a?"success":"N\xe3o iniciado"===a?"warning":"danger";t.html('<span class="label label-'+o+'">'+a+"</span>")}}}))}}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridDocumento",value:function(e){var t=this;return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"assunto_descricao",caption:"Assunto",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"tipo_documento_nome",caption:"Tipo",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"pasta",caption:"Pasta",dataType:"string"}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar documento",onClick:function(e){y.a.load("central_documentos/documento",(function(a,o){o.onclose=t.onClickRefresh,o.show(e.row.data.documento_id,window.FORMULARIO.EDITAR,e.row.data.documento_pasta_id)}),y.a.ABA.SIM)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridOportunidade",value:function(e){var t=this;return Object(r.jsx)(h.a.Fragment,{children:Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"oportunidade_id",caption:"#",dataType:"number",alignment:"left"}),Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"situacao",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:function(e){return ue(e.situacao)}}),Object(r.jsx)(x.Column,{dataField:"representante_nome",caption:"Representante",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"entidade_nome",caption:"Entidade"}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar Oportunidade",onClick:function(e){y.a.load("oportunidade/detalhes",(function(a,o){o.onclose=t.onClickRefresh,o.show(e.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),y.a.ABA.MULTIPLAS,null,null,{oportunidadeId:e.row.data.oportunidade_id})}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]})})}},{key:"renderDataGridAgendaEvento",value:function(e){var t=this;return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"descricao",caption:"Descri\xe7\xe3o",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"usuario_nome",caption:"Usu\xe1rio",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"dia",caption:"Dia",dataType:"date",allowHeaderFiltering:!1}),Object(r.jsx)(x.Column,{dataField:"hora_inicio",caption:"In\xedcio",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"hora_fim",caption:"Fim",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"agenda_tipo_nome",caption:"Tipo",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"agenda_local_nome",caption:"Local",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"realizado",caption:"Realizado",dataType:"string",calculateCellValue:function(e){return"S"===e.realizado?"Sim":"N\xe3o"}}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar evento",onClick:function(e){var a=e.row.data;t.acessarAgendaEvento(a.agenda_evento_id)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridPdca",value:function(e){var t=this;return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"pdca_id",caption:"#",dataType:"number",alignment:"left"}),Object(r.jsx)(x.Column,{dataField:"numero",caption:"C\xf3digo",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date"}),Object(r.jsx)(x.Column,{dataField:"data_fim",caption:"Fim",dataType:"date"}),Object(r.jsx)(x.Column,{dataField:"situacao_id",caption:"Situa\xe7\xe3o",dataType:"string",calculateCellValue:function(e){switch(+e.situacao_id){case window.PDCA_SITUACAO.NAO_INICIADO:return"N\xe3o Iniciado";case window.PDCA_SITUACAO.EM_ANDAMENTO:return"Em Andamento";case window.PDCA_SITUACAO.CONCLUIDO:return"Conclu\xeddo"}}}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar PDCA",onClick:function(e){t.acessarPDCA(e.row.data.pdca_id)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridPdcaAtividade",value:function(e){var t=this;return Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"que",caption:"O Qu\xea",dataType:"string"},"que"),Object(r.jsx)(x.Column,{dataField:"porque",caption:"Por qu\xea",dataType:"string"},"porque"),Object(r.jsx)(x.Column,{dataField:"quem_nome",caption:"Quem",dataType:"string"},"quem_nome"),Object(r.jsx)(x.Column,{dataField:"onde",caption:"Onde",dataType:"string"},"onde"),Object(r.jsx)(x.Column,{dataField:"como",caption:"Como",dataType:"string"},"como"),Object(r.jsx)(x.Column,{dataField:"quanto",caption:"Quanto",dataType:"number",format:{type:"currency",precision:2},allowHeaderFiltering:!1},"quanto"),Object(r.jsx)(x.Column,{dataField:"data_inicio",caption:"In\xedcio",dataType:"date",allowHeaderFiltering:!1},"data_inicio"),Object(r.jsx)(x.Column,{dataField:"data_fim",caption:"Fim",dataType:"date",allowHeaderFiltering:!1},"data_fim"),Object(r.jsx)(x.Column,{dataField:"data_conclusao",caption:"Conclus\xe3o",dataType:"date",allowHeaderFiltering:!1},"data_conclusao"),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar atividades",onClick:function(e){t.acessarPDCAAtividade(e.row.data.pdca_id,e.row.data.pdca_atividade_id)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]}),Object(r.jsx)(A.b,{})]})}},{key:"renderDataGridTarefaQuadro",value:function(e){var t=this;return Object(r.jsx)(h.a.Fragment,{children:Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"nome",caption:"Nome",dataType:"string"}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar quadro",onClick:function(e){t.acessarTarefaQuadro(e.row.data.id)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]})})}},{key:"renderDataGridTarefaQuadroListaCartao",value:function(e){var t=this;return Object(r.jsx)(h.a.Fragment,{children:Object(r.jsxs)(j.default,{dataSource:e,remoteOperations:!1,children:[Object(r.jsx)(x.Column,{dataField:"quadro_nome",caption:"Quadro",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"nome",caption:"Cart\xe3o",dataType:"string"}),Object(r.jsx)(x.Column,{dataField:"data_prazo",caption:"Prazo",dataType:"datetime",allowHeaderFiltering:!1}),Object(r.jsx)(x.Column,{dataField:"data_conclusao",caption:"Conclus\xe3o",dataType:"datetime",allowHeaderFiltering:!1}),Object(r.jsxs)(x.Column,{type:"buttons",fixed:!0,fixedPosition:"right",children:[Object(r.jsx)(x.Button,{icon:"fas fa-edit",hint:"Visualizar cart\xe3o",onClick:function(e){t.acessarTarefaQuadroCartao(e.row.data.id)}}),Object(r.jsx)(x.Button,{icon:"fas fa-trash",hint:"Remover refer\xeancia",visible:function(e){return e.row.data.referencia_nivel&&e.row.data.referencia_nivel==window.TIPO_REFERENCIA.NIVEL_INTERNO},onClick:this.onClickRemoverReferencia})]})]})})}},{key:"render",value:function(){var e=this;return this.state.isComponenteCarregado?Object(r.jsx)("div",{className:"panel",children:Object(r.jsxs)("div",{className:"panel-body",children:[this.props.tabela||this.props.id?null:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-xs-12",children:[Object(r.jsx)("div",{children:"Visualizar refer\xeancias de:"}),Object(r.jsxs)("div",{style:{display:"flex",alignSelf:"center"},children:[Object(r.jsx)(I.a,{items:a.tabelas,displayExpr:"descricao",valueExpr:"id",value:this.state.tabela,onValueChanged:this.aoAlterarVisualizacaoTabela}),Object(r.jsx)(S.a,{value:this.state.id,onValueChanged:this.aoAlterarVisualizacaoId})]}),Object(r.jsx)(A.b,{})]})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-xs-12",children:Object(r.jsxs)(k.a,{children:[Object(r.jsx)(D.Item,{location:"before",children:Object(r.jsxs)("div",{style:{display:"flex",alignSelf:"center"},children:[Object(r.jsx)(I.a,{items:a.tabelas.filter((function(e){return e.selecaoVisivel})),displayExpr:"descricao",valueExpr:"id",value:this.state.referenciarTabela,onValueChanged:this.aoAlterarVinculoTabela,placeholder:"Adicionar refer\xeancia interna",disabled:this.state.salvando,width:250}),Object(r.jsx)(A.a,{}),"agenda_evento"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(se,{aoAlterar:this.aoSelecionarAgenda,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{type:"default",text:"Novo Evento",disabled:this.state.salvando,onClick:this.onClickNovoEvento})]}):null,"tarefa_quadro"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(me,{aoAlterar:function(t){e.aoSelecionarTarefaQuadro(t,!0)},readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{type:"default",text:"Novo Quadro",disabled:this.state.salvando,onClick:function(){e.onClickNovoQuadro(!0)}}),Object(r.jsx)(Ee,{title:"Novo Quadro de Tarefas",tipoPredefinido:"novoTarefaQuadro",visible:this.state.popupNovoQuadroVisible,popupWidth:500,aoEsconder:function(){e.onClickNovoQuadro(!1)},parametrosAdicionaisSalvar:{referencia_tabela:this.state.tabela,referencia_id:this.state.id},aoSalvar:this.obterReferencias},"tarefas_quadro")]}):null,"tarefa_quadro_lista_cartao"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(me,{aoAlterar:function(t){e.aoSelecionarTarefaQuadro(t,!1)},readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),this.state.exibirSelecionarTarefaCartao&&this.state.selecaoCartaoQuadroId&&Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(A.a,{}),Object(r.jsx)(ve,{quadro_id:this.state.selecaoCartaoQuadroId,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800,aoAlterar:this.aoSelecionarTarefaCartao}),Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{type:"default",text:"Novo Cart\xe3o",disabled:this.state.salvando,onClick:function(){e.onClickNovoTarefaCartao(!0)}}),Object(r.jsx)(Ee,{title:"Novo Cart\xe3o de Tarefas",tipoPredefinido:"novoTarefaCartao",visible:this.state.popupNovoCartaoVisible,popupWidth:500,aoEsconder:function(){e.onClickNovoTarefaCartao(!1)},parametrosAdicionaisSalvar:{referencia_tabela:this.state.tabela,referencia_id:this.state.id,tarefa_quadro_id:this.state.selecaoCartaoQuadroId},aoSalvar:this.obterReferencias},"tarefas_cartao")]})]}):null,"chamado"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(F,{aoAlterar:this.aoSelecionarChamado,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer,children:Object(oe.a)(this.props.html_id,[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE])}),Object(r.jsx)(T.Button,{type:"default",text:"Novo Chamado",disabled:this.state.salvando,onClick:this.onClickNovoChamado})]}):null,"solicitacao"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(Z,{aoAlterar:this.aoSelecionarSolicitacao,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}),Object(r.jsx)(T.Button,{type:"default",text:"Nova Solicita\xe7\xe3o",disabled:this.state.salvando,onClick:this.onClickNovaSolicitacao})]}):null,"solicitacao_atividade"===this.state.referenciarTabela?Object(r.jsx)(X,{aoAlterar:this.aoSelecionarSolicitacaoAtividade,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}):null,"projeto"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(Y.default,{aoAlterar:function(t){e.aoSelecionarProjeto(t,!0)},readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}),Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{type:"default",text:"Novo Projeto",disabled:this.state.salvando,onClick:this.onClickNovoProjeto})]}):null,"projeto_atividade"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(Y.default,{aoAlterar:function(t){e.aoSelecionarProjeto(t,!1)},readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer}),!0===this.state.exibirSelecionarAtividadeProjeto?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(A.a,{}),Object(r.jsx)(te,{projetoId:this.state.exibirSelecionarAtividadeProjetoId,aoAlterar:this.aoSelecionarProjetoAtividade,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer})]}):null]}):null,"documento"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(Ae,{aoAlterar:this.aoSelecionarDocumento,readOnly:this.state.salvando,width:250,dropDownContainer:this.state.dropDownContainer,dataGridWidth:800}),Object(r.jsx)(T.Button,{type:"default",text:"Novo Documento",disabled:this.state.salvando,onClick:this.onClickNovoDocumento}),Object(r.jsx)(T.Button,{stylingMode:"text",text:"Envio M\xfaltiplo",disabled:this.state.salvando,onClick:this.onClickNovoDocumentoMultiplo})]}):null,"pdca"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(Oe,{aoAlterar:this.aoSelecionarPDCA,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{type:"default",text:"Novo PDCA",disabled:this.state.salvando,onClick:this.onClickNovoPDCA})]}):null,"pdca_atividade"===this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(Oe,{aoAlterar:this.aoSelecionarPDCAComAtividade,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800}),Object(r.jsx)(A.a,{}),this.state.exibirSelecionarPDCAAtividade&&this.state.PDCASelecionadoId&&Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(xe,{aoAlterar:this.aoSelecionarPDCAAtividade,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800,pdca_id:this.state.PDCASelecionadoId}),Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{type:"default",text:"Cadastrar Atividades",disabled:this.state.salvando,onClick:this.onClickNovoPDCAAtividade})]})]}):null,"oportunidade"===this.state.referenciarTabela?Object(r.jsx)(h.a.Fragment,{children:Object(r.jsx)(de,{aoAlterar:this.aoSelecionarOportunidade,readOnly:this.state.salvando,dropDownContainer:this.state.dropDownContainer,width:250,dataGridWidth:800})}):null,this.state.referenciarTabela?Object(r.jsxs)(h.a.Fragment,{children:[Object(r.jsx)(A.a,{}),Object(r.jsx)(T.Button,{text:"Cancelar",disabled:this.state.salvando,stylingMode:"text",onClick:this.onClickCancelar})]}):null]})}),Object(r.jsxs)(D.Item,{location:"after",children:[Object(r.jsx)(T.Button,{onClick:this.onClickExpandir,hint:"Expandir",icon:"fas fa-expand-alt",stylingMode:"text"}),Object(r.jsx)(T.Button,{onClick:this.onClickRetrair,hint:"Retrair",icon:"fas fa-compress-alt",stylingMode:"text"}),Object(r.jsx)(T.Button,{onClick:this.onClickRefresh,hint:"Recarregar",icon:"fas fa-sync-alt",stylingMode:"text"})]})]})})}),Object(r.jsx)(A.b,{}),Object(r.jsx)(E.a,{dataSource:this.state.relacionamentos,collapsible:!0,multiple:!0,itemTitleRender:this.renderTitulo,selectedItemKeys:this.state.selectedItemKeys,onSelectionChanged:this.aoAlterarAcordeaoSelecionado,itemRender:this.renderDataGrid,keyExpr:"tabela",noDataText:"N\xe3o existe nenhuma refer\xeancia com este registro.",onItemTitleClick:function(e){var t,a;"referencia_titulo_link"==(null===e||void 0===e||null===(t=e.event)||void 0===t||null===(a=t.target)||void 0===a?void 0:a.className)&&e.event&&e.event.stopPropagation()}})]})}):Object(r.jsx)("div",{children:"Carregando..."})}}]),a}(h.a.Component);Te.tabelas=[{id:"agenda_evento",descricao:"Agenda",selecaoVisivel:!0},{id:"tarefa_quadro",descricao:"Quadro de Tarefa",selecaoVisivel:!0},{id:"tarefa_quadro_lista_cartao",descricao:"Cart\xe3o de Tarefa",selecaoVisivel:!0},{id:"chamado",descricao:"Chamado",selecaoVisivel:!0},{id:"documento",descricao:"Documento",selecaoVisivel:!0},{id:"solicitacao",descricao:"Solicita\xe7\xe3o de Processo",selecaoVisivel:!0},{id:"solicitacao_atividade",descricao:"Atividade de Processo",selecaoVisivel:!0},{id:"projeto",descricao:"Projeto",selecaoVisivel:!0},{id:"projeto_atividade",descricao:"Atividade de Projeto",selecaoVisivel:!0},{id:"pdca",descricao:"PDCA",selecaoVisivel:!0},{id:"pdca_atividade",descricao:"Atividade de PDCA",selecaoVisivel:!0},{id:"oportunidade",descricao:"Oportunidade",selecaoVisivel:!0}]},679:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d}));var o=a(380),i=a(389),n=a(398),r=function(e){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"grupo_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"grupo_motivo_chamado/listar_grupo_motivo_usuario/",data:Object(o.a)({dx_grid:!0,chamado_id:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"grupo_motivo_chamado/listar_grupo_motivo_usuario/",data:{dx_grid:!0,grupo_motivo_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},s=function(){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"grupo_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){i.a.get({route:"grupo_motivo_chamado/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},c=function(e,t){i.a.get("grupo_motivo_chamado/objeto/",{grupo_id:e},t)},l=function(e,t,a){var o=function(e){window.alert_saved("Grupo de motivos exclu\xeddo com sucesso"),t&&t(e)},n=function(e){window.alert_fail("Falhou"),a&&a(e)};window.alertaPopUp("Exclus\xe3o","Deseja continuar? Este <b>grupo de motivo</b> ser\xe1 <b>exclu\xeddo</b> permanentemente.","Sim, excluir",(function(){i.a.post({route:"grupo_motivo_chamado/excluir",data:{grupo_id:e},func_response:o,func_fail:n})}),"N\xe3o",(function(){}),null,"200px")},d=function(e,t,a){i.a.post({route:"grupo_motivo_chamado/salvar",data:Object(o.a)({},e),func_response:function(e){window.alert_saved("Grupo de motivos salvo com sucesso"),t&&t(e)},func_fail:function(e){window.alert_fail("Falhou"),a&&a(e)}})}},680:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"codigo",dataType:"string",caption:"C\xf3digo",width:100}},681:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var o=a(380),i=a(389),n=a(398),r=function(){return{enabled:!0,type:"custom",customLoad:function(){return window.App.get_parametro_usuario("listagem_chamado_prioridade")},customSave:function(e){window.App.set_parametro_usuario("listagem_chamado_prioridade",e)}}},s=function(e){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"chamado_prioridade_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"chamado_prioridades/listar_para_selecao/",data:Object(o.a)(Object(o.a)({dx_grid:!0},a),e),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado_prioridades/listar_para_selecao/",data:{dx_grid:!0,chamado_prioridade_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},682:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376);var u=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).onClick=o.onClick.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"onClick",value:function(){var e=this.props.url;if("#"===this.props.url.trim().substr(0,1)){var t=document.URL,a=document.URL.indexOf("#");a>=0&&(t=document.URL.substr(0,a)),e=t+this.props.url}window.copyToClipboard(e)}},{key:"render",value:function(){return Object(o.jsx)("button",{onClick:this.onClick,className:"btn btn-link",style:this.props.style,title:"Copiar link para \xe1rea de transfer\xeancia",children:this.props.children})}}]),a}(a.n(d).a.Component);u.defaultProps={url:"about:blank",children:"Copiar Link"}},683:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(615),f=a.n(p);var m=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.dataEnvioClick=o.dataEnvioClick.bind(Object(r.a)(o)),o}return Object(n.a)(a,[{key:"propsToObjState",value:function(){var e;return{dataEnvio:this.props.dataEnvio,dataEnvioFromNow:f()(this.props.dataEnvio).fromNow(),extenso:null!==(e=this.props.extenso)&&void 0!==e&&e}}},{key:"componentDidUpdate",value:function(e,t){e.extenso!==this.props.extenso&&this.setState(this.propsToObjState())}},{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState(e.propsToObjState())}),3e4)}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"dataEnvioClick",value:function(){this.props.aoAlterarTipoExibicao&&this.props.aoAlterarTipoExibicao(!this.state.extenso)}},{key:"render",value:function(){return Object(o.jsx)("div",{className:"text-muted small",title:this.state.dataEnvio.format_date_time(),children:Object(o.jsx)("span",{onClick:this.dataEnvioClick,style:{cursor:"pointer"},children:this.state.extenso?this.state.dataEnvio.format_date_time():this.state.dataEnvioFromNow})})}}]),a}(u.a.Component)},684:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var o=function(e){switch(e){case"00:00":return"00:X0";default:return"000:X0"}}},685:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return h}));var o=a(380),i=a(372),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(389),p=a(376),f=a.n(p),m=a(63),_=a.n(m);var h=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o,i,r,c,l;return Object(n.a)(this,a),(l=t.call(this,e)).state=l.propsToObjState(),l.main=null!==(o=l.props.main)&&void 0!==o?o:{},l.abaFormularioPersonalizado=null!==(i=l.props.abaFormularioPersonalizado)&&void 0!==i?i:null,l.callbackGetPostParams=null!==(r=l.props.callbackGetPostParams)&&void 0!==r?r:null,l.callbackValidar=null!==(c=l.props.callbackValidar)&&void 0!==c?c:null,l.formularioRef=f.a.createRef(),l.renderFormulario=l.renderFormulario.bind(Object(s.a)(l)),l}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a;return{readOnly:null!==(e=this.props.readOnly)&&void 0!==e&&e,urlGet:null!==(t=this.props.urlGet)&&void 0!==t?t:null,urlGetParams:null!==(a=this.props.urlGetParams)&&void 0!==a?a:{}}}},{key:"componentDidMount",value:function(){this.renderFormulario(),null!==this.callbackGetPostParams&&"function"===typeof this.callbackGetPostParams&&this.callbackGetPostParams(this.getPostParams.bind(this)),null!==this.callbackValidar&&"function"===typeof this.callbackValidar&&this.callbackValidar(this.validar.bind(this))}},{key:"componentDidUpdate",value:function(e,t){e.readOnly===this.props.readOnly&&e.urlGet===this.props.urlGet&&window.isEquivalent(e.urlGetParams,this.props.urlGetParams)||(this.setState(this.propsToObjState()),this.formularioRef&&this.renderFormulario())}},{key:"render",value:function(){return Object(i.jsx)("div",{ref:this.formularioRef})}},{key:"renderFormulario",value:function(){var e=this,t=this.main,a=this.abaFormularioPersonalizado;t.html=_()('<div class="aba_personalizado"><div class="titulo_formulario">Campos Personalizados</div><div class="form-editor"><div class="form-grupos panel-body" style="padding: 0px;"></div><div class="form-grupo" template-grupo template-ref="" style="display: none;"><div><h3 class="text-primary lbl_grupo_nome"></h3></div></div><div class="form-grupo-campo" template-campo template-ref="" style="display: none;"><div class="div_campo form-group"><span class="lbl_obrigatorio text-danger">* </span><label class="lbl_nome">{Nome}</label><div class="div_input"></div></div></div></div></div>'),t.html_id="html_id",t.aba_personalizado=t.html,t.titulo_formulario=t.html.find(".titulo_formulario"),t.form_editor=t.html.find(".form-editor"),t.form_grupos=t.html.find(".form-grupos"),t.template_grupo=t.html.find("[template-grupo]"),t.template_campo=t.html.find("[template-campo]"),t.lbl_nome=t.html.find(".lbl_nome"),u.a.get(this.state.urlGet+"/",this.state.urlGetParams,(function(i){i||(t.titulo_formulario.html(""),_()(e.formularioRef.current).html("")),a&&(i?a.text(i.nome):a.addClass("hidden")),t.campos_personalizados=Object(o.a)(Object(o.a)({},i),e.state.urlGetParams),t.titulo_formulario.html(i.nome),t.campos_personalizados.registros&&_.a.each(t.campos_personalizados.registros,(function(e,a){"campo_anexo"===e?a&&_.a.each(a,(function(e,a){if(a){var o=a.split(";"),i=parseInt(o[0]),n=o[1];_.a.each(t.campos_personalizados.grupos,(function(t,a){_.a.each(a.elementos,(function(t,a){e===a.id_elemento&&(a.valor=i,a.documento_revisao={},a.documento_revisao.nome_arquivo=n,a.documento_revisao.mime_type=window.extensao_to_mimetype(n.substring(n.lastIndexOf(".")+1,n.length)))}))}))}})):"selecao_documento"===e?_.a.each(a,(function(e,a){_.a.each(t.campos_personalizados.grupos,(function(t,o){_.a.each(o.elementos,(function(t,o){e===o.id_elemento&&(o.valor=a)}))}))})):"campo_tabela"===e&&_.a.each(a,(function(e,a){if("string"===typeof a)try{a=JSON.parse(a.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}catch(o){console.warn(a,a.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}a&&_.a.each(t.campos_personalizados.grupos,(function(t,o){_.a.each(o.elementos,(function(t,o){e===o.id_elemento&&(o.tamanho_render=a.tamanho_render,o.valor=a.valor,"undefined"!==typeof o.valor&&_.a.each(o.valor,(function(e,t){if(null!=t.revisao){var a=t.revisao.split(";"),o=parseInt(a[0]),i=a[1];t.valor=o,t.documento_revisao={},t.documento_revisao.nome_arquivo=i,t.documento_revisao.mime_type=window.extensao_to_mimetype(i.substring(i.lastIndexOf(".")+1,i.length))}})))}))}))}))})),window.require(["./assets/view/formulario/util"],(function(a){(new a).render_previsao({div_formulario:t,template_campo:t.template_campo,template_grupo:t.template_grupo,obj_formulario:t.campos_personalizados,disabled_all:e.state.readOnly,liberar_campos:!e.state.readOnly}),i.registros&&_.a.each(i.registros,(function(e,a){"campo_geral"===e?Object.keys(i.registros.campo_geral).map((function(e,a){return t.aba_personalizado.find("[id_elemento="+e+"]").val(i.registros.campo_geral[e]),t.aba_personalizado.find("[id_elemento="+e+"]").change(),t.aba_personalizado.find("[id_elemento="+e+"]").blur(),e})):"campo_decimal"===e?Object.keys(i.registros.campo_decimal).map((function(e,a){return i.registros.campo_decimal[e]&&(t.aba_personalizado.find("[id_elemento="+e+"]").val(i.registros.campo_decimal[e].replace(".",",")),t.aba_personalizado.find("[id_elemento="+e+"]").change(),t.aba_personalizado.find("[id_elemento="+e+"]").blur()),e})):"lista_opcoes"===e?Object.keys(i.registros.lista_opcoes).map((function(e,a){var o=t.aba_personalizado.find("[id_elemento="+e+"]").find("option"),n=i.registros.lista_opcoes[e];null!=n&&(n=n.split(";"));var r=0;return o&&n&&_.a.each(o,(function(e,t){_.a.each(n,(function(e,a){t.value===a&&(t.selected=!0,_()(t).change(),_()(t).blur(),r=_()(t).index(),_()(t).parent().parent().find("[data-original-index='"+r+"']").addClass("selected"))}))})),e})):"radio"===e?Object.keys(i.registros.radio).map((function(e,a){var o=t.aba_personalizado.find("[id_elemento="+e+"]");return o.parent().find("input[value='"+i.registros.radio[e]+"']").prop("checked",!0),o.parent().find("input[value='"+i.registros.radio[e]+"']").change(),e})):"checkbox"===e?Object.keys(i.registros.checkbox).map((function(e,a){var o=i.registros.checkbox[e];null!=o&&(o=o.split(";"));var n=t.aba_personalizado.find("[id_elemento="+e+"]");return o&&_.a.each(o,(function(e,t){n.parent().find("input[value='"+t+"']").prop("checked",!0)})),e})):"'caixa_verificacao'"===e?_.a.each(i.registros.caixa_verificacao,(function(e,a){"S"===a&&t.aba_personalizado.find("[id_elemento="+e+"]").prop("checked",!0)})):"editor_texto"===e?setTimeout((function(){Object.keys(i.registros.editor_texto).map((function(e,a){return window.tinyMCE.get(t.aba_personalizado.find("[id_elemento="+e+"]").attr("id")).setContent(i.registros.editor_texto[e]),e}))}),500):"campo_integracao"===e&&Object.keys(i.registros.campo_integracao).map((function(e,a){return t.aba_personalizado.find("[id_elemento="+e+"]").find(".dx-dropdownbox").dxDropDownBox("instance").option("value",i.registros.campo_integracao[e]),e}))})),_()(e.formularioRef.current).html(t.form_editor[0])}))}))}},{key:"getAnexosParams",value:function(){var e={};return this.props.main&&this.props.main.campos_personalizados?(_()(this.props.main.campos_personalizados.grupos).each((function(t,a){_()(a.elementos).each((function(t,a){+a.tipo===window.ELEMENTO_TIPO.ANEXO&&a.anexo?e[a.elem_key]=a.anexo:+a.tipo===window.ELEMENTO_TIPO.TABELA&&a.valor&&_()(a).each((function(t,a){a.valor&&_()(a.valor).each((function(t,a){e[a.elem_key+"_linha_"+a.linha]=a.anexo}))}))}))})),e):e}},{key:"getPostParams",value:function(){return Object(o.a)(Object(o.a)({},this.getAnexosParams()),{},{campos_personalizados:JSON.stringify(this.main.campos_personalizados)})}},{key:"validarCamposObrigatorios",value:function(){var e=this;if(!this.props.main||!this.props.main.form_editor)return!0;var t="";return this.props.main.form_editor.find("[required]").not(".selectpicker").each((function(a,o){var i=_()(o);"text"===i.attr("type")&&"undefined"==typeof i.attr("maskmoney")?"undefined"==typeof i.attr("readonly")&&"none"!==_()(o).css("display")||_()(o).hasClass("input_consulta_integracao")?"undefined"!==typeof i.attr("maskmoney")?""!==o.value.trim()&&0!==i.maskMoney("unmasked")[0]||(t+=e.formGetElementoById(_()(o).attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(i)):""===o.value.trim()&&(t+=e.formGetElementoById(_()(o).attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(i)):i.tooltip("destroy"):"undefined"==typeof i.attr("disabled")&&"none"!==_()(o).css("display")?"undefined"!==typeof i.attr("maskmoney")||"date"===i.attr("type")&&"undefined"==typeof i.attr("disabled")&&"undefined"==typeof i.attr("readonly")?""===o.value.trim()&&(t+=e.formGetElementoById(_()(o).attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(i)):""===o.value.trim()&&"date"!==i.attr("type")&&(t+=e.formGetElementoById(_()(o).attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(i)):i.tooltip("destroy")})),this.props.main.form_editor.find(".input_consulta_integracao").each((function(a,o){var i=_()(o);if(!i[0].children[0].disabled&&"none"!==i[0].children[0].style.display){var n=i.find(".dx-texteditor-input").val(),r=i.parent().find(".lbl_nome");""===n.trim()?(t+=e.formGetElementoById(_()(o).attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(r)):r.tooltip("destroy")}})),this.props.main.form_editor.find(".vld_lista_check").each((function(a,o){var i=_()(o);if(!i[0].children[0].disabled&&"none"!==i[0].children[0].style.display){var n=i.find("input:checked"),r=i.parent().find(".lbl_nome");n&&0!==n.length?r.tooltip("destroy"):(t+=e.formGetElementoById(_()(o).find("input:first").attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(r))}})),this.props.main.form_editor.find(".vld_lista_radio").each((function(a,o){var i=_()(o);if(!i[0].children[0].disabled&&"none"!==i[0].children[0].style.display){var n=i.find("input:checked"),r=i.parent().find(".lbl_nome");n&&0!==n.length?r.tooltip("destroy"):(t+=e.formGetElementoById(_()(o).find("input:first").attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(r))}})),this.props.main.form_editor.find("select.selectpicker[required]").each((function(a,o){var i=_()(o);if(!i[0].disabled&&"none"!==i[0].style.display){var n=i.val(),r=i.closest(".div_campo").find(".lbl_nome");n&&0!==n.length?r.tooltip("destroy"):(t+=e.formGetElementoById(_()(o).attr("id_elemento")).nome+"<br />",e.alertaCampoObrigatorio(r))}})),""===t||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Campos Obrigat\xf3rios !'," Por gentileza, preencha os campos abaixo: <br /><br /> "+t),!1)}},{key:"alertaCampoObrigatorio",value:function(e,t){e.tooltip({title:"Campo obrigatorio",placement:"undefined"!=typeof t?t:"auto"}),e.tooltip("show")}},{key:"validarDataForm",value:function(){if(!this.props.main||!this.props.main.form_editor)return!0;var e=new Date,t=("0"+e.getDate()).slice(-2),a=("0"+(e.getMonth()+1)).slice(-2),o=e.getFullYear()+"-"+a+"-"+t,i="";return this.props.main.form_editor.find('[type="date"]').each((function(e,t){var a=_()(t);"undefined"==typeof(a.attr("disabled")||a.attr("readonly"))&&"none"!==_()(t).css("display")&&""!==t.value&&null!=t.value&&("S"===a.attr("data_retroativa")&&(window.get_datepicker(a)<o?(a.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),a.tooltip("show"),i+=this.formGetElementoById(_()(t).attr("id_elemento")).nome+"<br />"):a.tooltip("destroy")),"S"===a.attr("data_retroativa_igual")&&(window.get_datepicker(a)<=o?(a.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),a.tooltip("show"),i+=this.formGetElementoById(_()(t).attr("id_elemento")).nome+"<br />"):a.tooltip("destroy")))})),""===i||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Data Inv\xe1lida !'," Data informada fora do per\xedodo v\xe1lido, informe corretamente para os campos abaixo: <br /><br /> "+i),!1)}},{key:"validar",value:function(){return!!(!this.main.campos_personalizados||this.validarCamposObrigatorios()&&this.validarDataForm())}},{key:"formGetElementoById",value:function(e){var t={};return this.props.main&&this.props.main.campos_personalizados&&_()(this.props.main.campos_personalizados.grupos).each((function(a,o){Array.isArray(o.elementos)&&_()(o.elementos).each((function(a,o){o.id_elemento===e&&(t=o)}))})),t=window.spread({nome:""},t)}}]),a}(f.a.Component);h.defaultProps={}},686:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var o=a(422),i=a.n(o),n=a(425),r=a(408),s=a(389),c=function(e){return{hint:"Visualizar Atividade",icon:"fa fa-edit",onClick:function(t){e&&e(),r.a.load("atividade_projeto/detalhes",(function(e,a){a.show(t.row.data.projeto_id,t.row.data.id,window.FORMULARIO.EDITAR)}),r.a.ABA.MULTIPLAS,null,null,{projetoAtividadeId:t.row.data.id})}}},l=(c(),[{dataField:"projeto_codigo",dataType:"number",caption:"Projeto",width:100},{dataField:"projeto_nome",caption:"Projeto Nome",minWidth:100},{dataField:"codigo",caption:"C\xf3d. Ativ.",minWidth:100},{dataField:"atividade_simplificada",caption:"Atividade"},{dataField:"assunto",caption:"Assunto",minWidth:100},{dataField:"responsavel_nome",caption:"Respons\xe1vel",minWidth:100},{dataField:"prazo",caption:"Prazo",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.prazo)return e.prazo.format_date_time()}},{dataField:"conclusao",caption:"Conclus\xe3o",minWidth:100,dataType:"datetime",format:"dd/MM/yyyy HH:mm",calculateCellValue:function(e){if(e.conclusao)return e.conclusao.format_date_time()}},{dataField:"status",caption:"Status",minWidth:120,lookup:{dataSource:[{ID:"1",Status:"Programado"},{ID:"2",Status:"Andamento"},{ID:"3",Status:"Conclu\xeddo"},{ID:"4",Status:"N\xe3o iniciado"},{ID:"5",Status:"Atrasado"},{ID:"6",Status:"Cancelada"}],displayExpr:"Status",valueExpr:"ID"}}]),d=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("projeto/listar_movimentacao_financeira/",{projeto_atividade_id:t},null,null,null,null,null,null,null,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.a.get({route:"atividade_projeto/listar/",data:{projeto_id:e},func_response:function(e){e.atividades.push({atividade_simplificada:e.projeto.nome,id:"raiz",projeto_atividade_sintetica_pai_id:null,tipo_atividade:"P",marco:!1,horas_previstas:"000:00"}),t&&t(e)}})}},687:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d}));var o=a(380),i=a(422),n=a.n(i),r=a(425),s=a(398),c=(a(408),a(389)),l=function(){var e=Object(r.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get({route:"documento/listar/",data:{raiz:!t.documentoPastaID,documento_pasta_id:t.documentoPastaID,data_inicio:t.dataInicio,data_inicio_pasta:t.dataInicio,data_fim:t.dataFim,data_fim_pasta:t.dataFim,documento_nome:t.pesquisa,assunto_id:t.assuntoId,tipo_id:t.tipoDocumentoId,limite:t.limite,tipo_periodo:window.DOCUMENTO_FILTRO.PERIODO_TODOS,tipo_periodo_pasta:window.DOCUMENTO_FILTRO.PERIODO_TODOS,listar_bloqueados:t.exibirBloqueados,listar_expirados:t.exibirExpirados,listar_ativos:t.exibirAtivos,order_by_nome:t.orderByNome,order_by_asc:t.orderByAsc},awaitReturn:!0});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){return new s.default({pageSize:20,key:"documento_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){c.a.get({route:"/documento/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){c.a.get({route:"/documento/listar/",data:{dx_grid:!0,documento_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},688:function(e,t,a){"use strict";a.r(t),a.d(t,"oportunidadeSituacaoDataSource",(function(){return s})),a.d(t,"oportunidadeSituacao",(function(){return c})),a.d(t,"oportunidadeSituacoes",(function(){return l})),a.d(t,"oportunidadeColunaButtonVisualizar",(function(){return d})),a.d(t,"oportunidadeColunaButtons",(function(){return u})),a.d(t,"oportunidadeColunas",(function(){return p})),a.d(t,"listarParaSelecionar",(function(){return f}));var o=a(380),i=a(408),n=a(389),r=a(398),s=function(){return new r.default({store:l,key:"id"})},c=Object.freeze({ganho:"G",perdido:"P",aberto:"A",atrasado:"AT",estagnado:"E"}),l=[{id:c.ganho,descricao:"Ganho"},{id:c.perdido,descricao:"Perdido"},{id:c.aberto,descricao:"Aberto"},{id:c.atrasado,descricao:"Atrasado"},{id:c.estagnado,descricao:"Estagnado"}],d=function(e){return{hint:"Visualizar Oportunidade",icon:"fa fa-pencil-alt",onClick:function(t){e&&e(),i.a.load("oportunidade/detalhes",(function(e,a){a.show(t.row.data.oportunidade_id,window.FORMULARIO.EDITAR)}),i.a.ABA.MULTIPLAS,null,null,{oportunidadeId:t.row.data.oportunidade_id})}}},u={type:"buttons",buttons:[d()]},p=[{dataField:"id",caption:"#",dataType:"number",alignment:"right",width:80},{dataField:"funil_vendas_etapa_nome",caption:"Etapa do Funil",dataType:"string"},{dataField:"nome",caption:"Nome",dataType:"string"},{dataField:"data_abertura",caption:"Data de inclus\xe3o",dataType:"datetime"},{caption:"Tipo de Entidade",dataType:"string",calculateCellValue:function(e){var t="";switch(e.entidade_tipo){case"C":t="Cliente";break;case"O":t="Organiza\xe7\xe3o"}return t}},{dataField:"entidade_nome",caption:"Entidade",dataType:"string"},{dataField:"representante_nome",caption:"Representante",dataType:"string"},{dataField:"status",caption:"Status",dataType:"string"},{caption:"Valor do Neg\xf3cio R$",dataType:"string",calculateCellValue:function(e){}},{dataField:"situacao",caption:"Situa\xe7\xe3o da Oportunidade",dataType:"string",calculateCellValue:function(e){var t="";switch(e.situacao){case"G":t="Ganho";break;case"P":t="Perdido";break;case"A":t="Aberto";break;case"AT":t="Atrasado";break;case"E":t="Estagnado"}return t}},{dataField:"situacao_ultimo_orcamento",caption:"Situa\xe7\xe3o do Or\xe7amento",dataType:"string",calculateCellValue:function(e){var t="";if(e.situacao_ultimo_orcamento)switch(e.situacao_ultimo_orcamento){case"0":t="Or\xe7amento Aguardando Aprova\xe7\xe3o";break;case"1":t="Or\xe7amento Aprovado";break;case"2":t="Or\xe7amento Reprovado";break;case"4":t="Or\xe7amento Aprovado / Aguardando E-Mail";break;default:t="Or\xe7amento Em An\xe1lise"}return t}}],f=function(){return new r.default({pageSize:20,key:"oportunidade_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){n.a.get({route:"/oportunidade/listar_selecao/",data:Object(o.a)({},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){n.a.get({route:"/oportunidade/listar_selecao/",data:{oportunidade_id:e},func_response:function(e){t({data:e.data})},func_fail:function(e){a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},689:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var o=a(372),i=a(391),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(401),m=a(622),_=a(690),h=a(857),v=a(388),b=a(449),j=a(105),O=a(408);var g=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;if(Object(n.a)(this,a),(o=t.call(this,e)).getKey=o.getKey.bind(Object(s.a)(o)),o.handleBtnEditarClick=o.handleBtnEditarClick.bind(Object(s.a)(o)),o.solicitacao_id=null,o.solicitacao_numero=null,o.processo_nome=null,o.modo_teste=!1,o.modo_teste_responsavel_id=0,o.modo_teste_responsavel_nome="",o.keyCount=0,e.data){var i=e.data;o.solicitacao_id=i.solicitacao_id||i.id||null,o.solicitacao_numero=i.numero,o.processo_nome=i.processo_nome}var r=j.a.get_parametro_usuario("solicitacoesProcesso");return r.obj_param&&(o.modo_teste=r.obj_param.modo_teste,o.modo_teste_responsavel_id=r.obj_param.modo_teste_responsavel_id,o.modo_teste_responsavel_nome=r.obj_param.modo_teste_responsavel_nome),o.state={dataSource:Object(_.a)(window.SOLICITACAO_FILTROS.TODAS,o.solicitacao_id,o.modo_teste,o.modo_teste_responsavel_id)},o}return Object(r.a)(a,[{key:"getKey",value:function(){return this.keyCount++}},{key:"render",value:function(){var e=this,t=function(t){return e.handleBtnEditarClick(t,window.FORMULARIO.EDITAR,e.modo_teste_responsavel_nome,e.modo_teste)},a=[].concat(Object(i.a)(Object(h.b)(this.solicitacao_id)),[Object(o.jsxs)(v.Column,{type:"buttons",children:[Object(o.jsx)(b.a,{hint:"Visualizar Atividade",visible:function(e){return![m.b.andamento,m.b.atrasada].includes(+e.row.data.solicitacao_situacao)||![window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao)},icon:"fas fa-list-alt",onClick:t}),",",Object(o.jsx)(b.a,{hint:"Atividade Pendente",visible:function(e){return[m.b.andamento,m.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO].includes(+e.row.data.situacao)},onClick:t,children:Object(o.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(o.jsx)("span",{className:"far fa-list-alt"}),Object(o.jsx)("span",{className:"fas fa-circle icon-on-top text-info",style:{opacity:"75%"}})]})}),",",Object(o.jsx)(b.a,{hint:"Atividade Atrasada",visible:function(e){return[m.b.andamento,m.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao)},onClick:t,children:Object(o.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(o.jsx)("span",{className:"far fa-list-alt"}),Object(o.jsx)("span",{className:"fas fa-circle icon-on-top text-danger",style:{opacity:"75%"}})]})}),","]},"buttons_".concat(this.solicitacao_id))]),n="S"===j.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?this.solicitacao_numero:this.solicitacao_id;return Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("div",{style:{padding:"0 0 5px 10px",fontSize:14,fontWeight:"bold"},children:"Atividades da Solicita\xe7\xe3o #".concat(n,": ").concat(this.processo_nome)}),Object(o.jsx)(f.default,{dataSource:this.state.dataSource,style:{width:"100%",border:"2px solid #D0D0D0"},selection:{mode:"none"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},filterPanel:{visible:!1},columnChooser:{enabled:!1},export:{enabled:!1},groupPanel:{visible:!1},searchPanel:{visible:!1},rowAlternationEnabled:!1,showBorders:!0,children:a},this.getKey())]})}},{key:"handleBtnEditarClick",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t==window.FORMULARIO.EDITAR?{solicitacaoAtividadeId:e.row.data.solicitacao_atividade_id}:{solicitacaoId:e.row.data.solicitacao_id};O.a.load("solicitacao/detalhes",(function(i,n){n.onclose=e.component.refresh,n.show(e.row.data.solicitacao_atividade_id,t,a,o)}),O.a.ABA.MULTIPLAS,null,null,i)}}]),a}(p.a.Component)},690:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l}));var o=a(380),i=a(398),n=a(389),r=a(573),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return new i.default({pageSize:20,key:"solicitacao_atividade_id",load:function(i){var p=window.loadOptionsToActionParams(i);return new Promise((function(i,f){n.a.post({route:"solicitacao/listar_todas/",data:Object(o.a)({dx_grid:!0,tipo_listagem:e,solicitacao_id:t,codigo:a,modo_teste:r,modo_teste_responsavel_id:s,solicitante_id:c,responsavel_id:l,cliente_id:d,processo_id:u,tela_listagem:window.TIPO_LISTAGEM_PROCESSO.ATIVIDADES},p),func_response:function(e){var t=window.createLoadExtra(e);i(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&f(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new i.default({pageSize:20,key:"solicitacao_id",load:function(i){var l=window.loadOptionsToActionParams(i);return new Promise((function(i,d){n.a.post({route:"solicitacao/listar_todas/",data:Object(o.a)({dx_grid:!0,agrupar_atividades:!0,modo_teste:t,modo_teste_responsavel_id:a,tipo_listagem:e,solicitacao_id:r,codigo:s,processo_id:c,tela_listagem:window.TIPO_LISTAGEM_PROCESSO.SOLICITACAO},l),func_response:function(e){var t=window.createLoadExtra(e);i(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&d(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},l=function(){return Object(r.createStore)({key:"id",loadUrl:window.WS_URI+"usuario/listar_usuarios_grupos/",onBeforeSend:function(e,t){t.data.dx_grid=!0,t.data.limite=null,t.xhrFields={withCredentials:!1},t.headers=n.a.dxHeaders()}})}},694:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"simbolo",width:150}},695:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var o=a(372),i=a(365),n=a(366),r=a(385),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d),p=a(551),f=a.n(p);var m=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o,n,s,c,l;return Object(i.a)(this,a),(l=t.call(this,e)).state={selecionado:e.selecionado?[e.selecionado]:null,placeholder:null!==(o=e.placeholder)&&void 0!==o?o:"",readOnly:null!==(n=e.readOnly)&&void 0!==n&&n,displayExpr:null!==(s=e.displayExpr)&&void 0!==s?s:null,valueExpr:null!==(c=e.valueExpr)&&void 0!==c?c:null},l.tagBoxRef=u.a.createRef(),l.onValueChanged=l.onValueChanged.bind(Object(r.a)(l)),l}return Object(n.a)(a,[{key:"render",value:function(){var e,t,a,i,n,r,s,c;return Object(o.jsx)(f.a,{elementAttr:this.state.elementAttr,showSelectionControls:!0,applyValueMode:"useButtons",ref:this.tagBoxRef,dataSource:null!==(e=this.props.dataSource)&&void 0!==e?e:null!==(t=this.state.dataSource)&&void 0!==t?t:null,items:null!==(a=this.props.items)&&void 0!==a?a:null,displayExpr:this.state.displayExpr,valueExpr:this.state.valueExpr,value:this.state.selecionado,placeholder:this.props.placeholder,readOnly:this.state.readOnly,onValueChanged:this.onValueChanged,deferRendering:!1,maxDisplayedTags:null!==(i=this.props.maxDisplayedTags)&&void 0!==i?i:void 0,searchEnabled:null!==(n=this.props.searchEnabled)&&void 0!==n&&n,noDataText:null!==(r=this.props.noDataText)&&void 0!==r?r:"Sem dados",label:null!==(s=this.props.label)&&void 0!==s?s:null,labelMode:null!==(c=this.props.labelMode)&&void 0!==c?c:null})}},{key:"onValueChanged",value:function(e){var t=this;if(e.previousValue===e.value)return!1;this.setState({selecionado:e.value},(function(){if(t.props.aoAlterar){var e,a=null!==(e=t.state.selecionado)&&void 0!==e?e:null;t.props.aoAlterar(a)}}))}},{key:"tagBox",get:function(){return this.tagBoxRef.current?this.tagBoxRef.current.instance:null}}]),a}(u.a.Component);m.defaultProps={dataSource:null,items:null,placeholder:"Pesquisar",displayExpr:null,readOnly:!1,aoAlterar:null}},696:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return u}));var o=a(380),i=a(389),n=a(398),r=a(573),s=a(452),c=function(e){var t=e.pai_tabela,a=e.pai_id;e.dx_grid;return Object(r.createStore)({key:"id",loadUrl:"".concat(window.WS_URI,"/etiqueta/listar/").concat(t,"/").concat(a,"/"),insertUrl:"".concat(window.WS_URI,"/etiqueta/salvar/").concat(t,"/").concat(a,"/"),updateUrl:"".concat(window.WS_URI,"/etiqueta/salvar/").concat(t,"/").concat(a,"/"),deleteUrl:"".concat(window.WS_URI,"/etiqueta/salvar/").concat(t,"/").concat(a,"/"),onBeforeSend:function(e,t){t.xhrFields={withCredentials:window.XHR_WITH_CREDENTIALS},t.headers=i.a.dxHeaders()}})},l=function(e){var t=e.pai_tabela,a=e.pai_id,o=e.alteracoes,n=e.func_response,r=e.func_fail;if(!t)return!1;i.a.post({route:"etiqueta/salvar/".concat(t,"/").concat(a,"/"),data:{pai_tabela:t,pai_id:a,alteracoes:o},func_response:n,func_fail:r})},d=function(e){var t=e.pai_tabela,a=e.pai_id,r=e.dx_grid,s=void 0===r||r;return new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:["id"],load:function(e){var n=window.loadOptionsToActionParams(e);return new Promise((function(r,c){i.a.get({route:"etiqueta/listar_para_selecao/",data:Object(o.a)({pai_tabela:t,pai_id:a,search_value:e.searchValue},n),func_response:function(e){var t=window.createLoadExtra(e);r(s?Object(o.a)(Object(o.a)({},t),{},{data:e.data}):e.data)},func_fail:function(e){e.validation&&c(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return null}})},u=function(){return new s.default({key:"id",data:window.USUARIO_TIPO_LOOKUP.filter((function(e){return[window.USUARIO_TIPO.COLABORADOR,window.USUARIO_TIPO.CLIENTE,window.USUARIO_TIPO.FORNECEDOR].includes(e.id)})).map((function(e){var t=window.clone_obj(e);return t.id=t.id.toString(),t}))})}},838:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"hora",caption:"Hora",dataType:"datetime",format:"HH:mm",width:100}},839:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var o=a(372),i=a(380),n=a(419),r=a(840);function s(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.b)(e.chamadoId,e.grupoMotivoId,e.motivoVinculadoId,e.apenasMotivosSLA)})))}s.defaultProps={chamadoId:null,grupoMotivoId:null,motivoVinculadoId:null,apenasMotivosSLA:!1,displayExpr:function(e){return e&&e.nome},columns:r.a,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"}},840:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var o=a(380),i=a(389),n=a(398),r=[{dataField:"nome",caption:"Motivo",sortIndex:0,sortOrder:"asc"}],s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"chamado_motivo_id",load:function(n){var s=window.loadOptionsToActionParams(n);return new Promise((function(n,c){i.a.get({route:"chamado_motivo/listar/",data:Object(o.a)({dx_grid:!0,chamado_id:e,grupo_motivo_id:t,desconsidera_bloqueado:!0,motivo_vinculado_id:a,apenas_motivos_sla:r},s),func_response:function(e){var t=window.createLoadExtra(e);n(Object(o.a)(Object(o.a)({},t),{},{data:e.data}))},func_fail:function(e){e.validation&&c(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado_motivo/listar/",data:{dx_grid:!0,chamado_motivo_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},841:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var o=a(372),i=a(380),n=a(419),r=a(618),s=a(401),c=a(913);function l(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.a)()})))}l.defaultProps={placeholder:"Pesquisar por nome/cnpj",aoAlterar:null,stateStoring:Object(s.stateStoring)("DataGridSelecaoEntidade",null,!0),displayExpr:function(e){return e&&(""===e.nome_fantasia||null===e.nome_fantasia?e.razao_social.trim():e.nome_fantasia.trim())},children:c.a,parametroFullScreen:"fullScreenSelecaoEntidade",dataGridSearchPanelEnabled:!0,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome_fantasia"}},842:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388);var l=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);l.defaultProps={dataField:"email",caption:"E-mail",width:150,cellRender:function(e){for(var t=window.string_to_array(e.text),a=0;a<t.length;a++){var i="mailto:"+t[a].toLowerCase(),n=t[a].toLowerCase();return Object(o.jsxs)("span",{"data-placement":"bottom",children:[Object(o.jsx)("a",{target:"_blank",href:i,children:n}),"; "]})}}}},843:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388);var l=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);l.defaultProps={dataField:"telefone",caption:"Telefone",width:120,cellRender:function(e){var t="tel:"+e.text;return Object(o.jsxs)("span",{"data-placement":"bottom",children:[Object(o.jsx)("a",{target:"_blank",href:t,children:e.text})," "]})}}},844:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"cnpj",caption:"CNPJ",width:150}},845:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var o=a(380),i=a(389),n=a(398),r=function(){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"classificacao_chamado_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){i.a.get({route:"chamado_classificacao/listar_para_selecao/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"chamado_classificacao/listar_para_selecao/",data:{dx_grid:!0,classificacao_chamado_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:function(e){},update:function(e,t){},remove:function(e){}})},s=function(e,t){i.a.post("chamado_classificacao/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(a){window.alert_tooltip("Salvo com sucesso!","success",500),t&&t(e)}))}},846:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var o=a(372),i=a(413),n=[Object(o.jsx)(i.a,{width:"100%",caption:"Classifica\xe7\xe3o"},"classificacao")]},847:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var o=a(372),i=a(380),n=a(365),r=a(366),s=a(368),c=a(369),l=a(367),d=a(376);var u=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.autoUpdate&&(this.timer=setInterval((function(){e.atualiza_dados_sla()}),3e4))}},{key:"componentWillUnmount",value:function(){this.destruirTimer&&this.destruirTimer()}},{key:"propsToObjState",value:function(){var e,t,a,o,n,r=null!==(e=this.props.detalhes)&&void 0!==e?e:null,s=r?r.id:null,c=r?r.sla_excedido:null,l=r?r.tempo_sem_resposta:null,d=r?r.percentual_tempo_sem_resposta:null,u=r?r.cor_percentual_sla:null,p=r?r.tempo_restante_resolucao:null;return Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({detalhes:null!==(t=this.props.detalhes)&&void 0!==t?t:null,chamado_id:s,sla_excedido:c,sla_percentual_tempo_sem_resposta:d,sla_cor_percentual:u,sla_tempo_restante_resolucao:p,sla_tempo_sem_resposta:l},this.state_label_sla(c)),this.state_tempo_aguardando_resolucao(l,d)),this.state_tempo_restante_resolucao(p)),{},{styleWidth:null!==(a=this.props.styleWidth)&&void 0!==a?a:null,alinhamento:null!==(o=this.props.alinhamento)&&void 0!==o?o:null,autoUpdate:null!==(n=this.props.autoUpdate)&&void 0!==n?n:null})}},{key:"componentDidUpdate",value:function(e,t){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState()),this.state.autoUpdate||this.destruirTimer()}},{key:"destruirTimer",value:function(){this.timer&&clearInterval(this.timer)}},{key:"atualiza_dados_sla",value:function(){var e=this;if(!this.state.detalhes)return null;window.chamado_fila_sla(this.state.chamado_id,this.props.viewHtmlId,(function(t){t&&e.setState(Object(i.a)(Object(i.a)(Object(i.a)({sla_excedido:t.sla_excedido,sla_percentual_tempo_sem_resposta:t.percentual_tempo_sem_resposta,sla_cor_percentual:t.cor_percentual_sla,sla_tempo_restante_resolucao:t.tempo_restante_resolucao,sla_tempo_sem_resposta:t.tempo_sem_resposta},e.state_label_sla(t.sla_excedido)),e.state_tempo_aguardando_resolucao(t.tempo_sem_resposta,t.percentual_tempo_sem_resposta)),e.state_tempo_restante_resolucao(t.tempo_restante_resolucao)))}))}},{key:"state_label_sla",value:function(e){var t=window.str_sla(e);return{sla_class:t.classe,sla_text:t.texto}}},{key:"state_tempo_aguardando_resolucao",value:function(e,t){var a={};return a={txt_tempo_aguardando_resolucao:window.format_time(e)},parseInt(t,10)>100&&(a=Object(i.a)(Object(i.a)({},a),{},{class_tempo_aguardando_resolucao:"text-danger",class_bar_progress_aguardando:"progress-bar-danger"})),a}},{key:"state_tempo_restante_resolucao",value:function(e){return{txt_tempo_restante_resolucao:window.format_time(e)}}},{key:"render",value:function(){if("S"!==this.state.detalhes.utiliza_resolucao_atendimento)return null;var e={fontWeight:"bold",paddingLeft:"0px",paddingRight:"0px"};"left"===this.state.alinhamento&&(e.paddingRight="10px"),"right"===this.state.alinhamento&&(e.paddingLeft="10px");var t=parseInt(this.state.sla_percentual_tempo_sem_resposta,10)<100?Object(o.jsx)("span",{style:e,"data-toggle":"tooltip",title:"Tempo Restante",children:window.format_time(this.state.sla_tempo_restante_resolucao)}):null,a=null;return"right"===this.state.alinhamento&&(a="row-reverse"),Object(o.jsxs)("div",{style:{width:this.state.styleWidth},children:[Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"right"===this.state.alinhamento?"text-right":"text-left",style:{whiteSpace:"nowrap"},children:Object(o.jsx)("span",{className:this.state.sla_class,children:this.state.sla_text})})}),Object(o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexFlow:a},children:[t,Object(o.jsx)("div",{className:"text-left",children:Object(o.jsx)("span",{style:{marginRight:5},className:this.state.class_tempo_aguardando_resolucao,"data-toggle":"tooltip",title:"Tempo em andamento",children:this.state.txt_tempo_aguardando_resolucao})})]}),Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"progress",style:{marginBottom:0,height:12},children:Object(o.jsx)("div",{className:["progress-bar",this.state.class_bar_progress_aguardando].join(" "),style:{width:parseInt(this.state.sla_percentual_tempo_sem_resposta,10)<100?parseInt(this.state.sla_percentual_tempo_sem_resposta,10)+"%":"100%",backgroundColor:this.state.sla_cor_percentual,fontSize:"xx-small"},children:Object(o.jsx)("div",{style:{marginTop:-3,backgroundColor:this.state.sla_cor_percentual},children:Math.round(this.state.sla_percentual_tempo_sem_resposta)<100?Math.round(this.state.sla_percentual_tempo_sem_resposta)+"%":"100%"})})})})]})}}]),a}(a.n(d).a.Component);u.defaultProps={autoUpdate:!1,styleWidth:"120px",alinhamento:"left"}},848:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var o=a(372),i=a(380),n=a(365),r=a(366),s=a(368),c=a(369),l=a(367),d=a(376),u=a.n(d);var p=function(e){Object(s.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(l.a)(e);if(t()){var i=Object(l.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(c.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState(e.processarDados(e.state.DataPrazo,e.state.CalendarioTrabalhoId,e.state.TipoGestaoTempo,e.state.HorasEstimadas,e.state.DiasEstimados))}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"propsToObjState",value:function(){var e,t,a,o,n,r,s,c,l,d,u,p,f,m,_,h,v=null!==(e=this.props.TipoGestaoTempo)&&void 0!==e?e:null,b=null!==(t=this.props.HorasEstimadas)&&void 0!==t?t:null,j=null!==(a=this.props.DataPrazo)&&void 0!==a?a:null,O=null!==(o=this.props.CalendarioTrabalhoId)&&void 0!==o?o:null,g=null!==(n=this.props.DiasEstimados)&&void 0!==n?n:null;return Object(i.a)({TipoGestaoTempo:v,HorasEstimadas:b,DiasEstimados:g,DataPrazo:j,CalendarioTrabalhoId:O,Concluido:null!==(r=this.props.Concluido)&&void 0!==r?r:null,TituloDataPrazo:null!==(s=this.props.TituloDataPrazo)&&void 0!==s?s:null,LabelExcedente:null!==(c=this.props.LabelExcedente)&&void 0!==c?c:null,LabelRestante:null!==(l=this.props.LabelRestante)&&void 0!==l?l:null,ExibirDataPrazo:null!==(d=this.props.ExibirDataPrazo)&&void 0!==d?d:null,TituloDataPrazoClassName:null!==(u=this.props.TituloDataPrazoClassName)&&void 0!==u?u:null,ExibirTituloDataPrazo:null!==(p=this.props.ExibirTituloDataPrazo)&&void 0!==p?p:null,ExibirBarraProgresso:null!==(f=this.props.ExibirBarraProgresso)&&void 0!==f?f:null,ExibirDiferencaHorasUteis:null!==(m=this.props.ExibirDiferencaHorasUteis)&&void 0!==m?m:null,Alinhamento:null!==(_=this.props.Alinhamento)&&void 0!==_?_:null,StyleWidth:null!==(h=this.props.StyleWidth)&&void 0!==h?h:null},this.processarDados(j,O,v,b,g))}},{key:"componentDidUpdate",value:function(e,t){e.TipoGestaoTempo===this.props.TipoGestaoTempo&&e.HorasEstimadas===this.props.HorasEstimadas&&e.DataPrazo===this.props.DataPrazo&&e.CalendarioTrabalhoId===this.props.CalendarioTrabalhoId&&e.ExibirTituloDataPrazo===this.props.ExibirTituloDataPrazo&&e.TituloDataPrazo===this.props.TituloDataPrazo||this.setState(this.propsToObjState())}},{key:"processarDados",value:function(e,t,a,o,i){if(!e)return null;var n=new Date,r=n.now(),s={DiferencaHorasUteis:"00:00",DiferencaDias:0,DiferencaHorasUteisSegundos:0,PrazoEstourado:!1,Percentual:0,DataPrazoSemHora:0};r>e&&(s.PrazoEstourado=!0);var c=0;s.PrazoEstourado?c=window.fn_segundos_uteis(t,e,r):e.substring(0,4)-r.substring(0,4)>20?(c=0,s.ExibirBarraProgresso=!1,s.ExibirDiferencaHorasUteis=!1):c=window.fn_segundos_uteis(t,r,e);if(s.DiferencaHorasUteis=window.fn_converter_segundos_para_horas(c),s.DataPrazoSemHora=window.date_create(e),s.DataPrazoSemHora.setMilliseconds(0),s.DataPrazoSemHora.setSeconds(0),s.DataPrazoSemHora.setMinutes(0),s.DataPrazoSemHora.setHours(0),n.setMilliseconds(0),n.setSeconds(0),n.setMinutes(0),n.setHours(0),s.DiferencaDias=window.date_diff(s.DataPrazoSemHora,n.getTime()),s.PrazoEstourado)s.Percentual=100;else if(+a===window.GESTAO_TEMPO.HORAS_UTEIS&&o&&"00:00:00"!==o){var l=window.fn_converter_horas_para_segundos(o);s.Percentual=(l-c)/l*100}else+a===window.GESTAO_TEMPO.DIAS_CORRIDOS&&e&&i&&(s.Percentual=(+i-s.DiferencaDias)/+i*100);return s.Percentual>100&&(s.Percentual=100),s.Percentual<0&&(s.Percentual=0),s}},{key:"renderTitulo",value:function(){if(this.state.ExibirTituloDataPrazo){var e=this.state.TituloDataPrazoClassName+("right"===this.state.Alinhamento?" text-right":"");return Object(o.jsx)("div",{style:{whiteSpace:"nowrap"},className:e,children:this.state.TituloDataPrazo})}return null}},{key:"renderDataPrazo",value:function(){var e=null;return+this.state.TipoGestaoTempo===window.GESTAO_TEMPO.DIAS_CORRIDOS?e=Object(o.jsx)("div",{style:{whiteSpace:"nowrap"},className:"right"===this.state.Alinhamento?"text-right":"",title:this.state.TituloDataPrazo,children:this.state.DataPrazo?this.state.DataPrazo.format_date():""}):+this.state.TipoGestaoTempo===window.GESTAO_TEMPO.HORAS_UTEIS&&(e=Object(o.jsx)("div",{style:{whiteSpace:"nowrap"},className:"right"===this.state.Alinhamento?"text-right":"",title:this.state.TituloDataPrazo,children:this.state.DataPrazo?this.state.DataPrazo.format_date_time():""})),Object(o.jsx)("div",{children:e})}},{key:"renderDiferencaHorasUteis",value:function(){var e=null,t=this.state.PrazoEstourado||0===this.state.DiferencaDias?"text-danger":"text-default",a={font:"inherit",width:"100%",whiteSpace:"nowrap"},i={fontWeight:"bold",paddingLeft:"0px",paddingRight:"0px"};switch("left"===this.state.Alinhamento&&(i.paddingRight="10px"),"right"===this.state.Alinhamento&&(i.paddingLeft="10px"),+this.state.TipoGestaoTempo){case window.GESTAO_TEMPO.DIAS_CORRIDOS:e=Object(o.jsx)("div",{style:a,className:"text "+t,title:this.state.TituloDataPrazo,children:window.dia_contador_str(this.state.DiferencaDias,this.state.PrazoEstourado)});break;case window.GESTAO_TEMPO.HORAS_UTEIS:e=Object(o.jsx)("div",{style:a,className:"text "+t,title:this.state.PrazoEstourado?this.state.LabelExcedente:this.state.LabelRestante,children:window.format_time(this.state.DiferencaHorasUteis)})}return Object(o.jsx)("div",{style:i,children:e})}},{key:"renderBarraProgresso",value:function(){if(+this.state.TipoGestaoTempo===window.GESTAO_TEMPO.DIAS_CORRIDOS&&this.state.DataPrazo&&!this.state.DiasEstimados)return null;var e=this.state.PrazoEstourado?"progress-bar-danger":"progress-bar-default";return Object(o.jsx)("div",{className:"progress div_progress",style:{marginBottom:"0px",height:"12px"},children:Object(o.jsx)("div",{className:"progress-bar "+e,style:{width:this.state.Percentual+"%"},children:Object(o.jsx)("div",{style:{marginTop:-3,backgroundColor:"transparent",fontSize:"xx-small"},children:Math.round(this.state.Percentual)+"%"})})})}},{key:"render",value:function(){if(this.state.Concluido)return Object(o.jsx)(u.a.Fragment,{children:Object(o.jsx)("span",{children:"-"})});var e=null;this.state.ExibirDataPrazo&&(e=this.renderDataPrazo());var t=null;this.state.ExibirDiferencaHorasUteis&&(t=this.renderDiferencaHorasUteis());var a=null;this.state.ExibirBarraProgresso&&(a=this.renderBarraProgresso());var i=null,n=null;return"right"===this.state.Alinhamento&&(i="row-reverse",n="end"),Object(o.jsxs)("div",{style:{width:this.state.StyleWidth},children:[this.renderTitulo(),Object(o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",flexFlow:i,justifyContent:n},children:[t,e]}),Object(o.jsx)("div",{style:{},children:a})]})}}]),a}(u.a.Component);p.defaultProps={TipoGestaoTempo:window.GESTAO_TEMPO.HORAS_UTEIS,HorasEstimadas:null,DiasEstimados:null,DataPrazo:"",CalendarioTrabalhoId:null,Alinhamento:"left",StyleWidth:"160px",LabelExcedente:"Atrasado",LabelRestante:"Tempo Restante",TituloDataPrazo:"Prazo",ExibirTituloDataPrazo:!1,TituloDataPrazoClassName:"text-muted",ExibirDataPrazo:!0,ExibirBarraProgresso:!0,ExibirDiferencaHorasUteis:!0,IntervalId:0,Concluido:!1}},849:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var o=a(372);a(376);function i(e){return Object(o.jsx)("div",{style:{fontWeight:"bold"},children:e.nome})}},850:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var o=a(380),i=a(389),n=a(398),r=function(e){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"nota_avaliacao_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"nota_avaliacao/listar_para_selecao/",data:Object(o.a)({dx_grid:!0,chamado_id:e},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"nota_avaliacao/listar_para_selecao/",data:{dx_grid:!0,nota_avaliacao_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:function(e){},update:function(e,t){},remove:function(e){}})},s=function(e,t){i.a.post("nota_avaliacao/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(a){window.alert_tooltip("Salvo com sucesso!","success",500),t&&t(e)}))}},852:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var o=a(372),i=a(380),n=a(419),r=a(853);function s(e){var t;return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(r.c)(),columns:null!==(t=e.columns)&&void 0!==t?t:Object(r.b)()})))}s.defaultProps={placeholder:"Pesquisar Projeto",displayExpr:function(e){return e&&e.codigo+" "+e.nome},visible:!0,key:window.random_hash()}},853:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return m}));var o=a(422),i=a.n(o),n=a(425),r=a(380),s=a(389),c=(a(408),a(398)),l=[{id:"1",descricao:"Programado"},{id:"2",descricao:"Andamento"},{id:"3",descricao:"Conclu\xeddo"},{id:"4",descricao:"N\xe3o iniciado"},{id:"5",descricao:"Atrasado"}],d=function(){return[{dataField:"codigo",width:"100px"},{dataField:"nome",caption:"Nome do projeto",width:"100px"},{dataField:"categoria",caption:"Categoria",groupIndex:0},{dataField:"status_nome",caption:"Status",width:"100px"},{dataField:"status_atividades",dataType:"number",format:"fixedPoint",precision:0,lookup:{dataSource:l,displayExpr:"descricao",valueExpr:"id"},width:"100px"},{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",width:"100px"},{dataField:"inicio",caption:"\xcdnicio Previsto",dataType:"date",format:"dd/MM/yyyy",width:"100px"},{dataField:"fim",caption:"T\xe9rmino Previsto",dataType:"date",format:"dd/MM/yyyy",width:"100px"},{dataField:"horas_previstas",calculateSortValue:function(e){return e.horas_previstas?window.fn_converter_horas_para_segundos(e.horas_previstas):null},allowFiltering:!1,width:"80px"},{dataField:"horas_trabalhadas",calculateSortValue:function(e){return e.horas_trabalhadas?window.fn_converter_horas_para_segundos(e.horas_trabalhadas):null},allowFiltering:!1,width:"80px"},{dataField:"saldo_horas",calculateSortValue:function(e){return e.saldo_horas?window.fn_converter_horas_para_segundos(e.saldo_horas):null},allowFiltering:!1,width:"80px"},{dataField:"percentual_horas_trabalhadas",caption:"% Trabalhado",dataType:"number",calculateSortValue:function(e){return e.percentual_horas_trabalhadas?parseInt(e.percentual_horas_trabalhadas):null},calculateDisplayValue:function(e){return e.percentual_horas_trabalhadas?e.percentual_horas_trabalhadas+" %":null},allowFiltering:!1,width:"80px"},{dataField:"percentual_saldo_horas",caption:"% Saldo",dataType:"number",calculateSortValue:function(e){return e.percentual_saldo_horas?parseInt(e.percentual_saldo_horas):null},calculateDisplayValue:function(e){return e.percentual_saldo_horas?e.percentual_saldo_horas+" %":null},allowFiltering:!1,width:"80px"},{dataField:"porcentagem_concluido",caption:"% Conclus\xe3o",dataType:"number",calculateSortValue:function(e){return e.porcentagem_concluido?parseInt(e.porcentagem_concluido):null},calculateDisplayValue:function(e){return e.porcentagem_concluido?e.porcentagem_concluido+" %":null},allowFiltering:!1,width:"80px"},{dataField:"percentual_estimado",caption:"% Estimado",dataType:"number",calculateSortValue:function(e){return e.percentual_estimado?parseInt(e.percentual_estimado):null},calculateDisplayValue:function(e){return e.percentual_estimado?e.percentual_estimado+" %":null},allowFiltering:!1,width:"80px"},{dataField:"cliente_nome",caption:"Cliente",width:"100px"},{dataField:"tipo_nome",caption:"Tipo Projeto",width:"80px"}]},u=function(e){return new c.default({paginate:!0,pageSize:20,key:"projeto_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,o){s.a.get({route:"projeto/listar/",data:Object(r.a)({template:"N",projeto_id:e,retorno_obj:!1,dx_grid:!0},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(r.a)(Object(r.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){s.a.get({route:"projeto/listar/",data:{template:"N",projeto_id:e,retorno_obj:!1,dx_grid:!0},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},p=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("projeto/listar_movimentacao_financeira/",{projeto_id:t},null,null,null,null,null,null,null,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){return new c.default({paginate:!0,pageSize:20,key:"id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){s.a.get({route:"projeto/listar_movimentacao_financeira/",data:Object(r.a)({},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(r.a)(Object(r.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!1}})},m=[{id:"1",descricao:"Entrada Manual"},{id:"2",descricao:"Sa\xedda Manual"},{id:"3",descricao:"Horas Alocadas"},{id:"4",descricao:"Apontamento de Horas"},{id:"5",descricao:"Apontamento de Despesas"}]},854:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388),l=a(618);var d=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);d.defaultProps={dataField:"tipo",dataType:"string",caption:"Tipo",width:80,children:Object(o.jsx)(c.Lookup,{dataSource:l.b,displayExpr:"descricao",valueExpr:"id"})}},855:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388),l=a(621);var d=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);d.defaultProps={cellRender:function(e){var t,a,i,n;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.entidade_id)?Object(o.jsx)(l.default,{tipo:null!==(n=e.data.entidade_tipo)&&void 0!==n?n:e.data.tipo,id:e.data.entidade_id,nome:e.data.entidade_nome,logoId:e.data.entidade_logo_id,tamanho:20}):null!==(a=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.entidade_nome)&&void 0!==a?a:""},dataType:"string",width:"160px"}},856:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return p}));var o=a(380),i=a(422),n=a.n(i),r=a(425),s=a(389),c=a(398),l=a(105),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return new c.default({load:function(){var o=Object(r.a)(n.a.mark((function o(i){var r,c,d,u,p,f,m;return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=i.filter[0][0][0][2],c=i.filter[0][0][1][2],d=window.formatDate(i.filter[0][0][0][2],!0),r.getMonth()!=c.getMonth()&&i.filter[0][0][1][2].setDate(i.filter[0][0][1][2].getDate()-1),u=window.formatDate(i.filter[0][0][1][2],!0),l.a.temp.agenda_data_inicio==d||l.a.temp.agenda_data_fim==u){o.next=14;break}return l.a.temp.agenda_data_inicio=d,l.a.temp.agenda_data_fim=u,a.schedulerRef.current._instance._dataSource.reload(),p=new Date,r.getMonth()!=p.getMonth()?a.schedulerRef.current._instance.scrollTo(r):a.schedulerRef.current._instance.scrollTo(p),o.abrupt("return",[]);case 14:return l.a.temp.agenda_data_inicio=d,l.a.temp.agenda_data_fim=u,o.next=18,s.a.post("agenda_evento/agenda_calendario/",{devextreme:!0,data_inicio:d,data_fim:u,tipo_agenda:2,qtd_dias:window.dateDiff(u,d,!0),usuarios_id:JSON.stringify(e),ativos_id:JSON.stringify(t)},null,null,null,null,null,null,null,null,!0);case 18:for(f=o.sent,m=0;m<f.data.length;m++)f.data[m].startDate=new Date(f.data[m].startDate),f.data[m].endDate=new Date(f.data[m].endDate);return o.abrupt("return",f);case 21:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()})},u=function(){var e=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get("tipo_agenda/listar/",null,null,null,null,null,null,null,null,!0);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){return new c.default({pageSize:20,key:"agenda_evento_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){s.a.get({route:"/agenda_evento/listar/",data:Object(o.a)(Object(o.a)({},t),{},{dx_grid:!0}),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){s.a.get({route:"/agenda_evento/listar/",data:{dx_grid:!0,agenda_evento_id:e},func_response:function(e){t(e.data)},func_fail:function(e){a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},857:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return _}));var o=a(372),i=a(484),n=a(413),r=a(549),s=a(485),c=a(510),l=a(63),d=a.n(l),u=a(858),p=[{id:"0",descricao:"Andamento"},{id:"1",descricao:"Conclu\xedda"},{id:"3",descricao:"Atrasada"},{id:"4",descricao:"N\xe3o entregue"},{id:"5",descricao:"Retornada"},{id:"9",descricao:"Cancelada"}],f=[{id:"1",descricao:"Conclu\xedda"},{id:"2",descricao:"Cancelada"},{id:"3",descricao:"Andamento"},{id:"4",descricao:"Atrasada"}],m=function(e,t){return[Object(o.jsx)(i.a,{dataField:"S"===e?"numero":"solicitacao_id",allowGrouping:!1,caption:"#",sortIndex:0,sortOrder:"desc",width:100,dataType:"number",filterValue:"undefined"!==typeof t?t:null},"numero_solicitacao_por_processo"),Object(o.jsx)(n.a,{dataField:"processo_nome",caption:"Processo",sortIndex:1,sortOrder:"asc",width:180},"processo_nome"),Object(o.jsx)(n.a,{dataField:"atividade_descricao",caption:"Atividade",width:180,allowGrouping:!1},"atividade_descricao"),Object(o.jsx)(n.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:250,allowGrouping:!1},"descricao"),Object(o.jsx)(r.default,{dataField:"usuario_solicitacao_nome",caption:"Solicitante",width:180,dataFieldUsuarioId:"usuario_solicitacao_id"},"usuario_solicitacao_nome"),Object(o.jsx)(r.default,{dataField:"usuario_responsavel_nome",caption:"Respons\xe1vel",width:180},"usuario_responsavel_nome"),Object(o.jsx)(u.a,{dataField:"cliente_nome",caption:"Cliente",width:180},"cliente"),Object(o.jsx)(s.a,{dataField:"data",caption:"In\xedcio Solicita\xe7\xe3o",width:150,allowGrouping:!1,allowHeaderFiltering:!1},"data"),Object(o.jsx)(s.a,{dataField:"data_inicio_atividade",caption:"In\xedcio Atividade",width:150,allowGrouping:!1,allowHeaderFiltering:!1,sortIndex:2,sortOrder:"desc"},"data_inicio_atividade"),Object(o.jsx)(s.a,{dataField:"prazo_execucao",caption:"Prazo Atividade",width:150,allowGrouping:!1,allowHeaderFiltering:!1},"prazo_execucao"),Object(o.jsx)(s.a,{dataField:"entrega",caption:"Entrega",width:150,allowGrouping:!1,allowHeaderFiltering:!1},"entrega"),Object(o.jsx)(c.a,{dataField:"solicitacao_situacao",caption:"Situa\xe7\xe3o Solicita\xe7\xe3o",width:150,lookup:{dataSource:f,displayExpr:"descricao",valueExpr:"id"},cellTemplate:function(e,t){var a="",o="";switch(+t.data.solicitacao_situacao){case 1:a="label-success",o="Conclu\xedda";break;case 2:a="label-danger",o="Cancelada";break;case 3:a="label-info",o="Em Andamento";break;case 4:a="label-danger",o="Atrasada"}e.css({textAlign:"center"}).addClass("bg-"+a),d()("<span>").text(o).css({color:"#FFF"}).appendTo(e)}},"solicitacao_situacao"),Object(o.jsx)(c.a,{dataField:"situacao",caption:"Situa\xe7\xe3o Atividade",width:150,lookup:{dataSource:p,displayExpr:"descricao",valueExpr:"id"},cellTemplate:function(e,t){var a="",o="text-default";switch(+t.data.situacao){case 0:a="Em Andamento";break;case 1:a="Concluida",o="text-success";break;case 3:a="Atrasada",o="text-danger";break;case 4:a="N\xe3o Entregue",o="text-warning";break;case 5:a="Retornada";break;case 9:a="Cancelada"}e.css({textAlign:"center"}),d()("<span>").text(a).addClass(o).appendTo(e)}},"situacao")]},_=function(e){return[Object(o.jsx)(n.a,{dataField:"atividade_descricao",caption:"Atividade",width:180,allowGrouping:!1},"atividade_descricao_".concat(e)),Object(o.jsx)(n.a,{dataField:"descricao",caption:"Descri\xe7\xe3o",width:800,allowGrouping:!1},"descricao_".concat(e)),Object(o.jsx)(r.default,{dataField:"usuario_responsavel_nome",caption:"Respons\xe1vel",width:200},"usuario_responsavel_nome_".concat(e)),Object(o.jsx)(s.a,{dataField:"data_inicio_atividade",caption:"In\xedcio Atividade",width:180,allowGrouping:!1,allowHeaderFiltering:!1},"data_inicio_atividade_".concat(e)),Object(o.jsx)(s.a,{dataField:"prazo_execucao",caption:"Prazo Atividade",allowGrouping:!1,allowHeaderFiltering:!1},"prazo_execucao_".concat(e)),Object(o.jsx)(c.a,{dataField:"situacao",caption:"Situa\xe7\xe3o Atividade",width:150,lookup:{dataSource:p,displayExpr:"descricao",valueExpr:"id"},cellTemplate:function(e,t){var a="",o="text-default";switch(+t.data.situacao){case 0:a="Em Andamento";break;case 1:a="Concluida",o="text-success";break;case 3:a="Atrasada",o="text-danger";break;case 4:a="N\xe3o Entregue",o="text-warning";break;case 5:a="Retornada";break;case 9:a="Cancelada"}d()("<span>").text(a).addClass(o).appendTo(e)}},"situacao_".concat(e))]}},858:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388),l=a(621);var d=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);d.defaultProps={cellRender:function(e){var t,a,i;return(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.cliente_id)?Object(o.jsx)(l.default,{tipo:"C",id:e.data.cliente_id,nome:e.data.cliente_nome,logoId:e.data.cliente_logo_id,tamanho:20}):null!==(a=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.cliente_nome)&&void 0!==a?a:""},dataType:"string",width:"160px"}},859:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(401),p=a(531);var f=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={processoId:"",processoNome:"",processoCategoria:"",processoAtivo:"",processoVersao:"",processoPublicacao:"",processoSolicitacoes:""},o}return Object(n.a)(a,[{key:"onToolbarPreparing",value:function(e){var t=[{widget:"dxButton",options:{icon:"fas fa-plus",hint:"Novo processo",text:"Novo processo",onClick:function(){window.View.load("processo/detalhes",(function(t,a){a.onclose=e.component.refresh,a.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS,null,null,{processoId:null})}},location:"after",name:"BtnNovoProcesso",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-upload",hint:"Importar Processo",onClick:function(){window.View.load("processo/importacao",(function(t,a){a.onclose=e.component.refresh,a.show()}))}},location:"after",name:"BtnImportarProcesso",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de processos",text:"Recarregar processos",onClick:function(){this.listarProcessos=e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-cog",hint:"Configura\xe7\xf5es",onClick:function(){window.View.load("processo/configuracoes",(function(e,t){t.onclose=onclose,t.show()}))},visible:window.App.sessao.dados.admin},location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}},{key:"render",value:function(){return Object(o.jsx)(d.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(u.default,{style:{height:"calc(100vh - 46px)"},onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(p.listarProcessos)({dx_grid:!0}),stateStoring:p.stateStoring,columns:Object(p.processoColunas)(),export:{enabled:!0,fileName:"Listagem_Processos_"+window.agora(),allowExportSelectedData:!1}})})})})}}]),a}(d.a.Component);f.defaultProps={abaTitulo:"Processos"},t.default=f},860:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"data",caption:"Data",dataType:"datetime",format:"dd/MM/yyyy HH:mm",allowGrouping:!1,allowHeaderFiltering:!1}},862:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var o=a(372),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(376),d=a.n(l),u=a(577),p=a(863),f=a.n(p);var m=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={builderValue:Array.isArray(o.props.value)?o.props.value:null,value:Array.isArray(o.props.value)?o.props.value:null,popupVisible:!1},o}return Object(n.a)(a,[{key:"caption",value:function(){if(null===this.state.value)return"Criar filtro";return function e(t){var a="";return Array.isArray(t)&&t.forEach((function(t){Array.isArray(t)?(a+="( ",a+=e(t),a+=" ) "):a+=t+" "})),a}(this.state.value)}},{key:"limpar",value:function(){var e=this;if(Array.isArray(this.state.value))return Object(o.jsx)("div",{className:"dx-datagrid-filter-panel-clear-filter",tabIndex:"0",onClick:function(t){e.setState({builderValue:null,value:null},(function(){e.props.onValueChanged&&e.props.onValueChanged(e.state.value)}))},children:"Limpar"})}},{key:"filterValueChanged",value:function(e){this.setState({builderValue:e.value})}},{key:"onFilterBuilderOKClick",value:function(e){var t=this;this.setState({value:this.state.builderValue,popupVisible:!1},(function(){t.props.onValueChanged&&t.props.onValueChanged(t.state.value)}))}},{key:"onFilterBuilderCancelarClick",value:function(e){this.setState({builderValue:this.state.value,popupVisible:!1})}},{key:"render",value:function(){var e=this;return Object(o.jsxs)(d.a.Fragment,{children:[Object(o.jsxs)(u.Popup,{visible:this.state.popupVisible,onHiding:this.onFilterBuilderCancelarClick.bind(this),dragEnabled:!1,hideOnOutsideClick:!1,hideOnParentScroll:!1,showCloseButton:!0,showTitle:!0,title:"Construtor de filtro",width:"80vw",height:"80vh",children:[Object(o.jsx)(f.a,{fields:this.props.fields,onValueChanged:this.filterValueChanged.bind(this),value:this.state.builderValue}),Object(o.jsx)(u.ToolbarItem,{widget:"dxButton",toolbar:"bottom",locateInMenu:"auto",location:"after",options:{text:"OK",onClick:this.onFilterBuilderOKClick.bind(this)}}),Object(o.jsx)(u.ToolbarItem,{widget:"dxButton",toolbar:"bottom",locateInMenu:"auto",location:"after",options:{text:"Cancelar",onClick:this.onFilterBuilderCancelarClick.bind(this)}})]}),Object(o.jsxs)("div",{className:"dx-datagrid-filter-panel",children:[Object(o.jsxs)("div",{className:"dx-datagrid-filter-panel-left",children:[Object(o.jsx)("div",{className:"dx-icon-filter",tabIndex:"0"}),Object(o.jsx)("div",{className:"dx-datagrid-filter-panel-text",tabIndex:"0",onClick:function(t){return e.setState({popupVisible:!0})},children:this.caption()})]}),this.limpar()]})]})}}]),a}(d.a.Component)},864:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var o=a(372),i=a(422),n=a.n(i),r=a(425),s=a(365),c=a(366),l=a(385),d=a(368),u=a(369),p=a(367),f=a(376),m=a.n(f),_=a(529),h=a.n(_),v=a(509),b=a.n(v),j=a(625),O=a(865),g=a.n(O),w=a(389);var x=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(e){var o;Object(s.a)(this,a),(o=t.call(this,e)).requestCount=Object(r.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(this.props.route,null,null,null,null,null,null,null,null,!0);case 2:t=e.sent,this.setState({dataSource:t});case 4:case"end":return e.stop()}}),e,this)}))),o.keyCount=0,o.getKey=o.getKey.bind(Object(l.a)(o));var i=o.props.dataSource;return o.state={dataSource:i,chartType:o.props.chartTypes[0],previousChartType:null},o.props.route&&o.requestCount(),o.handleChange=o.handleChange.bind(Object(l.a)(o)),o.pointClickHandler=o.pointClickHandler.bind(Object(l.a)(o)),o.legendClickHandler=o.legendClickHandler.bind(Object(l.a)(o)),o}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState({chartType:e.value,previousChartType:e.previousValue})}},{key:"pointClickHandler",value:function(e){this.toggleVisibility(e.target)}},{key:"legendClickHandler",value:function(e){var t=e.target,a=e.component.getAllSeries()[0].getPointsByArg(t)[0];this.toggleVisibility(a)}},{key:"toggleVisibility",value:function(e){e.isVisible()?e.hide():e.show()}},{key:"getKey",value:function(){return++this.keyCount}},{key:"render",value:function(){for(var e=this,t=Object(o.jsx)(j.CommonSeriesSettings,{argumentField:this.props.argumentField,type:this.state.chartType,ignoreEmptyPoints:!0}),a=function(t){var a="120px";e.props.customHeightCalcCharts&&(a=e.props.customHeightCalcCharts);var o={height:"calc(100vh - ".concat(a,")")};t.component.element().css(o),t.component.refresh()},i="pie"===this.state.chartType||"donut"===this.state.chartType?Object(o.jsxs)(g.a,{dataSource:this.state.dataSource,onInitialized:a,customizePoint:this.props.customizePoint,onPointClick:this.pointClickHandler,onLegendClick:this.legendClickHandler,children:[Object(o.jsx)(j.Export,{enabled:!0}),t,this.props.seriesPie.map((function(e,t){return Object(o.jsx)(j.Series,{argumentField:e.argumentField,valueField:e.valueField,name:e.name,children:Object(o.jsx)(j.Label,{visible:!0,children:Object(o.jsx)(j.Connector,{visible:!0,width:1})})},t)}))]}):Object(o.jsxs)(j.Chart,{dataSource:this.state.dataSource,onInitialized:a,children:[Object(o.jsx)(j.Export,{enabled:!0}),t,this.props.series.map((function(e,t){return Object(o.jsx)(j.Series,{valueField:e.valueField,name:e.name,color:e.color,children:Object(o.jsx)(j.Label,{visible:!0})},t)}))]}),n=("pie"===this.state.previousChartType||"donut"===this.state.previousChartType)!==("pie"===this.state.chartType||"donut"===this.state.chartType)?this.getKey():this.keyCount,r=JSON.parse(JSON.stringify(window.TIPO_GRAFICO_LOOKUP)),s=0;s<r.length;s++){var c=r[s];this.props.chartTypes.includes(c.id)||delete r[s]}r=r.filter((function(e){return null!=e}));var l="79px";this.props.customHeightCalcContainer&&(l=this.props.customHeightCalcContainer);var d={height:"calc(100vh - ".concat(l,")")};return Object(o.jsx)("div",{className:"dx-theme-background-color",style:d,children:Object(o.jsxs)(h.a,{className:"scrollable-board",showScrollbar:"always",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"pull-right col-md-3",children:Object(o.jsx)(b.a,{width:"auto",dataSource:r,value:this.state.chartType,onValueChanged:this.handleChange,valueExpr:"id",displayExpr:"descricao"})})}),i]})},n)}}]),a}(m.a.Component);x.defaultProps={dataSource:[],route:null,argumentField:null,series:null,seriesPie:null,chartTypes:["bar","area","fullstackedarea","fullstackedbar","fullstackedline","fullstackedspline","fullstackedsplinearea","line","scatter","spline","splinearea","stackedarea","stackedbar","stackedline","stackedspline","stackedsplinearea","steparea","stepline","pie","donut"],customizePoint:null}},866:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(380),i=a(398),n=a(389),r=function(){return new i.default({key:"categoria_pdca_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){n.a.get({route:"/categoria_pdca/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){n.a.get({route:"/categoria_pdca/listar/",data:{dx_grid:!0,categoria_pdca_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},867:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(380),i=a(398),n=a(389),r=function(){return new i.default({pageSize:20,key:"assunto_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){n.a.get({route:"assunto/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},868:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(380),i=a(398),n=a(389),r=function(){return new i.default({pageSize:20,key:"tipo_documento_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){n.a.get({route:"tipo_documento/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},869:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var o=a(422),i=a.n(o),n=a(380),r=a(425),s=a(372),c=a(391),l=a(365),d=a(366),u=a(385),p=a(368),f=a(369),m=a(367),_=a(376),h=a.n(_),v=a(401),b=a(622),j=a(690),O=a(857),g=a(388),w=a(449),x=a(408),y=a(105),A=a(389),C=a(448),S=a(398),R=a(63),I=a.n(R);var P=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;Object(l.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(u.a)(o)),o.stateStoring=o.stateStoring.bind(Object(u.a)(o)),o.onContextMenuPreparing=o.onContextMenuPreparing.bind(Object(u.a)(o)),o.onContentReady=o.onContentReady.bind(Object(u.a)(o)),o.handleSelectBoxChange=o.handleSelectBoxChange.bind(Object(u.a)(o)),o.exibirFiltrosAdicionais=o.exibirFiltrosAdicionais.bind(Object(u.a)(o)),o.onRowClick=o.onRowClick.bind(Object(u.a)(o)),o.onRowPrepared=o.onRowPrepared.bind(Object(u.a)(o)),o.filtro_solicitacao_numero=o.props.filtro_solicitacao_numero>0?o.props.filtro_solicitacao_numero:null,o.filtro_tipo_listagem="string"===typeof o.props.filtro_tipo_listagem||"number"===typeof o.props.filtro_tipo_listagem?o.props.filtro_tipo_listagem:null,o.filtro_solicitante="string"===typeof o.props.filtro_solicitante||"number"===typeof o.props.filtro_solicitante?o.props.filtro_solicitante:null,o.filtro_responsavel="string"===typeof o.props.filtro_responsavel||"number"===typeof o.props.filtro_responsavel?o.props.filtro_responsavel:null,o.filtro_cliente="string"===typeof o.props.filtro_cliente||"number"===typeof o.props.filtro_cliente?o.props.filtro_cliente:null,o.hasFilters=o.props.exibirAlertaFiltrosAdicionais&&(null!==o.filtro_solicitacao_numero||null!==o.filtro_tipo_listagem||null!==o.filtro_cliente||null!==o.filtro_solicitante||null!==o.filtro_responsavel),o.dataGridRef=h.a.createRef(),o.gridStateStoring=o.stateStoring(),o.parametrosUsuario=y.a.get_parametro_usuario("solicitacao"),o.listResponsaveisModoTeste=Object(j.b)();var i=window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,n=!1,r=0,s="";return o.parametrosUsuario&&("undefined"!==typeof o.parametrosUsuario.tipoListagem&&null!==o.parametrosUsuario.tipoListagem&&""!==o.parametrosUsuario.tipoListagem&&+o.parametrosUsuario.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&(i=+o.parametrosUsuario.tipoListagem),o.props.processo_id||i==window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS||i==window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_CONCLUIDA||i==window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_EM_ABERTO||i==window.SOLICITACAO_FILTROS.MINHAS_ATIVIDADES_EXECUTADAS||(i=window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS),o.parametrosUsuario.obj_param?(n="undefined"!==typeof o.parametrosUsuario.obj_param.modo_teste&&o.parametrosUsuario.obj_param.modo_teste,r="undefined"!==typeof o.parametrosUsuario.obj_param.modo_teste_responsavel_id?o.parametrosUsuario.obj_param.modo_teste_responsavel_id:0,s="undefined"!==typeof o.parametrosUsuario.obj_param.modo_teste_responsavel_nome?o.parametrosUsuario.obj_param.modo_teste_responsavel_nome:""):o.parametrosUsuario.obj_param={}),null!==o.filtro_solicitacao_numero&&(i=window.SOLICITACAO_FILTROS.TODAS),null!==o.filtro_tipo_listagem&&(i=o.filtro_tipo_listagem),o.state={dataSource:Object(j.a)(i,null,null,n,r,o.filtro_solicitante,o.filtro_responsavel,o.filtro_cliente,o.props.processo_id),tipoListagem:+i,modo_teste:n,modo_teste_responsavel_id:r,modo_teste_responsavel_nome:s,filtro_solicitacao_numero:o.filtro_solicitacao_numero},o}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this,a=function(e){return t.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,t.state.modo_teste_responsavel_nome,t.state.modo_teste)},o=[].concat(Object(c.a)(Object(O.a)(y.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo,this.filtro_solicitacao_numero)),[Object(s.jsxs)(g.Column,{type:"buttons",children:[Object(s.jsx)(w.a,{hint:"Visualizar Atividade",visible:function(e){return![b.b.andamento,b.b.atrasada].includes(+e.row.data.solicitacao_situacao)||![window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao)},icon:"fas fa-list-alt",onClick:a}),",",Object(s.jsx)(w.a,{hint:"Atividade Pendente",visible:function(e){return[b.b.andamento,b.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO].includes(+e.row.data.situacao)},onClick:a,children:Object(s.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(s.jsx)("span",{className:"far fa-list-alt"}),Object(s.jsx)("span",{className:"fas fa-circle icon-on-top text-info",style:{opacity:"75%"}})]})}),",",Object(s.jsx)(w.a,{hint:"Atividade Atrasada",visible:function(e){return[b.b.andamento,b.b.atrasada].includes(+e.row.data.solicitacao_situacao)&&[window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA].includes(+e.row.data.situacao)},onClick:a,children:Object(s.jsxs)("a",{href:"#",className:"dx-link dx-icon dx-link-icon",children:[Object(s.jsx)("span",{className:"far fa-list-alt"}),Object(s.jsx)("span",{className:"fas fa-circle icon-on-top text-danger",style:{opacity:"75%"}})]})}),",",Object(s.jsx)(w.a,{hint:"Visualizar Solicita\xe7\xe3o",icon:"fas fa-sitemap",onClick:function(e){return t.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,t.state.modo_teste_responsavel_nome,t.state.modo_teste)},visible:function(e){return!0===y.a.sessao.dados.admin||!0===e.row.data.acesso_supervisor}}),","]},"buttonsAtividade")]),i=null!==(e=this.props.subtractHeight)&&void 0!==e?e:"0px",n=this.hasFilters?"38px":"0px",r={height:"calc(100vh - 46px - ".concat(i," - ").concat(n,")"),width:"100%"};return Object(s.jsxs)(h.a.Fragment,{children:[this.hasFilters&&Object(s.jsxs)("div",{className:"text-warning dx-theme-background-color",style:{padding:10,fontWeight:"bold",fontSize:14},children:[Object(s.jsx)("i",{className:"fas fa-info-circle"}),"\xa0",Object(s.jsx)("span",{children:"Filtros externos aplicados"}),"\xa0",Object(s.jsxs)("small",{children:["( ",Object(s.jsx)("span",{style:{cursor:"pointer"},onClick:this.exibirFiltrosAdicionais,children:"visualizar"})," )"]})]}),Object(s.jsx)(v.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,style:r,stateStoring:this.gridStateStoring,onToolbarPreparing:this.onToolbarPreparing,onContextMenuPreparing:this.onContextMenuPreparing,onContentReady:this.onContentReady,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},onRowClick:this.onRowClick,onRowPrepared:this.onRowPrepared,children:o})]})}},{key:"handleBtnEditarClick",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null;e.row?i=e.row.data:e.data&&(i=e.data);var n=t==window.FORMULARIO.EDITAR?{solicitacaoAtividadeId:i.solicitacao_atividade_id}:{solicitacaoId:i.solicitacao_id};x.a.load("solicitacao/detalhes",(function(n,r){r.onclose=e.component.refresh,r.show(i.solicitacao_atividade_id,t,a,o)}),x.a.ABA.MULTIPLAS,null,null,n)}},{key:"handleSelectBoxChange",value:function(e){var t=this;if(this.dataGridRef&&this.dataGridRef.current&&e.selectedItem&&+e.selectedItem.id!==+this.state.tipoListagem){var a=function(a){e.component.option("value",+a),t.setState({dataSource:Object(j.a)(a,null,null,t.state.modo_teste,t.state.modo_teste_responsavel_id,null,null,null,t.props.processo_id),tipoListagem:+a},Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(+t.state.tipoListagem===window.SOLICITACAO_FILTROS.TODAS){e.next=5;break}return e.next=3,y.a.get_parametro_usuario("solicitacao");case 3:t.parametrosUsuario=e.sent,y.a.set_parametro_usuario("solicitacao",Object(n.a)(Object(n.a)({},t.parametrosUsuario),{},{tipoListagem:+t.state.tipoListagem}));case 5:case"end":return e.stop()}}),e)}))))},o=this.dataGridRef.current._instance;if(o._resetPageIndex=!0,o._clearSelectedRows=!0,+e.selectedItem.id===window.SOLICITACAO_FILTROS.TODAS)Object(C.confirm)("Listar todas as Solicita\xe7\xf5es poder\xe1 levar um tempo. Deseja continuar?","Aten\xe7\xe3o").then((function(e){a(e?window.SOLICITACAO_FILTROS.TODAS:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS)}));else a(+e.selectedItem.id)}}},{key:"stateStoring",value:function(){return{enabled:!this.hasFilters,type:"custom",customLoad:function(){var e=Object(r.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get_parametro_usuario("solicitacao");case 2:return t=e.sent,e.abrupt("return",t.datagrid);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),customSave:function(e){return y.a.set_parametro_usuario("solicitacao",{datagrid:e})}}}},{key:"onToolbarPreparing",value:function(e){var t=this;if(this.props.processo_id||this.state.tipoListagem!==window.SOLICITACAO_FILTROS.SUPERVISIONADOS){var a=[{id:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,descricao:"Minhas Pend\xeancias",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_CONCLUIDA,descricao:"Minhas Solicita\xe7\xf5es Conclu\xeddas",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_EM_ABERTO,descricao:"Minhas Solicita\xe7\xf5es em Andamento",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_ATIVIDADES_EXECUTADAS,descricao:"Minhas Atividades Executadas",categoria:"Minhas"}];this.props.processo_id&&a.push({id:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,descricao:"Processos Supervisionados",categoria:"Geral",visible:"S"===y.a.sessao.dados.supervisor_processo||"S"===y.a.sessao.dados.supervisor_processo_usuario||"S"===y.a.sessao.dados.supervisor_processo_grupo_usuario},{id:window.SOLICITACAO_FILTROS.ATRASADAS,descricao:"Atividades Atrasadas",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS,descricao:"Todas Atividades",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS_ANDAMENTO,descricao:"Solicita\xe7\xf5es em Andamento",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CANCELADAS,descricao:"Solicita\xe7\xf5es Canceladas",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CONCLUIDAS,descricao:"Solicita\xe7\xf5es Conclu\xeddas",categoria:"Situa\xe7\xe3o"});var o=[{widget:"dxTextBox",location:"after",locateInMenu:"auto",options:{width:"140px",placeholder:"N\xba Solicita\xe7\xe3o",value:this.state.filtro_solicitacao_numero,buttons:[{location:"before",name:"pesquisar",options:{icon:"search",disabled:!0}}],onEnterKey:function(e){var a=e.component.option("value");if(null!==a&&""!==a.trim()){var o="S"!==y.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a:null,i="S"===y.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a:null;t.setState({dataSource:Object(j.a)(window.SOLICITACAO_FILTROS.TODAS,o,i,t.state.modo_teste,t.state.modo_teste_responsavel_id,null,null,null,t.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.TODAS,filtro_solicitacao_numero:a})}else t.setState({dataSource:Object(j.a)(window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,null,null,t.state.modo_teste,t.state.modo_teste_responsavel_id,null,null,null,t.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,filtro_solicitacao_numero:null})}}},{widget:"dxSelectBox",visible:!0===this.state.modo_teste,name:"selectResponsavelTeste",locateInMenu:"auto",options:{dataSource:new S.default({store:this.listResponsaveisModoTeste,paginate:!0,pageSize:10}),valueExpr:"id",displayExpr:"nome",searchEnabled:!0,searchModeOption:"contains",searchExprOption:"nome",width:"250px",placeholder:"Respons\xe1vel (Modo Teste)",value:this.state.modo_teste_responsavel_id,onValueChanged:function(e){var a=e.value,o=e.component.option("text");t.setState({modo_teste_responsavel_id:a,modo_teste_responsavel_nome:o,dataSource:Object(j.a)(t.state.tipoListagem,null,null,t.state.modo_teste,a,null,null,null,t.props.processo_id)},Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get_parametro_usuario("solicitacao");case 2:t.parametrosUsuario=e.sent,y.a.set_parametro_usuario("solicitacao",Object(n.a)(Object(n.a)({},t.parametrosUsuario),{},{obj_param:Object(n.a)(Object(n.a)({},t.parametrosUsuario.obj_param),{},{modo_teste_responsavel_id:a,modo_teste_responsavel_nome:o})}));case 4:case"end":return e.stop()}}),e)}))))}}},{widget:"dxSelectBox",locateInMenu:"auto",options:{dataSource:new S.default({store:a,group:"categoria"}),width:"250px",placeholder:"Filtrar por",valueExpr:"id",displayExpr:"descricao",value:+this.state.tipoListagem,grouped:!0,onSelectionChanged:this.handleSelectBoxChange},location:"after"},{widget:"dxButton",options:{icon:"plus",hint:"Nova Solicita\xe7\xe3o",text:"Nova Solicita\xe7\xe3o",onClick:function(){x.a.load("solicitacao/nova",(function(a,o){o.onclose=e.component.refresh,o.show(null,null,null,null,null,null,null,null,t.state.modo_teste,t.state.modo_teste_responsavel_id,!1,t.state.modo_teste_responsavel_nome)}))}},location:"after",name:"BtnNovaSolicitacao",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-flask",hint:"Habilitar Modo Teste",text:"Habilitar Modo Teste",onClick:function(){t.setState({modo_teste:!t.state.modo_teste,dataSource:Object(j.a)(t.state.tipoListagem,null,null,!t.state.modo_teste,t.state.modo_teste_responsavel_id)},Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get_parametro_usuario("solicitacao");case 2:t.parametrosUsuario=e.sent,y.a.set_parametro_usuario("solicitacao",Object(n.a)(Object(n.a)({},t.parametrosUsuario),{},{obj_param:Object(n.a)(Object(n.a)({},t.parametrosUsuario.obj_param),{},{modo_teste:t.state.modo_teste})}));case 4:case"end":return e.stop()}}),e)}))))},onInitialized:function(e){!0===t.state.modo_teste&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnModoTeste",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(o,e.toolbarOptions.items)}}},{key:"onContextMenuPreparing",value:function(e){var t=this;if("header"===e.target&&Array.isArray(e.items)&&e.items.push(Object(v.itemRestaurarEstadoDasColunas)(e)),e.row&&"data"===e.row.rowType){var a=function(t){A.a.post("solicitacao/cancelar_atividades/",{atividades_selecionadas:t},(function(){window.alert_saved("Atividades canceladas com sucesso"),e.component.refresh()}))},o=function(t){A.a.post("solicitacao/restaurar_atividades/",{atividades_selecionadas:t},(function(){window.alert_saved("Atividades restauradas com sucesso"),e.component.refresh()}))},i=!1,n=!1,r=e.component.getSelectedRowsData(),s=e.component.getCombinedFilter(),c=new S.default({store:r,pageSize:0});c.filter(s),c.load().done((function(r){if(r.length>0){i=!0,n=!0;for(var s=0;s<r.length;s++){var c=r[s];(!c.supervisor_permite_edicao||c.entrega||"N"!==c.cancelada||+c.situacao===window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA||c.data_finalizacao)&&(i=!1),c.supervisor_permite_edicao&&"N"===c.cancelada&&c.situacao===window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA&&!c.data_finalizacao||(n=!1)}}e.items=[{text:"Visualizar Atividade",visible:!0,onItemClick:function(){return t.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,t.state.modo_teste_responsavel_nome)}},{text:"Visualizar Processo",visible:!0,onItemClick:function(){return t.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,t.state.modo_teste_responsavel_nome)}},{beginGroup:!0,text:"Copiar para uma nova Solicita\xe7\xe3o",visible:!0,onItemClick:function(){var a={processo_id:e.row.data.processo_id,copiar_solicitacao_id:e.row.data.solicitacao_id,modo_teste:t.state.modo_teste,modo_teste_responsavel_id:t.state.modo_teste_responsavel_id};A.a.post("solicitacao/nova/",a,(function(a){var o={solicitacaoAtividadeId:a.solicitacao_atividade_id};x.a.load("solicitacao/detalhes",(function(o,i){i.onclose=e.component.refresh,i.show(a,window.FORMULARIO.NOVO,t.state.modo_teste_responsavel_nome,t.state.modo_teste)}),x.a.ABA.MULTIPLAS,null,null,o)}))}},{beginGroup:!0,text:e.row.data.reabertura_solicitacoes_concluidas&&e.row.data.data_finalizacao?"Retornar para esta atividade e reabrir a Solicita\xe7\xe3o":"Retornar para esta Atividade e cancelar as posteriores",visible:"N"===e.row.data.cancelada&&e.row.data.situacao!==window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA&&(!!e.row.data.entrega||!!e.row.data.retorno)&&(e.row.data.supervisor_permite_edicao&&!e.row.data.data_finalizacao||e.row.data.reabertura_solicitacoes_concluidas&&e.row.data.data_finalizacao),onItemClick:function(){window.DevExpress.ui.dialog.custom({title:"Aviso",messageHtml:"Tem certeza que deseja <strong>retornar a Solicita\xe7\xe3o para esta Atividade</strong>? Essa a\xe7\xe3o \xe9 irrevers\xedvel!",buttons:[{text:"Sim",onClick:function(){if(!(!e.row.data.reabertura_solicitacoes_concluidas||!e.row.data.data_finalizacao)){var t="";window.alertaPopUp("Motivo da Reabertura",(function(e,a){var o=I()("<div>");o.dxTextArea({placeholder:"Informe o motivo da reabertura da Solicita\xe7\xe3o (500 caracteres m\xe1x.)",maxLength:500,height:180,onValueChanged:function(e){t=e.value}}).dxValidator({type:"required",message:"O motivo da reabertura \xe9 obrigat\xf3rio!"}).dxTextArea("instance"),I()(e).append(o)}),"Confirmar",(function(e){null!==t&&""!==t.trim()?a(!0,t,(function(){e.hide()})):window.alert_fail("O motivo da reabertura \xe9 obrigat\xf3rio!")}),"Cancelar",(function(e){e.hide()}),500,300,!1)}else a(!1);function a(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};window.alert_info("Retornando solicita\xe7\xe3o para a atividade selecionada"),A.a.post("solicitacao/retornar_atividade/",{solicitacao_atividade_id:e.row.data.solicitacao_atividade_id,solicitacao_id:e.row.data.solicitacao_id,cancelar_posteriores:!0,reabrir_solicitacao:t,motivo_reabertura:a},(function(){window.alert_saved("Atividade retornada com sucesso"),"function"===typeof o&&o(),e.component.refresh()}))}}},{text:"N\xe3o",onClick:function(){return!1}}]}).show()}},{text:"Cancelar Atividade",visible:e.row.data.supervisor_permite_edicao&&!e.row.data.entrega&&"N"===e.row.data.cancelada&&e.row.data.situacao!==window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA&&!e.row.data.data_finalizacao,onItemClick:function(){return a([e.row.data])}},{text:"Cancelar Atividades selecionadas",visible:i,onItemClick:function(){return a(r)}},{text:"Restaurar Atividade",visible:e.row.data.supervisor_permite_edicao&&"N"===e.row.data.cancelada&&+e.row.data.situacao===window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA,onItemClick:function(){return o([e.row.data])}},{text:"Restaurar Atividades selecionadas",visible:n,onItemClick:function(){return o(r)}}]}))}}},{key:"onContentReady",value:function(e){e.component._clearState&&(e.component.state({}),e.component._clearState=!1),e.component._clearSelectedRows&&(e.component.clearSelection(),e.component._clearSelectedRows=!1),e.component._resetPageIndex&&(e.component.pageIndex(0),e.component._resetPageIndex=!1),setTimeout((function(){return e.component.updateDimensions()}),100)}},{key:"exibirFiltrosAdicionais",value:function(){var e="Essa mensagem significa que a listagem de Solicita\xe7\xf5es de Processos foi aberta externamente com filtros pr\xe9 definidos.<br><br>Nesse caso, os filtros salvos do usu\xe1rio n\xe3o ser\xe3o carregados e nem salvos na sess\xe3o, mas ser\xe3o preservados quando a tela for aberta pelo menu do sistema.<br><br>Filtros aplicados:";e+="<ul>",this.filtro_tipo_listagem&&(e+="<li>Tipo de Listagem</li>"),this.filtro_solicitacao_numero&&(e+="<li>N\xfamero da Solicita\xe7\xe3o</li>"),this.filtro_solicitante&&(e+="<li>Solicitante</li>"),this.filtro_responsavel&&(e+="<li>Respons\xe1vel</li>"),this.filtro_cliente&&(e+="<li>Cliente</li>"),e+="</ul>",Object(C.alert)(e,"Filtros Externos")}},{key:"onRowClick",value:function(e){var t=this;window.onDoubleClick(e,(function(){t.handleBtnEditarClick(e,window.FORMULARIO.EDITAR,t.state.modo_teste_responsavel_nome,t.state.modo_teste)}))}},{key:"onRowPrepared",value:function(e){if(y.a.PE.Solicitacao_Listagem_onRowPrepared)try{y.a.PE.Solicitacao_Listagem_onRowPrepared(e)}catch(e){console.log(e)}}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(h.a.Component);P.defaultProps={exibirAlertaFiltrosAdicionais:!0}},880:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return s}));var o=a(380),i=a(389),n=a(398),r=function(){return new n.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"tipo_moeda_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){i.a.get({route:"tipo_moeda/listar_para_selecao/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"tipo_moeda/listar_para_selecao/",data:{dx_grid:!0,tipo_moeda_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:function(e){},update:function(e,t){},remove:function(e){}})},s=function(e,t){i.a.post("tipo_moeda/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(a){window.alert_tooltip("Salvo com sucesso!","success",500),t&&t(e)}))}},881:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(372),i=a(413),n=a(694),r=[Object(o.jsx)(i.a,{width:"100%",caption:"Descri\xe7\xe3o"},"nome"),Object(o.jsx)(n.a,{},"simbolo")]},882:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(380),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367),l=a(695),d=a(883),u=a(105);var p=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state=Object(o.a)(Object(o.a)({},n.state),n.propsToObjState()),n}return Object(n.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,dataSource:Object(d.a)(this.props.modulo,window.cripto(u.a.sessao.usuario_id.toString())),instanceSelecaoPadraoTagBox:null!==(t=this.props.instanceSelecaoGrupoUsuarios)&&void 0!==t?t:null,aoAlterar:null!==(a=this.props.aoAlterar)&&void 0!==a?a:null,elementAttr:null!==(o=this.props.elementAttr)&&void 0!==o?o:null}}},{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}]),a}(l.a);p.defaultProps={placeholder:"Filtro por grupos de usu\xe1rios",displayExpr:"nome",valueExpr:"grupo_usuarios_id"}},883:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(380),i=a(389),n=a(398),r=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new n.default({paginate:!1,key:"grupo_usuarios_id",load:function(n){var s=window.loadOptionsToActionParams(n);return new Promise((function(c,l){i.a.get({route:"grupo_usuarios/listar/",data:Object(o.a)({listar_grupos_sistema:r,nome:n.searchValue,usuario_id:t,modulo:e,dx_grid:a},s),func_response:function(e){c(e)},func_fail:function(e){e.validation&&l(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},884:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return l}));var o=a(380),i=a(365),n=a(366),r=a(368),s=a(369),c=a(367);var l=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state=Object(o.a)(Object(o.a)({},n.state),n.propsToObjState()),n}return Object(n.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,i,n;return{selecionado:this.props.selecionado?this.props.selecionado:null,readOnly:null!==(e=this.props.readOnly)&&void 0!==e?e:null,items:null!==(t=this.props.items)&&void 0!==t?t:[],instanceSelecaoPadraoTagBox:null!==(a=this.props.instanceSelecaoGruposAtivos)&&void 0!==a?a:null,aoAlterar:null!==(o=this.props.aoAlterar)&&void 0!==o?o:null,elementAttr:null!==(i=this.props.elementAttr)&&void 0!==i?i:null,maxDisplayedTags:null!==(n=this.props.maxDisplayedTags)&&void 0!==n?n:void 0}}},{key:"componentDidUpdate",value:function(e,t){JSON.stringify(e.selecionado)===JSON.stringify(this.props.selecionado)&&e.readOnly===this.props.readOnly||this.setState(this.propsToObjState())}}]),a}(a(695).a);l.defaultProps={placeholder:"Filtro por ativos",displayExpr:"nome",valueExpr:"id"}},885:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(380),i=a(398),n=a(389),r=function(){return new i.default({pageSize:20,key:"consulta_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){n.a.get({route:"consulta_integracao/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){n.a.get({route:"consulta_integracao/listar/",data:{dx_grid:!0,conexao_integracao_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},886:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var o=a(365),i=a(368),n=a(369),r=a(367),s=a(388);var c=function(e){Object(i.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(r.a)(e);if(t()){var i=Object(r.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(n.a)(this,a)}}(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(s.Column);c.defaultProps={dataField:"valor",caption:"Valor",dataType:"number",format:"#,##0.00",allowGrouping:!1,allowHeaderFiltering:!1,editorOptions:{format:"#,##0.00",showClearButton:!0}}},887:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388),l=a(688);var d=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);d.defaultProps={dataField:"situacao",caption:"Situa\xe7\xe3o da Oportunidade",width:80,children:Object(o.jsx)(c.Lookup,{dataSource:l.oportunidadeSituacoes,displayExpr:"descricao",valueExpr:"id"})}},888:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return l}));var o=a(380),i=a(389),n=a(398),r=function(){return new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"cubo_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){i.a.get({route:"cubo/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){i.a.get({route:"cubo/listar/",data:{dx_grid:!0,cubo_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:function(e){},update:function(e,t){},remove:function(e){}})},s=function(e,t){i.a.post("cubo/salvar_batch",{dados:window.CircularJSON.stringify(e)},(function(a){window.alert_tooltip("Salvo com sucesso!","success",500),t&&t(e)}))},c=function(e){return new n.default({paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"integrante_id",load:function(t){var a=window.loadOptionsToActionParams(t);return new Promise((function(t,n){i.a.get({route:"cubo/listar_equipe/",data:Object(o.a)({cubo_id:e,dx_grid:!0},a),func_response:function(e){var a=window.createLoadExtra(e);t(Object(o.a)(Object(o.a)({},a),{},{data:e.data}))},func_fail:function(e){e.validation&&n(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},insert:function(e){},update:function(e,t){},remove:function(e){}})},l=function(e,t,a){i.a.post("cubo/salvar_equipe",{cubo_id:e,arr_equipe:window.CircularJSON.stringify(t)},(function(e){window.alert_tooltip("Salvo com sucesso!","success",500),a&&a(t)}))}},889:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(410),n=a(422),r=a.n(n),s=a(380),c=a(425),l=a(365),d=a(366),u=a(385),p=a(368),f=a(369),m=a(367),_=a(63),h=a.n(_),v=a(376),b=a.n(v),j=a(514),O=a.n(j),g=a(389),w=a(105),x=a(530),y=a.n(x),A=a(596),C=a(401),S=a(932),R=a(669),I=a(624),P=a.n(I),E=a(625),T=a.n(E);var D=[{text:"Padr\xe3o",value:void 0},{text:"Soma",value:"sum"},{text:"Contagem",value:"count"},{text:"M\xe9dia",value:"avg"},{text:"M\xe1ximo",value:"max"},{text:"Min\xedmo",value:"min"}],k=function(e){Object(p.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(m.a)(e);if(t()){var i=Object(m.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var o;return Object(l.a)(this,a),(o=t.call(this,e)).getDatasourceCubo=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,o,i,n,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("cubo/getDatasourceCubo/",{cubo_id:t},null,null,null,null,null,null,null,!0);case 2:for(a=e.sent,o=JSON.parse(a.dados),i=[],n=0;n<a.colunas.length;n++)c=a.colunas[n],l=this.handleOpcoesTipoColuna(c.tipo),i.push(Object(s.a)(Object(s.a)({dataField:c.nome,caption:c.titulo},l),{},{minWidth:"100"}));this.setState({datasource:o,columns:i,datasourcePivot:new R.default({store:o})});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.dataGridRef=b.a.createRef(),o.filterBuilderValueInicial=[],o.filterBuilderValueFinal=[],o.filterBuilderColunasParametrosInicial=[],o.filterBuilderColunasParametrosFinal=[],o.keyCount=0,o.getKey=o.getKey.bind(Object(u.a)(o)),o.onContextMenuPreparing=o.onContextMenuPreparing.bind(Object(u.a)(o)),o.handleOpcoesTipoColuna=o.handleOpcoesTipoColuna.bind(Object(u.a)(o)),o.exportarPivotGrid=o.exportarPivotGrid.bind(Object(u.a)(o)),o.state={datasource:[],datasourcePivot:[],columns:void 0},o.getDatasourceCubo.bind(Object(u.a)(o)),w.a.temp.cubo||(w.a.temp.cubo={}),w.a.temp.cubo.colunasParametros||(w.a.temp.cubo.colunasParametros={}),w.a.temp.cubo.colunasParametros["DataGridCubo_"+e.cubo_id]=[],o}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDatasourceCubo(this.props.cubo_id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getKey",value:function(){return this.keyCount++}},{key:"limparColunasParametrosNaoUtilizados",value:function(){for(var e,t,a,o=this,i=function e(t){for(var a,i,n,r,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=null!==(a=null!==c&&void 0!==c?c:null===(i=o.dataGridRef)||void 0===i||null===(n=i.current)||void 0===n||null===(r=n.instance)||void 0===r||null===(s=r.state())||void 0===s?void 0:s.filterValue)&&void 0!==a?a:[],d=0;d<l.length;d++){var u=l[d];if(Array.isArray(u)){var p=e(t,u);if(p)return!0}if(u==t)return!0}return!1},n=window.clone_obj(null!==(e=null===w.a||void 0===w.a||null===(t=w.a.temp)||void 0===t||null===(a=t.cubo)||void 0===a?void 0:a.colunasParametros["DataGridCubo_"+this.props.cubo_id])&&void 0!==e?e:[]),r=0;r<n.length;r++){var s=n[r];n[r]=i(s,this.filterBuilderValueInicial)?s:null}w.a.temp.cubo.colunasParametros["DataGridCubo_"+this.props.cubo_id]=n.filter((function(e){return!!e}))}},{key:"render",value:function(){var e=this,t=Object(i.a)({display:"flex",justifyContent:"center",alignItems:"center",height:"calc(100vh - 79px)",backgroundColor:"#f8f9fa"},"height","calc(100vh - 79px)"),a=Object(o.jsx)("div",{style:t,children:Object(o.jsx)("p",{style:{fontSize:"24px",color:"#495057",textAlign:"center",padding:"20px",border:"2px dashed #ced4da",borderRadius:"5px",maxWidth:"400px"},children:"N\xe3o h\xe1 dados dispon\xedveis."})}),n="DataGridCubo_"+this.props.cubo_id;if(this.state.datasource.length>0){var r=Object(A.formatMessage)("dxFilterBuilder-enterValueText"),s=Array.isArray(this.state.columns)?this.state.columns.map((function(e){return e.dataField})):null,c={onEditorPreparing:function(e){e.editorOptions.buttons=[{name:"parametro",location:"after",options:{stylingMode:"text",template:function(t,a,o){return h()("<div></div>").dxCheckBox({value:w.a.temp.cubo.colunasParametros[n].includes(e.dataField),text:"Par\xe2metro",onValueChanged:function(t){t.value&&!w.a.temp.cubo.colunasParametros[n].includes(e.dataField)&&w.a.temp.cubo.colunasParametros[n].push(e.dataField),!t.value&&w.a.temp.cubo.colunasParametros[n].includes(e.dataField)&&w.a.temp.cubo.colunasParametros[n].splice(w.a.temp.cubo.colunasParametros[n].indexOf(e.dataField),1),t.value&&!e.value&&e.setValue(r)}})}}}],e.value===r&&(e.editorOptions.value=null);var t=e.editorOptions.onValueChanged;e.editorOptions.onValueChanged=function(a){var o,i,s;(null!==(o=null===w.a||void 0===w.a||null===(i=w.a.temp)||void 0===i||null===(s=i.cubo)||void 0===s?void 0:s.colunasParametros[n])&&void 0!==o?o:[]).includes(e.dataField)&&!a.value&&(arguments[0].value=r),t.apply(this,arguments)}},onContentReady:function(e){e.element.find(".dx-filterbuilder-text.dx-filterbuilder-item-value").each((function(e,t){var a=t.closest(".dx-filterbuilder-group-item"),o=h()(a).find(".dx-filterbuilder-item-field");w.a.temp.cubo.colunasParametros[n].includes(h()(o).text())?0==h()(a).find(".parametro").length&&h()(a).append('<div class="dx-filterbuilder-text parametro" title="Par\xe2metro" style="cursor: auto;"><i class="far fa-bookmark text-warning"></i></div>'):h()(a).find(".parametro").remove()}))},onInitialized:function(t){var a,o,i,n,r;e.filterBuilderValueInicial=window.clone_obj(null!==(a=null===t||void 0===t||null===(o=t.component)||void 0===o?void 0:o.option("value"))&&void 0!==a?a:[]),e.filterBuilderColunasParametrosInicial=window.clone_obj(null!==(i=null===w.a||void 0===w.a||null===(n=w.a.temp)||void 0===n||null===(r=n.cubo)||void 0===r?void 0:r.colunasParametros["DataGridCubo_"+e.props.cubo_id])&&void 0!==i?i:[]),e.limparColunasParametrosNaoUtilizados()},onDisposing:function(t){var a,o,i,n,r;if(e.filterBuilderValueFinal=window.clone_obj(null!==(a=null===t||void 0===t||null===(o=t.component)||void 0===o?void 0:o.option("value"))&&void 0!==a?a:[]),e.filterBuilderColunasParametrosFinal=window.clone_obj(null!==(i=null===w.a||void 0===w.a||null===(n=w.a.temp)||void 0===n||null===(r=n.cubo)||void 0===r?void 0:r.colunasParametros["DataGridCubo_"+e.props.cubo_id])&&void 0!==i?i:[]),window.isEquivalent(e.filterBuilderValueInicial,e.filterBuilderValueFinal)&&!window.isEquivalent(e.filterBuilderColunasParametrosInicial,e.filterBuilderColunasParametrosFinal)){var s,c,l,d,u=null!==(s=null===(c=e.dataGridRef)||void 0===c||null===(l=c.current)||void 0===l||null===(d=l.instance)||void 0===d?void 0:d.state())&&void 0!==s?s:null;u.colunasParametros=e.filterBuilderColunasParametrosFinal,u&&w.a.set_parametro_usuario("DataGridCubo_"+e.props.cubo_id,u)}}};a=Object(o.jsx)(C.default,{ref:this.dataGridRef,style:{height:"calc(100vh - 79px)"},dataSource:this.state.datasource,columns:this.state.columns,remoteOperations:!1,onToolbarPreparing:function(e){var t=[{location:"after",locateInMenu:"never",template:function(){var t=h()("<div></div>");return O.a.render(b.a.createElement(S.default,{chave:n,colunasAceitas:s,aoAlterarStateStoring:function(t){var a,o;e.component.option("stateStoring",t),e.component.refresh(),(null!==(a=null===(o=e.component.state())||void 0===o?void 0:o.colunasParametros)&&void 0!==a?a:[]).length>0&&e.component.option("filterBuilderPopup",{visible:!0})}}),t[0]),t}}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)},filterBuilder:c})}return Object(o.jsx)(b.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsxs)(y.a,{swipeEnabled:!1,children:[Object(o.jsx)(x.Item,{title:"DataGrid",icon:"fas fa-list",children:a}),Object(o.jsxs)(x.Item,{title:"PivotGrid",icon:"dx-icon dx-icon-datafield",children:[Object(o.jsx)("div",{style:{marginBottom:10,marginTop:10,marginRight:5,float:"right"},children:Object(o.jsxs)("button",{className:"btn btn-default",onClick:this.exportarPivotGrid,children:[Object(o.jsx)("i",{class:"fas fa-file-export"}),"\xa0Exportar PivotGrid"]})}),Object(o.jsxs)(T.a,{ref:function(t){t&&(e.chart=t.instance)},style:{paddingTop:"10px"},className:"dx-theme-background-color",children:[Object(o.jsx)(E.Size,{height:200}),Object(o.jsx)(E.Tooltip,{enabled:!0,customizeTooltip:M}),Object(o.jsx)(E.CommonSeriesSettings,{type:"bar"}),Object(o.jsx)(E.AdaptiveLayout,{width:450})]}),Object(o.jsxs)(P.a,{style:{height:"calc(100vh - 335px)"},id:"pivotgrid",dataSource:this.state.datasourcePivot,onContextMenuPreparing:this.onContextMenuPreparing,allowSortingBySummary:!0,allowFiltering:!0,showBorders:!0,showColumnTotals:!1,showColumnGrandTotals:!1,showRowTotals:!1,showRowGrandTotals:!1,ref:function(t){t&&(e.pivotGrid=t.instance,e.pivotGrid.bindChart(e.chart,{dataFieldsDisplayMode:"splitPanes",alternateDataFields:!1}))},children:[Object(o.jsx)(I.FieldChooser,{enabled:!0,height:400}),Object(o.jsx)(I.FieldPanel,{visible:!0}),Object(o.jsx)(I.Scrolling,{mode:"virtual"}),Object(o.jsx)(I.StateStoring,{enabled:!0,type:"custom",customLoad:function(){var t=w.a.get_parametro_usuario("PivotGridCubo_"+e.props.cubo_id);return!(!t||!t.fields)&&(setTimeout((function(){for(var a=0;a<t.fields.length;a++){var o=t.fields[a];o.summaryType&&e.state.datasourcePivot.field(a,{summaryType:o.summaryType,dataType:o.summaryType&&"count"!==o.summaryType?"number":null,format:"#,##0.##"})}e.state.datasourcePivot.load()})),t)},customSave:function(t){return w.a.set_parametro_usuario("PivotGridCubo_"+e.props.cubo_id,t)}})]},this.getKey())]})]})})})})}},{key:"onContextMenuPreparing",value:function(e){var t=this;if(e.field&&"data"===e.field.area){var a=[];D.forEach((function(o){a.push({text:o.text,selected:e.summaryType===o.value,onItemClick:function(){t.state.datasourcePivot.field(e.field?e.field.index:e.cell.dataSourceIndex,{summaryType:o.value,dataType:o.value&&"count"!==o.value?"number":null,format:"#,##0.##"}),t.state.datasourcePivot.load()}})})),e.items.push({text:"Tipo de Resumo",items:a})}}},{key:"handleOpcoesTipoColuna",value:function(e){var t={dataType:"string"};return+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA||+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA_HORA?(t.dataType=+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA?"date":"datetime",t.format=+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_DATA?"dd/MM/yyyy":"dd/MM/yyyy HH:mm",t.allowGrouping=!1,t.allowHeaderFiltering=!1):+e===window.CONSULTA_INTEGRACAO_TIPO_COLUNA.COLUNA_TIPO_NUMERO&&(t.dataType="number"),t}},{key:"exportarPivotGrid",value:function(){var e=this;w.a.obter_token_publico((function(t){var a=window.WS_URI+"/cubo/exportar_pivotgrid/?token_publico="+t+"&cubo_id="+e.props.cubo_id;window.open(a,"_blank")}))}}]),a}(b.a.Component);function M(e){return{html:"".concat(e.seriesName," | Total<div>").concat(e.originalValue,"</div>")}}k.defaultProps={abaTitulo:"Cubo"},t.default=k},890:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var o=a(380),i=a(398),n=a(389),r=function(){return new i.default({pageSize:20,key:"cargo_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){n.a.get({route:"cargo/listar/",data:Object(o.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(o.a)(Object(o.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){n.a.get({route:"cargo/listar/",data:{dx_grid:!0,cargo_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}},891:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(372),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(422),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(391),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(380),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(425),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(365),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(366),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(385),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(368),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(369),_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(367),react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(376),react__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__),react_dom__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(514),react_dom__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_12__),_datasource_Documento__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(687),_datasource_AssuntoDocumento__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(867),_datasource_TipoDocumento__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(868),_api_app__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(105),_api_view__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(408),_api_ws__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(389),_MenuHorizontal__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(1185),jquery__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(63),jquery__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_20__),devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(874),devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__),devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(465),devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_22__),devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(509),devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_23__),devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(508),devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_24__);function _createSuper(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_10__.a)(e);if(t()){var i=Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_10__.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_9__.a)(this,a)}}var ListagemDocumentos=function(_React$Component){Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__.a)(ListagemDocumentos,_React$Component);var _super=_createSuper(ListagemDocumentos);function ListagemDocumentos(props){var _this;Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__.a)(this,ListagemDocumentos),_this=_super.call(this,props),_this.verificaPermissaoGED=function(obj_atual,tipo_permissao){if(_api_app__WEBPACK_IMPORTED_MODULE_16__.a.sessao.dados.admin)return!0;var arr_permitido=["seguranca","exclusao","escrita","visualizacao","download","nova_revisao"];if(!arr_permitido.includes(tipo_permissao))return!1;var pasta_pai=_this.state.arrCurrentPath?_this.state.arrCurrentPath[_this.state.arrCurrentPath.length-1]:null;if(obj_atual&&tipo_permissao){if(!("N"!=obj_atual.controle_acessos&&0!=obj_atual.controle_acessos||"N"!=pasta_pai.controle_acessos&&0!=pasta_pai.controle_acessos))return!0;if("S"==obj_atual.controle_acessos||1==obj_atual.controle_acessos){var permissao_usuario=eval("obj_atual.usuario_permissao_"+tipo_permissao),permissao_grupo=eval("obj_atual.grupo_usuarios_permissao_"+tipo_permissao);return"S"==permissao_usuario||1==permissao_usuario||"S"==permissao_grupo||1==permissao_grupo}if("S"==pasta_pai.controle_acessos||1==pasta_pai.controle_acessos){var permissao_usuario=eval("pasta_pai.usuario_permissao_"+tipo_permissao),permissao_grupo=eval("pasta_pai.grupo_usuarios_permissao_"+tipo_permissao);return"S"==permissao_usuario||1==permissao_usuario||"S"==permissao_grupo||1==permissao_grupo}}return!1},_this.fileManagerRef=react__WEBPACK_IMPORTED_MODULE_11___default.a.createRef(),_this.state={fileItems:[],exibirExpirados:!1,exibirBloqueados:!1,exibirAtivos:!0,limite:0,permiteCarregarMais:!0,pesquisa:null,assuntoId:null,tipoDocumentoId:null,dataInicio:null,dataFim:null,centralDocumentosParams:null,contextMenuItemSelected:null,itemsSelected:{documentos:[],pastas:[],documentosNome:[],pastasNome:[],permissoes:{download:!1,exclusao:!1,visualizacao:!1,escrita:!1,seguranca:!1}},areaTransferencia:{tipo:null,documentos:[],pastas:[],documentosNome:[],pastasNome:[]},itemSelected:null,orderByNome:null,orderByAsc:!0,posicaoScrollTop:0},_this.newFileMenuOptions={items:[{text:"Novo Documento",icon:"plus",items:[{text:"Envio simples",tipo:"simples"},{text:"Envio m\xfaltiplo",tipo:"multiplo"}]}],onItemClick:_this.onItemClick.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this))},_this.newFolder={items:[{text:"Nova Pasta",icon:"newfolder",tipo:"pasta"}],onItemClick:_this.onItemClick.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this))},_this.refresh={icon:"refresh",hint:"Recarregar",onClick:function(){_this.recarregarPastaAtual(!1)}},_this.exibirExpirados=function(){return{icon:"event",hint:_this.state.exibirExpirados?"Ocultar Expirados":"Exibir Expirados",elementAttr:{style:_this.state.exibirExpirados?"background-color: rgba(0,0,0,.3);":""},onClick:function(){_this.setState({exibirExpirados:!_this.state.exibirExpirados}),_this.recarregarPastaAtual(!1)}}},_this.exibirBloqueados=function(){return{icon:"fas fa-ban",hint:_this.state.exibirBloqueados?"Ocultar Bloqueados":"Exibir Bloqueados",elementAttr:{style:_this.state.exibirBloqueados?"background-color: rgba(0,0,0,.3);":""},onClick:function(){_this.setState({exibirBloqueados:!_this.state.exibirBloqueados}),_this.recarregarPastaAtual(!1)}}},_this.exibirAtivos=function(){return{icon:"fas fa-check",hint:_this.state.exibirAtivos?"Ocultar Ativos e Pendentes":"Exibir Ativos e Pendentes",elementAttr:{style:_this.state.exibirAtivos?"background-color: rgba(0,0,0,.3);":""},onClick:function(){_this.setState({exibirAtivos:!_this.state.exibirAtivos}),_this.recarregarPastaAtual(!1)}}},_this.configuracoes={icon:"preferences",visible:_api_app__WEBPACK_IMPORTED_MODULE_16__.a.sessao.dados.admin,hint:"Configura\xe7\xf5es",onClick:function(){_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/configuracoes",(function(e,t){t.onclose=function(e){"undefined"==typeof e&&(e=!1),e&&_this.atualizarParametros()},t.show()}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.NAO)}};var loadDropDownButtonsItems=function(){var e;if("function"!==typeof(null===_api_app__WEBPACK_IMPORTED_MODULE_16__.a||void 0===_api_app__WEBPACK_IMPORTED_MODULE_16__.a||null===(e=_api_app__WEBPACK_IMPORTED_MODULE_16__.a.PE)||void 0===e?void 0:e.Listagem_Documentos_Botoes_Toolbar))return[];var t=_api_app__WEBPACK_IMPORTED_MODULE_16__.a.PE.Listagem_Documentos_Botoes_Toolbar();return Array.isArray(t)?t:[]};return _this.dropDownButtonsOptions={text:"Mais op\xe7\xf5es",displayExpr:"name",valueExpr:"id",width:150,onItemClick:function(e){var t;"function"===typeof(null===(t=e.itemData)||void 0===t?void 0:t.itemClick)?e.itemData.itemClick(e,Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)):window.alert_info("Nenhuma a\xe7\xe3o de clique configurada para este bot\xe3o.")},items:loadDropDownButtonsItems()},_this.btnCarregarMaisOnClick=function(){_this.state.permiteCarregarMais?(_this.setState({limite:_this.state.limite+50}),_this.recarregarPastaAtual(!0)):window.alertaPopUp("Aten\xe7\xe3o","<p>N\xe3o existem mais registros para serem carregados nesta pasta.</p>")},_this.fnColar=function(e){var t=_this.state.arrCurrentPath?_this.state.arrCurrentPath[_this.state.arrCurrentPath.length-1]:null;if(_this.verificaPermissaoGED(t,"escrita"))if(_this.state.areaTransferencia.pastas.length>0||_this.state.areaTransferencia.documentos.length>0){var a=_this.state.arrCurrentPath?_this.state.arrCurrentPath[_this.state.arrCurrentPath.length-1]:{},o="recorte"==_this.state.areaTransferencia.tipo?"Mover arquivos":"Copiar Arquivos",i="Tem certeza que deseja "+("recorte"==_this.state.areaTransferencia.tipo?"mover":"copiar")+" esses arquivos?<br><br>"+(_this.state.areaTransferencia.pastasNome.length>0?_this.state.areaTransferencia.pastasNome.join("<br>")+"<br>":"")+(_this.state.areaTransferencia.documentosNome.length>0?_this.state.areaTransferencia.documentosNome.join("<br>"):"");window.alertaPopUp(o,i,"Sim",(function(){var t=0;if(!(t=e?a.id||0:_this.state.itemsSelected.pastas[0]||a.id||0))return window.alertaPopUp("Valida\xe7\xe3o","Falha ao colar os arquivos. A pasta de destino n\xe3o foi informada."),!1;_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(_this.state.areaTransferencia.pastas),documentos:JSON.stringify(_this.state.areaTransferencia.documentos),colar:!0,option:_this.state.areaTransferencia.tipo,pasta_destino_id:t},(function(){_this.recarregarPastaAtual(),window.alert_saved("Arquivos "+("recorte"==_this.state.areaTransferencia.tipo?"movidos":"copiados")+" com sucesso"),"recorte"==_this.state.areaTransferencia.tipo&&_this.setState({areaTransferencia:{tipo:null,pastas:[],documentos:[],pastasNome:[],documentosNome:[]}})}))}),"N\xe3o")}else window.alertaPopUp("Aten\xe7\xe3o","<p>N\xe3o existem registros para serem colados.</p>");else window.alertaPopUp("Aten\xe7\xe3o","<p>Voc\xea n\xe3o possui permiss\xe3o de escrever nessa pasta.</p>")},_this.colar={icon:"fa fa-clipboard",hint:"Colar na pasta atual",onClick:function(){_this.fnColar(!0)}},_this.exportar={hint:"Exportar",items:[{icon:"export",items:[{text:"Documentos desta pasta (XLSX)",icon:"exportxlsx",tipo:"pasta_atual_xlsx"},{text:"Documentos desta pasta (CSV)",icon:"fas fa-file-csv",tipo:"pasta_atual_csv"},{text:"Documentos desta pasta e sub pastas (XLSX)",icon:"exportxlsx",tipo:"pasta_atual_subpastas_xlsx"},{text:"Documentos desta pasta e sub pastas (CSV)",icon:"fas fa-file-csv",tipo:"pasta_atual_subpastas_csv"}]}],onItemClick:_this.onItemClick.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this))},_this.onCurrentDirectoryChanged=_this.onCurrentDirectoryChanged.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.carregarDados=_this.carregarDados.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.renderArvore=_this.renderArvore.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.onItemClick=_this.onItemClick.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.recarregarPastaAtual=_this.recarregarPastaAtual.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.onContextMenuShowing=_this.onContextMenuShowing.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.onSelectionChanged=_this.onSelectionChanged.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.adicionarEventoOrdenacao=_this.adicionarEventoOrdenacao.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.favoritosAdicionarClick=_this.favoritosAdicionarClick.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this.favoritosRemoverClick=_this.favoritosRemoverClick.bind(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.a)(_this)),_this}return Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__.a)(ListagemDocumentos,[{key:"componentDidMount",value:function(){this.atualizarParametros()}},{key:"atualizarParametros",value:function(){var e=this;_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.get("documento/get_parametros/",null,(function(t){e.setState({centralDocumentosParams:t}),e.recarregarPastaAtual(!1)}))}},{key:"detalharPasta",value:function(e,t){var a=this,o=function(t){"undefined"==typeof t&&(t=!1),t&&a.carregarDados(e.id)};_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/pasta",(function(a,i){i.pasta_notificacao=null!=e&&"undefined"!=typeof e.notificar_por_email&&null!=e.notificar_por_email&&e.notificar_por_email||!1,i.onclose=o,i.show(t===window.FORMULARIO.NOVO?null:e.id,t,e)}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.MULTIPLAS)}},{key:"detalharDocumento",value:function(e,t,a,o){var i=this,n=function(e){"undefined"==typeof e&&(e=!1),e&&i.carregarDados(t)};_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/documento",(function(i,r){r.onclose=n,r.show(e,a,t,null,o)}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.MULTIPLAS)}},{key:"carregarDados",value:function(){var e=Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__.a)(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t,a,o){var i,n,r,s,c,l,d,u,p,f,m;return _Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.fileManagerRef.current.instance._itemView._filesView.getScrollable(),n=i&&a?this.fileManagerRef.current.instance._itemView._filesView.getScrollable().scrollTop():0,r={documentoPastaID:t,exibirExpirados:this.state.exibirExpirados,exibirBloqueados:this.state.exibirBloqueados,exibirAtivos:this.state.exibirAtivos,limite:a?this.state.limite:0,pesquisa:this.state.pesquisa,assuntoId:this.state.assuntoId,tipoDocumentoId:this.state.tipoDocumentoId,dataInicio:this.state.dataInicio,dataFim:this.state.dataFim,orderByNome:this.state.orderByNome,orderByAsc:this.state.orderByAsc},e.next=5,Object(_datasource_Documento__WEBPACK_IMPORTED_MODULE_13__.a)(r);case 5:for(s=e.sent,c=[],l=0;l<s.pastas.length;l++)d=s.pastas[l],u=d.nome,window.verifica_favorito("pastas",d.atalho_documento_pasta_id>0?d.atalho_documento_pasta_id:d.documento_pasta_id)&&(u+=" ((Favorito))"),d.atalho_documento_pasta_id>0&&(u+=" ((Atalho))"),c.push(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({name:u.replaceAll("/","\u29f8"),isDirectory:!0},d));for(p=0;p<s.documentos.length;p++)f=s.documentos[p],m=f.nome,window.verifica_favorito("documentos",f.atalho_documento_id>0?f.atalho_documento_id:f.documento_id)&&(m+=" ((Favorito))"),f.atalho_documento_id>0&&(m+=" ((Atalho))"),f.revisao_data_envio&&(f.revisao_data_envio=f.revisao_data_envio.format_date()),c.push(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({name:m,isDirectory:!1,size:f.revisao_tamanho},f));s.pasta_atual_predecessoras.unshift(s.pasta_atual),s.pasta_atual_predecessoras.reverse(),this.setState({fileItems:a?[].concat(Object(_Users_renato_Sites_bp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.a)(this.state.fileItems),c):c,arrCurrentPath:s.pasta_atual_predecessoras,limite:a?this.state.limite:0,permiteCarregarMais:!(s.pastas.length<50&&s.documentos.length<50),totalizador:s.totalizador_geral,posicaoScrollTop:n},(function(){"function"===typeof o&&o()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,a,o){return e.apply(this,arguments)}}()},{key:"onItemClick",value:function(e){var t=this,a=e.itemData,o=(e.viewArea,e.fileSystemItem),i=this.state.arrCurrentPath[this.state.arrCurrentPath.length-1];if("pasta"===a.tipo)this.detalharPasta(i,window.FORMULARIO.NOVO);else if("simples"===a.tipo)this.detalharDocumento(null,i.id,window.FORMULARIO.NOVO,!1);else if("multiplo"===a.tipo)_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("upload/envio_multiplo",(function(e,a){a.onclose=function(){t.carregarDados(i.id)},a.show(i.id)}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.SIM);else if("pasta_atual_xlsx"===a.tipo||"pasta_atual_csv"===a.tipo||"pasta_atual_subpastas_xlsx"===a.tipo||"pasta_atual_subpastas_csv"===a.tipo)window.alertaPopUp("Relat\xf3rio de documentos","<h4>Por favor, aguarde!</h4> <p>O relat\xf3rio de documentos est\xe1 sendo gerado. Quanto maior a quantidade de arquivos, maior o tempo que o relat\xf3rio levar\xe1 para ser processado.</p> <p>Voc\xea pode fechar esta janela a qualquer momento.</p>"),_api_app__WEBPACK_IMPORTED_MODULE_16__.a.obter_token_publico((function(e){_api_app__WEBPACK_IMPORTED_MODULE_16__.a.download(window.WS_URI+"documento/gera_excel_pasta/?documento_pasta_id="+i.id+"&subpastas="+("pasta_atual_subpastas_xlsx"===a.tipo||"pasta_atual_subpastas_csv"===a.tipo?"S":"N")+"&extensao="+("pasta_atual_xlsx"===a.tipo||"pasta_atual_subpastas_xlsx"===a.tipo?"xlsx":"csv")+"&token_publico="+e)}));else if("propriedades"===a.tipo)o.dataItem.isDirectory?(o.dataItem.id=o.dataItem.documento_pasta_id,this.detalharPasta(o.dataItem,window.FORMULARIO.EDITAR)):this.detalharDocumento(o.dataItem.documento_id,o.dataItem.documento_pasta_id,window.FORMULARIO.EDITAR,!1);else if("abrir_pasta"===a.tipo)this.carregarDados(o.dataItem.documento_pasta_id);else if("download_zip"===a.tipo)window.alert_info("Aguarde alguns segundos para que o download seja iniciado. Quanto mais arquivos, mais demorado ser\xe1 para gerar um arquivo ZIP."),_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.get({route:"documento/solicitar_download_zip/",data:{pastas:this.state.itemsSelected.pastas.join(),documentos:this.state.itemsSelected.documentos.join()},func_response:function(e){"undefined"!=typeof e.nome_arquivo_zip&&_api_app__WEBPACK_IMPORTED_MODULE_16__.a.obter_token_publico((function(t){_api_app__WEBPACK_IMPORTED_MODULE_16__.a.download(window.WS_URI+"documento/download_zip/?nome_arquivo_zip="+e.nome_arquivo_zip+"&token_publico="+t)}))}});else if("compactar_zip"===a.tipo)_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.get({route:"documento/compactar_zip/",data:{pastas:this.state.itemsSelected.pastas.join(),documentos:this.state.itemsSelected.documentos.join(),documento_pasta_id:i.id},func_response:function(e){t.recarregarPastaAtual(!1,(function(){t.fileManagerRef.current.instance.resetOption("selectedItemKeys"),t.fileManagerRef.current.instance.option("selectedItemKeys",[e.nome]),t.fileManagerRef.current.instance.option("focusedItemKey",e.nome)}))}});else if("exclusao"===a.tipo){var n="Tem certeza que deseja mover esses arquivos para a lixeira?<br><br>"+(this.state.itemsSelected.pastasNome.length>0?this.state.itemsSelected.pastasNome.join("<br>")+"<br>":"")+(this.state.itemsSelected.documentosNome.length>0?this.state.itemsSelected.documentosNome.join("<br>"):"");window.alertaPopUp("Excluir",n,"Sim",(function(){_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.post("documento/gerenciar_selecionados",{pastas:JSON.stringify(t.state.itemsSelected.pastas),documentos:JSON.stringify(t.state.itemsSelected.documentos),excluir:!0},(function(){t.recarregarPastaAtual(!1),window.alert_saved("Arquivos exclu\xeddos com sucesso")}))}),"N\xe3o")}else if("copiar"===a.tipo||"recorte"===a.tipo)this.setState({areaTransferencia:{tipo:a.tipo,pastas:this.state.itemsSelected.pastas,documentos:this.state.itemsSelected.documentos,pastasNome:this.state.itemsSelected.pastasNome,documentosNome:this.state.itemsSelected.documentosNome}});else if("colar"===a.tipo)this.fnColar(!1);else if("criar_atalho"===a.tipo)_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/selecionar_pasta",(function(e,a){a.show((function(e){_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.post("documento/salvar_atalho",{pastas:JSON.stringify(t.state.itemsSelected.pastas),documentos:JSON.stringify(t.state.itemsSelected.documentos),predecessor_id:e},(function(e){t.recarregarPastaAtual(),1==e.atalhos.length?window.alert_saved('Atalho criado com sucesso em "'+e.predecessor.path+'"'):window.alert_saved(e.atalhos.length+' atalhos criados com sucesso em "'+e.predecessor.path+'"')}))}),null)}));else if("download"===a.tipo)_api_app__WEBPACK_IMPORTED_MODULE_16__.a.obter_token_publico((function(e){_api_app__WEBPACK_IMPORTED_MODULE_16__.a.download(window.WS_URI+"documento/download/?&documento_id="+t.state.itemsSelected.documentos[0]+"&token_publico="+e)}));else if("nova_revisao"===a.tipo)this.detalharDocumento(o.dataItem.documento_id,o.dataItem.documento_pasta_id,window.FORMULARIO.EDITAR,!0);else if("bloquear"===a.tipo)_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.get("documento/situacao_ultima_revisao/",{documento_id:o.dataItem.atalho_documento_id>0?o.dataItem.atalho_documento_id:o.dataItem.documento_id},(function(e){if(null==e)window.alertaPopUp("Aten\xe7\xe3o !",'<div class="alert alert-danger" style="text-align: center"> <span href="#" class="alert-link"><strong>N\xe3o \xe9 possivel bloquear documentos com revis\xf5es </strong>pendentes<strong></span></div>');else if("N"!=e||t.state.centralDocumentosParams.documentos_permitir_bloquear_reprovados){var a=null,i=null;"S"==o.dataItem.bloqueado?(a="N",i='Tem certeza que deseja desbloquear o arquivo "'+o.dataItem.nome+'"?'):"N"!=o.dataItem.bloqueado&&""!=o.dataItem.bloqueado||(a="S",i='Tem certeza que deseja bloquear o arquivo "'+o.dataItem.nome+'"?'),window.alertaPopUp("Documentos",i,"Sim",(function(){"N"==a?_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.post("documento/salva_motivo_bloqueio",{bloqueado:a,documento_id:o.dataItem.atalho_documento_id>0?o.dataItem.atalho_documento_id:o.dataItem.documento_id},(function(e){t.recarregarPastaAtual(!1),window.alert_saved("Salvo com sucesso")})):_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/selecao_motivo",(function(e,i){i.show(o.dataItem.atalho_documento_id>0?o.dataItem.atalho_documento_id:o.dataItem.documento_id,a),i.onsave=function(){t.recarregarPastaAtual(!1)}}))}),"N\xe3o")}else window.alertaPopUp("Aten\xe7\xe3o !",'<div class="alert alert-danger" style="text-align: center"> <span href="#" class="alert-link"><strong>N\xe3o \xe9 possivel bloquear documentos com a ultima revis\xe3o </strong>reprovada<strong></span></div>')}));else if("visualizar"===a.tipo||"visualizar_aba"===a.tipo)if(o.dataItem.documento_revisao_id)if(this.state.itemsSelected.permissoes.visualizacao){var r=o.dataItem.documento_revisao_id,s=o.dataItem.documento_id,c=o.dataItem.nome,l=o.dataItem.bloqueado,d=o.dataItem.utilizar_controle_distribuicao,u=this.state.itemsSelected.permissoes.download;"application/pdf"===o.dataItem.mime_type?"visualizar"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/visualizar_pdf",(function(e,t){t.show(r,null,s,"S","S",l,d,u)})):"visualizar_aba"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_17__.a.loadReact(window.components.VisualizarPDFAba.default,{documento_revisao_id:r,documento_id:s,permissao_download:u,abaTitulo:"PDF: ".concat(c)}):o.dataItem.mime_type.includes("image/")?"visualizar"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/visualizar_documento",(function(e,t){t.show(r,s,"S","S",l,d,u)})):"visualizar_aba"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_17__.a.loadReact(window.components.VisualizarImagemAba.default,{documento_revisao_id:r,documento_id:s,documento_nome:c,abaTitulo:"IMG: ".concat(c)}):o.dataItem.mime_type.includes("video/")&&("visualizar"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/visualizar_video",(function(e,t){t.show(r,s,"S","S",l,d,u)})):"visualizar_aba"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_17__.a.loadReact(window.components.VisualizarVideoAba.default,{documento_revisao_id:r,documento_id:s,documento_nome:c,abaTitulo:"V\xeddeo: ".concat(c)}))}else window.alertaPopUp("Valida\xe7\xe3o","Voc\xea n\xe3o possui permiss\xe3o para visualizar o documento.");else window.alertaPopUp("Valida\xe7\xe3o","A visualiza\xe7\xe3o deste documento n\xe3o est\xe1 dispon\xedvel.");else if("gerar_url_acesso"===a.tipo){var p=null,f=function(e){(p=window.DevExpress.ui.dialog.custom({title:"Link de acesso",messageHtml:"Abaixo, o link de acesso: <br><br> <a href="+e+" target='_blank'>"+e+"</a>",buttons:[{text:"OK",onClick:function(){p&&p.hide()}},{text:"Copiar link",onClick:function(t){window.copyToClipboard(e)}}]})).show()};o.dataItem.isDirectory?f(_api_app__WEBPACK_IMPORTED_MODULE_16__.a.sessao.dados.app_url+"/#/documento/pasta/"+o.dataItem.documento_pasta_id):f(_api_app__WEBPACK_IMPORTED_MODULE_16__.a.sessao.dados.app_url+"/#/documento/detalhe/"+o.dataItem.documento_id)}else if("gerar_url_download"===a.tipo){var m=function(){_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.post("documento/gerar_url_download/",{documento_id:o.dataItem.documento_id},(function(e){window.alert_saved("URL de download do arquivo gerada com sucesso!"),h(e)}))},_=null,h=function(e){(_=window.DevExpress.ui.dialog.custom({title:"Link de download",messageHtml:"Abaixo, o link de download para o documento: <br><br> <a href="+e+" target='_blank'>"+e+"</a> <br><br> <small>* Com esse link, qualquer usu\xe1rio poder\xe1 realizar o download do documento, mesmo que ele n\xe3o tenha cadastro no Next BP.</small> <br> <small>* Gerar um novo link ir\xe1 impossibilitar o download do documento pelo link atual.</small>",buttons:[{text:"OK",onClick:function(){_&&_.hide()}},{text:"Gerar novo link",onClick:function(e){_&&_.hide(),m()}},{text:"Copiar link",onClick:function(t){window.copyToClipboard(e)}}]})).show()};_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.get("documento/verificar_url_download/",{documento_revisao_id:o.dataItem.documento_revisao_id},(function(e){e?h(e):(_&&_.hide(),m())}))}else"assinaturas_clicksign"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("clicksign/detalhes",(function(e,t){t.show(o.dataItem.documento_revisao_id,o.dataItem),t.onclose=onclose}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.SIM):"assinaturas_certsign"===a.tipo?_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("certsign/detalhes",(function(e,t){t.show(o.dataItem.documento_revisao_id,o.dataItem),t.onclose=onclose}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.SIM):"assinaturas_d4sign"===a.tipo&&_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("d4sign/detalhes",(function(e,t){t.show(o.dataItem.documento_revisao_id,o.dataItem),t.onclose=onclose}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.MULTIPLAS)}},{key:"adicionarEventoSituacao",value:function(e){var t=this;e.element.find(".dx-filemanager-details").find(".dx-scrollable-container").on("scroll",(function(){setTimeout((function(){t.adicionarZebra(e),t.adicionarCoresSituacao(e),t.adicionarIcones(e),t.adicionarEventoOrdenacao(e)}),500),t.adicionarZebra(e),t.adicionarCoresSituacao(e),t.adicionarIcones(e),t.adicionarEventoOrdenacao(e)})),this.adicionarZebra(e),this.adicionarCoresSituacao(e),this.adicionarIcones(e),this.adicionarEventoOrdenacao(e),e.component.element().find(".dx-drawer-panel-content.dx-overlay.dx-widget.dx-visibility-change-handler").hide()}},{key:"adicionarEventoOrdenacao",value:function(e){var t=this;e.element.find("[role='columnheader'].thumbnailDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].tagDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].situacaoRevDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].vigenciaDoc").css("pointer-events","none"),e.element.find("[role='columnheader'].codigoDoc").off("click").on("click",(function(){t.setState({orderByNome:"codigo",orderByAsc:"codigo"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].nomeDoc").off("click").on("click",(function(){t.setState({orderByNome:"nome",orderByAsc:"nome"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].assuntoDoc").off("click").on("click",(function(){t.setState({orderByNome:"assunto",orderByAsc:"assunto"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].tipoDoc").off("click").on("click",(function(){t.setState({orderByNome:"tipo_documento",orderByAsc:"tipo_documento"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].versaoDoc").off("click").on("click",(function(){t.setState({orderByNome:"versao",orderByAsc:"versao"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].tamanhoDoc").off("click").on("click",(function(){t.setState({orderByNome:"tamanho",orderByAsc:"tamanho"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)})),e.element.find("[role='columnheader'].modificacaoDoc").off("click").on("click",(function(){t.setState({orderByNome:"modificacao",orderByAsc:"modificacao"!==t.state.orderByNome||!t.state.orderByAsc,fileItems:[]}),t.recarregarPastaAtual(!1)}));var a=this.state.orderByAsc?"dx-sort-up":"dx-sort-down";"codigo"===this.state.orderByNome?e.element.find("[role='columnheader'].codigoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"nome"===this.state.orderByNome?e.element.find("[role='columnheader'].nomeDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"assunto"===this.state.orderByNome?e.element.find("[role='columnheader'].assuntoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"tipo_documento"===this.state.orderByNome?e.element.find("[role='columnheader'].tipoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"versao"===this.state.orderByNome?e.element.find("[role='columnheader'].versaoDoc .dx-sort").removeClass("dx-sort-none").addClass(a):"tamanho"===this.state.orderByNome&&e.element.find("[role='columnheader'].tamanhoDoc .dx-sort").removeClass("dx-sort-none").addClass(a)}},{key:"adicionarZebra",value:function(e){for(var t=e.element.find(".dx-data-row"),a=0;a<t.length;a++){var o=t[a];a%2!==0?jquery__WEBPACK_IMPORTED_MODULE_20___default()(o).addClass("dx-row-alt"):jquery__WEBPACK_IMPORTED_MODULE_20___default()(o).removeClass("dx-row-alt")}}},{key:"adicionarCoresSituacao",value:function(e){e.element.find(".situacaoRevDoc:contains('Bloqueado')").addClass("bg-label-danger").prepend(jquery__WEBPACK_IMPORTED_MODULE_20___default()('<i class="fa fa-ban"></i>')),e.element.find(".situacaoRevDoc:contains('Expirado')").addClass("bg-label-default"),e.element.find(".situacaoRevDoc:contains('Pendente')").addClass("bg-label-warning"),e.element.find(".situacaoRevDoc:contains('Reprovado')").addClass("bg-label-danger"),e.element.find(".situacaoRevDoc:contains('Ativo')").addClass("bg-label-success"),e.element.find(".situacaoRevDoc:contains('Arquivo n\xe3o enviado')").addClass("bg-label-default")}},{key:"adicionarIcones",value:function(e){var t=e.element.find(".nomeDoc").closest("tr").not(".dx-header-row");jquery__WEBPACK_IMPORTED_MODULE_20___default()(t).each((function(e,t){var a=jquery__WEBPACK_IMPORTED_MODULE_20___default()(t).find(".thumbnailDoc");if(a.css("text-align","left"),!(a.find(".div_info").length>0)){a.append('<div class="div_info" style="display: inline-flex"><div class="div_info_icones" style="display: inline-flex; flex-direction: column; row-gap: 2px;"></div></div>');var o=jquery__WEBPACK_IMPORTED_MODULE_20___default()(t).find(".nomeDoc:contains('((Atalho))')").length>0,i=jquery__WEBPACK_IMPORTED_MODULE_20___default()(t).find(".nomeDoc:contains('((Favorito))')").length>0,n=a.find(".div_info"),r=a.find("i");r.detach(),r.prependTo(n);var s=n.find(".div_info_icones"),c=jquery__WEBPACK_IMPORTED_MODULE_20___default()(t).find(".dx-filemanager-details-item-name-wrapper");i&&0===s.find(".img_favorito").length&&(s.append('<i class="far fa-star img_favorito" style="font-size: 7px;" title="Favorito"></i>'),jquery__WEBPACK_IMPORTED_MODULE_20___default()(c).text(jquery__WEBPACK_IMPORTED_MODULE_20___default()(c).text().replace(/\(\(Favorito\)\)/g,"").trim())),o&&0===s.find(".img_atalho").length&&(s.append('<i class="fa fa-external-link-alt img_atalho" style="font-size: 7px;" title="Atalho"></i>'),jquery__WEBPACK_IMPORTED_MODULE_20___default()(c).text(jquery__WEBPACK_IMPORTED_MODULE_20___default()(c).text().replace(/\(\(Atalho\)\)/g,"").trim()))}}))}},{key:"onContextMenuShowing",value:function(e){e.fileSystemItem&&this.setState({contextMenuItemSelected:e.fileSystemItem.dataItem})}},{key:"onSelectionChanged",value:function(e){for(var t=null,a=[],o=[],i=[],n=[],r=[],s=[],c={download:!0,exclusao:!0,visualizacao:!0,escrita:!0,seguranca:!0,nova_revisao:!1},l=0;l<e.selectedItems.length;l++){var d=e.selectedItems[l];d.isDirectory?(o.push(d.dataItem.documento_pasta_id),n.push(d.dataItem.nome),d.dataItem.atalho_documento_pasta_id>0&&s.push({index:l,documento_pasta_id:d.dataItem.documento_pasta_id,atalho_documento_pasta_id:d.dataItem.atalho_documento_pasta_id})):(a.push(d.dataItem.documento_id),i.push(d.dataItem.nome),d.dataItem.atalho_documento_id>0&&r.push({index:l,documento_id:d.dataItem.documento_id,atalho_documento_id:d.dataItem.atalho_documento_id})),1===e.selectedItems.length&&(t=d),c.download=this.verificaPermissaoGED(d.dataItem,"download"),c.exclusao=this.verificaPermissaoGED(d.dataItem,"exclusao"),c.visualizacao=this.verificaPermissaoGED(d.dataItem,"visualizacao"),c.escrita=this.verificaPermissaoGED(d.dataItem,"escrita"),c.seguranca=this.verificaPermissaoGED(d.dataItem,"seguranca"),c.nova_revisao=this.verificaPermissaoGED(d.dataItem,"nova_revisao")}this.setState({itemsSelected:{pastas:o,documentos:a,pastasNome:n,documentosNome:i,pastasAtalho:s,documentosAtalho:r,permissoes:c},itemSelected:t})}},{key:"onCurrentDirectoryChanged",value:function(e){if(e.directory.dataItem){this.carregarDados(e.directory.dataItem.documento_pasta_id);var t=e.component.element().find(".dx-menu-items-container").last();react_dom__WEBPACK_IMPORTED_MODULE_12___default.a.render(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_MenuHorizontal__WEBPACK_IMPORTED_MODULE_19__.a,{}),t[0])}}},{key:"renderArvore",value:function(e){var t=this;e.jstree({contextmenu:{items:{Abrir:{label:"Abrir",icon:"fa fa-folder-open",action:function(e){var a=jquery__WEBPACK_IMPORTED_MODULE_20___default()(e.reference).jstree(!0).get_node(jquery__WEBPACK_IMPORTED_MODULE_20___default()(e.reference).jstree(!0).get_selected()).original.pasta_id;t.carregarDados(a)}},Propriedades:{label:"Propriedades",icon:"fa fa-edit",action:function(e){var a=jquery__WEBPACK_IMPORTED_MODULE_20___default()(e.reference).jstree(!0).get_node(jquery__WEBPACK_IMPORTED_MODULE_20___default()(e.reference).jstree(!0).get_selected()).original.pasta_id;_api_view__WEBPACK_IMPORTED_MODULE_17__.a.load("central_documentos/pasta",(function(e,o){o.onclose=function(e){"undefined"==typeof e&&(e=!1),e&&t.carregarDados(a)},o.show(a,window.FORMULARIO.EDITAR)}),_api_view__WEBPACK_IMPORTED_MODULE_17__.a.ABA.MULTIPLAS)}}}},types:{default:{icon:"far fa-folder"},"f-open":{icon:"far fa-folder-open"},"f-closed":{icon:"far fa-folder"}},plugins:["json_data","contextmenu","sort","types"],core:{check_callback:!0,data:function(e,t){var a;a="#"==e.id?null:e.original.pasta_id,_api_ws__WEBPACK_IMPORTED_MODULE_18__.a.get("documento/listar_arvore_pastas/",{documento_pasta_id:a,estrutura_completa:"N"},(function(e){t(e)}))},themes:{icons:!0}}}),e.unbind("hover_node.jstree").on("hover_node.jstree",(function(e,t){jquery__WEBPACK_IMPORTED_MODULE_20___default()(e.target).find("#"+t.node.id).prop("title",t.node.text)})),e.unbind("open_node.jstree").on("open_node.jstree",(function(e,t){t.instance.set_type(t.node,"f-open")})),e.unbind("close_node.jstree").on("close_node.jstree",(function(e,t){t.instance.set_type(t.node,"f-closed")})),e.unbind("select_node.jstree").on("select_node.jstree",(function(a){var o=window.event||a,i=o.which||o.button;if(1!=i&&"undefined"!=typeof i)return!1;t.carregarDados(e.jstree("get_selected").toString())}));var a=1;e.on("loaded.jstree",(function(){t.state.arrCurrentPath&&t.state.arrCurrentPath.length>1&&o()}));var o=function o(){if(!(a>=t.state.arrCurrentPath.length)){var i=t.state.arrCurrentPath[a];e.jstree("open_node",i.id,(function(){a++,o()}))}}}},{key:"recarregarPastaAtual",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.state.arrCurrentPath?this.state.arrCurrentPath[this.state.arrCurrentPath.length-1].id:null!==(e=this.props.documentoPastaId)&&void 0!==e?e:null;this.carregarDados(o||null,t,a)}},{key:"renderCarregarMaisRegistros",value:function(e){var t=jquery__WEBPACK_IMPORTED_MODULE_20___default()('<a href="#"><i class="dx-icon fas fa-folder-plus" style="font-size: 16px;"></i>&nbsp;Carregar mais registros</a>');t.on("click",this.btnCarregarMaisOnClick);var a=jquery__WEBPACK_IMPORTED_MODULE_20___default()('<div class="dx-filemanager-rodape" style="height: 35px; order: 10; padding: 6px 20px; text-align: center; position: relative;"></div>'),o=jquery__WEBPACK_IMPORTED_MODULE_20___default()('<div id="contador" style="position: absolute; top: 6px; right: 0; font-size: 14px; padding: 4px 8px; color: #333;"><span id="contador-numero" style="font-weight: bold;">'+this.state.fileItems.length+" de "+this.state.totalizador+" registros</span></div>");a.append(t),a.append(o),e.find(".dx-filemanager-items-panel .dx-filemanager-rodape").remove(),e.find(".dx-filemanager-items-panel").append(a),this.state.permiteCarregarMais?t.show():t.hide()}},{key:"substituirAtalhos",value:function(e,t){for(var a=0;a<t.length;a++){var o=t[a];if(+e==+(o.documento_id||o.documento_pasta_id))return+(o.atalho_documento_id||o.atalho_documento_pasta_id)}return+e}},{key:"favoritosAdicionarExibir",value:function(){for(var e=0;e<this.state.itemsSelected.pastas.length;e++){if(!window.verifica_favorito("pastas",this.substituirAtalhos(this.state.itemsSelected.pastas[e],this.state.itemsSelected.pastasAtalho)))return!0}for(var t=0;t<this.state.itemsSelected.documentos.length;t++){if(!window.verifica_favorito("documentos",this.substituirAtalhos(this.state.itemsSelected.documentos[t],this.state.itemsSelected.documentosAtalho)))return!0}return!1}},{key:"favoritosRemoverExibir",value:function(){for(var e=0;e<this.state.itemsSelected.pastas.length;e++){if(window.verifica_favorito("pastas",this.substituirAtalhos(this.state.itemsSelected.pastas[e],this.state.itemsSelected.pastasAtalho)))return!0}for(var t=0;t<this.state.itemsSelected.documentos.length;t++){if(window.verifica_favorito("documentos",this.substituirAtalhos(this.state.itemsSelected.documentos[t],this.state.itemsSelected.documentosAtalho)))return!0}return!1}},{key:"favoritarItens",value:function(e){for(var t=[],a=0;a<this.state.itemsSelected.pastas.length;a++)t.push({tipo:"pastas",id:this.substituirAtalhos(this.state.itemsSelected.pastas[a],this.state.itemsSelected.pastasAtalho)});for(var o=0;o<this.state.itemsSelected.documentos.length;o++)t.push({tipo:"documentos",id:this.substituirAtalhos(this.state.itemsSelected.documentos[o],this.state.itemsSelected.documentosAtalho)});window.favoritar_itens(t,e),this.recarregarPastaAtual()}},{key:"favoritosAdicionarClick",value:function(){this.favoritarItens(!0)}},{key:"favoritosRemoverClick",value:function(){this.favoritarItens(!1)}},{key:"render",value:function(){var e=this;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react__WEBPACK_IMPORTED_MODULE_11___default.a.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"row",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-md-3",style:{paddingRight:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_text_box__WEBPACK_IMPORTED_MODULE_22___default.a,{className:"dx-theme-background-color",label:"Filtro por nome, tag ou c\xf3digo",labelMode:"static",onValueChanged:function(t){e.setState({pesquisa:t.value}),e.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-md-3",style:{paddingRight:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_23___default.a,{label:"Filtro por assunto",labelMode:"static",className:"dx-theme-background-color",displayExpr:"descricao",valueExpr:"assunto_id",dataSource:Object(_datasource_AssuntoDocumento__WEBPACK_IMPORTED_MODULE_14__.a)(),showClearButton:!0,onValueChanged:function(t){e.setState({assuntoId:t.value}),e.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-md-3",style:{paddingRight:"0px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_select_box__WEBPACK_IMPORTED_MODULE_23___default.a,{label:"Filtro por tipo do documento",labelMode:"static",className:"dx-theme-background-color",displayExpr:"nome",valueExpr:"tipo_documento_id",dataSource:Object(_datasource_TipoDocumento__WEBPACK_IMPORTED_MODULE_15__.a)(),showClearButton:!0,onValueChanged:function(t){e.setState({tipoDocumentoId:t.value}),e.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"col-md-3",style:{padding:"0px"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-md-6",style:{paddingRight:"5px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_24___default.a,{label:"De",labelMode:"static",className:"dx-theme-background-color",type:"date",showClearButton:!0,onValueChanged:function(t){e.setState({dataInicio:window.formatDate(t.value,!0)}),e.state.dataInicio&&e.state.dataFim&&e.recarregarPastaAtual(!1)}})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-md-6",style:{paddingLeft:"5px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_date_box__WEBPACK_IMPORTED_MODULE_24___default.a,{label:"At\xe9",labelMode:"static",className:"dx-theme-background-color",type:"date",showClearButton:!0,onValueChanged:function(t){e.setState({dataFim:window.formatDate(t.value,!0)}),(e.state.dataInicio&&e.state.dataFim||null===e.state.dataInicio&&null===e.state.dataFim)&&e.recarregarPastaAtual(!1)}})})]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"row",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"col-md-12",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21___default.a,{ref:this.fileManagerRef,className:"dx-theme-background-color",style:{height:"calc(100vh - 75px)"},rootFolderName:"Raiz",fileSystemProvider:this.state.fileItems,onContextMenuItemClick:this.onItemClick,onContextMenuShowing:this.onContextMenuShowing,onSelectionChanged:this.onSelectionChanged,onCurrentDirectoryChanged:this.onCurrentDirectoryChanged,onOptionChanged:function(t){"itemView"===t.name&&"details"===t.value&&setTimeout((function(){e.adicionarEventoSituacao(t)}),500)},onContentReady:function(t){var a=t.component.element().find(".dx-menu-items-container").last();react_dom__WEBPACK_IMPORTED_MODULE_12___default.a.render(Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_MenuHorizontal__WEBPACK_IMPORTED_MODULE_19__.a,{arrCurrentPath:e.state.arrCurrentPath,fnCarregarDados:e.carregarDados}),a[0]),setTimeout((function(){var a=t.component.element().find(".dx-filemanager-dirs-panel").find(".dx-scrollable-content"),o=e.state.posicaoScrollTop;e.renderArvore(a),e.renderCarregarMaisRegistros(t.component.element()),e.adicionarEventoSituacao(t),e.fileManagerRef.current.instance._itemView._filesView.getScrollable()&&e.fileManagerRef.current.instance._itemView._filesView.getScrollable().scrollTo(o)}),500)},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Toolbar,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{name:"showNavPane",visible:"true"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{name:"separator"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{name:"create"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxMenu",location:"before",options:this.newFolder}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxMenu",location:"before",options:this.newFileMenuOptions}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxDropDownButton",location:"before",locateInMenu:"auto",visible:this.dropDownButtonsOptions.items.length,options:this.dropDownButtonsOptions}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.colar,visible:this.state.areaTransferencia.pastas.length>0||this.state.areaTransferencia.documentos.length>0}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.refresh}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{name:"separator",location:"after",locateInMenu:"auto"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.exibirExpirados()}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.exibirBloqueados()}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.exibirAtivos()}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{name:"switchView"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{name:"separator",location:"after",locateInMenu:"auto"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxMenu",location:"after",locateInMenu:"auto",options:this.exportar}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{widget:"dxButton",location:"after",locateInMenu:"auto",options:this.configuracoes})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.ContextMenu,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Abrir",icon:"fa fa-folder-open",tipo:"abrir_pasta",visible:this.state.contextMenuItemSelected&&this.state.contextMenuItemSelected.isDirectory&&this.state.itemsSelected.pastas.length<=1&&this.state.itemsSelected.documentos.length<=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Download",icon:"fa fa-download",tipo:"download",visible:this.state.itemsSelected.permissoes.download&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Download (ZIP)",icon:"fas fa-file-archive",tipo:"download_zip",visible:this.state.itemsSelected.permissoes.download&&(this.state.itemsSelected.pastas.length>=1||this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>1)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Compactar (ZIP)",icon:"fas fa-file-archive",tipo:"compactar_zip",visible:this.state.itemsSelected.permissoes.escrita&&(this.state.itemsSelected.pastas.length>=1||this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>1)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Enviar Nova Revis\xe3o",icon:"fa fa-cloud-upload-alt",tipo:"nova_revisao",visible:(this.state.itemsSelected.permissoes.escrita||this.state.itemsSelected.permissoes.nova_revisao)&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Excluir",icon:"fa fa-trash",tipo:"exclusao",visible:this.state.itemsSelected.permissoes.exclusao&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Bloquear/Desbloquear",icon:"fa fa-ban",tipo:"bloquear",visible:this.state.itemsSelected.permissoes.seguranca&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Copiar",icon:"far fa-copy",tipo:"copiar",visible:this.state.itemsSelected.permissoes.visualizacao&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Recortar",icon:"fa fa-cut",tipo:"recorte",visible:this.state.itemsSelected.permissoes.escrita&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Colar",icon:"fa fa-clipboard",tipo:"colar",visible:this.state.itemsSelected.permissoes.escrita&&this.state.itemsSelected.pastas.length<=1&&0===this.state.itemsSelected.documentos.length&&(this.state.areaTransferencia.pastas.length>0||this.state.areaTransferencia.documentos.length>0)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Criar Atalho",icon:"fa fa-external-link-alt",tipo:"criar_atalho",visible:this.state.itemsSelected.permissoes.escrita&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length>=1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Propriedades",icon:"fa fa-edit",tipo:"propriedades",visible:this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length===1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Visualizar",icon:"fa fa-window-maximize",tipo:"visualizar",visible:this.state.itemsSelected.permissoes.visualizacao&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.mime_type&&("application/pdf"===this.state.itemSelected.dataItem.mime_type||this.state.itemSelected.dataItem.mime_type.includes("image/")||this.state.itemSelected.dataItem.mime_type.includes("video/"))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Visualizar em nova aba",icon:"fa fa-window-maximize",tipo:"visualizar_aba",visible:this.state.itemsSelected.permissoes.visualizacao&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.mime_type&&("application/pdf"===this.state.itemSelected.dataItem.mime_type||this.state.itemSelected.dataItem.mime_type.includes("image/")||this.state.itemSelected.dataItem.mime_type.includes("video/"))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Link",icon:"fa fa-link",tipo:"gerar_url_acesso",visible:this.state.itemsSelected.permissoes.visualizacao&&this.state.itemsSelected.pastas.length+this.state.itemsSelected.documentos.length===1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Link para download",icon:"fa fa-link",tipo:"gerar_url_download",visible:this.state.itemsSelected.permissoes.download&&0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Assinaturas (Clicksign)",icon:"fa fa-address-card",tipo:"assinaturas_clicksign",visible:0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.revisao_nome&&window.extensao_valida(this.state.itemSelected.dataItem.revisao_nome,window.extensoes_validas_assinatura)&&this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.clicksign_ativo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Assinaturas (Certsign)",icon:"fa fa-address-card",tipo:"assinaturas_certsign",visible:0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.revisao_nome&&window.extensao_valida(this.state.itemSelected.dataItem.revisao_nome,window.extensoes_validas_assinatura)&&this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.certsign_ativo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Assinaturas (D4Sign)",icon:"fa fa-address-card",tipo:"assinaturas_d4sign",visible:0===this.state.itemsSelected.pastas.length&&1===this.state.itemsSelected.documentos.length&&this.state.itemSelected.dataItem.revisao_nome&&window.extensao_valida(this.state.itemSelected.dataItem.revisao_nome,window.extensoes_validas_assinatura)&&this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.d4sign_ativo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Adicionar aos Favoritos",icon:"far fa-star",tipo:"favoritos_adicionar",visible:this.favoritosAdicionarExibir(),onClick:this.favoritosAdicionarClick}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Item,{text:"Remover dos Favoritos",icon:"far fa-star",tipo:"favoritos_remover",visible:this.favoritosRemoverExibir(),onClick:this.favoritosRemoverClick})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.ItemView,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Details,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"codigo",caption:"Codigo",cssClass:"codigoDoc",width:"95",visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_codigo_documento_listagem}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"thumbnail",cssClass:"thumbnailDoc"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"name",caption:"Nome",cssClass:"nomeDoc"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"tag_documento",width:"95",caption:"Tag",cssClass:"tagDoc",hidingPriority:8,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_tag}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"situacao",width:"95",caption:"Situa\xe7\xe3o",cssClass:"situacaoRevDoc",hidingPriority:7,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_situacao_documento}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"assunto_descricao",width:"95",cssClass:"assuntoDoc",caption:"Assunto",hidingPriority:6,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_assunto}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"tipo_documento_nome",width:"95",cssClass:"tipoDoc",caption:"Tipo Documento",hidingPriority:5,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_tipo}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"versao",width:"65",cssClass:"versaoDoc",caption:"Vers\xe3o",hidingPriority:4}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"size",caption:"Tamanho",cssClass:"tamanhoDoc",hidingPriority:3,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_tamanho}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"revisao_data_envio",width:"95",caption:"Modifica\xe7\xe3o",cssClass:"modificacaoDoc",hidingPriority:2,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_data_modificacao}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(devextreme_react_file_manager__WEBPACK_IMPORTED_MODULE_21__.Column,{dataField:"data_vigencia",width:"95",caption:"Vigente At\xe9",cssClass:"vigenciaDoc",hidingPriority:1,visible:this.state.centralDocumentosParams&&"S"===this.state.centralDocumentosParams.documentos_exibir_coluna_vigente_ate})]})})]})})})]})}}]),ListagemDocumentos}(react__WEBPACK_IMPORTED_MODULE_11___default.a.Component);ListagemDocumentos.defaultProps={abaTitulo:"Documentos"},__webpack_exports__.default=ListagemDocumentos},892:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return d}));var o=a(422),i=a.n(o),n=a(425),r=a(380),s=a(398),c=a(389),l=function(){return new s.default({pageSize:20,key:"classificacao_movimentacao_financeira_id",load:function(e){var t=window.loadOptionsToActionParams(e);return new Promise((function(e,a){c.a.get({route:"/classificacao_movimentacao_financeira/listar/",data:Object(r.a)({dx_grid:!0},t),func_response:function(t){var a=window.createLoadExtra(t);e(Object(r.a)(Object(r.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){c.a.get({route:"/classificacao_movimentacao_financeira/listar/",data:{dx_grid:!0,classificacao_movimentacao_financeira_id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})},d=function(){var e=Object(n.a)(i.a.mark((function e(){var t,a,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,e.next=3,c.a.get({route:"/classificacao_movimentacao_financeira/listar/",data:{tipo:t},awaitReturn:!0});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},893:function(e,t,a){e.exports={cardContainer:"CardFavorito_cardContainer__3ykse",iconeModulo:"CardFavorito_iconeModulo__2nz9V",topoTitulo:"CardFavorito_topoTitulo__2PxW8",cardCorpo:"CardFavorito_cardCorpo__3cDV-"}},894:function(e,t,a){"use strict";a.r(t),a.d(t,"consultarCNPJ",(function(){return s})),a.d(t,"preencherCampos",(function(){return c}));var o=a(422),i=a.n(o),n=a(425),r=a(389),s=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.get("consulta/cnpj/",{cnpj:t},null,null,null,null,null,null,null,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e,t){var a=(e.edt_razao_social.val()&&e.edt_razao_social.val()!==t.nome?"<br /> Raz\xe3o Social de: <b>"+e.edt_razao_social.val()+"</b> para: <b>"+t.nome+"</b>":"")+(e.edt_nome.val()&&e.edt_nome.val()!==t.fantasia?"<br /> Nome Fantasia de: <b>"+e.edt_nome.val()+"</b> para: <b>"+t.fantasia+"</b>":"")+(e.edt_endereco.val()&&e.edt_endereco.val()!==t.logradouro?"<br /> Endere\xe7o de: <b>"+e.edt_endereco.val()+"</b> para: <b>"+t.logradouro+"</b>":"")+(e.edt_numero.val()&&e.edt_numero.val()!==t.numero?"<br /> N\xfamero de: <b>"+e.edt_numero.val()+"</b> para: <b>"+t.numero+"</b>":"")+(e.edt_complemento.val()&&e.edt_complemento.val()!==t.complemento?"<br /> Complemento de: <b>"+e.edt_complemento.val()+"</b> para: <b>"+t.complemento+"</b>":"")+(e.edt_bairro.val()&&e.edt_bairro.val()!==t.bairro?"<br /> Bairro de: <b>"+e.edt_bairro.val()+"</b> para: <b>"+t.bairro+"</b>":"")+(e.edt_telefone1.val()&&e.edt_telefone2.val()&&e.edt_telefone3.val()&&e.edt_telefone4.val()&&e.edt_telefone1.val()!==t.telefone?"<br /> Telefone 1 de: <b>"+e.edt_telefone1.val()+"</b> para: <b>"+t.telefone+"</b>":"")+(e.inputCEP.props.CampoCep&&e.inputCEP.props.CampoCep!==t.cep?"<br /> CEP de: <b>"+e.inputCEP.props.CampoCep+"</b> para: <b>"+t.cep+"</b><br/> Observa\xe7\xe3o: alterando o CEP o endere\xe7o atualizado com base no registro atualizado":""),o=function(){e.edt_razao_social.val(t.nome),e.edt_nome.val(t.fantasia),e.inputCEP.props.setCampoCep(t.cep),e.div_componente_cep.find(".btn_pesquisar").addClass("origem_input_cnpj",!0).trigger("click"),e.edt_endereco.val(t.logradouro),e.edt_numero.val(t.numero),e.edt_complemento.val(t.complemento),e.edt_bairro.val(t.bairro),e.edt_telefone1.val()?e.edt_telefone2.val()?e.edt_telefone3.val()?e.edt_telefone4.val()?e.edt_telefone1.val(t.telefone):e.edt_telefone4.val(t.telefone):e.edt_telefone3.val(t.telefone):e.edt_telefone2.val(t.telefone):e.edt_telefone1.val(t.telefone)};""!==a?window.alertaPopUp("Aten\xe7\xe3o","<center>Algumas informa\xe7\xf5es est\xe3o divergentes do cadastro atual</center>"+a+"<br /><br /><center>Deseja confirmar a altera\xe7\xe3o ?</center>","Sim",o,"N\xe3o",(function(){})):o()}},895:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}));a(380);var o=a(389),i=function(e,t,a,i){o.a.post({route:"votacao/votar",data:{votacao_id:e,votacao_opcao_id:t},func_response:function(e){window.alert_saved("Voto realizado"),a&&a(e)},func_fail:function(e){window.alert_fail("Falha ao votar"),i&&i(e)}})},n=function(e,t,a){o.a.get({route:"votacao/resultado/",data:{votacao_id:e},func_response:function(e){t&&t(e)},func_fail:function(e){window.alert_fail("Falha ao carregar dados da vota\xe7\xe3o"),a&&a(e)}})}},898:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return qe}));var o=a(372),i=a(380),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(389),m=a(105),_=a(408),h=a(443),v=a(448),b=a(839);var j=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o=null!==(e=this.props.tooltip)&&void 0!==e?e:null;return this.props.novaMensagem&&(o='As altera\xe7\xf5es ser\xe3o aplicadas ap\xf3s acionar o bot\xe3o "Confirmar"'),{label:null!==(t=this.props.label)&&void 0!==t?t:null,tooltip:o,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a?a:null}}},{key:"componentDidUpdate",value:function(e,t){e.label===this.props.label&&e.tooltip===this.props.tooltip&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}},{key:"render",value:function(){return Object(o.jsxs)("label",{className:"small text-muted",title:this.state.tooltip,children:[this.state.label,this.state.novaMensagem?Object(o.jsxs)(p.a.Fragment,{children:["\xa0",Object(o.jsx)("i",{className:"text-info fas fa-info-circle"})]}):null]})}}]),a}(p.a.Component);j.defaultProps={};var O=a(423),g=Object(u.createContext)({});function w(e){var t=e.children,a=Object(u.useState)(null),i=Object(O.a)(a,2),n=i[0],r=i[1],s=Object(u.useState)(null),c=Object(O.a)(s,2),l=c[0],d=c[1],p=Object(u.useState)(null),_=Object(O.a)(p,2),h=_[0],v=_[1],b=Object(u.useState)(null),j=Object(O.a)(b,2),w=j[0],x=j[1],y=Object(u.useState)({}),A=Object(O.a)(y,2),C=A[0],S=A[1],R=Object(u.useState)(null),I=Object(O.a)(R,2),P=I[0],E=I[1],T=Object(u.useState)(null),D=Object(O.a)(T,2),k=D[0],M=D[1],N=Object(u.useState)(null),F=Object(O.a)(N,2),L=F[0],U=F[1],B=Object(u.useState)(null),V=Object(O.a)(B,2),z=V[0],G=V[1],H=Object(u.useState)(null),q=Object(O.a)(H,2),W=q[0],K=q[1],J=Object(u.useState)(!1),Q=Object(O.a)(J,2),Z=Q[0],X=Q[1],Y=Object(u.useState)(null),$=Object(O.a)(Y,2),ee=$[0],te=$[1];return Object(o.jsx)(g.Provider,{value:{botaoPressionado:n,assuntoChamadoAnterior:l,assuntoChamadoAtual:h,novoAssuntoChamado:w,reclassificacaoMemoria:C,chamadoMotivoId:P,entidadeId:k,entidadeTipo:L,chamadoMotivoTipoGestaoTempo:z,chamadoMotivoHorasUteis:W,obterNovoPrazoChamado:Z,grupoMotivoId:ee,handleSetBotaoPressionado:function(e){r(e)},handleSetAssuntoChamadoAnterior:function(e){d(e)},handleSetAssuntoChamadoAtual:function(e){v(e)},handleSetNovoAssuntoChamado:function(e){x(e)},handleSetReclassificacaoMemoria:function(e){S(e)},handleSetChamadoMotivoId:function(e){E(e)},handleSetEntidadeId:function(e){M(e)},handleSetEntidadeTipo:function(e){U(e)},handleSetChamadoMotivoGestaoTempo:function(e){G(e)},handleSetChamadoMotivoHorasUteis:function(e){K(e)},handleSetObterNovoPrazoChamado:function(e){X(e)},handleSetGrupoMotivoId:function(e){te(e)},handlePausarApontamento:function(e,t){f.a.get("apontamento_projeto/objeto/",{apontamento_id:e.apontamento_projeto_id},(function(a){var o=a.atividade[0],i={},n=[],r=new Date,s=r.getHours()+":"+(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes());i.atividade_id=o.projeto_atividade_id,i.descricao=o.atividade_simplificada,i.horas_atividade=null,i.porcentagem_atividade=o.porcentagem,n[0]=i,f.a.post("apontamento_projeto/salvar",{apontamento_id:a.id,usuario_id:m.a.sessao.dados.usuario_id,projeto_id:a.projeto_id,atividade:JSON.stringify(n),cliente_id:a.cliente_id,dia:a.dia,hora_inicial:a.hora_inicial,hora_final:s,apontamento_dinamico:!0,atividade_iniciada:!1,entregue:!1,apontamento_dinamico_acao:window.APONTAMENTO_DINAMICO_ACAO.PAUSAR,chamado_id:e.id},(function(e){window.alert_saved("Apontamento atualizado com sucesso"),"function"===typeof t&&t()}))}))}},children:t})}var x=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,i,n=this.props.detalhes?this.props.detalhes.chamado_motivo_id:null,r=null!==(e=null!==(t=this.props.grupoMotivoId)&&void 0!==t?t:this.props.detalhes.grupo_motivo_id)&&void 0!==e?e:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.grupo_motivo_id&&(r=this.props.reclassificacaoMemoria.grupo_motivo_id),this.props.reclassificacaoMemoria.chamado_motivo_id&&(n=this.props.reclassificacaoMemoria.chamado_motivo_id)),{detalhes:null!==(a=this.props.detalhes)&&void 0!==a?a:null,selecionado:n,novaMensagem:null!==(o=this.props.novaMensagem)&&void 0!==o&&o,reclassificacaoMemoria:null!==(i=this.props.reclassificacaoMemoria)&&void 0!==i&&i,grupoMotivoId:r}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.chamado_motivo_id===this.props.detalhes.chamado_motivo_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.grupo_motivo_id===this.props.detalhes.grupo_motivo_id&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e,t){var a=this,o=this.state.selecionado;(+o!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.chamado_motivo_id!==+e)?t&&"S"===t.descricao_motivo_on_assunto&&this.context.assuntoChamadoAtual!==t.nome?Object(v.confirm)("Deseja alterar o assunto do chamado para <strong>"+t.nome+"</strong>? <br><br> <small>Esta mensagem foi exibida porque o Motivo de Chamado selecionado est\xe1 configurado para que a sua descri\xe7\xe3o seja sugerida no assunto do Chamado.</small>","Aten\xe7\xe3o").then((function(i){i?Object(h.f)({chamado_id:a.state.detalhes.id,chamado_motivo_id:e,assunto:t.nome},a.props.aoAlterar?a.props.aoAlterar:null,(function(e){return a.setState({selecionado:o})})):Object(h.f)({chamado_id:a.state.detalhes.id,chamado_motivo_id:e},a.props.aoAlterar?a.props.aoAlterar:null,(function(e){return a.setState({selecionado:o})}))})):Object(h.f)({chamado_id:this.state.detalhes.id,chamado_motivo_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return a.setState({selecionado:o})})):this.props.aoAlterar&&this.props.aoAlterar(e,t)}},{key:"render",value:function(){var e,t,a=this.state.grupoMotivoId;this.context&&this.context.grupoMotivoId&&this.context.grupoMotivoId!=this.state.grupoMotivoId&&(a=this.context.grupoMotivoId);var n=this.state.selecionado?this.state.selecionado.toString():null,r=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(b.default,{chamadoId:this.state.detalhes.id,grupoMotivoId:null!==(e=null!==(t=a)&&void 0!==t?t:this.state.detalhes.grupo_motivo_id)&&void 0!==e?e:null,selecionado:n,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:r,motivoVinculadoId:this.state.detalhes.chamado_motivo_id})]})}}]),a}(p.a.Component);x.defaultProps={label:"Motivo"},x.contextType=g;var y=a(419),A=a(679),C=a(413);function S(e){return Object(o.jsx)(y.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(A.c)(e.chamadoId)})))}var R=[Object(o.jsx)(C.a,{width:"100%"},"nome")];S.defaultProps={aoAlterar:null,displayExpr:function(e){return e&&e.nome},children:R,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};var I=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a=this.props.detalhes?this.props.detalhes.grupo_motivo_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.grupo_motivo_id&&(a=this.props.reclassificacaoMemoria.grupo_motivo_id),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:a,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.grupo_motivo_id===this.props.detalhes.grupo_motivo_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.grupo_motivo_id!==+e?Object(h.f)({chamado_id:this.state.detalhes.id,grupo_motivo_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})})):this.props.aoAlterar&&this.props.aoAlterar(e)}},{key:"render",value:function(){var e=this.state.selecionado?this.state.selecionado.toString():null,t=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(S,{chamadoId:this.state.detalhes.id,selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:t})]})}}]),a}(p.a.Component);I.defaultProps={label:"Grupo de Motivo"},I.contextType=g;var P=a(841);var E=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?{tipo:this.props.detalhes.tipo,id:this.props.detalhes.entidade_id?this.props.detalhes.entidade_id.toString():null}:null,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t,exibirTelefones:!1,caretIcon:"fas fa-caret-right"}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.tipo===this.props.detalhes.tipo&&e.detalhes.entidade_id===this.props.detalhes.entidade_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;!a||a.tipo===e.tipo&&+a.entidade_id===+e.id||this.setState({selecionado:e}),this.state.novaMensagem||!e||!+this.state.detalhes.id||this.state.detalhes.tipo===e.tipo&&+this.state.detalhes.entidade_id===+e.id?this.props.aoAlterar&&this.props.aoAlterar(e):Object(h.f)({chamado_id:+this.state.detalhes.id,entidade_tipo:e.tipo,entidade_id:e.id},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})}))}},{key:"handleExibirTelefones",value:function(){this.setState({exibirTelefones:!this.state.exibirTelefones,caretIcon:!0===!this.state.exibirTelefones?"fas fa-caret-down":"fas fa-caret-right"})}},{key:"render",value:function(){var e=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(P.default,{selecionado:this.state.selecionado,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:e}),null!==this.props.detalhes.tipo&&""!==this.props.detalhes.tipo&&"E"!==this.props.detalhes.tipo&&(this.props.detalhes.entidade_telefone1||this.props.detalhes.entidade_telefone2||this.props.detalhes.entidade_telefone3||this.props.detalhes.entidade_telefone4)&&Object(o.jsxs)("div",{style:{marginTop:10},children:[Object(o.jsxs)("p",{style:{cursor:"pointer",display:"inline-block"},onClick:this.handleExibirTelefones.bind(this),children:[Object(o.jsx)("i",{className:"fas fa-phone-square-alt"})," ",Object(o.jsx)("strong",{children:"Contato"})," ",Object(o.jsx)("i",{className:this.state.caretIcon})]}),this.state.exibirTelefones&&Object(o.jsxs)("div",{children:[this.props.detalhes.entidade_telefone1&&Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Telefone 1: "}),this.props.detalhes.entidade_telefone1]}),this.props.detalhes.entidade_telefone2&&Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Telefone 2: "}),this.props.detalhes.entidade_telefone2]}),this.props.detalhes.entidade_telefone3&&Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Telefone 3: "}),this.props.detalhes.entidade_telefone3]}),this.props.detalhes.entidade_telefone4&&Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Telefone 4: "}),this.props.detalhes.entidade_telefone4]})]})]})]})}}]),a}(p.a.Component);E.defaultProps={label:"Entidade",selecionadoTipo:null,selecionadoId:null},E.contextType=g;var T=a(619);function D(e){return Object(o.jsx)(y.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(h.d)(e.chamadoId,e.entidadeTipo,e.entidadeId)})))}D.defaultProps={chamadoId:null,entidadeTipo:null,entidadeId:null,aoAlterar:null,displayExpr:function(e){return e&&e.nome},columns:[T.a],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};var k=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,i,n,r,s,c=null!==(e=null!==(t=this.props.entidadeTipo)&&void 0!==t?t:this.props.detalhes.tipo)&&void 0!==e?e:null,l=null!==(a=null!==(o=this.props.entidadeId)&&void 0!==o?o:this.props.detalhes.entidade_id)&&void 0!==a?a:null,d=this.props.detalhes?this.props.detalhes.solicitante_id:null,u=null!==(i=this.props.colaboradorPodeAlterarSolicitante)&&void 0!==i&&i;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.entidade_tipo&&this.props.reclassificacaoMemoria.entidade_id&&(c=this.props.reclassificacaoMemoria.entidade_tipo,l=this.props.reclassificacaoMemoria.entidade_id),this.props.reclassificacaoMemoria.usuario_solicitante_id&&(d=this.props.reclassificacaoMemoria.usuario_solicitante_id),this.props.reclassificacaoMemoria.hasOwnProperty("chamado_motivo_altera_solicitante")&&(u=this.props.reclassificacaoMemoria.chamado_motivo_altera_solicitante)),{detalhes:null!==(n=this.props.detalhes)&&void 0!==n?n:null,selecionado:d,novaMensagem:null!==(r=this.props.novaMensagem)&&void 0!==r&&r,reclassificacaoMemoria:null!==(s=this.props.reclassificacaoMemoria)&&void 0!==s&&s,entidadeTipo:c,entidadeId:l,colaboradorPodeAlterarSolicitante:u}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.solicitante_id===this.props.detalhes.solicitante_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.tipo===this.props.detalhes.tipo&&e.detalhes.entidade_id===this.props.detalhes.entidade_id&&e.detalhes.situacao===this.props.detalhes.situacao&&e.colaboradorPodeAlterarSolicitante===this.props.colaboradorPodeAlterarSolicitante&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.solicitante_id!==+e?Object(h.f)({chamado_id:this.state.detalhes.id,usuario_solicitante_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})})):this.props.aoAlterar&&this.props.aoAlterar(e)}},{key:"render",value:function(){var e=+this.context.entidadeId>0?this.context.entidadeId:this.state.entidadeId,t=this.context.entidadeTipo?this.context.entidadeTipo:this.state.entidadeTipo,a=this.state.selecionado?this.state.selecionado.toString():null,n=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao)||!m.a.sessao.dados.admin&&m.a.sessao.dados.tipo===window.USUARIO_TIPO.ANALISTA&&!this.state.colaboradorPodeAlterarSolicitante;return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(D,{chamadoId:this.state.detalhes.id,entidadeTipo:t,entidadeId:e,selecionado:a,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:n})]})}}]),a}(p.a.Component);function M(e){return Object(o.jsx)(y.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(h.b)(e.chamadoId,e.entidadeTipo,e.entidadeId,e.motivoId)})))}k.defaultProps={label:"Solicitante"},k.contextType=g;M.defaultProps={chamadoId:null,entidadeTipo:null,entidadeId:null,motivoId:null,aoAlterar:null,displayExpr:function(e){return e&&e.nome},columns:[T.a],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};var N=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,i,n,r,s,c,l=null!==(e=null!==(t=this.props.entidadeTipo)&&void 0!==t?t:this.props.detalhes.tipo)&&void 0!==e?e:null,d=null!==(a=null!==(o=this.props.entidadeId)&&void 0!==o?o:this.props.detalhes.entidade_id)&&void 0!==a?a:null,u=null!==(i=null!==(n=this.props.motivoId)&&void 0!==n?n:this.props.detalhes.chamado_motivo_id)&&void 0!==i?i:null,p=this.props.detalhes?this.props.detalhes.usuario_responsavel_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.entidade_tipo&&this.props.reclassificacaoMemoria.entidade_id&&(l=this.props.reclassificacaoMemoria.entidade_tipo,d=this.props.reclassificacaoMemoria.entidade_id),this.props.reclassificacaoMemoria.chamado_motivo_id&&(u=this.props.reclassificacaoMemoria.chamado_motivo_id),this.props.reclassificacaoMemoria.usuario_responsavel_id&&(p=this.props.reclassificacaoMemoria.usuario_responsavel_id)),{detalhes:null!==(r=this.props.detalhes)&&void 0!==r?r:null,selecionado:p,novaMensagem:null!==(s=this.props.novaMensagem)&&void 0!==s&&s,reclassificacaoMemoria:null!==(c=this.props.reclassificacaoMemoria)&&void 0!==c&&c,entidadeTipo:l,entidadeId:d,motivoId:u}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.usuario_responsavel_id===this.props.detalhes.usuario_responsavel_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.tipo===this.props.detalhes.tipo&&e.detalhes.entidade_id===this.props.detalhes.entidade_id&&e.detalhes.chamado_motivo_id===this.props.detalhes.chamado_motivo_id&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.usuario_responsavel_id!==+e?Object(h.f)({chamado_id:this.state.detalhes.id,usuario_responsavel_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})})):this.props.aoAlterar&&this.props.aoAlterar(e)}},{key:"render",value:function(){var e=this.state.motivoId,t=this.state.entidadeId,a=this.state.entidadeTipo;this.context&&(this.context.chamadoMotivoId&&this.context.chamadoMotivoId!=this.state.motivoId&&(e=this.context.chamadoMotivoId),this.context.entidadeId&&this.context.entidadeId!=this.state.entidadeId&&(t=this.context.entidadeId),this.context.entidadeTipo&&this.context.entidadeTipo!=this.state.entidadeTipo&&(a=this.context.entidadeTipo));var n=this.state.selecionado?this.state.selecionado.toString():null,r=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA&&!(m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")&&m.a.verifica_permissao(m.a.temp.empresa,"altera_responsavel"))||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao);return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(M,{chamadoId:this.state.detalhes.id,entidadeTipo:a,entidadeId:t,motivoId:e,selecionado:n,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:r})]})}}]),a}(p.a.Component);N.defaultProps={label:"Respons\xe1vel"},N.contextType=g;var F=a(508),L=a.n(F),U=a(576);var B=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o.aoAlterarFixarPrevisaoRetorno=o.aoAlterarFixarPrevisaoRetorno.bind(Object(s.a)(o)),o.obtendoNovaPrevisao=!1,o}return Object(r.a)(a,[{key:"propsToObjState",value:function(e){var t,a,o=this.props.detalhes&&this.props.detalhes.data_previsao_retorno?window.date_create(this.props.detalhes.data_previsao_retorno):null,i=this.props.detalhes?this.props.detalhes.solicitante_id:null,n=this.props.detalhes?this.props.detalhes.solicitante_pode_alterar_previsao_retorno:null,r=this.props.detalhes?this.props.detalhes.tipo_gestao_tempo:null,s=this.props.detalhes?this.props.detalhes.horas_uteis:null,c=this.props.detalhes?this.props.detalhes.fixar_previsao_retorno:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.usuario_solicitante_id&&(i=this.props.reclassificacaoMemoria.usuario_solicitante_id),this.props.reclassificacaoMemoria.chamado_motivo_solicitante_pode_alterar_previsao_retorno&&(n=this.props.reclassificacaoMemoria.chamado_motivo_solicitante_pode_alterar_previsao_retorno),this.props.reclassificacaoMemoria.chamado_motivo_tipo_gestao_tempo&&(r=this.props.reclassificacaoMemoria.chamado_motivo_tipo_gestao_tempo),this.props.reclassificacaoMemoria.chamado_motivo_horas_uteis&&(s=this.props.reclassificacaoMemoria.chamado_motivo_horas_uteis),this.props.reclassificacaoMemoria.data_previsao_retorno&&(o=window.date_create(this.props.reclassificacaoMemoria.data_previsao_retorno)),this.props.reclassificacaoMemoria.fixar_previsao_retorno&&(c=this.props.reclassificacaoMemoria.fixar_previsao_retorno)),{detalhes:null!==(t=this.props.detalhes)&&void 0!==t?t:null,selecionado:o,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a,solicitanteId:i,solicitantePodeAlterarPrevisaoRetorno:n,tipoGestaoTempo:r,tipo:+r===window.GESTAO_TEMPO.HORAS_UTEIS?"datetime":"date",horasUteis:s,FixarPrevisaoRetorno:c}}},{key:"componentDidMount",value:function(){this.obterNovoPrazo()}},{key:"componentDidUpdate",value:function(e,t){if(e.detalhes.data_previsao_retorno!==this.props.detalhes.data_previsao_retorno||e.detalhes.tipo_gestao_tempo!==this.props.detalhes.tipo_gestao_tempo||e.detalhes.solicitante_id!==this.props.detalhes.solicitante_id||e.detalhes.rascunho!==this.props.detalhes.rascunho||e.detalhes.situacao!==this.props.detalhes.situacao||e.novaMensagem!==this.props.novaMensagem||!window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)){var a=this.propsToObjState(e);a.novaMensagem&&a.detalhes&&+a.tipoGestaoTempo===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&(e.novaMensagem!==this.props.novaMensagem||e.reclassificacaoMemoria&&this.props.reclassificacaoMemoria&&e.reclassificacaoMemoria.chamado_motivo_id!==this.props.reclassificacaoMemoria.chamado_motivo_id)?this.obterNovoPrazo(a):this.setState(a)}}},{key:"obterNovoPrazo",value:function(e){var t=this,a=e||this.state;!this.obtendoNovaPrevisao&&a.novaMensagem&&a.detalhes&&"S"!=a.FixarPrevisaoRetorno&&+a.tipoGestaoTempo===window.CHAMADO_MOTIVO_TEMPO.HORAS_UTEIS&&(this.obtendoNovaPrevisao=!0,f.a.get("chamado/get_previsao_retorno/",{calendario_trabalho_id:m.a.sessao.dados.calendario_trabalho_id>0?m.a.sessao.dados.calendario_trabalho_id:1,horas_uteis:a.horasUteis,chamado_id:this.props.detalhes.id},(function(o){var i=a.selecionado,n={previousValue:i,value:window.date_create(o.trim())||a.selecionado};a.selecionado=n.value,e&&t.setState(a),+i!==+a.selecionado.value&&a.novaMensagem&&t.aoAlterar(n),t.obtendoNovaPrevisao=!1}))),this.context&&this.context.handleSetObterNovoPrazoChamado(!1)}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;if(+a!==+e.value&&this.setState({selecionado:e.value}),!this.props.detalhes&&!this.props.detalhes.id)return!1;this.state.novaMensagem||+a===+e.value?this.props.aoAlterar&&this.props.aoAlterar(e):Object(h.f)({chamado_id:this.props.detalhes.id,data_previsao_retorno:window.formatDateTime(e.value,!0)},this.props.aoAlterar?this.props.aoAlterar:null,(function(a){return t.setState({selecionado:e.previousValue})}))}},{key:"aoAlterarFixarPrevisaoRetorno",value:function(e){var t=this,a=e.value?"S":"N",o=e.previousValue?"S":"N";if(this.state.FixarPrevisaoRetorno!==a&&this.setState({FixarPrevisaoRetorno:a}),!this.props.detalhes&&!this.props.detalhes.id)return!1;this.state.novaMensagem||o===a?this.props.aoAlterarFixarPrevisaoRetorno&&this.props.aoAlterarFixarPrevisaoRetorno(e.value):Object(h.f)({chamado_id:this.props.detalhes.id,fixar_previsao_retorno:a},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({FixarPrevisaoRetorno:o})}))}},{key:"render",value:function(){if(this.context&&!0===this.context.obterNovoPrazoChamado){var e=Object(i.a)(Object(i.a)({},this.state),{},{tipoGestaoTempo:this.context.chamadoMotivoTipoGestaoTempo,horasUteis:this.context.chamadoMotivoHorasUteis});this.obterNovoPrazo(e)}return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(L.a,{value:this.state.selecionado,type:this.state.tipo,useMaskBehavior:!0,stylingMode:"filled",onValueChanged:this.aoAlterar,readOnly:!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA||m.a.sessao.dados.tipo===window.USUARIO_TIPO.ANALISTA&&+m.a.sessao.dados.usuario_id===+this.state.solicitanteId&&"N"===this.state.solicitantePodeAlterarPrevisaoRetorno||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao))}),Object(o.jsx)(U.CheckBox,{visible:"S"===this.props.detalhes.chamado_motivo_permite_fixar_previsao_retorno&&(m.a.sessao.dados.admin||+m.a.sessao.dados.usuario_id===this.props.detalhes.usuario_responsavel_id),disabled:!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA||m.a.sessao.dados.tipo===window.USUARIO_TIPO.ANALISTA&&+m.a.sessao.dados.usuario_id===+this.state.solicitanteId&&"N"===this.state.solicitantePodeAlterarPrevisaoRetorno||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao)),onValueChanged:this.aoAlterarFixarPrevisaoRetorno,text:"Fixar previs\xe3o de retorno",value:"S"===this.state.FixarPrevisaoRetorno})]})}}]),a}(p.a.Component);B.defaultProps={label:"Previs\xe3o de Retorno"},B.contextType=g;var V=a(681);function z(e){return Object(o.jsx)(y.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(V.a)()})))}var G=[Object(o.jsx)(C.a,{width:"100%",caption:"Prioridade"},"nome")];z.defaultProps={aoAlterar:null,displayExpr:function(e){return e&&e.nome},children:G,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};var H=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a=this.props.detalhes?this.props.detalhes.chamado_prioridade_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.chamado_prioridade_id&&(a=this.props.reclassificacaoMemoria.chamado_prioridade_id),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:a,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.chamado_prioridade_id===this.props.detalhes.chamado_prioridade_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.chamado_prioridade_id!==+e?Object(h.f)({chamado_id:this.state.detalhes.id,chamado_prioridade_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})})):this.props.aoAlterar&&this.props.aoAlterar(e)}},{key:"render",value:function(){var e=this.state.selecionado?this.state.selecionado.toString():null,t=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(z,{selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:t})]})}}]),a}(p.a.Component);H.defaultProps={label:"Prioridade"},H.contextType=g;var q=a(465),W=a.n(q);var K=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?this.props.detalhes.nota_avaliacao_nome:null}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}},{key:"render",value:function(){return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)("label",{className:"small text-muted",children:this.props.label}),Object(o.jsx)(W.a,{value:this.state.selecionado,stylingMode:"filled",readOnly:!0})]})}}]),a}(p.a.Component);K.defaultProps={label:"Avalia\xe7\xe3o"};var J=a(401),Q=a(388),Z=a(678),X=a(63),Y=a.n(X);var $=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o.btnAddClick=o.btnAddClick.bind(Object(s.a)(o)),o.btnRemoverClick=o.btnRemoverClick.bind(Object(s.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(s.a)(o)),o.onEditorPreparing=o.onEditorPreparing.bind(Object(s.a)(o)),o.toolbarLabelRender=o.toolbarLabelRender.bind(Object(s.a)(o)),o.dataGridRef=p.a.createRef(),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,emails_adicionais:this.props.detalhes?this.props.detalhes.emails_adicionais:null,editavel:this.props.detalhes.rascunho||m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")&&![window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.props.detalhes.situacao),novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.emails_adicionais===this.props.detalhes.emails_adicionais&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem||this.setState(this.propsToObjState())}},{key:"onToolbarPreparing",value:function(e){var t=(this.context.botaoPressionado&&"reclassificar"===this.context.botaoPressionado||!this.context.botaoPressionado)&&this.state.editavel;e.toolbarOptions.items.unshift({location:"before",template:"toolbarLabel"},{location:"after",widget:"dxButton",locateInMenu:"auto",showText:"inMenu",options:{icon:"fa fa-plus",text:"Adicionar",stylingMode:"text",onClick:this.btnAddClick},visible:t})}},{key:"aoAlterar",value:function(){var e=this.state.emails_adicionais.map((function(e){return e.email})).join(";");this.state.novaMensagem?this.props.aoAlterar&&this.props.aoAlterar(e):Object(h.f)({chamado_id:this.state.detalhes.id,emails_adicionais:e},this.props.aoAlterar?this.props.aoAlterar:null)}},{key:"btnAddClick",value:function(e){this.dataGrid.addRow()}},{key:"btnRemoverClick",value:function(e){var t=this,a=this.state.emails_adicionais,o=a.map((function(e){return e.email})).sort().join(";"),i=[];a.forEach((function(t){e.row.data.email!==t.email&&i.push(t)})),this.setState({emails_adicionais:i},(function(){o!==i.map((function(e){return e.email})).sort().join(";")&&t.aoAlterar()}))}},{key:"onEditorPreparing",value:function(e){"email"===e.dataField&&"dataRow"===e.parentType&&(e.editorName="dxAutocomplete",e.editorOptions.dataSource=Object(T.b)({cliente_id:this.state.detalhes.cliente_id,prospect_id:this.state.detalhes.prospect_id,fornecedor_id:this.state.detalhes.fornecedor_id,filtra_usuario_colaborador:!0,tipo_usuario_chamado_escolhido:this.state.detalhes.cliente_id?window.USUARIO_TIPO.CLIENTE:this.state.detalhes.prospect_id?window.USUARIO_TIPO.PROSPECT:this.state.detalhes.fornecedor_id?window.USUARIO_TIPO.FORNECEDOR:window.USUARIO_TIPO.ANALISTA}),e.editorOptions.valueExpr="email",e.editorOptions.itemTemplate=function(e){return Y()("<div>"+e.nome+("grupo"!==e.tipo?" ("+e.email+")":"")+"</div>")})}},{key:"toolbarLabelRender",value:function(){return Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem})}},{key:"render",value:function(){var e=this,t=(this.context.botaoPressionado&&"reclassificar"===this.context.botaoPressionado||!this.context.botaoPressionado)&&this.state.editavel;return Object(o.jsx)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:Object(o.jsxs)(J.default,{ref:this.dataGridRef,dataSource:this.state.emails_adicionais,filterPanel:{visible:!1},filterRow:{visible:!1},headerFilter:{visible:!1},groupPanel:{visible:!1},export:{enabled:!1},allowColumnReordering:!1,columnChooser:{enabled:!1},editing:{mode:"cell",allowUpdating:t},keyExpr:"id",showBorders:!1,showColumnHeaders:!1,showColumnLines:!1,columnFixing:{enable:!1},rowAlternationEnabled:!1,onEditorPreparing:this.onEditorPreparing,onToolbarPreparing:this.onToolbarPreparing,onRowInserted:function(){return e.aoAlterar()},onRowUpdated:function(){return e.aoAlterar()},noDataText:"",searchPanel:{visible:!1},children:[Object(o.jsx)(Q.Column,{dataField:"email",allowEditing:!0}),Object(o.jsx)(Q.Column,{type:"buttons",width:50,alignment:"right",children:Object(o.jsx)(Q.Button,{hint:"Remover e-mail",icon:"fa fa-times",onClick:this.btnRemoverClick,visible:t})}),Object(o.jsx)(Z.Template,{name:"toolbarLabel",render:this.toolbarLabelRender})]})})}},{key:"dataGrid",get:function(){return this.dataGridRef.current.instance}}]),a}(p.a.Component);$.defaultProps={label:"E-mails adicionais"},$.contextType=g;var ee=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)("label",{className:"small text-muted",children:this.props.label}),Object(o.jsx)("div",{children:window.format_time(this.props.valor)})]})}}]),a}(p.a.Component);ee.defaultProps={label:"Total horas trabalhadas"};var te=a(845),ae=a(846);function oe(e){return Object(o.jsx)(y.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(te.a)()})))}oe.defaultProps={aoAlterar:null,displayExpr:function(e){return e&&e.nome},children:ae.a,dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};var ie=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a=this.props.detalhes?this.props.detalhes.classificacao_chamado_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.classificacao_chamado_id&&(a=this.props.reclassificacaoMemoria.classificacao_chamado_id),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:a,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.classificacao_chamado_id===this.props.detalhes.classificacao_chamado_id&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.detalhes.situacao===this.props.detalhes.situacao&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;+a!==+e&&this.setState({selecionado:e}),!this.state.novaMensagem&&e&&+this.state.detalhes.id&&+this.state.detalhes.classificacao_chamado_id!==+e?Object(h.f)({chamado_id:this.state.detalhes.id,classificacao_chamado_id:e},this.props.aoAlterar?this.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})})):this.props.aoAlterar&&this.props.aoAlterar(e)}},{key:"render",value:function(){var e=this.state.selecionado?this.state.selecionado.toString():null,t=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(oe,{selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:t})]})}}]),a}(p.a.Component);function ne(e){var t=e.chamadoId,a=e.selecionado,n=e.readOnly,r=Object(u.useState)({dataSource:Object(h.c)(t),readOnly:null!==n&&void 0!==n?n:null,selecionado:a||null}),s=Object(O.a)(r,2),c=s[0],l=s[1];return Object(u.useEffect)((function(){l({dataSource:Object(h.c)(t),readOnly:null!==n&&void 0!==n?n:null,selecionado:a||null})}),[t,a,n]),Object(o.jsx)(y.default,Object(i.a)(Object(i.a)({},e),c))}ie.defaultProps={label:"Classifica\xe7\xe3o"},ie.contextType=g;ne.defaultProps={chamadoId:null,aoAlterar:null,displayExpr:function(e){return e&&e.nome},columns:[h.e],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1,columnFilterFocus:"nome"};var re=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).sugerirSituacaoMotivo=!0,o.state=Object(i.a)({sugerirSituacaoMotivo:!0},o.propsToObjState()),o.sugerirSituacaoMotivo=o.state?o.state.sugerirSituacaoMotivo:o.sugerirSituacaoMotivo,o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a=this.props.detalhes?+this.props.detalhes.situacao:null,o=this.context?this.context.botaoPressionado:this.props.botaoPressionado,i=this.props.configuracoesChamado;if(this.props.novaMensagem&&this.props.detalhes)if("S"!==i.sugerir_situacao&&"S"!==i.sugerir_situacao_reclassificacao||!(this.state&&this.state.sugerirSituacaoMotivo||!this.state&&this.sugerirSituacaoMotivo)||+m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA)this.props.reclassificacaoMemoria&&this.props.reclassificacaoMemoria.situacao&&(a=this.props.reclassificacaoMemoria.situacao);else if("S"===i.sugerir_situacao_reclassificacao&&"reclassificar"==o||"S"===i.sugerir_situacao&&"escreverMensagem"==o){switch(this.props.detalhes.tipo){case window.TIPO_ENTIDADE.CLIENTE:a=window.CHAMADO_SITUACAO.AGUARDANDO_CLIENTE;break;case window.TIPO_ENTIDADE.ORGANIZACAO:a=window.CHAMADO_SITUACAO.AGUARDANDO_ORGANIZACAO;break;case window.TIPO_ENTIDADE.FORNECEDOR:a=window.CHAMADO_SITUACAO.AGUARDANDO_FORNECEDOR;break;case window.TIPO_ENTIDADE.EMPRESA:a===window.CHAMADO_SITUACAO.AGUARDANDO_EMPRESA&&+this.props.detalhes.usuario_responsavel_id!==+m.a.sessao.dados.usuario_id?a=window.CHAMADO_SITUACAO.AGUARDANDO_RESPONSAVEL:+this.props.detalhes.solicitante_id!==+m.a.sessao.dados.usuario_id&&(a=window.CHAMADO_SITUACAO.AGUARDANDO_EMPRESA)}a!==+this.props.detalhes.situacao&&this.props.aoAlterar&&this.props.aoAlterar(a)}return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:a,novaMensagem:null!==(t=this.props.novaMensagem)&&void 0!==t&&t,sugerirMotivo:!0,botaoPressionado:o,configuracoesChamado:i}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes.situacao===this.props.detalhes.situacao&&e.detalhes.rascunho===this.props.detalhes.rascunho&&e.novaMensagem===this.props.novaMensagem&&window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)||this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;if(+a!==+e){this.setState({selecionado:e,sugerirSituacaoMotivo:!1});var o=function(){!t.state.novaMensagem&&e&&+t.state.detalhes.id&&+t.state.detalhes.situacao!==+e?Object(h.f)({chamado_id:t.state.detalhes.id,situacao:e},t.props.aoAlterar?t.props.aoAlterar:null,(function(e){return t.setState({selecionado:a})})):t.props.aoAlterar&&t.props.aoAlterar(e)};e==window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO&&parseInt(this.state.detalhes.usuario_responsavel_id,10)>0&&"S"==this.props.detalhes.chamado_motivo_definir_situacao_aguardando_responsavel?window.alertaPopUp("Aten\xe7\xe3o","Alterar a situa\xe7\xe3o para Aguardando Atendimento ir\xe1 limpar o campo de Respons\xe1vel do Chamado. Deseja continuar?","Sim",(function(){o()}),"N\xe3o",(function(){t.setState({selecionado:a})})):o()}}},{key:"render",value:function(){var e,t=this.state.selecionado?this.state.selecionado.toString():null,a=!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")&&!this.state.novaMensagem||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao));return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(ne,{chamadoId:this.state.detalhes.id,entidadeTipo:null!==(e=this.state.detalhes.tipo)&&void 0!==e?e:null,selecionado:t,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:a,atualizarValorAutomaticamente:!0})]})}}]),a}(p.a.Component);re.defaultProps={label:"Situa\xe7\xe3o"},re.contextType=g;var se=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(e){var t,a,o=this.props.detalhes&&this.props.detalhes.data_inicio_sla?window.date_create(this.props.detalhes.data_inicio_sla):null,i=this.props.detalhes?this.props.detalhes.solicitante_id:null;return this.props.novaMensagem&&this.props&&this.props.reclassificacaoMemoria&&(this.props.reclassificacaoMemoria.usuario_solicitante_id&&(i=this.props.reclassificacaoMemoria.usuario_solicitante_id),this.props.reclassificacaoMemoria.data_inicio_sla&&(o=window.date_create(this.props.reclassificacaoMemoria.data_inicio_sla))),{detalhes:null!==(t=this.props.detalhes)&&void 0!==t?t:null,selecionado:o,novaMensagem:null!==(a=this.props.novaMensagem)&&void 0!==a&&a,solicitanteId:i}}},{key:"componentDidUpdate",value:function(e,t){if(e.detalhes.data_inicio_sla!==this.props.detalhes.data_inicio_sla||e.detalhes.solicitante_id!==this.props.detalhes.solicitante_id||e.detalhes.rascunho!==this.props.detalhes.rascunho||e.detalhes.situacao!==this.props.detalhes.situacao||e.novaMensagem!==this.props.novaMensagem||!window.isEquivalent(e.reclassificacaoMemoria,this.props.reclassificacaoMemoria)){var a=this.propsToObjState(e);this.setState(a)}}},{key:"aoAlterar",value:function(e){var t=this,a=this.state.selecionado;if(+a!==+e.value&&this.setState({selecionado:e.value}),!this.props.detalhes&&!this.props.detalhes.id)return!1;this.state.novaMensagem||+a===+e.value?this.props.aoAlterar&&this.props.aoAlterar(e):Object(h.f)({chamado_id:this.props.detalhes.id,data_inicio_sla:window.formatDateTime(e.value,!0)},this.props.aoAlterar?this.props.aoAlterar:null,(function(a){return t.setState({selecionado:e.previousValue})}))}},{key:"render",value:function(){return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:this.state.novaMensagem}),Object(o.jsx)(L.a,{value:this.state.selecionado,type:"datetime",useMaskBehavior:!0,stylingMode:"filled",onValueChanged:this.aoAlterar,readOnly:!this.state.novaMensagem&&this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao))})]})}}]),a}(p.a.Component);se.defaultProps={label:"Programar SLA"},se.contextType=g;var ce=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.solicitarRefresh=o.solicitarRefresh.bind(Object(s.a)(o)),o.handleReclassificacaoMemoria=o.handleReclassificacaoMemoria.bind(Object(s.a)(o)),o.reclassificacaoMemoriaEntidade=o.reclassificacaoMemoriaEntidade.bind(Object(s.a)(o)),o.reclassificacaoMemoriaSolicitante=o.reclassificacaoMemoriaSolicitante.bind(Object(s.a)(o)),o.reclassificacaoMemoriaGrupoMotivo=o.reclassificacaoMemoriaGrupoMotivo.bind(Object(s.a)(o)),o.reclassificacaoMemoriaMotivo=o.reclassificacaoMemoriaMotivo.bind(Object(s.a)(o)),o.reclassificacaoMemoriaResponsavel=o.reclassificacaoMemoriaResponsavel.bind(Object(s.a)(o)),o.reclassificacaoMemoriaClassificacao=o.reclassificacaoMemoriaClassificacao.bind(Object(s.a)(o)),o.reclassificacaoMemoriaPrioridade=o.reclassificacaoMemoriaPrioridade.bind(Object(s.a)(o)),o.reclassificacaoMemoriaPrevisaoRetorno=o.reclassificacaoMemoriaPrevisaoRetorno.bind(Object(s.a)(o)),o.reclassificacaoMemoriaFixarPrevisaoRetorno=o.reclassificacaoMemoriaFixarPrevisaoRetorno.bind(Object(s.a)(o)),o.reclassificacaoMemoriaSituacao=o.reclassificacaoMemoriaSituacao.bind(Object(s.a)(o)),o.reclassificacaoMemoriaEmailsAdicionais=o.reclassificacaoMemoriaEmailsAdicionais.bind(Object(s.a)(o)),o.reclassificacaoMemoriaInicioSLA=o.reclassificacaoMemoriaInicioSLA.bind(Object(s.a)(o)),o.reclassificacao_memoria={},o}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.detalhes===this.props.detalhes&&e.botaoPressionadoReclassificacao===this.props.botaoPressionadoReclassificacao&&e.colaboradorPodeAlterarSolicitante===this.props.colaboradorPodeAlterarSolicitante||this.setState(this.propsToObjState())}},{key:"shouldComponentUpdate",value:function(e,t){return!!t.atualizar_componente}},{key:"propsToObjState",value:function(){var e,t,a;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,botaoPressionadoReclassificacao:null!==(t=this.props.botaoPressionadoReclassificacao)&&void 0!==t?t:null,colaboradorPodeAlterarSolicitante:null!==(a=this.props.colaboradorPodeAlterarSolicitante)&&void 0!==a&&a,atualizar_componente:!0}}},{key:"solicitarRefresh",value:function(e){this.props.aoSolicitarRefresh&&this.props.aoSolicitarRefresh(e)}},{key:"handleReclassificacaoMemoria",value:function(e){var t=Object(i.a)(Object(i.a)({},this.reclassificacao_memoria),e);this.reclassificacao_memoria=t,this.context.handleSetReclassificacaoMemoria(this.reclassificacao_memoria)}},{key:"reclassificacaoMemoriaEntidade",value:function(e){this.handleReclassificacaoMemoria({entidade_tipo:e.tipo,entidade_id:e.id}),this.context.handleSetEntidadeId(e.id),this.context.handleSetEntidadeTipo(e.tipo),this.context.handleSetObterNovoPrazoChamado(!0)}},{key:"reclassificacaoMemoriaSolicitante",value:function(e){this.handleReclassificacaoMemoria({usuario_solicitante_id:e})}},{key:"reclassificacaoMemoriaGrupoMotivo",value:function(e){this.handleReclassificacaoMemoria({grupo_motivo_id:e}),this.context.handleSetGrupoMotivoId(e)}},{key:"reclassificacaoMemoriaMotivo",value:function(e,t){var a=this,o={chamado_motivo_id:e};t&&(o=Object(i.a)(Object(i.a)({},o),{},{chamado_motivo_horas_uteis:t.horas_uteis,chamado_motivo_tipo_gestao_tempo:t.tipo_gestao_tempo,chamado_motivo_solicitante_pode_alterar_previsao_retorno:t.solicitante_pode_alterar_previsao_retorno,chamado_motivo_altera_solicitante:"S"===t.altera_solicitante}),"S"===t.descricao_motivo_on_assunto&&this.context.assuntoChamadoAtual!==t.nome&&Object(v.confirm)("Deseja alterar o assunto do chamado para <strong>"+t.nome+"</strong>? <br><br> <small>Esta mensagem foi exibida porque o Motivo de Chamado selecionado est\xe1 configurado para que a sua descri\xe7\xe3o seja sugerida no assunto do Chamado.</small>","Aten\xe7\xe3o").then((function(e){e?a.context.handleSetNovoAssuntoChamado(t.nome):a.context.handleSetNovoAssuntoChamado(null)})));this.handleReclassificacaoMemoria(o),this.context.handleSetChamadoMotivoId(e),this.context.handleSetChamadoMotivoGestaoTempo(t.tipo_gestao_tempo),this.context.handleSetChamadoMotivoHorasUteis(t.horas_uteis),this.context.handleSetObterNovoPrazoChamado(!0)}},{key:"reclassificacaoMemoriaResponsavel",value:function(e){this.handleReclassificacaoMemoria({usuario_responsavel_id:e}),"S"===this.props.detalhes.chamado_motivo_definir_situacao_aguardando_responsavel&&(parseInt(e,10)>0&&[this.context.reclassificacaoMemoria.situacao,this.props.detalhes.situacao].includes(window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO)?this.handleReclassificacaoMemoria({situacao:window.CHAMADO_SITUACAO.AGUARDANDO_RESPONSAVEL}):(!parseInt(e,10)||parseInt(e,10)<0)&&this.handleReclassificacaoMemoria({situacao:window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO}))}},{key:"reclassificacaoMemoriaClassificacao",value:function(e){this.handleReclassificacaoMemoria({classificacao_chamado_id:e})}},{key:"reclassificacaoMemoriaPrioridade",value:function(e){this.handleReclassificacaoMemoria({chamado_prioridade_id:e})}},{key:"reclassificacaoMemoriaPrevisaoRetorno",value:function(e){var t=null;e&&e.value&&(t=window.formatDateTime(e.value,!0)),this.handleReclassificacaoMemoria({data_previsao_retorno:t})}},{key:"reclassificacaoMemoriaInicioSLA",value:function(e){var t=null;e&&e.value&&(t=window.formatDateTime(e.value,!0)),this.handleReclassificacaoMemoria({data_inicio_sla:t})}},{key:"reclassificacaoMemoriaFixarPrevisaoRetorno",value:function(e){e=e?"S":"N",this.handleReclassificacaoMemoria({fixar_previsao_retorno:e})}},{key:"reclassificacaoMemoriaSituacao",value:function(e){this.handleReclassificacaoMemoria({situacao:e}),e==window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO&&(parseInt(this.context.reclassificacaoMemoria.usuario_responsavel_id,10)>0||parseInt(this.props.detalhes.usuario_responsavel_id,10)>0)&&this.handleReclassificacaoMemoria({usuario_responsavel_id:null})}},{key:"reclassificacaoMemoriaEmailsAdicionais",value:function(e){this.handleReclassificacaoMemoria({emails_adicionais:e})}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"panel panel-default card-dados-chamado",children:Object(o.jsxs)("div",{className:"list-group",children:[Object(o.jsx)(E,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaEntidade:this.solicitarRefresh}),Object(o.jsx)(k,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaSolicitante:this.solicitarRefresh,colaboradorPodeAlterarSolicitante:this.state.colaboradorPodeAlterarSolicitante}),"S"===m.a.sessao.dados.parametro_chamado.chk_exibir_na_abertura_grupo_motivo_chamado?Object(o.jsx)(I,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaGrupoMotivo:this.solicitarRefresh}):null,Object(o.jsx)(x,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaMotivo:this.solicitarRefresh}),this.state.detalhes.rascunho&&m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA?null:Object(o.jsx)(N,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaResponsavel:this.solicitarRefresh,chamadoMotivoId:this.state.chamadoMotivoId}),"S"===m.a.sessao.dados.parametro_chamado.chamado_classificacoes?Object(o.jsx)(ie,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaClassificacao:this.solicitarRefresh}):null,Object(o.jsx)(H,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaPrioridade:this.solicitarRefresh}),this.state.detalhes.rascunho&&m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA?null:Object(o.jsx)(B,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaPrevisaoRetorno:this.solicitarRefresh,aoAlterarFixarPrevisaoRetorno:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaFixarPrevisaoRetorno:this.solicitarRefresh}),"S"!==this.props.detalhes.chamado_motivo_permite_programar_inicio_sla||this.state.detalhes.rascunho&&m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA?null:Object(o.jsx)(se,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaInicioSLA:this.solicitarRefresh}),this.state.detalhes.rascunho&&m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA?null:Object(o.jsx)(re,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaSituacao:this.solicitarRefresh,configuracoesChamado:this.props.configuracoesChamado})]})}),Object(o.jsx)("div",{className:"panel panel-default card-dados-chamado",children:Object(o.jsx)("div",{className:"list-group",children:Object(o.jsx)($,{detalhes:this.state.detalhes,novaMensagem:this.state.botaoPressionadoReclassificacao,reclassificacaoMemoria:this.context.reclassificacaoMemoria,aoAlterar:this.state.botaoPressionadoReclassificacao?this.reclassificacaoMemoriaEmailsAdicionais:this.solicitarRefresh})})}),this.state.detalhes.rascunho?null:Object(o.jsx)("div",{className:"panel panel-default card-dados-chamado",children:Object(o.jsxs)("div",{className:"list-group",children:[this.state.detalhes.nota_avaliacao_id?Object(o.jsx)(K,{detalhes:this.state.detalhes}):null,!this.props.detalhes||""===this.props.detalhes.horas_trabalhadas||null===this.props.detalhes.horas_trabalhadas||"undefined"===typeof this.props.detalhes.horas_trabalhadas||"00:00:00"===this.props.detalhes.horas_trabalhadas||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA&&!0!==m.a.sessao.dados.admin?null:Object(o.jsx)(ee,{valor:this.props.detalhes.horas_trabalhadas})]})})]})}}]),a}(p.a.Component);ce.contextType=g;var le=a(682),de=a(492),ue=a(454),pe=a.n(ue),fe=a(620);var me=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}},{key:"render",value:function(){var e="";return this.state.detalhes&&(e=this.state.detalhes&&!0===this.state.detalhes.rascunho?"Rascunho":window.ChamadoDescSituacaoHumano(this.state.detalhes.situacao,m.a.sessao.dados.tipo)),Object(o.jsx)("span",{className:"label label-default",children:e})}}]),a}(p.a.Component);me.defaultProps={};var _e=a(847),he=a(848),ve=a(548);var be=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}},{key:"render",value:function(){var e=window.Colors(this.state.detalhes.motivo_cor);return Object(o.jsx)("span",{className:"label",style:{background:e.hex,color:e.nome_hex},children:this.state.detalhes.motivo})}}]),a}(p.a.Component);be.defaultProps={};var je=a(621);var Oe=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.assuntoChange=o.assuntoChange.bind(Object(s.a)(o)),o.btnMensagensClick=o.btnMensagensClick.bind(Object(s.a)(o)),o.btnFormularioAvaliacaoClick=o.btnFormularioAvaliacaoClick.bind(Object(s.a)(o)),o.btnFormularioAberturaClick=o.btnFormularioAberturaClick.bind(Object(s.a)(o)),o.btnReferenciasClick=o.btnReferenciasClick.bind(Object(s.a)(o)),o.btnRecarregarClick=o.btnRecarregarClick.bind(Object(s.a)(o)),o.btnToogleExibirMaisDetalhesClick=o.btnToogleExibirMaisDetalhesClick.bind(Object(s.a)(o)),o.handleGerenciarApontamento=o.handleGerenciarApontamento.bind(Object(s.a)(o)),o.handleIniciarApontamento=o.handleIniciarApontamento.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,i,n="iniciarAtendimento",r="fas fa-play-circle",s="Iniciar Atendimento",c="Iniciar";return"S"!=this.props.detalhes.chamado_motivo_utiliza_apontamento_chamado&&!0!==this.props.detalhes.chamado_motivo_utiliza_apontamento_chamado||this.props.detalhes.status_apontamento!=window.CHAMADO_STATUS_APONTAMENTO.INICIADO||(n="pausarAtendimento",r="fas fa-pause-circle",s="Pausar Atendimento",c="Pausar"),{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,referenciasCount:this.props.detalhes.oportunidade.length+this.props.detalhes.solicitacao_atividades.length+this.props.detalhes.projeto_atividades.length+this.props.detalhes.pdca_atividades.length+this.props.detalhes.tarefa_quadro_lista_cartao.length,mensagensCount:null!==(t=this.props.mensagensCount)&&void 0!==t?t:0,assunto:this.props.detalhes?this.props.detalhes.assunto:null,assuntoOriginal:this.props.detalhes?this.props.detalhes.assunto:null,tipoGestaoTempo:this.props.detalhes?this.props.detalhes.tipo_gestao_tempo:null,horasEstimadas:this.props.detalhes?this.props.detalhes.horas_previsao_retorno:null,dataPrazo:this.props.detalhes?this.props.detalhes.data_previsao_retorno:null,calendarioTrabalhoId:this.props.detalhes?this.props.detalhes.chamado_motivo_calendario_trabalho_id:null,botaoPressionado:null!==(a=this.props.botaoPressionado)&&void 0!==a?a:null,exibirMaisDetalhes:null!==(o=this.props.exibirMaisDetalhes)&&void 0!==o?o:null,bloquearExibirMaisDetalhes:null!==(i=this.props.bloquearExibirMaisDetalhes)&&void 0!==i?i:null,btnApontamentoAcao:n,btnApontamentoIcon:r,btnApontamentoHint:s,btnApontamentoText:c}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes===this.props.detalhes&&e.exibirMaisDetalhes===this.props.exibirMaisDetalhes&&e.bloquearExibirMaisDetalhes===this.props.bloquearExibirMaisDetalhes||this.setState(this.propsToObjState())}},{key:"btnMensagensClick",value:function(){var e=this;this.setState({botaoPressionado:"mensagens"},(function(){e.props.btnMensagensClick&&e.props.btnMensagensClick()}))}},{key:"btnFormularioAvaliacaoClick",value:function(){var e=this;this.setState({botaoPressionado:"avaliacao"},(function(){e.props.btnFormularioAvaliacaoClick&&e.props.btnFormularioAvaliacaoClick()}))}},{key:"btnFormularioAberturaClick",value:function(){var e=this;this.setState({botaoPressionado:"formularioAbertura"},(function(){e.props.btnFormularioAberturaClick&&e.props.btnFormularioAberturaClick()}))}},{key:"btnReferenciasClick",value:function(){var e=this;this.setState({botaoPressionado:"referencias"},(function(){e.props.btnReferenciasClick&&e.props.btnReferenciasClick()}))}},{key:"btnRecarregarClick",value:function(){this.props.btnRecarregarClick&&this.props.btnRecarregarClick()}},{key:"btnToogleExibirMaisDetalhesClick",value:function(){this.props.btnToogleExibirMaisDetalhesClick&&this.setState({exibirMaisDetalhes:this.props.btnToogleExibirMaisDetalhesClick()})}},{key:"assuntoChange",value:function(e){var t=this;e.value!==this.state.assunto&&this.setState({assunto:e.value},(function(){e.value.trim().length>0&&"reclassificar"!==t.context.botaoPressionado&&Object(h.f)({chamado_id:t.state.detalhes.id,assunto:e.value},t.props.btnRecarregarClick?t.props.btnRecarregarClick:null)})),this.context.handleSetAssuntoChamadoAtual(e.value)}},{key:"handleGerenciarApontamento",value:function(e){var t=this;if(e==window.CHAMADO_APONTAMENTO_ACAO.INICIAR)f.a.post("/chamado/gerenciar_apontamento/",{chamado_id:this.state.detalhes.id,responsavel_id:m.a.sessao.dados.usuario_id},(function(e){if(!e)return window.alertaPopUp("Valida\xe7\xe3o","N\xe3o foi poss\xedvel criar a Atividade do Projeto para o usu\xe1rio respons\xe1vel.<br><br>Verifique se o usu\xe1rio \xe9 <strong>T\xe9cnico de Projetos</strong> e faz parte da <strong>equipe do Projeto</strong>."),!1;t.handleIniciarApontamento(e)}));else if(e==window.CHAMADO_APONTAMENTO_ACAO.PAUSAR){this.context.handlePausarApontamento(this.state.detalhes,(function(){t.setState({btnApontamentoAcao:"iniciarAtendimento",btnApontamentoIcon:"fas fa-play-circle",btnApontamentoHint:"Iniciar Atendimento",btnApontamentoText:"Iniciar"},(function(){t.btnRecarregarClick()}))}))}}},{key:"handleIniciarApontamento",value:function(e){var t=this,a={},o=[],i=new Date,n=window.getDate(),r=i.getHours()+":"+i.getMinutes();a.atividade_id=e.id,a.descricao=e.atividade_simplificada,a.horas_atividade=null,a.porcentagem_atividade=e.porcentagem,o[0]=a,f.a.post("apontamento_projeto/salvar/",{apontamento_id:null,usuario_id:m.a.sessao.dados.usuario_id,projeto_id:e.projeto_id,atividade:JSON.stringify(o),cliente_id:e.cliente_id,dia:n,hora_inicial:r,hora_final:"",apontamento_dinamico:!0,atividade_iniciada:!0,entregue:!1,apontamento_dinamico_acao:window.APONTAMENTO_DINAMICO_ACAO.INICIAR,chamado_id:this.state.detalhes.id,chamado_entidade_nome:this.state.detalhes.entidade_nome,chamado_responsavel_anterior:e.chamado_responsavel_anterior},(function(a){window.alert_saved("Atividade "+e.codigo+" salva com sucesso"),t.setState({btnApontamentoAcao:"pausarAtendimento",btnApontamentoIcon:"fas fa-pause-circle",btnApontamentoHint:"Pausar Atendimento",btnApontamentoText:"Pausar"},(function(){t.btnRecarregarClick()}))}))}},{key:"imprimirChamado",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f.a.get("/chamado/imprimir_chamado/",{chamado_id:this.state.detalhes.id,ignorar_mensagens_vazias:t},(function(t){var a=window.open();a.document.title="Chamado #".concat(e.state.detalhes.id),a.document.body.style.fontFamily="Arial,Helvetica,sans-serif",Y()(a.document.body).html(t),setTimeout((function(){a.print()}),1e3),a.onafterprint=function(){a.close()}}))}},{key:"render",value:function(){var e,t=this,a=this.context.botaoPressionado&&"reclassificar"!==this.context.botaoPressionado||!this.state.detalhes.rascunho&&(!m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado")||[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.state.detalhes.situacao)),i=this.state.assunto;return this.context.novoAssuntoChamado&&(i=this.context.novoAssuntoChamado),this.context.handleSetAssuntoChamadoAtual(i),this.context.handleSetAssuntoChamadoAnterior(this.state.assunto),Object(o.jsx)("div",{className:"panel panel-default",children:Object(o.jsx)("div",{className:"list-group",children:Object(o.jsxs)("div",{className:"list-group-item",style:{padding:"10px"},children:[this.state.detalhes?Object(o.jsx)(p.a.Fragment,{children:Object(o.jsxs)(pe.a,{children:[Object(o.jsxs)(ue.Item,{location:"before",children:[Object(o.jsxs)("b",{children:["#",this.state.detalhes.id," ",Object(o.jsx)(le.default,{style:{padding:"0px"},url:"#/chamado/"+this.state.detalhes.id,children:Object(o.jsx)("span",{className:"far fa-copy"})})]}),Object(o.jsx)(de.a,{})]}),Object(o.jsx)(ue.Item,{location:"before",visible:+this.state.detalhes.entidade_id>0,locateInMenu:"auto",children:Object(o.jsx)(je.default,{tipo:this.state.detalhes.tipo,id:this.state.detalhes.entidade_id,nome:this.state.detalhes.entidade_nome,logoId:this.state.detalhes.entidade_logo_id})}),Object(o.jsx)(ue.Item,{location:"before",visible:+this.state.detalhes.solicitante_id>0,locateInMenu:"auto",children:Object(o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(o.jsx)(ve.a,{tamanho:"28",documentoId:this.state.detalhes.usuario_solicitante_foto_id,imgAlternativa:"assets/img/imagem_usuario_padrao.svg",titulo:"Solicitante",nome:this.state.detalhes.solicitante_nome}),Object(o.jsx)("div",{children:Object(o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(o.jsx)(de.a,{}),Object(o.jsx)("div",{children:this.state.detalhes.solicitante_nome}),Object(o.jsx)(de.a,{})]})})]})}),Object(o.jsx)(ue.Item,{location:"before",visible:+this.state.detalhes.usuario_responsavel_id>0,locateInMenu:"auto",children:Object(o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},title:"Respons\xe1vel",children:[Object(o.jsx)(ve.a,{tamanho:"28",documentoId:this.state.detalhes.foto_usuario_responsavel,imgAlternativa:"assets/img/imagem_usuario_padrao.svg",titulo:"Respons\xe1vel",nome:this.state.detalhes.usuario_responsavel_nome}),Object(o.jsx)("div",{children:Object(o.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[Object(o.jsx)(de.a,{}),Object(o.jsx)("div",{children:this.state.detalhes.usuario_responsavel_nome}),Object(o.jsx)(de.a,{})]})})]})}),Object(o.jsx)(ue.Item,{location:"before",locateInMenu:"auto",children:Object(o.jsx)(me,{detalhes:this.state.detalhes})}),Object(o.jsx)(ue.Item,{location:"before",locateInMenu:"auto",children:Object(o.jsx)(be,{detalhes:this.state.detalhes})}),Object(o.jsx)(ue.Item,{location:"after",visible:!this.state.detalhes.rascunho,children:Object(o.jsx)("div",{className:"small",children:Object(o.jsx)(_e.a,{viewHtmlId:null!==(e=this.props.viewHtmlId)&&void 0!==e?e:null,detalhes:this.state.detalhes,autoUpdate:"true"})})}),Object(o.jsx)(ue.Item,{location:"after",visible:!this.state.detalhes.rascunho&&+this.state.detalhes.situacao!==window.CHAMADO_SITUACAO.ENCERRADO&&+this.state.detalhes.situacao!==window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE,children:Object(o.jsx)("div",{className:"small visible-lg",children:Object(o.jsx)(he.a,{TipoGestaoTempo:this.state.tipoGestaoTempo,HorasEstimadas:this.state.horasEstimadas,DataPrazo:this.state.dataPrazo,CalendarioTrabalhoId:this.state.calendarioTrabalhoId,ExibirTituloDataPrazo:!0,TituloDataPrazo:"Previs\xe3o de Retorno"})})}),Object(o.jsx)(ue.Item,{location:"after",visible:!this.state.detalhes.rascunho,children:Object(o.jsxs)(fe.ButtonGroup,{selectionMode:"single",stylingMode:"text",selectedItemKeys:[this.state.botaoPressionado],keyExpr:"acao",style:{paddingLeft:"46px"},children:[Object(o.jsx)(fe.Item,{acao:this.state.btnApontamentoAcao,icon:this.state.btnApontamentoIcon,hint:this.state.btnApontamentoHint,text:this.state.btnApontamentoText,onClick:function(){"iniciarAtendimento"==t.state.btnApontamentoAcao?t.handleGerenciarApontamento(window.CHAMADO_APONTAMENTO_ACAO.INICIAR):"pausarAtendimento"==t.state.btnApontamentoAcao&&t.handleGerenciarApontamento(window.CHAMADO_APONTAMENTO_ACAO.PAUSAR)},visible:m.a.sessao.dados.tipo==window.USUARIO_TIPO.ANALISTA&&("S"==m.a.sessao.dados.tecnico||!0===m.a.sessao.dados.tecnico)&&this.state.detalhes.situacao!=window.CHAMADO_SITUACAO.ENCERRADO&&this.state.detalhes.situacao!=window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE&&("S"==this.state.detalhes.chamado_motivo_utiliza_apontamento_chamado||!0===this.state.detalhes.chamado_motivo_utiliza_apontamento_chamado)&&(+this.state.detalhes.usuario_responsavel_id>0&&this.state.detalhes.usuario_responsavel_id==m.a.sessao.dados.usuario_id||0==+this.state.detalhes.usuario_responsavel_id)}),Object(o.jsx)(fe.Item,{acao:"formularioAbertura",icon:"fas fa-clipboard-list",hint:"Formul\xe1rio",onClick:this.btnFormularioAberturaClick,visible:+this.state.detalhes.formulario_abertura_id>0,elementAttr:{class:"btn_formulario_abertura"}}),Object(o.jsx)(fe.Item,{acao:"mensagens",icon:"fas fa-comments",hint:"Mensagens",onClick:this.btnMensagensClick,text:this.state.mensagensCount>0?this.state.mensagensCount:null,elementAttr:{class:"btn_mensagens"}}),Object(o.jsx)(fe.Item,{acao:"referencias",icon:"fas fa-sitemap",hint:"Refer\xeancias",onClick:this.btnReferenciasClick,text:this.state.referenciasCount>0?this.state.referenciasCount:null,elementAttr:{class:"btn_referencias"}}),Object(o.jsx)(fe.Item,{acao:"avaliacao",icon:"fas fa-star-half-alt",hint:"Avalia\xe7\xe3o",onClick:this.btnFormularioAvaliacaoClick,visible:+this.state.detalhes.formulario_avaliacao_id>0&&+this.state.detalhes.situacao===window.CHAMADO_SITUACAO.ENCERRADO,elementAttr:{class:"btn_avaliacao"}})]})}),Object(o.jsx)(ue.Item,{location:"after",visible:!this.state.detalhes.rascunho,children:Object(o.jsx)(fe.ButtonGroup,{selectionMode:"single",stylingMode:"text",keyExpr:"acao",selectedItemKeys:[this.state.exibirMaisDetalhes?"exibirMaisDetalhes":null],disabled:this.state.bloquearExibirMaisDetalhes,children:Object(o.jsx)(fe.Item,{acao:"exibirMaisDetalhes",onClick:this.btnToogleExibirMaisDetalhesClick,hint:"mais informa\xe7\xf5es...",icon:"fa fa-users-cog",stylingMode:"text",elementAttr:{class:"btn_exibir_mais_detalhes"}})})}),Object(o.jsx)(ue.Item,{widget:"dxButton",location:"after",visible:!this.state.detalhes.rascunho,showText:"inMenu",locateInMenu:"auto",options:{hint:"Recarregar",text:"Recarregar",onClick:this.btnRecarregarClick,icon:"fas fa-sync-alt",stylingMode:"text",elementAttr:{class:"btn_recarregar"}}}),Object(o.jsx)(ue.Item,{widget:"dxDropDownButton",location:"after",showText:"always",locateInMenu:"auto",options:{text:"Imprimir Chamado",icon:"fas fa-file-pdf",valueExpr:"id",displayExpr:"descricao",items:[{id:1,descricao:"Impress\xe3o padr\xe3o",onClick:function(e){return t.imprimirChamado()}},{id:2,descricao:"Ignorar mensagens vazias",onClick:function(e){return t.imprimirChamado(!0)}}]}})]})}):null,Object(o.jsx)(de.b,{}),Object(o.jsx)("label",{className:"text-muted",children:"Assunto"}),Object(o.jsx)(W.a,{stylingMode:"filled",value:i,width:"100%",placeholder:"Insira aqui o assunto. Seja breve nas palavras.",onValueChanged:this.assuntoChange,readOnly:a})]})})})}}]),a}(p.a.Component);Oe.contextType=g;var ge=a(391);var we=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).props.init.images_upload_handler=o.handleImagesUpload.bind(Object(s.a)(o)),o.props.init.content_css="./"+m.a.url_css_bootstrap,o}return Object(r.a)(a,[{key:"handleImagesUpload",value:function(e,t,a){var o,i;(o=new XMLHttpRequest).withCredentials=!1,o.open("POST",window.WS_URI+"/imagem_tinymce/upload/"),o.setRequestHeader("X-Auth-Token",f.a.token),o.onload=function(){var e;200===o.status?(e=JSON.parse(o.responseText))&&"string"===typeof e.location?t(e.location):a("Invalid JSON: "+o.responseText):a("HTTP Error: "+o.status)},(i=new FormData).append("file",e.blob(),e.filename()),"undefined"!==typeof this.props.moduloId&&i.append("modulo_id",this.props.moduloId),o.send(i)}}]),a}(a(1217).a);we.defaultProps={moduloId:null,init:{menubar:!1,statusbar:!0,branding:!1,theme:"silver",menu:{},height:310,extended_valid_elements:"script[language|type]",invalid_elements:"script",language:"pt_BR",format:"text",paste_data_images:!0,browser_spellcheck:!0,contextmenu:!1,media_live_embeds:!0,media_poster:!1,media_dimensions:!1,media_alt_source:!1,resize:!0,min_height:310,plugins:["fullscreen media advlist autolink lists link image imagetools charmap print preview hr anchor pagebreak","searchreplace visualblocks visualchars code","insertdatetime nonbreaking table directionality","template paste textpattern"],toolbar:["undo redo | styleselect | bold italic | forecolor backcolor | fullscreen","alignleft aligncenter alignright alignjustify | bullist numlist | link image media "],image_advtab:!0,forced_root_block:""}};var xe=a(831),ye=a.n(xe);var Ae=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.handleEditorChange=o.handleEditorChange.bind(Object(s.a)(o)),o.elemKey=ye()(Math.random()+new Date+Math.random()+ye()(Math.random())),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e;return{chamadoId:this.props.chamadoId,chamadoMensagemId:"undefined"!==typeof this.props.chamadoMensagemId?this.props.chamadoMensagemId:null,chamadoMotivoId:null!==(e=this.props.chamadoMotivoId)&&void 0!==e?e:null,editavel:"undefined"!==typeof this.props.editavel&&this.props.editavel,mensagem:"undefined"!==typeof this.props.mensagem?this.props.mensagem:"",tipo:"undefined"!==typeof this.props.tipo?this.props.tipo:"",processando:!1}}},{key:"componentDidUpdate",value:function(e,t){e.mensagem!==this.props.mensagem&&this.setState(this.propsToObjState())}},{key:"handleEditorChange",value:function(e,t){var a=this;this.setState({mensagem:e},(function(){a.props.aoEditar&&a.props.aoEditar(e)}))}},{key:"componentDidMount",value:function(){var e=Y()("[mensagem_item_fusao="+this.elemKey+"]");e.css("cursor","pointer"),e.on("mouseover",(function(){Y()(this).css("text-decoration","underline")})).on("mouseleave",(function(e){e.target.style.removeProperty("text-decoration")})),e.off("click"),e.on("click",(function(e){var t=Y()(this).attr("id");_.a.loadReact(window.views.chamado.Detalhes.default,{chamadoId:t},(function(e,t){}),window.View.ABA.MULTIPLAS)})),this.peChamadoMensagemEditavelRender()}},{key:"peChamadoMensagemEditavelRender",value:function(){if(m.a.PE.ChamadoMensagemEditavelRender)try{m.a.PE.ChamadoMensagemEditavelRender(this.props.viewHtmlId,this.state)}catch(e){console.log(e)}}},{key:"render",value:function(){if(this.state.editavel)return Object(o.jsx)("div",{className:"cardMensagemChamadoRichTextEditor",style:{marginBottom:"10px"},children:Object(o.jsx)(we,{value:this.state.mensagem,onEditorChange:this.handleEditorChange,moduloId:window.MODULOS.CHAMADO})});var e=null;e=window.is_html(this.state.mensagem)?this.state.mensagem:window.nl2br(this.state.mensagem);var t=this.elemKey;if(+this.state.tipo===window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_FUSAO_CHAMADOS){var a=e.substring(e.lastIndexOf("chamado(s)")+"chamado(s)".length+1,e.lastIndexOf("foi(ram)")-1).trim().split(",").map((function(e){return'<span mensagem_item_fusao="'+t+'" id="'+e.substring(1)+'">'+e+"</span>"})).join(", ");e="O(s) chamado(s) "+a+" foi(ram) fundido(s) com este chamado.<br/>"}if(+this.state.tipo===window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_ENCERRAMENTO){var i="Este chamado foi fundido com o chamado ";if(e.indexOf(i)>=0){var n=e.substring(i.length,e.length);e=i+('<span mensagem_item_fusao="'+t+'" id="'+n.substring(1)+'">'+n+"</span>")}}return Object(o.jsx)("div",{className:"mensagemChamado",dangerouslySetInnerHTML:{__html:e}})}}]),a}(p.a.Component),Ce=a(849),Se=a(683),Re=a(684);var Ie=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={horasTrabalhadas:"00:00"===o.props.mascaraHorasTrabalhadas?o.props.horasTrabalhadas:window.format_time(o.props.horasTrabalhadas),mensagemId:o.props.mensagemId,permiteEdicao:o.props.permiteEdicao||!1,modoEdicao:!1},o.horasTrabalhadasInicial=o.state.horasTrabalhadas,o.horasTrabalhadasClick=o.horasTrabalhadasClick.bind(Object(s.a)(o)),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o.solicitarRefresh=o.solicitarRefresh.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"horasTrabalhadasClick",value:function(){this.setState({modoEdicao:!this.state.modoEdicao})}},{key:"aoAlterar",value:function(e){this.setState({horasTrabalhadas:e.value})}},{key:"solicitarRefresh",value:function(){this.props.aoSolicitarRefresh&&this.props.chamadoId&&this.props.aoSolicitarRefresh(this.props.chamadoId)}},{key:"render",value:function(){var e=this,t=null,a=null;return this.state.permiteEdicao&&(t=this.horasTrabalhadasClick,a={cursor:"pointer"}),Object(o.jsx)(p.a.Fragment,{children:this.state.modoEdicao&&this.state.permiteEdicao?Object(o.jsx)("div",{style:{maxWidth:"200px"},children:Object(o.jsxs)(q.TextBox,{mask:Object(Re.a)(this.props.mascaraHorasTrabalhadas),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:this.aoAlterar,value:this.state.horasTrabalhadas,stylingMode:"filled",children:[Object(o.jsx)(q.Button,{name:"salvar",location:"after",options:{icon:"far fa-save",type:"default",stylingMode:"text",onClick:function(){Object(h.g)(e.state.mensagemId,e.state.horasTrabalhadas,(function(t){e.setState({modoEdicao:!1},(function(){e.horasTrabalhadasInicial=e.state.horasTrabalhadas,e.solicitarRefresh()}))}),(function(t){e.setState({horasTrabalhadas:e.horasTrabalhadasInicial})}))}}}),Object(o.jsx)(q.Button,{name:"cancelar",location:"after",options:{icon:"fas fa-times",type:"normal",stylingMode:"text",onClick:function(){e.setState({modoEdicao:!1,horasTrabalhadas:e.horasTrabalhadasInicial})}}})]})}):Object(o.jsxs)("div",{className:"text-muted small",title:"Horas trabalhadas",children:[Object(o.jsx)("span",{className:"far fa-clock"}),"\xa0",Object(o.jsx)("span",{onClick:t,style:a,children:window.format_time(this.state.horasTrabalhadas)})]})})}}]),a}(p.a.Component);function Pe(e){var t="";switch(parseInt(e.tipo,10)){case 1:t="Abertura";break;case 3:t="Encerramento";break;case 4:t="Reabertura";break;case 5:t="Reclassifica\xe7\xe3o";break;case 6:t="Encerramento por Inatividade";break;case 8:t="Fus\xe3o";break;case 7:t=m.a.lang.observacao_interna_chamado.observacao_interna;break;default:t=""}return Object(o.jsx)("div",{children:Object(o.jsx)("span",{className:"label label-info",style:{},children:t})})}function Ee(e){return e.observacoes?Object(o.jsx)("div",{className:"text-muted small",style:{lineBreak:"anywhere"},dangerouslySetInnerHTML:{__html:e.observacoes}}):null}var Te=a(483);function De(e){if(!e.documentos||0===e.documentos.length)return null;var t=function(e){m.a.obter_token_publico((function(t){m.a.download(window.WS_URI+"documento/download/?documento_revisao_id="+e.documento_revisao_id+"&token_publico="+t)}))};return e.documentos.map((function(e){var a="application/pdf"===e.mime_type||"image/png"===e.mime_type||"image/bmp"===e.mime_type||"image/jpeg"===e.mime_type||"image/jpg"===e.mime_type||"image/gif"===e.mime_type||window.MIME_TYPE_OFFICE.indexOf(e.mime_type)>=0;return Object(o.jsxs)("div",{style:{display:"inline-flex"},children:[a?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(Te.Button,{type:"normal",stylingMode:"outlined",text:window.FileShortName(e.revisao_nome),hint:e.revisao_nome,onClick:function(){return function(e){"application/pdf"===e.mime_type?_.a.load("central_documentos/visualizar_pdf",(function(t,a){a.show(e.documento_revisao_id)})):"image/png"===e.mime_type||"image/bmp"===e.mime_type||"image/jpeg"===e.mime_type||"image/jpg"===e.mime_type||"image/gif"===e.mime_type?_.a.load("central_documentos/visualizar_documento",(function(t,a){a.show(e.documento_revisao_id)})):window.MIME_TYPE_OFFICE.indexOf(e.mime_type)>=0&&m.a.obter_token_publico((function(t){var a=window.location.protocol+"//"+window.location.host+"/"+window.location.pathname,o=a.indexOf("index.html");o>0&&(a=a.substring(0,o)),a+="/webservice/index.php/documento/download/?documento_revisao_id="+e.documento_revisao_id+"&token_publico="+t;var i="https://docs.google.com/viewer?embedded=true&url="+encodeURIComponent(a);window.open(i,"_blank")}))}(e)}}),Object(o.jsx)(Te.Button,{type:"normal",stylingMode:"outlined",icon:"fa fa-download",hint:"Download",onClick:function(){return t(e)}})]}):Object(o.jsx)(Te.Button,{type:"normal",stylingMode:"outlined",text:window.FileShortName(e.revisao_nome),hint:e.revisao_nome,onClick:function(){return t(e)}}),Object(o.jsx)(de.a,{})]})}))}var ke=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e;return{valor:null!==(e=this.props.valor)&&void 0!==e?e:null}}},{key:"componentDidUpdate",value:function(e,t){e.valor!==this.props.valor&&this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){var t=this;this.setState({valor:e.value},(function(){t.props.aoAlterar&&t.props.aoAlterar(e)}))}},{key:"render",value:function(){var e=this.state.valor?this.state.valor.toString():null;return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)(j,{label:this.props.label,novaMensagem:!0}),Object(o.jsx)(W.a,{mask:Object(Re.a)(this.props.mascaraHorasTrabalhadas),maskRules:{X:/[0-5]/},useMaskedValue:!0,onValueChanged:this.aoAlterar,value:e,stylingMode:"filled"})]})}}]),a}(p.a.Component);ke.defaultProps={label:"Horas Trabalhadas",valor:null};var Me=a(850);function Ne(e){return Object(o.jsx)(y.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:Object(Me.a)(e.chamadoId)})))}Ne.defaultProps={chamadoId:null,aoAlterar:null,displayExpr:function(e){return e&&e.nome},children:[Object(o.jsx)(C.a,{caption:"Avalia\xe7\xe3o",width:"100%"})],dataGridSearchPanelEnabled:!1,dataGridColumnChooserEnabled:!1,dataGridExportEnabled:!1};var Fe=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.aoAlterar=o.aoAlterar.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?null!==(t=this.props.detalhes.nota_avaliacao_id)&&void 0!==t?t:this.props.detalhes.avaliacao_padrao_id:null}}},{key:"componentDidUpdate",value:function(e,t){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}},{key:"aoAlterar",value:function(e){if(!e)return!1;this.props.aoAlterar&&this.props.aoAlterar(e)}},{key:"render",value:function(){var e=this.state.selecionado?this.state.selecionado.toString():null;return Object(o.jsxs)("div",{className:"list-group-item",style:Object(i.a)(Object(i.a)({},this.props.style),{},{border:"0px"}),children:[Object(o.jsx)("label",{className:"small text-muted",children:this.props.label}),Object(o.jsx)(Ne,{chamadoId:this.state.detalhes.id,selecionado:e,aoAlterar:this.aoAlterar,stylingMode:"filled",readOnly:this.state.detalhes.nota_avaliacao_id})]})}}]),a}(p.a.Component);Fe.defaultProps={label:"Referente ao atendimento realizado, voc\xea ficou"};var Le=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.formularioRef=p.a.createRef(),o.renderFormulario=o.renderFormulario.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t;return{detalhes:null!==(e=this.props.detalhes)&&void 0!==e?e:null,selecionado:this.props.detalhes?this.props.detalhes.formulario_avaliacao_id:null,readOnly:null!==(t=this.props.readOnly)&&void 0!==t&&t}}},{key:"componentDidMount",value:function(){this.renderFormulario()}},{key:"componentDidUpdate",value:function(e,t){e.detalhes!==this.props.detalhes&&this.setState(this.propsToObjState())}},{key:"render",value:function(){return Object(o.jsx)("div",{ref:this.formularioRef})}},{key:"renderFormulario",value:function(){var e,t=this,a=null!==(e=this.props.main)&&void 0!==e?e:{};a.html=Y()('<div class="aba_personalizado"><div class="titulo_formulario">Campos Personalizados</div><div class="form-editor"><div class="form-grupos panel-body" style="padding: 0px;"></div><div class="form-grupo" template-grupo template-ref="" style="display: none;"><div><h3 class="text-primary lbl_grupo_nome"></h3></div></div><div class="form-grupo-campo" template-campo template-ref="" style="display: none;"><div class="div_campo form-group"><span class="lbl_obrigatorio text-danger">* </span><label class="lbl_nome">{Nome}</label><div class="div_input"></div></div></div></div></div>'),a.html_id="html_id",a.aba_personalizado=a.html,a.titulo_formulario=a.html.find(".titulo_formulario"),a.form_editor=a.html.find(".form-editor"),a.form_grupos=a.html.find(".form-grupos"),a.template_grupo=a.html.find("[template-grupo]"),a.template_campo=a.html.find("[template-campo]"),a.lbl_nome=a.html.find(".lbl_nome"),f.a.get("formulario_chamado_avaliacao/get_formulario/",{chamado_id:this.state.detalhes.id},(function(e){e&&(a.campos_personalizados=e,a.titulo_formulario.html(e.nome),a.campos_personalizados.registros&&Y.a.each(a.campos_personalizados.registros,(function(e,t){"campo_anexo"===e?t&&Y.a.each(t,(function(e,t){if(t){var o=t.split(";"),i=parseInt(o[0]),n=o[1];Y.a.each(a.campos_personalizados.grupos,(function(t,a){Y.a.each(a.elementos,(function(t,a){e===a.id_elemento&&(a.valor=i,a.documento_revisao={},a.documento_revisao.nome_arquivo=n,a.documento_revisao.mime_type=window.extensao_to_mimetype(n.substring(n.lastIndexOf(".")+1,n.length)))}))}))}})):"selecao_documento"===e?Y.a.each(t,(function(e,t){Y.a.each(a.campos_personalizados.grupos,(function(a,o){Y.a.each(o.elementos,(function(a,o){e===o.id_elemento&&(o.valor=t)}))}))})):"campo_tabela"===e&&Y.a.each(t,(function(e,t){if("string"===typeof t)try{t=JSON.parse(t.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}catch(o){console.warn(t,t.replace(/(\"{2})(\w.+?)\"{2}/gm,'"$2"').replace(/(\r\n|\n|\r)/gm," "))}t&&Y.a.each(a.campos_personalizados.grupos,(function(a,o){Y.a.each(o.elementos,(function(a,o){e===o.id_elemento&&(o.tamanho_render=t.tamanho_render,o.valor=t.valor,"undefined"!==typeof o.valor&&Y.a.each(o.valor,(function(e,t){if(null!=t.revisao){var a=t.revisao.split(";"),o=parseInt(a[0]),i=a[1];t.valor=o,t.documento_revisao={},t.documento_revisao.nome_arquivo=i,t.documento_revisao.mime_type=window.extensao_to_mimetype(i.substring(i.lastIndexOf(".")+1,i.length))}})))}))}))}))})),window.require(["./assets/view/formulario/util"],(function(o){(new o).render_previsao({div_formulario:a,template_campo:a.template_campo,template_grupo:a.template_grupo,obj_formulario:a.campos_personalizados,disabled_all:t.state.readOnly,liberar_campos:!t.state.readOnly}),e.registros&&Y.a.each(e.registros,(function(t,o){"campo_geral"===t?Object.keys(e.registros.campo_geral).map((function(t,o){return a.aba_personalizado.find("[id_elemento="+t+"]").val(e.registros.campo_geral[t]),a.aba_personalizado.find("[id_elemento="+t+"]").change(),a.aba_personalizado.find("[id_elemento="+t+"]").blur(),t})):"campo_decimal"===t?Object.keys(e.registros.campo_decimal).map((function(t,o){return e.registros.campo_decimal[t]&&(a.aba_personalizado.find("[id_elemento="+t+"]").val(e.registros.campo_decimal[t].replace(".",",")),a.aba_personalizado.find("[id_elemento="+t+"]").change(),a.aba_personalizado.find("[id_elemento="+t+"]").blur()),t})):"lista_opcoes"===t?Object.keys(e.registros.lista_opcoes).map((function(t,o){var i=a.aba_personalizado.find("[id_elemento="+t+"]").find("option"),n=e.registros.lista_opcoes[t];null!=n&&(n=n.split(";"));var r=0;return i&&n&&Y.a.each(i,(function(e,t){Y.a.each(n,(function(e,a){t.value===a&&(t.selected=!0,Y()(t).change(),Y()(t).blur(),r=Y()(t).index(),Y()(t).parent().parent().find("[data-original-index='"+r+"']").addClass("selected"))}))})),t})):"radio"===t?Object.keys(e.registros.radio).map((function(t,o){var i=a.aba_personalizado.find("[id_elemento="+t+"]");return i.parent().find("input[value='"+e.registros.radio[t]+"']").prop("checked",!0),i.parent().find("input[value='"+e.registros.radio[t]+"']").change(),t})):"checkbox"===t?Object.keys(e.registros.checkbox).map((function(t,o){var i=e.registros.checkbox[t];null!=i&&(i=i.split(";"));var n=a.aba_personalizado.find("[id_elemento="+t+"]");return i&&Y.a.each(i,(function(e,t){n.parent().find("input[value='"+t+"']").prop("checked",!0)})),t})):"'caixa_verificacao'"===t?Y.a.each(e.registros.caixa_verificacao,(function(e,t){"S"===t&&a.aba_personalizado.find("[id_elemento="+e+"]").prop("checked",!0)})):"editor_texto"===t?setTimeout((function(){Object.keys(e.registros.editor_texto).map((function(t,o){return window.tinyMCE.get(a.aba_personalizado.find("[id_elemento="+t+"]").attr("id")).setContent(e.registros.editor_texto[t]),t}))}),500):"campo_integracao"===t&&Object.keys(e.registros.campo_integracao).map((function(t,o){return a.aba_personalizado.find("[id_elemento="+t+"]").find(".dx-dropdownbox").dxDropDownBox("instance").option("value",e.registros.campo_integracao[t]),t}))})),Y()(t.formularioRef.current).html(a.form_editor[0])})))}))}}]),a}(p.a.Component),Ue=a(685);var Be=!1,Ve=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o,r,c,l,d,u,f,m;return Object(n.a)(this,a),(m=t.call(this,e)).state=Object(i.a)(Object(i.a)({mensagem:"undefined"!==typeof m.props.mensagem?m.props.mensagem:null,mensagemEdicao:"undefined"!==typeof m.props.mensagem?m.props.mensagem.mensagem:null,anexos:[]},m.propsToObjState()),{},{nova:"undefined"!==typeof m.props.nova&&m.props.nova,editavel:"undefined"!==typeof m.props.editavel&&m.props.editavel,exibirBotaoDownloadAnexos:null!==(o=m.props.exibirBotaoDownloadAnexos)&&void 0!==o&&o,situacao:null!==(r=m.props.situacao)&&void 0!==r?r:null,previsaoRetorno:null!==(c=m.props.previsaoRetorno)&&void 0!==c?c:null,horasTrabalhadas:null!==(l=m.props.horasTrabalhadas)&&void 0!==l?l:null,notificarEnvolvidos:null===(d=m.props.notificarEnvolvidos)||void 0===d||d,mascaraHorasTrabalhadas:null!==(u=m.props.mascaraHorasTrabalhadas)&&void 0!==u?u:"000:00",fixarPrevisaoRetorno:null!==(f=m.props.fixarPrevisaoRetorno)&&void 0!==f?f:null}),m.escreverMensagem=m.escreverMensagem.bind(Object(s.a)(m)),m.observacaoInterna=m.observacaoInterna.bind(Object(s.a)(m)),m.reclassificar=m.reclassificar.bind(Object(s.a)(m)),m.encerrar=m.encerrar.bind(Object(s.a)(m)),m.avaliar=m.avaliar.bind(Object(s.a)(m)),m.reabertura=m.reabertura.bind(Object(s.a)(m)),m.confirmar=m.confirmar.bind(Object(s.a)(m)),m.cancelar=m.cancelar.bind(Object(s.a)(m)),m.solicitarRefresh=m.solicitarRefresh.bind(Object(s.a)(m)),m.aoEditarMensagem=m.aoEditarMensagem.bind(Object(s.a)(m)),m.aoAlterarTipoExibicaoDataEnvio=m.aoAlterarTipoExibicaoDataEnvio.bind(Object(s.a)(m)),m.aoAlterarSituacao=m.aoAlterarSituacao.bind(Object(s.a)(m)),m.aoAlterarPrevisaoRetorno=m.aoAlterarPrevisaoRetorno.bind(Object(s.a)(m)),m.aoAlterarHorasTrabalhadas=m.aoAlterarHorasTrabalhadas.bind(Object(s.a)(m)),m.aoAlterarNotificarEnvolvidos=m.aoAlterarNotificarEnvolvidos.bind(Object(s.a)(m)),m.aoAlterarNotaAvaliacao=m.aoAlterarNotaAvaliacao.bind(Object(s.a)(m)),m.downloadTodosAnexos=m.downloadTodosAnexos.bind(Object(s.a)(m)),m.btnFusaoChamadosClick=m.btnFusaoChamadosClick.bind(Object(s.a)(m)),m.btnEncerrarInatividadeClick=m.btnEncerrarInatividadeClick.bind(Object(s.a)(m)),m.btnExcluirClick=m.btnExcluirClick.bind(Object(s.a)(m)),m.btnAnexarArquivoClick=m.btnAnexarArquivoClick.bind(Object(s.a)(m)),m.btnRemoverAnexo=m.btnRemoverAnexo.bind(Object(s.a)(m)),m.aoAlterarFixarPrevisaoRetorno=m.aoAlterarFixarPrevisaoRetorno.bind(Object(s.a)(m)),m.formularioAvaliacao={},m.formularioAbertura=p.a.createRef(),m.formularioAberturaMain={},m.emmitAoAlterarBotaoPressionado(),m}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a,o,n=("undefined"===typeof this.state||"undefined"===typeof this.state.botaoPressionado)&&null!==(e=this.props.botaoPressionado)&&void 0!==e?e:null;n=this.state&&this.state.botaoPressionado?this.state.botaoPressionado:n;var r=!(!this.state||!this.state.editavel)&&this.state.editavel,s={};if(this.props.detalhes){var c=m.a.get_parametro_usuario("chamado_rascunho_"+this.props.detalhes.id);c&&("undefined"!==typeof c.mensagemEdicao&&(s.mensagemEdicao=c.mensagemEdicao),"undefined"!==typeof c.botaoPressionado&&"avaliar"!==n&&(s.botaoPressionado=this.props.detalhes&&this.props.detalhes.rascunho?"abertura":c.botaoPressionado),"undefined"!==typeof c.anexos&&(s.anexos=c.anexos||[]))}return Object(i.a)({detalhes:null!==(t=this.props.detalhes)&&void 0!==t?t:null,botaoPressionado:this.props.detalhes&&this.props.detalhes.rascunho?"abertura":n,editavel:!(!this.props.detalhes||!this.props.detalhes.rascunho)||r,dataEnvioExtenso:null!==(a=this.props.dataEnvioExtenso)&&void 0!==a&&a,chamadoMotivoId:this.props.detalhes?this.props.detalhes.chamado_motivo_id:null,notaAvaliacaoId:this.props.detalhes?null!==(o=this.props.detalhes.nota_avaliacao_id)&&void 0!==o?o:this.props.detalhes.avaliacao_padrao_id:null},s)}},{key:"componentDidUpdate",value:function(e,t){e.detalhes===this.props.detalhes&&e.dataEnvioExtenso===this.props.dataEnvioExtenso||(m.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:this.state.mensagemEdicao,botaoPressionado:this.state.botaoPressionado,anexos:this.state.anexos}),this.setState(this.propsToObjState()))}},{key:"componentWillUnmount",value:function(){this.state.nova&&m.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:this.state.mensagemEdicao,botaoPressionado:this.state.botaoPressionado,anexos:this.state.anexos})}},{key:"emmitAoAlterarBotaoPressionado",value:function(){"function"===typeof this.props.aoAlterarBotaoPressionado&&this.props.aoAlterarBotaoPressionado(this.state.botaoPressionado)}},{key:"handleTipoMensagem",value:function(e){this.context.handleSetBotaoPressionado(e),this.setState({botaoPressionado:e,editavel:!0}),this.emmitAoAlterarBotaoPressionado()}},{key:"escreverMensagem",value:function(){this.handleTipoMensagem("escreverMensagem")}},{key:"observacaoInterna",value:function(){this.handleTipoMensagem("observacaoInterna")}},{key:"reclassificar",value:function(){this.handleTipoMensagem("reclassificar")}},{key:"reabertura",value:function(){this.handleTipoMensagem("reabertura")}},{key:"encerrar",value:function(){this.handleTipoMensagem("encerrar")}},{key:"avaliar",value:function(){this.handleTipoMensagem("avaliar")}},{key:"confirmar",value:function(){var e,t,a=this;if(!Be){Be=!0;var o=function(e){Be=!1,window.alert_saved("Mensagem salva com sucesso"),m.a.set_parametro_usuario("chamado_rascunho_"+a.state.detalhes.id,{mensagemEdicao:null,botaoPressionado:null,anexos:[]}),a.setState({mensagemEdicao:null,botaoPressionado:null,editavel:!1,processando:!1,anexos:[]},(function(){a.props.aoSalvar&&a.props.aoSalvar(e),setTimeout((function(){a.context.handleSetBotaoPressionado(null),a.context.handleSetReclassificacaoMemoria({})}),900)}))},n=function(e){Be=!1,window.alert_fail("Falhou, tente novamente."),console.log(e),a.setState({editavel:!0,processando:!1})},r=null;r=this.state.horasTrabalhadas&&this.state.horasTrabalhadas.trim().replace(":","").length>0?this.state.horasTrabalhadas:this.state.mascaraHorasTrabalhadas;var s={chamado_id:this.state.detalhes.id,mensagem:this.state.mensagemEdicao,situacao:this.state.situacao?this.state.situacao:this.state.detalhes.situacao,data_previsao_retorno:this.state.previsaoRetorno?window.formatDateTime(this.state.previsaoRetorno,!0):null,documentos:this.state.anexos.map((function(e){return e.file})),enviar_documento:this.state.anexos.map((function(e){return e.email.toString()})).join(","),horas_trabalhadas:r,notificacao_mensagem_reclassificacao:this.state.notificarEnvolvidos,nota_avaliacao_id:null!==(e=this.state.notaAvaliacaoId)&&void 0!==e?e:null,rascunho:!1,tipo:null,assunto:this.context.assuntoChamadoAtual,fixar_previsao_retorno:null!==(t=this.state.fixarPrevisaoRetorno)&&void 0!==t?t:null};if(+this.state.detalhes.apontamento_projeto_id>0&&"encerrar"===this.state.botaoPressionado&&1===+this.state.detalhes.status_apontamento){this.context.handlePausarApontamento(this.state.detalhes,(function(){f.a.post("chamado/encerrar_chamado",s,o,null,null,!0,null,null,null,n)}))}else if(s.horas_trabalhadas.trim().replace(" ","").replace(":","").length!==this.state.mascaraHorasTrabalhadas.replace(":","").length)Object(v.alert)("Formato inv\xe1lido para Horas Trabalhadas","Valida\xe7\xe3o");else{var c="mensagem/salvar";if("observacaoInterna"===this.state.botaoPressionado)c="mensagem/salvar_observacao_interna";else if(["encerrar","avaliar"].includes(this.state.botaoPressionado)&&"S"===this.state.detalhes.exibir_avaliacao&&+this.state.detalhes.solicitante_id===+m.a.sessao.usuario_id){if(this.formularioAvaliacao.campos_personalizados&&(!this.validar_campos_obrigatorios()||!this.validar_data_form()))return!1;c="chamado/salvar_avaliacao",s=Object(i.a)(Object(i.a)({},s),{},{campos_personalizados:JSON.stringify(this.formularioAvaliacao.campos_personalizados)}),this.formularioAvaliacao.campos_personalizados&&Y()(this.formularioAvaliacao.campos_personalizados.grupos).each((function(e,t){Y()(t.elementos).each((function(e,t){+t.tipo===window.ELEMENTO_TIPO.ANEXO&&t.anexo?s[t.elem_key]=t.anexo:+t.tipo===window.ELEMENTO_TIPO.TABELA&&t.valor&&Y()(t).each((function(e,t){t.valor&&Y()(t.valor).each((function(e,t){s[t.elem_key+"_linha_"+t.linha]=t.anexo}))}))}))}))}else if("encerrar"===this.state.botaoPressionado)c="chamado/encerrar_chamado";else if("reabertura"===this.state.botaoPressionado)c="chamado/reabrir_chamado";else if("abertura"===this.state.botaoPressionado){if(!this.formularioAbertura.current.validar())return Be=!1,!1;c="mensagem/salvar",s=Object(i.a)(Object(i.a)(Object(i.a)({},s),this.formularioAbertura.current.getPostParams()),{},{tipo:window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_ABERTURA})}else if("reclassificar"===this.state.botaoPressionado){var l;c="chamado/salvar",s=Object(i.a)(Object(i.a)({},s),null!==(l=this.context.reclassificacaoMemoria)&&void 0!==l?l:{})}f.a.post(c,s,o,null,null,!0,null,null,null,n)}}}},{key:"cancelar",value:function(){var e=this;if(this.state.detalhes.rascunho){var t=function(t){window.alert_saved("Rascunho cancelado."),_.a.unload(e.props.viewHtmlId)},a=function(t){window.alert_fail("Falhou, tente novamente."),console.log(t),e.setState({editavel:!0,processando:!1})};window.alertaPopUp("Cancelar","Deseja cancelar? Este <b>rascunho</b> de chamado ser\xe1 <b>exclu\xeddo</b> permanentemente.","Sim, excluir este rascunho",(function(){f.a.post({route:"chamado/excluir",data:{chamado_id:e.state.detalhes.id},func_response:t,func_fail:a})}),"N\xe3o, voltar para edi\xe7\xe3o",(function(){}),null,"200px")}else this.context.handleSetBotaoPressionado(null),this.context.handleSetNovoAssuntoChamado(this.context.assuntoChamadoAnterior),this.setState({botaoPressionado:null,editavel:!1,anexos:[]}),this.solicitarRefresh();m.a.set_parametro_usuario("chamado_rascunho_"+this.state.detalhes.id,{mensagemEdicao:null,botaoPressionado:null,anexos:[]}),this.emmitAoAlterarBotaoPressionado()}},{key:"solicitarRefresh",value:function(e){this.props.aoSolicitarRefresh&&this.props.aoSolicitarRefresh(e)}},{key:"aoEditarMensagem",value:function(e){this.setState({mensagemEdicao:e})}},{key:"aoAlterarSituacao",value:function(e){this.setState({situacao:e})}},{key:"aoAlterarPrevisaoRetorno",value:function(e){this.setState({previsaoRetorno:e.value})}},{key:"aoAlterarHorasTrabalhadas",value:function(e){this.setState({horasTrabalhadas:e.value})}},{key:"aoAlterarNotificarEnvolvidos",value:function(e){this.setState({notificarEnvolvidos:e.value})}},{key:"aoAlterarNotaAvaliacao",value:function(e){this.setState({notaAvaliacaoId:e})}},{key:"aoAlterarFixarPrevisaoRetorno",value:function(e){e=e?"S":"N",this.setState({fixarPrevisaoRetorno:e})}},{key:"form_get_elemento_by_id",value:function(e){var t={};return Y()(this.formularioAvaliacao.campos_personalizados.grupos).each((function(a,o){Array.isArray(o.elementos)&&Y()(o.elementos).each((function(a,o){o.id_elemento===e&&(t=o)}))})),t=window.spread({nome:""},t)}},{key:"validar_data_form",value:function(){var e=new Date,t=("0"+e.getDate()).slice(-2),a=("0"+(e.getMonth()+1)).slice(-2),o=e.getFullYear()+"-"+a+"-"+t,i="";return this.formularioAvaliacao.form_editor.find('[type="date"]').each((function(e,t){var a=Y()(t);"undefined"==typeof(a.attr("disabled")||a.attr("readonly"))&&"none"!==Y()(t).css("display")&&""!==t.value&&null!=t.value&&("S"===a.attr("data_retroativa")&&(window.get_datepicker(a)<o?(a.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),a.tooltip("show"),i+=this.form_get_elemento_by_id(Y()(t).attr("id_elemento")).nome+"<br />"):a.tooltip("destroy")),"S"===a.attr("data_retroativa_igual")&&(window.get_datepicker(a)<=o?(a.tooltip({title:"Data Inv\xe1lida",placement:"auto"}),a.tooltip("show"),i+=this.form_get_elemento_by_id(Y()(t).attr("id_elemento")).nome+"<br />"):a.tooltip("destroy")))})),""===i||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Data Inv\xe1lida !'," Data informada fora do per\xedodo v\xe1lido, informe corretamente para os campos abaixo: <br /><br /> "+i),!1)}},{key:"validar_campos_obrigatorios",value:function(){var e=this,t="";return this.formularioAvaliacao.form_editor.find("[required]").not(".selectpicker").each((function(a,o){var i=Y()(o);"text"===i.attr("type")&&"undefined"==typeof i.attr("maskmoney")?"undefined"==typeof i.attr("readonly")&&"none"!==Y()(o).css("display")||Y()(o).hasClass("input_consulta_integracao")?"undefined"!==typeof i.attr("maskmoney")?""!==o.value.trim()&&0!==i.maskMoney("unmasked")[0]||(t+=e.form_get_elemento_by_id(Y()(o).attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(i)):""===o.value.trim()&&(t+=e.form_get_elemento_by_id(Y()(o).attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(i)):i.tooltip("destroy"):"undefined"==typeof i.attr("disabled")&&"none"!==Y()(o).css("display")?"undefined"!==typeof i.attr("maskmoney")||"date"===i.attr("type")&&"undefined"==typeof i.attr("disabled")&&"undefined"==typeof i.attr("readonly")?""===o.value.trim()&&(t+=e.form_get_elemento_by_id(Y()(o).attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(i)):""===o.value.trim()&&"date"!==i.attr("type")&&(t+=e.form_get_elemento_by_id(Y()(o).attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(i)):i.tooltip("destroy")})),this.formularioAvaliacao.form_editor.find(".vld_lista_check").each((function(a,o){var i=Y()(o);if(!i[0].children[0].disabled&&"none"!==i[0].children[0].style.display){var n=i.find("input:checked"),r=i.parent().find(".lbl_nome");n&&0!==n.length?r.tooltip("destroy"):(t+=e.form_get_elemento_by_id(Y()(o).find("input:first").attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(r))}})),this.formularioAvaliacao.form_editor.find(".vld_lista_radio").each((function(a,o){var i=Y()(o);if(!i[0].children[0].disabled&&"none"!==i[0].children[0].style.display){var n=i.find("input:checked"),r=i.parent().find(".lbl_nome");n&&0!==n.length?r.tooltip("destroy"):(t+=e.form_get_elemento_by_id(Y()(o).find("input:first").attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(r))}})),this.formularioAvaliacao.form_editor.find("select.selectpicker[required]").each((function(a,o){var i=Y()(o);if(!i[0].disabled&&"none"!==i[0].style.display){var n=i.val(),r=i.closest(".div_campo").find(".lbl_nome");n&&0!==n.length?r.tooltip("destroy"):(t+=e.form_get_elemento_by_id(Y()(o).attr("id_elemento")).nome+"<br />",e.alerta_campo_obrigatorio(r))}})),""===t||(window.alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Campos Obrigat\xf3rios !'," Por gentileza, preencha os campos abaixo: <br /><br /> "+t),!1)}},{key:"alerta_campo_obrigatorio",value:function(e,t){e.tooltip({title:"Campo obrigatorio",placement:"undefined"!=typeof t?t:"auto"}),e.tooltip("show")}},{key:"renderGridAnexos",value:function(){return!(!this.state.anexos||0===this.state.anexos.length)&&Object(o.jsxs)(J.default,{dataSource:this.state.anexos,filterPanel:{visible:!1},filterRow:{visible:!1},headerFilter:{visible:!1},groupPanel:{visible:!1},export:{enabled:!1},allowColumnReordering:!1,columnChooser:{enabled:!1},editing:{mode:"cell",allowUpdating:!0},keyExpr:"id",showBorders:!1,showColumnLines:!1,columnFixing:{enable:!1},rowAlternationEnabled:!1,children:[Object(o.jsx)(Q.Column,{dataField:"arquivo",allowEditing:!1}),Object(o.jsx)(Q.Column,{dataField:"tamanho",allowEditing:!1,width:100}),Object(o.jsx)(Q.Column,{dataField:"email",width:100}),Object(o.jsx)(Q.Column,{type:"buttons",width:50,alignment:"right",children:Object(o.jsx)(Q.Button,{hint:"Remover anexo",icon:"fa fa-times",onClick:this.btnRemoverAnexo})})]})}},{key:"btnRemoverAnexo",value:function(e){var t=this.state.anexos,a=[];t.forEach((function(t){e.row.data.file!==t.file&&a.push(t)})),this.setState({anexos:a})}},{key:"downloadTodosAnexos",value:function(){var e=this;m.a.obter_token_publico((function(t){m.a.download(window.WS_URI+"chamado/download/?chamado_id="+e.state.detalhes.id+"&token_publico="+t)}))}},{key:"btnFusaoChamadosClick",value:function(){var e=this;_.a.load("chamado/fusao_chamados",(function(t,a){a.onclose=function(){e.props.aoSalvar&&e.props.aoSalvar()},a.show(e.state.detalhes.id)}))}},{key:"btnEncerrarInatividadeClick",value:function(){var e=this;_.a.load("chamado/encerramento_chamado_inatividade",(function(t,a){a.onclose=function(){e.props.aoSalvar&&e.props.aoSalvar()},a.show(e.state.detalhes.id)}))}},{key:"btnExcluirClick",value:function(){var e=this;_.a.load("chamado/excluir_chamado",(function(t,a){a.onclose=function(){_.a.unload(e.props.viewHtmlId)},a.show(e.state.detalhes.id)}))}},{key:"btnAnexarArquivoClick",value:function(){var e=this,t=document.createElement("input");t.type="file",t.multiple="multiple",t.onchange=function(t){var a=Array.from(t.target.files),o=[];a.forEach((function(e){o.push({arquivo:e.name,tamanho:window.filesize(e.size),email:!1,mimeType:e.type,file:e,id:window.elem_key_random()})})),e.setState({anexos:[].concat(Object(ge.a)(e.state.anexos),o)})},t.click()}},{key:"aoAlterarTipoExibicaoDataEnvio",value:function(e){this.props.aoAlterarTipoExibicaoDataEnvio&&this.props.aoAlterarTipoExibicaoDataEnvio(e)}},{key:"render",value:function(){var e,t=this;if(!("undefined"!==typeof this.props.mensagem?this.props.mensagem.tipo:null)){var a=[window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE].includes(+this.props.chamadoSituacao),i=!1;if("S"===this.state.detalhes.somente_admin_encerra&&m.a.sessao.dados.admin)i=!0;else if("S"===this.state.detalhes.somente_solicitante_encerra){if(m.a.sessao.usuario_id===+this.state.detalhes.solicitante_id||m.a.sessao.dados.admin)i=!0;else if(m.a.sessao.dados.usuarios_substituidos.length>0){m.a.sessao.dados.usuarios_substituidos.filter((function(e){return"S"===e.substituir_modulo_chamados&&+e.usuario_substituido_id===+t.state.detalhes.solicitante_id})).length>0&&(i=!0)}}else"N"===this.state.detalhes.somente_admin_encerra&&"N"===this.state.detalhes.somente_solicitante_encerra&&(i=!0);if("encerrar"===this.state.botaoPressionado){var n=window.nl2br(this.state.detalhes.mensagem_padrao);"S"===this.state.detalhes.sugerir_mensagem_padrao_colaboradores&&+m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA&&(n=null),n&&!this.state.mensagemEdicao&&this.state.mensagemEdicao!==n&&this.setState({mensagemEdicao:n})}var r=[];if(m.a.PE.CardMensagemChamadoTopoBotoesAdicionais)try{var s=m.a.PE.CardMensagemChamadoTopoBotoesAdicionais(this.props.viewHtmlId,this.state,this.solicitarRefresh);Array.isArray(s)&&s.forEach((function(e){r.push(Object(o.jsx)(fe.Item,{text:e.titulo,type:"default",onClick:e.click,visible:!0},window.random_hash()))}))}catch(O){console.log(O)}return r.push(Object(o.jsx)(fe.Item,{acao:"escreverMensagem",icon:"fas fa-comment",text:"Escrever Mensagem",type:"escreverMensagem"===this.state.botaoPressionado?"default":"normal",onClick:this.escreverMensagem,visible:!a,elementAttr:{class:"btn_escrever_mensagem"}},"escreverMensagem"),Object(o.jsx)(fe.Item,{acao:"observacaoInterna",icon:"fas fa-sticky-note",text:"Observa\xe7\xe3o Interna",type:"observacaoInterna"===this.state.botaoPressionado?"default":"normal",onClick:this.observacaoInterna,visible:m.a.sessao.dados.tipo===window.USUARIO_TIPO.ANALISTA,elementAttr:{class:"btn_observacao_interna"}},"observacaoInterna"),Object(o.jsx)(fe.Item,{acao:"reclassificar",icon:"fas fa-tag",text:"Reclassificar",type:"reclassificar"===this.state.botaoPressionado?"default":"normal",onClick:this.reclassificar,visible:!a&&m.a.sessao.dados.tipo===window.USUARIO_TIPO.ANALISTA&&m.a.verifica_permissao(m.a.temp.empresa,"reclassificar_chamado"),elementAttr:{class:"btn_reclassificar"}},"reclassificar"),Object(o.jsx)(fe.Item,{acao:"encerrar",icon:"fas fa-check",text:"Encerrar",type:"encerrar"===this.state.botaoPressionado?"default":"normal",onClick:this.encerrar,visible:!a&&i,elementAttr:{class:"btn_encerrar"}},"encerrar"),Object(o.jsx)(fe.Item,{acao:"avaliar",icon:"fas fa-star-half-alt",text:"Avaliar",type:"avaliar"===this.state.botaoPressionado?"success":"normal",onClick:this.avaliar,visible:a&&"S"===this.state.detalhes.exibir_avaliacao&&0===+this.state.detalhes.nota_avaliacao_id&&0===+this.state.detalhes.formulario_chamado_avaliacao_id&&+m.a.sessao.dados.usuario_id===+this.state.detalhes.solicitante_id,elementAttr:{class:"btn_avaliar"}},"avaliar"),Object(o.jsx)(fe.Item,{acao:"reabertura",icon:"far fa-thumbs-down",text:"Reabrir chamado",type:"reabertura"===this.state.botaoPressionado?"danger":"normal",onClick:this.reabertura,visible:a,elementAttr:{class:"btn_reabertura"}},"reabertura")),Object(o.jsx)(p.a.Fragment,{children:Object(o.jsx)("div",{className:"panel ",children:Object(o.jsx)("div",{className:"panel-body ",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 text-left",children:[this.state.nova?Object(o.jsxs)(pe.a,{visible:this.state.detalhes&&!this.state.detalhes.rascunho,stylingMode:"text",ref:this.toolBarTopoRef,children:[Object(o.jsx)(ue.Item,{location:"before",children:Object(o.jsx)(fe.ButtonGroup,{selectionMode:"single",stylingMode:"text",selectedItemKeys:[this.state.botaoPressionado],keyExpr:"acao",children:r})}),Object(o.jsx)(ue.Item,{locateInMenu:"always",widget:"dxButton",visible:!a&&m.a.verifica_permissao(m.a.temp.empresa,"chamado_fusao"),children:Object(o.jsx)(Te.Button,{onClick:this.btnFusaoChamadosClick,text:"Fundir outros chamados neste chamado",icon:"fas fa-object-group",stylingMode:"text"})}),Object(o.jsx)(ue.Item,{locateInMenu:"always",widget:"dxButton",visible:!a&&i,children:Object(o.jsx)(Te.Button,{onClick:this.btnEncerrarInatividadeClick,text:"Encerrar por Inatividade",icon:"fa fa-clock",stylingMode:"text"})}),Object(o.jsx)(ue.Item,{locateInMenu:"always",widget:"dxButton",visible:m.a.sessao.dados.admin,children:Object(o.jsx)(Te.Button,{onClick:this.btnExcluirClick,text:"Excluir",icon:"fa fa-trash-alt",stylingMode:"text"})}),Object(o.jsx)(ue.Item,{location:"after",children:Object(o.jsx)(Te.Button,{onClick:this.downloadTodosAnexos,hint:"Download de todos os anexos",icon:"fa fa-download",stylingMode:"text",visible:this.state.exibirBotaoDownloadAnexos})})]},"toolbar"):null,this.state.botaoPressionado?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(de.b,{}),Object(o.jsxs)("div",{children:["avaliar"!==this.state.botaoPressionado?Object(o.jsx)(Ae,{viewHtmlId:this.props.viewHtmlId,chamadoMotivoId:this.state.chamadoMotivoId,editavel:!0,chamadoId:this.state.detalhes.id,aoEditar:this.aoEditarMensagem,mensagem:this.state.mensagemEdicao}):null,a||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA||["observacaoInterna","reabertura"].includes(this.state.botaoPressionado)?null:Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsxs)("div",{className:"row",children:[["escreverMensagem"].includes(this.state.botaoPressionado)?Object(o.jsx)("div",{className:"col-md-4",children:Object(o.jsx)(re,{detalhes:this.state.detalhes,style:{padding:"0px"},novaMensagem:!0,aoAlterar:this.aoAlterarSituacao,botaoPressionado:this.context.botaoPressionado,configuracoesChamado:this.props.configuracoesChamado})}):null,["escreverMensagem"].includes(this.state.botaoPressionado)?Object(o.jsx)("div",{className:"col-md-4",children:Object(o.jsx)(B,{style:{padding:"0px"},novaMensagem:!0,detalhes:this.state.detalhes,aoAlterar:this.aoAlterarPrevisaoRetorno,aoAlterarFixarPrevisaoRetorno:this.aoAlterarFixarPrevisaoRetorno})}):null,["escreverMensagem","reclassificar","encerrar"].includes(this.state.botaoPressionado)?Object(o.jsx)("div",{className:"col-md-4",children:Object(o.jsx)(ke,{style:{padding:"0px"},aoAlterar:this.aoAlterarHorasTrabalhadas,mascaraHorasTrabalhadas:this.state.mascaraHorasTrabalhadas})}):null]}),Object(o.jsx)(de.b,{})]}),this.renderGridAnexos(),Object(o.jsx)(de.b,{}),a&&"reabertura"===this.state.botaoPressionado?Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",children:["O chamado ser\xe1 reaberto, antes de prosseguir, verifique se o assunto do chamado est\xe1 relacionado com o motivo da reabertura do mesmo, caso contr\xe1rio realize a abertura de um novo chamado.",Object(o.jsx)(de.b,{})]})}):null,!["encerrar","avaliar"].includes(this.state.botaoPressionado)||"S"!==this.state.detalhes.exibir_avaliacao||+m.a.sessao.dados.usuario_id!==+this.state.detalhes.solicitante_id&&+m.a.sessao.dados.usuario_id!==+this.state.detalhes.usuario_abertura_id?null:Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:+this.state.detalhes.formulario_avaliacao_id>0?Object(o.jsx)(Le,{detalhes:this.state.detalhes,main:this.formularioAvaliacao}):Object(o.jsx)(Fe,{style:{padding:"0px"},detalhes:this.state.detalhes,aoAlterar:this.aoAlterarNotaAvaliacao})})}),Object(o.jsx)(de.b,{})]}),["abertura"].includes(this.state.botaoPressionado)?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(Ue.default,{ref:this.formularioAbertura,main:this.formularioAberturaMain,urlGet:"formulario_chamado_abertura/get_formulario",urlGetParams:{chamado_id:this.state.detalhes.id,motivo_id:this.state.chamadoMotivoId}})})}),Object(o.jsx)(de.b,{})]}):null,Object(o.jsxs)(pe.a,{children:[Object(o.jsxs)(ue.Item,{location:"before",children:[Object(o.jsx)(Te.Button,{onClick:this.confirmar,text:"Confirmar",icon:"fas fa-check",stylingMode:"contained",type:"encerrar"===this.state.botaoPressionado?"success":"default"}),Object(o.jsx)(Te.Button,{onClick:this.btnAnexarArquivoClick,hint:"Anexar arquivo",icon:"fas fa-paperclip",stylingMode:"text",visible:"avaliar"!==this.state.botaoPressionado})]}),a||this.state.detalhes.rascunho||m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA&&!0!==m.a.sessao.dados.admin||!(["reclassificar","escreverMensagem"].includes(this.state.botaoPressionado)&&"S"===this.state.detalhes.notificacao_mensagem_reclassificacao_opcional||["observacaoInterna"].includes(this.state.botaoPressionado)&&"S"===this.state.detalhes.notificacao_observacao_interna_opcional)?null:Object(o.jsx)(ue.Item,{location:"before",children:Object(o.jsx)(U.CheckBox,{text:"Notificar envolvidos",value:this.state.notificarEnvolvidos,onValueChanged:this.aoAlterarNotificarEnvolvidos})}),Object(o.jsx)(ue.Item,{location:"after",children:Object(o.jsx)(Te.Button,{onClick:this.cancelar,text:"Cancelar",stylingMode:"text"})})]})]})]}):null]})})})})})}var c=null,l="",d=!1,u=0,f=0;this.state.nova?(c=m.a.sessao.dados.foto_id,l=m.a.sessao.dados.nome):"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.nome_usuario&&(c=this.state.mensagem.foto_id,l=this.state.mensagem.nome_usuario,d=this.state.mensagem.usuario_supervisionado,u=+this.state.mensagem.usuario_tipo,f=+this.state.mensagem.tipo);var _=Object(o.jsx)(ve.a,{nome:l,tamanho:"32",documentoId:c,imgAlternativa:"assets/img/imagem_usuario_padrao.svg"}),h=parseInt(m.a.sessao.dados.usuario_id,10)===parseInt(this.state.mensagem.usuario_id,10),v=h?"text-right pull-right":"text-left",b=m.a.verifica_permissao(m.a.temp.empresa,"edicao_horas_trabalhadas"),j=m.a.sessao.dados.admin||b&&(h||d);return Object(o.jsx)("div",{className:"panel",children:Object(o.jsx)("div",{className:"panel-body",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 text-left",style:{display:"inline-flex",wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:[h?null:Object(o.jsxs)(p.a.Fragment,{children:[_,Object(o.jsx)(de.a,{})]}),Object(o.jsxs)("div",{style:{width:"100%"},children:[Object(o.jsxs)("div",{className:v,children:[Object(o.jsx)(Ce.a,{nome:l}),Object(o.jsx)(Se.a,{dataEnvio:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.data_envio?this.state.mensagem.data_envio:null,aoAlterarTipoExibicao:this.aoAlterarTipoExibicaoDataEnvio,extenso:this.state.dataEnvioExtenso}),u===window.USUARIO_TIPO.ANALISTA&&[window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_NORMAL,window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_ENCERRAMENTO,window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_RECLASSIFICACAO].includes(f)?Object(o.jsx)("div",{children:Object(o.jsx)(Ie,{chamadoId:this.props.chamadoId,mensagemId:this.props.chamadoMensagemId,permiteEdicao:j,horasTrabalhadas:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.horas_trabalhadas?this.state.mensagem.horas_trabalhadas:null,mascaraHorasTrabalhadas:this.props.mascaraHorasTrabalhadas,aoSolicitarRefresh:null!==(e=this.props.aoSolicitarRefresh)&&void 0!==e?e:null})}):null]}),"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.tipo?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(Pe,{tipo:this.state.mensagem.tipo}),h&&parseInt(this.state.mensagem.tipo,10)===window.TIPO_MENSAGEM_CHAMADO.MENSAGEM_TIPO_NORMAL?null:Object(o.jsx)(de.b,{})]}):null,Object(o.jsx)(Ae,{viewHtmlId:this.props.viewHtmlId,editavel:this.state.editavel,chamadoId:this.state.detalhes?this.state.detalhes.id:null,chamadoMotivoId:this.state.chamadoMotivoId,mensagem:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.mensagem?this.state.mensagem.mensagem:"Sem mensagem",tipo:"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.tipo?this.state.mensagem.tipo:null},"mensagem"),"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.observacoes?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(de.b,{}),Object(o.jsx)(Ee,{observacoes:this.state.mensagem.observacoes},"observacoes")]}):null,"undefined"!==typeof this.state.mensagem&&this.state.mensagem&&"undefined"!==typeof this.state.mensagem.documentos&&Array.isArray(this.state.mensagem.documentos)&&this.state.mensagem.documentos.length>0?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(de.b,{}),Object(o.jsx)(De,{documentos:this.state.mensagem.documentos},"documentos")]}):null]}),h?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(de.a,{}),_]}):null]})})})})}}]),a}(p.a.Component);Ve.contextType=g;var ze=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).buttonGroupRef=p.a.createRef(null),o.handleExibirMensagens=o.handleExibirMensagens.bind(Object(s.a)(o)),o.state={exibirMensagens:!1},o}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t={backgroundColor:"#FFF",boxSizing:"border-box",padding:10,minWidth:200,marginTop:5};return Object(o.jsx)("div",{id:"container",children:Object(o.jsxs)("div",{style:Object(i.a)({display:"flex"},{marginBottom:12,marginTop:-8,gap:10}),id:"grupoMensagens",children:[Object(o.jsx)("a",{style:{display:"inline-block",width:"30px",height:"30px",borderRadius:10,backgroundColor:"#FFF",textAlign:"center",lineHeight:"31px",textDecoration:"none",fontSize:12,fontWeight:"bold"},href:"#",ref:this.buttonGroupRef,onClick:this.handleExibirMensagens,title:"Exibir mensagens agrupadas",children:Object(o.jsx)("i",{className:this.state.exibirMensagens?"fas fa-times":"fas fa-ellipsis-h"})}),Object(o.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:Array.isArray(this.props.mensagens)&&this.props.mensagens.length&&this.props.mensagens.map((function(a,i){var n,r=parseInt(m.a.sessao.dados.usuario_id)===parseInt(a.usuario_id),s=(m.a.sessao.dados.admin||m.a.verifica_permissao(m.a.temp.empresa,"edicao_horas_trabalhadas"))&&(r||a.usuario_supervisionado);return Object(o.jsx)("div",{style:{display:e.state.exibirMensagens?"":"none",marginTop:-4,marginBottom:i+1!=e.props.mensagens.length?8:0},className:"mensagemGrupo",children:Object(o.jsxs)("div",{style:t,children:[Object(o.jsx)("div",{style:{float:"right"},children:Object(o.jsxs)("div",{style:{display:"flex"},children:[Object(o.jsxs)("div",{style:{marginRight:12},children:[Object(o.jsx)("strong",{style:{display:"block",textAlign:"right"},children:a.nome_usuario}),Object(o.jsx)(Se.a,{dataEnvio:a.data_envio,aoAlterarTipoExibicao:e.props.aoAlterarTipoExibicaoDataEnvio,extenso:e.props.dataEnvioExtenso}),Object(o.jsx)("div",{style:{textAlign:"right"},children:Object(o.jsx)(Ie,{chamadoId:a.chamado_id,mensagemId:a.id,permiteEdicao:s,horasTrabalhadas:a.horas_trabalhadas,mascaraHorasTrabalhadas:e.props.mascaraHorasTrabalhadas,aoSolicitarRefresh:null!==(n=e.props.aoSolicitarRefresh)&&void 0!==n?n:null})})]}),Object(o.jsx)("div",{children:Object(o.jsx)(ve.a,{nome:a.nome_usuario,tamanho:"32",documentoId:a.foto_id,imgAlternativa:"assets/img/imagem_usuario_padrao.svg"})})]})}),Object(o.jsx)("div",{className:"text-muted small",style:{lineBreak:"anywhere"},dangerouslySetInnerHTML:{__html:a.observacoes}})]})})}))})]})})}},{key:"handleExibirMensagens",value:function(){this.setState((function(e){return{exibirMensagens:!e.exibirMensagens}}))}}]),a}(p.a.Component),Ge=a(627);a(529),a(1121);var He=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state=o.propsToObjState(),o.formularioAbertura=p.a.createRef(),o.formularioAberturaMain={},o.confirmarClick=o.confirmarClick.bind(Object(s.a)(o)),o.cancelarClick=o.cancelarClick.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"propsToObjState",value:function(){var e,t,a;return{chamadoId:null!==(e=this.props.chamadoId)&&void 0!==e?e:null,chamadoMotivoId:null!==(t=this.props.chamadoMotivoId)&&void 0!==t?t:null,readOnly:null!==(a=this.props.readOnly)&&void 0!==a&&a}}},{key:"componentDidUpdate",value:function(e,t){e.chamadoId===this.props.chamadoId&&e.chamadoMotivoId===this.props.chamadoMotivoId||this.setState(this.propsToObjState())}},{key:"confirmarClick",value:function(){var e=this;if(!this.formularioAbertura.current.validar())return!1;var t=Object(i.a)(Object(i.a)({chamado_id:this.state.chamadoId},this.formularioAbertura.current.getPostParams()),this.formularioAbertura.current.getAnexosParams());f.a.post({route:"formulario_chamado_abertura/salvar",data:t,func_response:function(t){window.alert_saved("Formul\xe1rio salvo com sucesso."),e.formularioAbertura.current.renderFormulario()},func_fail:function(e){window.alert_fail("Falhou, tente novamente.")},data_files:!0})}},{key:"cancelarClick",value:function(){this.formularioAbertura.current.renderFormulario()}},{key:"render",value:function(){return Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)(Ue.default,{ref:this.formularioAbertura,main:this.formularioAberturaMain,urlGet:"formulario_chamado_abertura/get_formulario",urlGetParams:{chamado_id:this.state.chamadoId,motivo_id:this.state.chamadoMotivoId},readOnly:this.state.readOnly}),Object(o.jsxs)(pe.a,{visible:!this.state.readOnly,children:[Object(o.jsx)(ue.Item,{location:"before",children:Object(o.jsx)(Te.Button,{onClick:this.confirmarClick,text:"Salvar",icon:"fas fa-check",stylingMode:"contained",type:"default"})}),Object(o.jsx)(ue.Item,{location:"after",children:Object(o.jsx)(Te.Button,{onClick:this.cancelarClick,text:"Cancelar",stylingMode:"text"})})]})]})}}]),a}(p.a.Component);var qe=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o,i,r,c,l,d,u,p,f,_,h,v,b,j,O,g,w,x,y;return Object(n.a)(this,a),(y=t.call(this,e)).state={novo:!1,chamadoId:"undefined"!=typeof e.chamadoId?e.chamadoId:0,cartaoId:null!==(o=e.cartaoId)&&void 0!==o?o:null,projetoAtividadeId:null!==(i=e.projetoAtividadeId)&&void 0!==i?i:null,projetoId:null!==(r=e.projetoId)&&void 0!==r?r:null,oportunidadeId:null!==(c=e.oportunidadeId)&&void 0!==c?c:null,solicitacaoAtividadeId:null!==(l=e.solicitacaoAtividadeId)&&void 0!==l?l:null,solicitacaoId:null!==(d=e.solicitacaoId)&&void 0!==d?d:null,pdcaId:null!==(u=e.pdcaId)&&void 0!==u?u:null,pdcaAtividadeId:null!==(p=e.pdcaAtividadeId)&&void 0!==p?p:null,assunto:null!==(f=e.assunto)&&void 0!==f?f:null,emails:null!==(_=e.emails)&&void 0!==_?_:null,entidadeId:null!==(h=e.entidadeId)&&void 0!==h?h:null,entidadeTipo:null!==(v=e.entidadeTipo)&&void 0!==v?v:null,situacao:null,entidadeNome:null,detalhes:null,mensagens:null,referencias:null,botaoPressionado:"mensagens",botaoPressionadoReclassificacao:!1,botaoPressionadoAvaliar:null!==(b=e.botaoPressionadoAvaliar)&&void 0!==b&&b,carregandoMensagem:!1,exibirBotaoDownloadAnexos:!1,exibirMaisDetalhes:null!==(j=e.exibirMaisDetalhes)&&void 0!==j?j:function(){var e=m.a.get_parametro_usuario("chamado_detalhes");return!(!e||"undefined"===typeof e.exibirMaisDetalhes||""===e.exibirMaisDetalhes)&&e.exibirMaisDetalhes}(),colaboradorPodeAlterarSolicitante:!1,dataEnvioExtenso:null!==(O=e.dataEnvioExtenso)&&void 0!==O?O:function(){var e=m.a.get_parametro_usuario("chamado_detalhes");return!(!e||"undefined"===typeof e.dataEnvioExtenso||""===e.dataEnvioExtenso)&&e.dataEnvioExtenso}(),referenciaTabela:null!==(g=e.referenciaTabela)&&void 0!==g?g:null,referenciaId:null!==(w=e.referenciaId)&&void 0!==w?w:null,mascaraHorasTrabalhadas:null!==(x=e.mascaraHorasTrabalhadas)&&void 0!==x?x:"000:00"},y.getInstanceMaisDetalhes=y.getInstanceMaisDetalhes.bind(Object(s.a)(y)),y.getInstanceMensagens=y.getInstanceMensagens.bind(Object(s.a)(y)),y.obterDetalhes=y.obterDetalhes.bind(Object(s.a)(y)),y.aoSalvarMensagem=y.aoSalvarMensagem.bind(Object(s.a)(y)),y.aoAlterarBotaoPressionadoCardNovaMensagem=y.aoAlterarBotaoPressionadoCardNovaMensagem.bind(Object(s.a)(y)),y.btnToogleExibirMaisDetalhesClick=y.btnToogleExibirMaisDetalhesClick.bind(Object(s.a)(y)),y.aoAlterarTipoExibicaoDataEnvio=y.aoAlterarTipoExibicaoDataEnvio.bind(Object(s.a)(y)),y}return Object(r.a)(a,[{key:"getInstanceMaisDetalhes",value:function(e){if(e){var t=e.instance.element();t.css("height","calc(100vh - "+(t.closest("[div-view]").find(".cardTopo").height()+50)+"px)")}}},{key:"getInstanceMensagens",value:function(e){if(e){var t=e.instance.element();t.css("height","calc(100vh - "+(t.closest("[div-view]").find(".cardTopo").height()+50)+"px)")}}},{key:"componentDidMount",value:function(){var e=this;f.a.get("chamado/get_configuracoes/",null,(function(t){e.configuracoes_chamado=t,0===e.state.chamadoId?e.novo():e.obterDetalhes()}))}},{key:"componentWillUnmount",value:function(){this.props.onClose&&this.props.onClose()}},{key:"novo",value:function(){var e={rascunho:!0,usuario_solicitante_id:m.a.sessao.dados.usuario_id,situacao:window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO};if(this.state.cartaoId&&(e=Object(i.a)(Object(i.a)({},e),{},{tarefa_quadro_lista_cartao_id:this.state.cartaoId})),this.state.projetoAtividadeId&&(e=Object(i.a)(Object(i.a)({},e),{},{projeto_atividade_id:this.state.projetoAtividadeId})),this.state.projetoId&&(e=Object(i.a)(Object(i.a)({},e),{},{projeto_id:this.state.projetoId})),this.state.assunto&&(e=Object(i.a)(Object(i.a)({},e),{},{assunto:this.state.assunto})),this.state.oportunidadeId&&(e=Object(i.a)(Object(i.a)({},e),{},{oportunidade_id:this.state.oportunidadeId})),this.state.solicitacaoAtividadeId&&(e=Object(i.a)(Object(i.a)({},e),{},{solicitacao_atividade_id:this.state.solicitacaoAtividadeId})),this.state.solicitacaoId&&(e=Object(i.a)(Object(i.a)({},e),{},{solicitacao_id:this.state.solicitacaoId})),this.state.pdcaId&&(e=Object(i.a)(Object(i.a)({},e),{},{pdca_id:this.state.pdcaId})),this.state.pdcaAtividadeId&&(e=Object(i.a)(Object(i.a)({},e),{},{pdca_atividade_id:this.state.pdcaAtividadeId})),this.state.emails&&"S"===m.a.sessao.dados.parametro_chamado.sugerir_email&&(e=Object(i.a)(Object(i.a)({},e),{},{emails_adicionais:this.state.emails})),"S"===m.a.sessao.dados.parametro_chamado.sugerir_entidade_usuario_logado&&!this.state.oportunidadeId&&!this.state.solicitacaoAtividadeId&&!this.state.solicitacaoId)switch(+m.a.sessao.dados.tipo){case window.USUARIO_TIPO.CLIENTE:e=Object(i.a)(Object(i.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.CLIENTE,entidade_id:m.a.sessao.dados.cliente_id});break;case window.USUARIO_TIPO.ANALISTA:e=Object(i.a)(Object(i.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.EMPRESA,entidade_id:m.a.temp.empresa});break;case window.USUARIO_TIPO.FORNECEDOR:e=Object(i.a)(Object(i.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.FORNECEDOR,entidade_id:m.a.sessao.dados.fornecedor.fornecedor_id});break;case window.USUARIO_TIPO.PROSPECT:e=Object(i.a)(Object(i.a)({},e),{},{entidade_tipo:window.TIPO_ENTIDADE.ORGANIZACAO,entidade_id:m.a.sessao.dados.organizacao.organizacao_id})}this.state.entidadeId&&(e=Object(i.a)(Object(i.a)({},e),{},{entidade_id:this.state.entidadeId})),this.state.entidadeTipo&&(e=Object(i.a)(Object(i.a)({},e),{},{entidade_tipo:this.state.entidadeTipo})),this.state.referenciaTabela&&(e=Object(i.a)(Object(i.a)({},e),{},{referencia_tabela:this.state.referenciaTabela})),this.state.referenciaId&&(e=Object(i.a)(Object(i.a)({},e),{},{referencia_id:this.state.referenciaId})),Object(h.f)(e,this.obterDetalhes),this.setState({novo:!0,exibirMaisDetalhes:!0})}},{key:"verificaDocumentosEmMensagens",value:function(e){var t=!1;return e&&e.every((function(e){return!(e.documentos.length>0)||(t=!0,!1)})),t}},{key:"setStateResponse",value:function(e,t){e&&e.chamado&&(m.a.titulo_aba(this.props.html_id,"Chamado #"+e.chamado.id),this.setState(Object(i.a)({detalhes:e.chamado,chamadoId:e.chamado.id,entidadeId:e.chamado.entidade_id,entidadeNome:e.chamado.entidade_nome,assunto:e.chamado.assunto,situacao:e.chamado.situacao,mensagens:e.mensagens,carregandoMensagem:!1,exibirBotaoDownloadAnexos:this.verificaDocumentosEmMensagens(e.mensagens),exibirMaisDetalhes:this.state.exibirMaisDetalhes||e.chamado.rascunho,mascaraHorasTrabalhadas:e.configuracoes.mascara_horas_trabalhadas,colaboradorPodeAlterarSolicitante:"S"===e.chamado.chamado_motivo_altera_solicitante},t)))}},{key:"obterDetalhes",value:function(e,t){var a=this;if(e&&e.chamado&&!1===e.chamado.tem_permissao)window.alertaPopUp("Salvo com sucesso","As altera\xe7\xe3o foram salvas com sucesso. Por\xe9m, voc\xea n\xe3o possui mais permiss\xe3o no chamado.","Ok",(function(){})),Y()('[id="'+this.props.html_id+'"]').css({pointerEvents:"none",opacity:.5});else if(e&&e.chamado)this.setStateResponse(e,t);else{if(!this.state.chamadoId)return;this.setState({carregandoMensagem:!0},(function(){if(m.a.PE.Chamado_Detalhes_listar_mensagens_antes)try{m.a.PE.Chamado_Detalhes_listar_mensagens_antes(a.props.html_id,a.state,a.obterDetalhes)}catch(e){console.log(e)}f.a.get({route:"chamado/listar_detalhes_chamado/",data:{chamado_id:a.state.chamadoId},func_response:function(o){if(a.setStateResponse(o,t),m.a.PE.Chamado_Detalhes_listar_mensagens_depois)try{m.a.PE.Chamado_Detalhes_listar_mensagens_depois(a.props.html_id,a.state,a.obterDetalhes)}catch(e){console.log(e)}},func_fail:function(){a.setState({detalhes:null,carregandoMensagem:!1},(function(){_.a.unload(a.props.html_id)}))}})}))}}},{key:"aoSalvarMensagem",value:function(e){var t={botaoPressionadoReclassificacao:!1,botaoPressionadoAvaliar:!1};this.obterDetalhes(e,t),this.state.novo&&this.setState(Object(i.a)({novo:!1},t))}},{key:"aoAlterarBotaoPressionadoCardNovaMensagem",value:function(e){this.setState({botaoPressionadoReclassificacao:"reclassificar"===e})}},{key:"renderReferencias",value:function(){return Object(o.jsx)(Ge.default,{tabela:"chamado",id:this.state.chamadoId,html_id:this.props.html_id})}},{key:"renderFormularioAvaliacao",value:function(){return Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)("div",{className:"panel",children:Object(o.jsx)("div",{className:"panel-body",children:Object(o.jsx)(Le,{detalhes:this.state.detalhes,readOnly:!0})})})})})}},{key:"renderFormularioAbertura",value:function(){return Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)("div",{className:"panel",children:Object(o.jsx)("div",{className:"panel-body",children:Object(o.jsx)(He,{chamadoId:this.state.detalhes.id,chamadoMotivoId:this.state.detalhes.chamado_motivo_id,readOnly:+m.a.sessao.dados.tipo!==window.USUARIO_TIPO.ANALISTA})})})})})}},{key:"renderMensagensLoading",value:function(){return Object(o.jsx)("div",{className:"panel",children:Object(o.jsx)("div",{className:"panel-body",children:Object(o.jsx)("div",{className:"",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-xs-12 text-left",children:[Object(o.jsx)("div",{className:"animationLoading",children:Object(o.jsxs)("div",{className:"animationLoadingTopo",children:[Object(o.jsx)("div",{className:"animationLoadingFoto"}),Object(o.jsx)(de.a,{}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"animationLoadingLineA"}),Object(o.jsx)(de.b,{}),Object(o.jsx)("div",{className:"animationLoadingLineB"}),Object(o.jsx)(de.b,{}),Object(o.jsx)("div",{className:"animationLoadingLineC"}),Object(o.jsx)(de.b,{}),Object(o.jsx)("div",{className:"animationLoadingLineD"}),Object(o.jsx)(de.b,{}),Object(o.jsx)("div",{className:"animationLoadingLineE"})]})]})}),Object(o.jsx)(de.b,{})]})})})})})}},{key:"renderMensagens",value:function(){var e=this;if(Array.isArray(this.state.mensagens)&&this.state.mensagens.length){for(var t=[],a=0,n=0;n<this.state.mensagens.length;n++){var r=this.state.mensagens[n];null!==r.mensagem&&r.mensagem.length?(t.push(Object(i.a)({},r)),a=t.length):(Array.isArray(t[a])||(t[a]=[]),t[a].push(Object(i.a)({},r)))}return t.length?t.map((function(t){return Array.isArray(t)?Object(o.jsx)(ze,{mensagens:t,aoAlterarTipoExibicaoDataEnvio:e.aoAlterarTipoExibicaoDataEnvio,dataEnvioExtenso:e.state.dataEnvioExtenso,mascaraHorasTrabalhadas:e.state.mascaraHorasTrabalhadas,aoSolicitarRefresh:e.obterDetalhes}):Object(o.jsx)(Ve,{editavel:!1,mensagem:t,aoSalvar:e.aoSalvarMensagem,chamadoId:e.state.chamadoId,chamadoMensagemId:t.id,aoAlterarTipoExibicaoDataEnvio:e.aoAlterarTipoExibicaoDataEnvio,dataEnvioExtenso:e.state.dataEnvioExtenso,notificarEnvolvidos:"S"===e.state.detalhes.valor_padrao_notificar_envolvolvidos,mascaraHorasTrabalhadas:e.state.mascaraHorasTrabalhadas,aoSolicitarRefresh:e.obterDetalhes,configuracoesChamado:e.configuracoes_chamado},t.id.toString())})):null}}},{key:"btnToogleExibirMaisDetalhesClick",value:function(){var e=this,t=!this.state.exibirMaisDetalhes;return this.setState({exibirMaisDetalhes:t},(function(){m.a.set_parametro_usuario("chamado_detalhes",{exibirMaisDetalhes:e.state.exibirMaisDetalhes})})),t}},{key:"aoAlterarTipoExibicaoDataEnvio",value:function(e){this.setState({dataEnvioExtenso:e},(function(){m.a.set_parametro_usuario("chamado_detalhes",{dataEnvioExtenso:e})}))}},{key:"renderReclassificacao",value:function(){return this.state.detalhes?Object(o.jsx)(ce,{chamadoId:this.state.chamadoId,detalhes:this.state.detalhes,aoSolicitarRefresh:this.obterDetalhes,botaoPressionadoReclassificacao:this.state.botaoPressionadoReclassificacao,colaboradorPodeAlterarSolicitante:this.state.colaboradorPodeAlterarSolicitante,configuracoesChamado:this.configuracoes_chamado}):null}},{key:"render",value:function(){var e=this;if(!this.state.detalhes)return Object(o.jsx)("div",{children:"Carregando, aguarde..."});var t=this.state.botaoPressionadoReclassificacao||this.state.exibirMaisDetalhes,a=t?"col-md-3":"hidden",i=t?"col-md-9":"col-md-12";return Object(o.jsx)(w,{children:Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"row cardTopo",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(Oe,{viewHtmlId:this.props.html_id,chamadoId:this.state.chamadoId,detalhes:this.state.detalhes,mensagensCount:"undefined"!=typeof this.state.mensagens&&Array.isArray(this.state.mensagens)?this.state.mensagens.length:0,botaoPressionado:this.state.botaoPressionado,exibirMaisDetalhes:t,bloquearExibirMaisDetalhes:this.state.botaoPressionadoReclassificacao,btnToogleExibirMaisDetalhesClick:this.btnToogleExibirMaisDetalhesClick,btnMensagensClick:function(){return e.setState({botaoPressionado:"mensagens"})},btnFormularioAvaliacaoClick:function(){return e.setState({botaoPressionado:"avaliacao"})},btnFormularioAberturaClick:function(){return e.setState({botaoPressionado:"formularioAbertura"})},btnReferenciasClick:function(){return e.setState({botaoPressionado:"referencias"})},btnRecarregarClick:this.obterDetalhes,aoSolicitarRefresh:this.obterDetalhes},"cardTopo")})}),Object(o.jsxs)("div",{className:"row",children:[t?Object(o.jsx)("div",{className:a,children:Object(o.jsx)("div",{className:"text-content",children:this.renderReclassificacao()})}):null,Object(o.jsx)("div",{className:i,children:Object(o.jsx)("div",{className:"text-content",children:Object(o.jsxs)(p.a.Fragment,{children:["mensagens"===this.state.botaoPressionado?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("div",{className:"cardMensagem",children:Object(o.jsx)(Ve,{viewHtmlId:this.props.html_id,detalhes:this.state.detalhes,nova:!0,editavel:!0,aoSalvar:this.aoSalvarMensagem,chamadoId:this.state.chamadoId,chamadoSituacao:this.state.situacao,exibirBotaoDownloadAnexos:this.state.exibirBotaoDownloadAnexos,aoAlterarBotaoPressionado:this.aoAlterarBotaoPressionadoCardNovaMensagem,aoSolicitarRefresh:this.obterDetalhes,botaoPressionado:this.state.botaoPressionadoAvaliar?"avaliar":null,notificarEnvolvidos:"S"===this.state.detalhes.valor_padrao_notificar_envolvolvidos,mascaraHorasTrabalhadas:this.state.mascaraHorasTrabalhadas,configuracoesChamado:this.configuracoes_chamado},"cardMensagemEditavel")}),this.state.carregandoMensagem?this.renderMensagensLoading():null,this.renderMensagens()]}):null,"referencias"===this.state.botaoPressionado?this.renderReferencias():null,"avaliacao"===this.state.botaoPressionado?this.renderFormularioAvaliacao():null,"formularioAbertura"===this.state.botaoPressionado?this.renderFormularioAbertura():null]})})})]})]})})}}]),a}(p.a.Component);qe.defaultProps={abaTitulo:"Chamado",cartaoId:null,viewCode:window.TELAS.DETALHES_CHAMADO.codigo}},913:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var o=a(372),i=a(365),n=a(368),r=a(369),s=a(367),c=a(388);var l=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);l.defaultProps={dataField:"nome_fantasia",caption:"Nome Fantasia",width:150,cellRender:function(e){var t="",a="";switch(e.data.tipo){case"C":t="label-info",a="Cliente";break;case"O":t="label-primary",a="Organiza\xe7\xe3o";break;case"F":t="label-warning",a="Fornecedor";break;case"E":t="label-success",a="Empresa"}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"label lb_tipo ".concat(t),style:{margin:"5px"},title:a,children:e.data.tipo}),Object(o.jsx)("span",{"data-placement":"bottom",children:e.text})]})}};var d=a(842),u=a(843);var p=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);p.defaultProps={dataField:"razao_social",caption:"Raz\xe3o Social",width:150};var f=a(680);var m=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);m.defaultProps={dataField:"unidade",caption:"Unidade",width:100};var _=a(844);var h=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);h.defaultProps={dataField:"cidade",caption:"Cidade",width:100};var v=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);v.defaultProps={dataField:"bairro",caption:"Bairro",width:100};var b=function(e){Object(n.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(s.a)(e);if(t()){var i=Object(s.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(r.a)(this,a)}}(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return a}(c.Column);b.defaultProps={dataField:"endereco",caption:"Endere\xe7o",width:150};var j=[Object(o.jsx)(f.a,{},"codigo"),Object(o.jsx)(m,{},"unidade"),Object(o.jsx)(l,{},"nomeFantasia"),Object(o.jsx)(p,{},"razaoSocial"),Object(o.jsx)(_.a,{},"cnpj"),Object(o.jsx)(d.a,{dataField:"email_principal",caption:"E-mail Principal"},"emailPrincipal"),Object(o.jsx)(u.a,{dataField:"telefone1",caption:"Telefone 1"},"telefone1"),Object(o.jsx)(u.a,{dataField:"telefone2",caption:"Telefone 2"},"telefone2"),Object(o.jsx)(u.a,{dataField:"telefone3",caption:"Telefone 3"},"telefone3"),Object(o.jsx)(u.a,{dataField:"telefone4",caption:"Telefone 4"},"telefone4"),Object(o.jsx)(h,{},"cidade"),Object(o.jsx)(v,{},"bairro"),Object(o.jsx)(b,{},"endereco")]},918:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var o=a(372),i=a(380),n=a(419),r=a(389),s=a(398),c=a(484),l=a(413),d=(c.a,Object(o.jsx)(l.a,{caption:"Nome do Formul\xe1rio",width:"100%"}));function u(e){return Object(o.jsx)(n.default,Object(i.a)({},Object(i.a)(Object(i.a)({},e),{},{dataSource:(t=window.TIPO_FORMULARIO.CADASTRO_PERSONALIZADO,new s.default({paging:{pageSize:10},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},key:"formulario_id",load:function(e){var a=window.loadOptionsToActionParams(e);return new Promise((function(e,o){r.a.get({route:"formulario/listar/",data:Object(i.a)({dx_grid:!0,tipo_formulario:t},a),func_response:function(t){var a=window.createLoadExtra(t);e(Object(i.a)(Object(i.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){r.a.get({route:"formulario/objeto/",data:{formulario_id:e},func_response:function(e){e.formulario_id=e.id.toString(),t(e)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}}))})));var t}u.defaultProps={placeholder:"Pesquisar Formul\xe1rio",displayExpr:function(e){return e&&e.id+" - "+e.nome},children:d}},920:function(e,t,a){"use strict";a.d(t,"a",(function(){return I}));var o=a(391),i=a(372),n=a(422),r=a.n(n),s=a(425),c=a(365),l=a(366),d=a(385),u=a(368),p=a(369),f=a(367),m=a(376),_=a.n(m),h=a(529),v=a.n(h),b=a(454),j=a.n(b),O=a(380),g=a(548),w=a(105),x=a(408);a(1130);function y(e){var t=e.nome,a=e.cor_fonte,o=void 0===a?"black":a,n=e.cor_fundo,r=void 0===n?"white":n;return Object(i.jsx)("div",{className:"label",style:{background:r,color:o,maxWidth:"212px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t})}function A(e){var t=e.card,a=e.solicitacaoDetalhesOnclose,o="",n="bg-label-info";switch(+t.situacao){case window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO:o="Em Andamento";break;case window.SOLICITACAO_STATUS.ATIVIDADE_CONCLUIDA:o="Concluida",n="bg-label-success";break;case window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA:o="Atrasada",n="bg-label-danger";break;case window.SOLICITACAO_STATUS.ATIVIDADE_NAO_ENTREGUE:o="N\xe3o Entregue",n="bg-label-warning";break;case window.SOLICITACAO_STATUS.ATIVIDADE_RETORNADA:o="Retornada";break;case window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA:o="Cancelada"}var r=t.data?window.formatar_data_humano(t.data)+", "+t.data.substring(11,16):null,s=t.data?"Inicio em "+t.data.format_date_time():null,c=t.prazo_execucao?window.formatar_data_humano(t.prazo_execucao)+("00:00"==t.prazo_execucao.substring(11,16)?"":", "+t.prazo_execucao.substring(11,16)):null,l=t.prazo_execucao?"Prazo em "+("00:00"==t.prazo_execucao.substring(11,16)?t.prazo_execucao.format_date():t.prazo_execucao.format_date_time()):null,d=t.cliente_id?Object(i.jsx)(g.a,{tamanho:"28",clienteId:t.cliente_id,nome:t.cliente_nome},"foto_cliente"):null;t.cliente_id&&[].push(Object(i.jsx)(b.Item,{location:"before",locateInMenu:"never",text:t.cliente_nome},"cliente"));var u=+t.situacao==window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA?"text-danger":"text-info",p=[],f="";Array.isArray(t.responsaveis)&&+t.atividade_tipo!=window.PROCESSO_ATIVIDADE_TIPO.INICIO&&t.responsaveis.map((function(e,t){f+=e.nome,p.push(Object(i.jsx)(g.a,{tamanho:"28",usuarioId:e.usuario_id,titulo:"Respons\xe1vel",nome:e.nome,margemFlutuante:!0},window.elem_key_random()))})),+t.grupo_usuarios_responsaveis_id>0&&+t.atividade_tipo!=window.PROCESSO_ATIVIDADE_TIPO.INICIO&&(f+=t.grupo_usuarios_responsaveis_nome,p.push(Object(i.jsx)(g.a,{tamanho:"28",titulo:"Grupo de Usu\xe1rios Respons\xe1veis",nome:t.grupo_usuarios_responsaveis_nome,margemFlutuante:!0})));var m=t.etiquetas.map((function(e){return Object(i.jsx)(y,Object(O.a)({},e))}));return Object(i.jsxs)("div",{className:"card dx-card dx-theme-text-color dx-theme-background-color ",style:{minHeight:"130px",paddingLeft:"0px",paddingRight:"0px"},onClick:function(e){x.a.load("solicitacao/detalhes",(function(e,o){o.onclose=a,o.show(t.solicitacao_atividade_id)}),x.a.ABA.MULTIPLAS,null,null,{solicitacaoAtividadeId:t.solicitacao_atividade_id})},children:[Object(i.jsxs)("div",{style:{marginTop:"-10px",paddingLeft:"10px",paddingRight:"10px"},children:[Object(i.jsx)(j.a,{children:[Object(i.jsx)(b.Item,{location:"before",locateInMenu:"never",children:Object(i.jsxs)("span",{className:"label label-primary",style:{fontSize:"unset"},children:["#","S"===w.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?t.numero:t.solicitacao_id]})},"numero"),Object(i.jsx)(b.Item,{location:"after",locateInMenu:"never",children:Object(i.jsxs)("div",{className:"text-right",children:[Object(i.jsx)("div",{className:"text-muted small",title:s,children:r}),Object(i.jsxs)("div",{title:l,className:"small "+u,children:[Object(i.jsx)("i",{className:"fa fa-clock","aria-hidden":"true"}),"\xa0",c]})]})},"datas")]}),"S"===w.a.sessao.dados.parametro_processo.utilizar_nome_extenso&&t.cliente_nome?Object(i.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:t.cliente_nome,children:"Cliente: "+t.cliente_nome}):"","S"===w.a.sessao.dados.parametro_processo.utilizar_nome_extenso?Object(i.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:t.usuario_solicitacao_nome,children:"Solicitante: "+t.usuario_solicitacao_nome}):"","S"===w.a.sessao.dados.parametro_processo.utilizar_nome_extenso&&f?Object(i.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:t.cliente_nome,children:"Respons\xe1vel: "+f}):"","N"===w.a.sessao.dados.parametro_processo.utilizar_nome_extenso?Object(i.jsx)(j.a,{style:{marginTop:"-5px"},children:[Object(i.jsx)(b.Item,{location:"before",locateInMenu:"never",children:Object(i.jsxs)("div",{style:{display:"flex"},children:[d,Object(i.jsx)(g.a,{tamanho:"28",usuarioId:t.usuario_solicitacao_id,titulo:"Solicitante",nome:t.usuario_solicitacao_nome,margemFlutuante:!!d},"foto_solicitante"),p]})},"solicitante")]}):"",Object(i.jsx)("div",{style:{marginTop:"5px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},className:"text-muted small",title:t.descricao,children:t.descricao}),m&&Object(i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",marginBottom:"10px"},children:m})]}),Object(i.jsx)("div",{style:{height:"10px",position:"absolute",bottom:"0px",width:"100%"},className:n,title:o,children:"\xa0"})]})}var C=a(531);var S=[{id:window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,nome:"Atividades Em Andamento"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_CONCLUIDA,nome:"Atividades Conclu\xeddas"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_ATRASADA,nome:"Atividades Em Atraso"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_NAO_ENTREGUE,nome:"Atividades N\xe3o Entregues"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_RETORNADA,nome:"Atividades Retornadas"},{id:window.SOLICITACAO_STATUS.ATIVIDADE_CANCELADA,nome:"Atividades Canceladas"}],R=[{id:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,nome:"Minhas Pend\xeancias"},{id:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,nome:"Supervisionados"},{id:window.SOLICITACAO_FILTROS.TODAS_ANDAMENTO,nome:"Todas as Pend\xeancias"}],I=function(e){Object(u.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(f.a)(e);if(t()){var i=Object(f.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(p.a)(this,a)}}(a);function a(e){var o,i;return Object(c.a)(this,a),(i=t.call(this,e)).state={list:[],filtro_status:window.SOLICITACAO_STATUS.ATIVIDADE_ANDAMENTO,filtro_tipo:null!==(o=null===e||void 0===e?void 0:e.filtro_tipo)&&void 0!==o?o:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,cliente_nome:"",solicitacao_codigo:"",solicitacao_descricao:"",solicitante_nome:"",responsavel_nome:"",etiqueta_nome:""},i.listar.bind(Object(d.a)(i)),i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listar();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listar",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={processo_id:this.props.processo_id,filtro_status:this.state.filtro_status,filtro_tipo:this.state.filtro_tipo,solicitacao_codigo:this.state.solicitacao_codigo,solicitacao_descricao:this.state.solicitacao_descricao,cliente_nome:this.state.cliente_nome,solicitante_nome:this.state.solicitante_nome,responsavel_nome:this.state.responsavel_nome,etiqueta_nome:this.state.etiqueta_nome},e.next=3,Object(C.listarProcessosQuadroAtividades)(t);case 3:a=e.sent,this.setState({list:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onListUpdated",value:function(e){this.setState({list:e})}},{key:"render",value:function(){var e,t=this,a=(null!==(e=this.state.list)&&void 0!==e?e:[]).map((function(e,a){return Object(i.jsx)(E,{processo_nome:e.processo_nome,title:e.descricao,index:a,cards:e.itens,main:t,onListUpdated:t.onListUpdated.bind(t),solicitacaoDetalhesOnclose:function(e){return t.listar()}},e.processo_atividade_id+"_"+e.itens.data.length)})),o=Object(i.jsx)(_.a.Fragment,{children:Object(i.jsx)("div",{className:"dx_kanban",children:Object(i.jsx)(v.a,{className:"scrollable-board",direction:"horizontal",showScrollbar:"always",style:{overflow:"scroll"},children:a})})});if(this.state.list.length>0){var n=this.state.list[0].processo_nome.length>15?"...":"";w.a.titulo_aba(this.props.html_id,this.state.list[0].processo_nome.substring(0,15)+n)}return Object(i.jsxs)("div",{children:[Object(i.jsx)(P,{processo_id:this.props.processo_id,processo_nome:this.state.list.length>0?this.state.list[0].processo_nome:"",clienteNomeValue:this.state.cliente_nome,clienteNomeOnEnterKey:function(e){var a=e.component.instance().option("value");t.setState({cliente_nome:a},(function(){t.listar()}))},solicitacaoCodigoValue:this.state.solicitacao_codigo,solicitacaoCodigoOnEnterKey:function(e){var a=e.component.instance().option("value");t.setState({solicitacao_codigo:a},(function(){t.listar()}))},solicitacaoDescricaoValue:this.state.solicitacao_descricao,solicitacaoDescricaoOnEnterKey:function(e){var a=e.component.instance().option("value");t.setState({solicitacao_descricao:a},(function(){t.listar()}))},solicitanteNomeValue:this.state.solicitante_nome,solicitanteNomeOnEnterKey:function(e){var a=e.component.instance().option("value");t.setState({solicitante_nome:a},(function(){t.listar()}))},responsavelNomeValue:this.state.responsavel_nome,responsavelNomeOnEnterKey:function(e){var a=e.component.instance().option("value");t.setState({responsavel_nome:a},(function(){t.listar()}))},etiquetaNomeValue:this.state.etiqueta_nome,etiquetaNomeOnEnterKey:function(e){var a=e.component.instance().option("value");t.setState({etiqueta_nome:a},(function(){t.listar()}))},filtroStatusValue:this.state.filtro_status,filtroStatusValueOnValueChanged:function(e){var a=e.value;t.setState({filtro_status:a},(function(){t.listar()}))},filtroTipoValue:this.state.filtro_tipo,filtroTipoValueOnValueChanged:function(e){var a=e.value;t.setState({filtro_tipo:a},(function(){t.listar()}))},novaSolicitacaoOnClose:function(e){t.listar()},recarregarOnClick:function(e){t.listar()}}),o]})}}]),a}(_.a.Component);function P(e){var t=e.processo_id,a=(e.processo_nome,e.clienteNomeValue),o=e.clienteNomeOnEnterKey,n=e.solicitacaoCodigoValue,r=e.solicitacaoCodigoOnEnterKey,s=e.solicitacaoDescricaoValue,c=e.solicitacaoDescricaoOnEnterKey,l=e.solicitanteNomeValue,d=e.solicitanteNomeOnEnterKey,u=e.responsavelNomeValue,p=e.responsavelNomeOnEnterKey,f=e.etiquetaNomeValue,m=e.etiquetaNomeOnEnterKey,_=e.filtroStatusValue,h=e.filtroStatusValueOnValueChanged,v=e.filtroTipoValue,O=e.filtroTipoValueOnValueChanged,g=e.novaSolicitacaoOnClose,w=e.recarregarOnClick;return Object(i.jsxs)(j.a,{children:[Object(i.jsx)(b.Item,{location:"before",showText:"always",locateInMenu:"auto",widget:"dxButton",options:{text:"Nova Solicita\xe7\xe3o",hint:"Nova Solicita\xe7\xe3o",icon:"fa fa-plus",stylingMode:"text",onClick:function(){return function(e,t){x.a.load("solicitacao/nova",(function(a,o){o.onclose=t,o.show({processo_id:e})}))}(t,g)}}}),Object(i.jsx)(b.Item,{location:"before",showText:"inMenu",locateInMenu:"auto",widget:"dxButton",options:{text:"Recarregar",hint:"Recarregar",icon:"refresh",stylingMode:"text",onClick:w}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"N\xba Solicita\xe7\xe3o",labelMode:"static",value:n,onEnterKey:r}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Descri\xe7\xe3o Solicita\xe7\xe3o",labelMode:"static",value:s,onEnterKey:c}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Cliente",labelMode:"static",value:a,onEnterKey:o}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Solicitante",labelMode:"static",value:l,onEnterKey:d}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Respons\xe1vel",labelMode:"static",value:u,onEnterKey:p}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxTextBox",options:{width:"160px",label:"Etiqueta",labelMode:"static",value:f,onEnterKey:m}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxSelectBox",visible:t>0,options:{width:"195px",displayExpr:"nome",valueExpr:"id",value:_,onValueChanged:h,placeholder:"Situa\xe7\xe3o",items:S}}),Object(i.jsx)(b.Item,{location:"after",showText:"inMenu",locateInMenu:"auto",widget:"dxSelectBox",visible:t>0,options:{width:"180px",displayExpr:"nome",valueExpr:"id",value:v,onValueChanged:O,items:R}})]})}function E(e){var t,a,n,c,l=e.processo_nome,d=e.title,u=e.index,p=e.cards,f=e.main,m=e.onListUpdated,_=e.solicitacaoDetalhesOnclose,h=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,i,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(f.state.list[u].skip||0)+parseInt(f.props.take),i=Object(o.a)(f.state.list),n={processo_id:f.props.processo_id,filtro_tipo:f.state.filtro_tipo,solicitacao_codigo:f.state.solicitacao_codigo,solicitacao_descricao:f.state.solicitacao_descricao,cliente_nome:f.state.cliente_nome,solicitante_nome:f.state.solicitante_nome,responsavel_nome:f.state.responsavel_nome,etiqueta_nome:f.state.etiqueta_nome,processo_atividade_id:i[u].processo_atividade_id,skip:a},e.next=5,Object(C.listarProcessosQuadroAtividades)(n);case 5:s=e.sent,Array.isArray(s)&&s[0].itens&&s[0].itens.data&&Array.isArray(s[0].itens.data)&&(i[u].itens.data=[].concat(Object(o.a)(i[u].itens.data),Object(o.a)(s[0].itens.data)),i[u].itens.totalCount=s[0].itens.totalCount,i[u].skip=a,m(i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=f.state.list[u].itens?f.state.list[u].itens.totalCount:0,j=-1!==parseInt(null===f||void 0===f||null===(t=f.props)||void 0===t?void 0:t.processo_id)?null:Object(i.jsx)("div",{className:"list-title dx-theme-text-color processo_lista",title:l,children:l}),O=null!==(a=null===f||void 0===f||null===(n=f.props)||void 0===n?void 0:n.subtractHeight)&&void 0!==a?a:"0px",g=-1!==parseInt(null===f||void 0===f||null===(c=f.props)||void 0===c?void 0:c.processo_id)?"0px":"13px";return Object(i.jsxs)("div",{className:"list ",style:{height:"calc(100vh - 110px - ".concat(O,")"),width:"260px"},children:[Object(i.jsx)("div",{className:"pull-right",style:{marginRight:"10px",marginTop:"8px"},children:Object(i.jsx)("div",{className:"label label-default",children:b})}),j,Object(i.jsx)("div",{className:"list-title dx-theme-text-color titulo_lista",title:d,children:d}),Object(i.jsx)(v.a,{style:{height:"calc(100vh - 110px - 40px - ".concat(g," - ").concat(O,")")},className:"scrollable-list",direction:"vertical",showScrollbar:"always",onReachBottom:p.data.length<p.totalCount?h:null,onScroll:function(e){f.state.list[u].scrollOffset=e.scrollOffset},onInitialized:function(e){setTimeout((function(){f.state.list[u].scrollOffset&&e.component.scrollTo(f.state.list[u].scrollOffset)}))},children:p&&p.data&&Array.isArray(p.data)&&p.data.map((function(e){return Object(i.jsx)(A,{card:e,solicitacaoDetalhesOnclose:_})}))})]})}I.defaultProps={abaTitulo:"Processo...",take:20,arrColumns:[],listKey:null,route:null}},923:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var o=a(372),i=a(422),n=a.n(i),r=a(425),s=a(365),c=a(366),l=a(368),d=a(369),u=a(367),p=a(376),f=a.n(p),m=a(530),_=a.n(m),h=a(920),v=a(869),b=a(380),j=a(391),O=a(385),g=a(514),w=a.n(g),x=a(388),y=a(448),A=(a(689),a(401)),C=a(690),S=a(484),R=a(413),I=a(549),P=a(485),E=a(510),T=a(63),D=a.n(T),k=a(858),M=[{id:"1",descricao:"Conclu\xedda"},{id:"2",descricao:"Cancelada"},{id:"3",descricao:"Andamento"},{id:"4",descricao:"Atrasada"}],N=a(449),F=a(105),L=a(408),U=a(398);var B=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o;Object(s.a)(this,a),(o=t.call(this,e)).onToolbarPreparing=o.onToolbarPreparing.bind(Object(O.a)(o)),o.handleBtnEditarClick=o.handleBtnEditarClick.bind(Object(O.a)(o)),o.handleSelectBoxChange=o.handleSelectBoxChange.bind(Object(O.a)(o)),o.stateStoring=o.stateStoring.bind(Object(O.a)(o)),o.onRowClick=o.onRowClick.bind(Object(O.a)(o)),o.dataGridRef=f.a.createRef(),o.parametrosUsuario=F.a.get_parametro_usuario("solicitacoesProcesso"),o.gridStateStoring=o.stateStoring(),o.listResponsaveisModoTeste=Object(C.b)();var i=window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,n=!1,r=0,c="";return o.parametrosUsuario&&("undefined"!==typeof o.parametrosUsuario.tipoListagem&&null!==o.parametrosUsuario.tipoListagem&&""!==o.parametrosUsuario.tipoListagem&&+o.parametrosUsuario.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&(i=+o.parametrosUsuario.tipoListagem),o.parametrosUsuario.obj_param?(n="undefined"!==typeof o.parametrosUsuario.obj_param.modo_teste&&o.parametrosUsuario.obj_param.modo_teste,r="undefined"!==typeof o.parametrosUsuario.obj_param.modo_teste_responsavel_id?o.parametrosUsuario.obj_param.modo_teste_responsavel_id:0,c="undefined"!==typeof o.parametrosUsuario.obj_param.modo_teste_responsavel_nome?o.parametrosUsuario.obj_param.modo_teste_responsavel_nome:""):o.parametrosUsuario.obj_param={}),o.state={dataSource:Object(C.c)(i,n,r,null,null,o.props.processo_id),tipoListagem:i,modo_teste:n,modo_teste_responsavel_id:r,modo_teste_responsavel_nome:c,filtro_solicitacao_numero:null},o}return Object(c.a)(a,[{key:"render",value:function(){var e,t,a=this,i=[].concat(Object(j.a)((t=F.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo,[Object(o.jsx)(S.a,{dataField:"S"===t?"numero":"solicitacao_id",allowGrouping:!1,caption:"#",sortIndex:0,sortOrder:"desc",width:100,dataType:"number"},"numero_solicitacao_por_processo"),Object(o.jsx)(R.a,{dataField:"processo_nome",caption:"Processo",sortIndex:1,sortOrder:"asc",width:500},"processo_nome"),Object(o.jsx)(I.default,{dataField:"usuario_solicitacao_nome",caption:"Solicitante",width:180},"usuario_solicitacao_nome"),Object(o.jsx)(P.a,{dataField:"data",caption:"In\xedcio Solicita\xe7\xe3o",width:180,allowGrouping:!1,allowHeaderFiltering:!1},"data"),Object(o.jsx)(k.a,{dataField:"cliente_nome",caption:"Cliente",width:180},"cliente"),Object(o.jsx)(E.a,{dataField:"solicitacao_situacao",caption:"Situa\xe7\xe3o Solicita\xe7\xe3o",width:120,lookup:{dataSource:M,displayExpr:"descricao",valueExpr:"id"},cellTemplate:function(e,t){var a="",o="";switch(+t.data.solicitacao_situacao){case 1:a="label-success",o="Conclu\xedda";break;case 2:a="label-danger",o="Cancelada";break;case 3:a="label-info",o="Em Andamento";break;case 4:a="label-danger",o="Atrasada"}e.css({textAlign:"center"}).addClass("bg-"+a),D()("<span>").text(o).css({color:"#FFF"}).appendTo(e)}},"solicitacao_situacao")])),[Object(o.jsxs)(x.Column,{type:"buttons",children:[Object(o.jsx)(N.a,{hint:"Visualizar Solicita\xe7\xe3o",icon:"fas fa-sitemap",onClick:function(e){return a.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,a.state.modo_teste_responsavel_nome,a.state.modo_teste)},visible:function(e){return!0===F.a.sessao.dados.admin||!0===e.row.data.acesso_supervisor}}),","]},"buttonsSolicitacoes")]),s=null!==(e=this.props.subtractHeight)&&void 0!==e?e:"0px",c={height:"calc(100vh - 46px - ".concat(s,")"),width:"100%"};return Object(o.jsx)(f.a.Fragment,{children:Object(o.jsxs)(A.default,{ref:this.dataGridRef,dataSource:this.state.dataSource,style:c,stateStoring:this.gridStateStoring,onToolbarPreparing:this.onToolbarPreparing,selection:{mode:"multiple"},pager:{showInfo:!0,showPageSizeSelector:!0,allowedPageSizes:[20,50,100]},keyExpr:"solicitacao_id",onRowClick:this.onRowClick,rowAlternationEnabled:!1,onRowExpanded:function(e){var t=e.component.getRowIndexByKey(e.key),a=e.component.getRowElement(t);a.css({background:"#DBDBDB"}),a.parent().find(".dx-master-detail-cell").css({background:"#FFF"})},onRowCollapsed:function(e){var t=e.component.getRowIndexByKey(e.key);e.component.getRowElement(t).css({background:""})},onRowPrepared:function(e){if("data"===e.rowType){var t=e.rowElement;e.isExpanded?(t.css({background:"#DBDBDB"}),t.parent().find(".dx-master-detail-row").css({background:"#FFF"})):t.css({background:""})}},showBorders:!1,children:[i,Object(o.jsx)(x.MasterDetail,{enabled:!0,template:function(){var e=Object(r.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.a.render(f.a.createElement(window.views.solicitacao_processo.ListagemAtividadesMasterDetail.default,{data:a.data}),t[0]);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})]})})}},{key:"handleBtnEditarClick",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null;e.row?i=e.row.data:e.data&&(i=e.data);var n=t==window.FORMULARIO.EDITAR?{solicitacaoAtividadeId:i.solicitacao_atividade_id}:{solicitacaoId:i.solicitacao_id};L.a.load("solicitacao/detalhes",(function(n,r){r.onclose=e.component.refresh,r.show(i.solicitacao_atividade_id,t,a,o)}),L.a.ABA.MULTIPLAS,null,null,n)}},{key:"handleSelectBoxChange",value:function(e){var t=this;if(this.dataGridRef&&this.dataGridRef.current&&e.selectedItem&&e.selectedItem.id!==this.state.tipoListagem){var a=function(a){e.component.option("value",+a),t.setState({dataSource:Object(C.c)(a,t.state.modo_teste,t.state.modo_teste_responsavel_id,null,null,t.props.processo_id),tipoListagem:+a},Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get_parametro_usuario("solicitacoesProcesso");case 2:t.parametrosUsuario=e.sent,+t.state.tipoListagem!==window.SOLICITACAO_FILTROS.TODAS&&F.a.set_parametro_usuario("solicitacoesProcesso",Object(b.a)(Object(b.a)({},t.parametrosUsuario),{},{tipoListagem:+t.state.tipoListagem}));case 4:case"end":return e.stop()}}),e)}))))},o=this.dataGridRef.current._instance;if(o._resetPageIndex=!0,o._clearSelectedRows=!0,+e.selectedItem.id===window.SOLICITACAO_FILTROS.TODAS)Object(y.confirm)("Listar todas as Solicita\xe7\xf5es poder\xe1 levar um tempo. Deseja continuar?","Aten\xe7\xe3o").then((function(e){a(e?window.SOLICITACAO_FILTROS.TODAS:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS)}));else a(+e.selectedItem.id)}}},{key:"onToolbarPreparing",value:function(e){var t=this,a=[{id:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,descricao:"Minhas Pend\xeancias",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_CONCLUIDA,descricao:"Minhas Solicita\xe7\xf5es Conclu\xeddas",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.MINHAS_SOLICITACOES_EM_ABERTO,descricao:"Minhas Solicita\xe7\xf5es em Andamento",categoria:"Minhas"},{id:window.SOLICITACAO_FILTROS.SUPERVISIONADOS,descricao:"Processos Supervisionados",categoria:"Geral",visible:"S"===F.a.sessao.dados.supervisor_processo||"S"===F.a.sessao.dados.supervisor_processo_usuario||"S"===F.a.sessao.dados.supervisor_processo_grupo_usuario},{id:window.SOLICITACAO_FILTROS.ATRASADAS,descricao:"Solicita\xe7\xf5es Atrasadas",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS,descricao:"Todas Solicita\xe7\xf5es",categoria:"Geral"},{id:window.SOLICITACAO_FILTROS.TODAS_ANDAMENTO,descricao:"Solicita\xe7\xf5es em Andamento",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CANCELADAS,descricao:"Solicita\xe7\xf5es Canceladas",categoria:"Situa\xe7\xe3o"},{id:window.SOLICITACAO_FILTROS.CONCLUIDAS,descricao:"Solicita\xe7\xf5es Conclu\xeddas",categoria:"Situa\xe7\xe3o"}],o=[{widget:"dxTextBox",location:"after",locateInMenu:"auto",options:{width:"140px",placeholder:"N\xba Solicita\xe7\xe3o",value:this.state.filtro_solicitacao_numero,buttons:[{location:"before",name:"pesquisar",options:{icon:"search",disabled:!0}}],onEnterKey:function(e){var a=e.component.option("value");if(null!==a&&""!==a.trim()){var o="S"!==F.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a:null,i="S"===F.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo?a:null;t.setState({dataSource:Object(C.c)(window.SOLICITACAO_FILTROS.TODAS,t.state.modo_teste,t.state.modo_teste_responsavel_id,o,i,t.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.TODAS,filtro_solicitacao_numero:a})}else t.setState({dataSource:Object(C.c)(window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,t.state.modo_teste,t.state.modo_teste_responsavel_id,null,null,t.props.processo_id),tipoListagem:window.SOLICITACAO_FILTROS.MINHAS_PENDENCIAS,filtro_solicitacao_numero:null})}}},{widget:"dxSelectBox",visible:!0===this.state.modo_teste,locateInMenu:"auto",options:{dataSource:new U.default({store:this.listResponsaveisModoTeste,paginate:!0,pageSize:10}),valueExpr:"id",displayExpr:"nome",searchEnabled:!0,searchModeOption:"contains",searchExprOption:"nome",width:"250px",placeholder:"Respons\xe1vel (Modo Teste)",value:this.state.modo_teste_responsavel_id,onValueChanged:function(e){var a=e.value,o=e.component.option("text");t.setState({modo_teste_responsavel_id:a,modo_teste_responsavel_nome:o,dataSource:Object(C.c)(t.state.tipoListagem,t.state.modo_teste,a,null,null,t.props.processo_id)},Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get_parametro_usuario("solicitacoesProcesso");case 2:t.parametrosUsuario=e.sent,F.a.set_parametro_usuario("solicitacoesProcesso",Object(b.a)(Object(b.a)({},t.parametrosUsuario),{},{obj_param:Object(b.a)(Object(b.a)({},t.parametrosUsuario.obj_param),{},{modo_teste_responsavel_id:a,modo_teste_responsavel_nome:o})}));case 4:case"end":return e.stop()}}),e)}))))}}},{widget:"dxSelectBox",locateInMenu:"auto",options:{dataSource:new U.default({store:a,group:"categoria"}),width:"250px",placeholder:"Filtrar por",valueExpr:"id",displayExpr:"descricao",value:+this.state.tipoListagem,grouped:!0,onSelectionChanged:this.handleSelectBoxChange},location:"after"},{widget:"dxButton",options:{icon:"plus",hint:"Nova Solicita\xe7\xe3o",text:"Nova Solicita\xe7\xe3o",onClick:function(){L.a.load("solicitacao/nova",(function(a,o){o.onclose=e.component.refresh,o.show(null,null,null,null,null,null,null,null,t.state.modo_teste,t.state.modo_teste_responsavel_id,!1,t.state.modo_teste_responsavel_nome)}))}},location:"after",name:"BtnNovaSolicitacao",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-flask",hint:"Habilitar Modo Teste",text:"Habilitar Modo Teste",onClick:function(e){t.setState({modo_teste:!t.state.modo_teste,dataSource:Object(C.c)(t.state.tipoListagem,!t.state.modo_teste,t.state.modo_teste_responsavel_id,null,null,t.props.processo_id)},Object(r.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get_parametro_usuario("solicitacoesProcesso");case 2:t.parametrosUsuario=e.sent,F.a.set_parametro_usuario("solicitacoesProcesso",Object(b.a)(Object(b.a)({},t.parametrosUsuario),{},{obj_param:Object(b.a)(Object(b.a)({},t.parametrosUsuario.obj_param),{},{modo_teste:t.state.modo_teste})}));case 4:case"end":return e.stop()}}),e)}))))},onInitialized:function(e){!0===t.state.modo_teste&&e.component.element().addClass("dx-state-active")}},showText:"inMenu",location:"after",name:"BtnModoTeste",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRecarregar",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fas fa-compress-alt",hint:"Recolher todas as linhas",text:"Recolher todas as linhas",onClick:function(t){e.component.collapseAll(-1)}},showText:"inMenu",location:"after",name:"BtnRecolherLinhas",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(o,e.toolbarOptions.items)}},{key:"stateStoring",value:function(){return{enabled:!0,type:"custom",customLoad:function(){return F.a.get_parametro_usuario("solicitacoesProcesso").datagrid},customSave:function(e){return F.a.set_parametro_usuario("solicitacoesProcesso",{datagrid:e})}}}},{key:"onRowClick",value:function(e){var t=this;if(!0===F.a.sessao.dados.admin||!0===e.data.acesso_supervisor){window.onDoubleClick(e,(function(){t.handleBtnEditarClick(e,window.FORMULARIO.VISUALIZAR,t.state.modo_teste_responsavel_nome,t.state.modo_teste)}))}}},{key:"dataGrid",get:function(){return this.dataGridRef.current?this.dataGridRef.current.instance:null}}]),a}(f.a.Component),V=a(531);var z=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.objetoProcesso)(this.props.processo_id);case 2:(t=e.sent).nome&&(a=t.nome.length>15?"...":"",F.a.titulo_aba(this.props.html_id,t.nome.substring(0,15)+a));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsxs)(_.a,{swipeEnabled:!1,children:[Object(o.jsx)(m.Item,{title:"Kanban",icon:"fab fa-trello",children:Object(o.jsx)(h.a,{processo_id:this.props.processo_id,subtractHeight:"36px"})}),Object(o.jsx)(m.Item,{title:"Lista",icon:"fas fa-list-alt",children:Object(o.jsx)(v.a,{processo_id:this.props.processo_id,subtractHeight:"36px"})}),Object(o.jsx)(m.Item,{title:"Solicita\xe7\xf5es",icon:"fas fa-sitemap",children:Object(o.jsx)(B,{processo_id:this.props.processo_id,subtractHeight:"36px"})})]})})}}]),a}(f.a.Component);z.defaultProps={abaTitulo:"Processo...",take:20,arrColumns:[],listKey:null,route:null}},930:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var o=a(372),i=a(1180),n=a.n(i),r=a(1181),s=a.n(r);function c(e){var t=e.idModulo,a=void 0===t?0:t,i=e.nomeModulo,n=void 0===i?"?":i,r=e.qtdAbertoHoje,c=void 0===r?0:r,l=e.qtdEmAtraso,d=void 0===l?0:l,u=e.qtdTotal,p=void 0===u?0:u,f=e.iconeUrl,m=void 0===f?"":f,_=e.btnAddClick,h=void 0===_?null:_,v=e.btnListClick,b=void 0===v?null:v,j=e.customButtons,O=void 0===j?[]:j,g=e.titleHoje,w=void 0===g?"":g,x=e.titleEmAtraso,y=void 0===x?"":x,A=e.titleTotal,C=void 0===A?"":A,S=e.isCentralPendencias,R=void 0!==S&&S,I=e.fnHandleCardClick,P=void 0===I?null:I;return Object(o.jsx)("div",{className:"".concat(s.a.container," col-md-4 col-sm-6 col-lg-3 templateCard"),style:{minWidth:R?170:""},children:Object(o.jsxs)("div",{className:s.a.card,children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{className:s.a.topoTitulo,children:n}),h&&Object(o.jsx)("span",{className:s.a.button,onClick:function(){h&&"function"===typeof h&&h()},children:Object(o.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})}),b&&Object(o.jsx)("span",{className:s.a.button,onClick:function(){b&&"function"===typeof b&&b()},children:Object(o.jsx)("i",{className:"fa fa-external-link-alt","aria-hidden":"true"})}),O.length>0&&O.map((function(e,t){return("undefined"===typeof e.visible||!0===e.visible)&&Object(o.jsx)("span",{className:s.a.button,onClick:e.onClick,title:e.hint,children:Object(o.jsx)("i",{className:e.icon,"aria-hidden":"true"})},t)}))]}),Object(o.jsxs)("div",{onClick:R?function(){"function"===typeof P&&P(a,n)}:void 0,style:{cursor:R?"pointer":"default"},children:[Object(o.jsxs)("div",{className:s.a.cardCorpo,children:[Object(o.jsxs)("p",{title:w,children:[c," Hoje"]}),Object(o.jsxs)("p",{title:y,className:s.a.qtdEmAtraso,children:[d," Em Atraso"]})]}),Object(o.jsxs)("div",{className:s.a.cardRodape,children:[Object(o.jsx)("span",{className:s.a.iconeModulo,children:""!==m&&Object(o.jsx)("img",{src:m,width:"20",alt:""})}),Object(o.jsxs)("span",{className:s.a.totalSection,title:C,children:[Object(o.jsx)("span",{className:"text-muted",children:"Total"}),"\xa0\xa0",Object(o.jsx)("span",{className:s.a.totalIndicator,children:p})]})]})]})]})})}var l=a(105),d=a(578),u=a(408);function p(e){var t=e.data,a=e.supervisor_id,i=e.supervisor_nome,r=e.supervisionado_id,s=e.supervisionado_nome,p=e.onCloseModuleTab,f=e.isCentralPendencias,m=void 0!==f&&f,_=e.fnHandleCardClick,h=void 0===_?null:_,v=JSON.parse(t);return Object(o.jsxs)("div",{className:m?n.a.containerCentralPendencias:n.a.container,children:[l.a.verifica_permissao(l.a.temp.empresa,"agenda")?Object(o.jsx)(c,{idModulo:d.a.agenda,nomeModulo:"Agenda",qtdAbertoHoje:v.cardCockpitAgendaHoje,qtdEmAtraso:v.cardCockpitAgendaAtrasadas,qtdTotal:v.cardCockpitAgendaTotal,iconeUrl:"assets/img/icones_bp/calendar.svg",isCentralPendencias:m,fnHandleCardClick:h,btnAddClick:function(){window.View.load("agenda/agenda_evento",(function(e,t){var o=0,n="";null!=a&&null!=i?(o=a,n=i):null!=r&&null!=s?(o=r,n=s):(o=l.a.sessao.dados.usuario_id,n=l.a.sessao.dados.nome);var c={evento_id:null,usuario_id:o,usuario_nome:n,obj_dados_projeto:null};t.onclose=p,t.show(c)}))}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_tarefas")?Object(o.jsx)(c,{idModulo:d.a.tarefas,nomeModulo:"Tarefas",qtdAbertoHoje:v.cardCockpitCartoesHoje,qtdEmAtraso:v.cardCockpitCartoesAtrasados,qtdTotal:v.cardCockpitCartoesTotal,iconeUrl:"assets/img/icones_bp/tarefa.svg",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:function(){window.View.load("tarefa/listar",(function(e,t){}),window.View.ABA.SIM)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_chamados")?Object(o.jsx)(c,{idModulo:d.a.chamado,nomeModulo:"Chamados",qtdAbertoHoje:v.cardCockpitChamadosHoje,qtdEmAtraso:v.cardCockpitChamadosAtrasados,qtdTotal:v.cardCockpitChamadosTotal,iconeUrl:"assets/img/icones_bp/comunication.svg",isCentralPendencias:m,fnHandleCardClick:h,btnAddClick:function(){window.View.loadReact(window.views.chamado.Detalhes.default,{onCloseModuleTab:p},(function(e,t){}),window.View.ABA.MULTIPLAS)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_documentos")?Object(o.jsx)(c,{idModulo:d.a.documento,nomeModulo:"Documentos",qtdAbertoHoje:v.cardCockpitDocumentosHoje,qtdEmAtraso:v.cardCockpitDocumentosAtrasados,qtdTotal:v.cardCockpitDocumentosTotal,iconeUrl:"assets/img/icones_bp/folder.svg",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:function(){u.a.loadReact(window.views.documentos.Listagem.default,{},(function(e){}),u.a.ABA.SIM)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_processos")?Object(o.jsx)(c,{idModulo:d.a.processo,nomeModulo:"Processos",qtdAbertoHoje:v.cardCockpitProcessosHoje,qtdEmAtraso:v.cardCockpitProcessosAtrasados,qtdTotal:v.cardCockpitProcessosTotal,iconeUrl:"assets/img/icones_bp/processos.svg",isCentralPendencias:m,fnHandleCardClick:h,btnAddClick:function(){window.View.load("solicitacao/nova",(function(e,t){t.onclose=p,t.show()}),window.View.ABA.NAO)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_projetos")?Object(o.jsx)(c,{idModulo:d.a.projeto,nomeModulo:"Projetos",qtdAbertoHoje:v.cardCockpitProjetosHoje,qtdEmAtraso:v.cardCockpitProjetosAtrasados,qtdTotal:v.cardCockpitProjetosTotal,iconeUrl:"assets/img/icones_bp/icon_black_project.svg",isCentralPendencias:m,fnHandleCardClick:h,customButtons:[{icon:"fas fa-file-invoice-dollar",hint:"Apontamento de Despesa",onClick:function(){window.View.load("apontamento_despesas/detalhes",(function(e,t){t.show(window.FORMULARIO.NOVO,null)}),window.View.ABA.MULTIPLAS)},visible:l.a.verifica_permissao(l.a.temp.empresa,"apontamento_despesa")||l.a.verifica_permissao(l.a.temp.empresa,"admin_apontamento_despesa")},{icon:"far fa-clock",hint:"Apontamento de Atividade",onClick:function(){window.View.load("apontamento_projeto/detalhes",(function(e,t){t.show(null,window.FORMULARIO.NOVO)}),window.View.ABA.MULTIPLAS)},visible:l.a.verifica_permissao(l.a.temp.empresa,"apontamento_atividade")||l.a.verifica_permissao(l.a.temp.empresa,"admin_apontamento_atividade")}]}):"",l.a.verifica_permissao(l.a.temp.empresa,"pdca")?Object(o.jsx)(c,{idModulo:d.a.pdca,nomeModulo:"PDCA",qtdAbertoHoje:v.cardCockpitPDCAHoje,qtdEmAtraso:v.cardCockpitPDCAAtrasados,qtdTotal:v.cardCockpitPDCATotal,iconeUrl:"assets/img/icones_bp/list_alt.svg",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:function(){window.View.loadReact(window.views.pdca.Listagem.default,{},(function(e){}),u.a.ABA.SIM)}}):"",l.a.verifica_permissao(l.a.temp.empresa,"gestao_relacionamento")?Object(o.jsx)(c,{idModulo:d.a.crm,nomeModulo:"CRM",qtdAbertoHoje:v.cardCockpitOportunidadesHoje,qtdEmAtraso:v.cardCockpitOportunidadesAtrasadas,qtdTotal:v.cardCockpitOportunidadesTotal,iconeUrl:"assets/img/icones_bp/people.svg",titleHoje:"Agendas e Oportunidades abertas para hoje",titleEmAtraso:m?"Oportunidades e Eventos CRM abertos":"Oportunidades e Eventos CRM atrasados (n\xe3o considera estagnado)",titleTotal:m?"Total de Oportunidades e Eventos CRM abertos":"Total de Oportunidades abertas",isCentralPendencias:m,fnHandleCardClick:h,btnListClick:function(){window.View.load("oportunidade/listar",(function(e,t){t.show()}),window.View.ABA.SIM)}}):""]})}},931:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(391),n=a(422),r=a.n(n),s=a(425),c=a(365),l=a(366),d=a(385),u=a(368),p=a(369),f=a(367),m=a(376),_=a.n(m),h=a(389),v=a(401),b=a(388),j=a(888),O=a(432),g=a(450);var w=function(e){Object(u.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(f.a)(e);if(t()){var i=Object(f.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(p.a)(this,a)}}(a);function a(e){var o;return Object(c.a)(this,a),(o=t.call(this,e)).getDatasourceUsuarios=Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("usuario/listar_usuarios_grupos/",{listar_bloqueados:!0,listar_grupos:!0,limite:null},null,null,null,null,null,null,null,!0);case 2:t=e.sent,this.setState({datasourceUsuarios:t});case 4:case"end":return e.stop()}}),e,this)}))),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(d.a)(o)),o.dataGrid=null,o.state={datasourceUsuarios:[]},o.getDatasourceUsuarios(),o}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){this.props.onClose&&this.props.onClose()}},{key:"onToolbarPreparing",value:function(e){var t=this;this.dataGrid=e.component;var a=[{widget:"dxButton",options:{icon:"plus",hint:"Adicionar Cubo",text:"Adicionar",onClick:function(){e.component.addRow()}},location:"after",name:"BtnNovoRegistro",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"refresh",hint:"Recarregar",text:"Recarregar",onClick:function(){e.component.refresh()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"},{location:"after",name:"BtnConfiguracoes",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(a,e.toolbarOptions.items);for(var o=0;o<e.toolbarOptions.items.length;o++){var i=e.toolbarOptions.items[o];"saveButton"===i.name&&(i.options.onClick=function(a){for(var o=e.component.getController("data")._items,i=[],n=0;n<o.length;n++){var r=o[n];r.removed||i.push(r.data)}Object(j.d)(t.props.cubo_id,i,(function(t){e.component.saveEditData()}))})}}},{key:"render",value:function(){var e,t=this,a=[].concat(Object(i.a)((e=this.state.datasourceUsuarios,[Object(o.jsx)(b.Column,{lookup:{dataSource:{store:{type:"array",data:e,key:"id_usuario_grupo"},pageSize:10,paginate:!0},displayExpr:"nome",valueExpr:"id_usuario_grupo"},dataField:"integrante_id",caption:"Integrante"},"integrante_id"),Object(o.jsx)(b.Column,{lookup:{dataSource:window.CUBO_TIPO_PERMISSAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"},dataField:"tipo_permissao"},"tipo_permissao")])),[Object(o.jsxs)(b.Column,{type:"buttons",width:110,children:[Object(o.jsx)(O.a,{visible:function(e){return!e.row.removed&&!e.row.data.padrao},onClick:function(e){t.dataGrid.deleteRow(e.row.rowIndex)}}),Object(o.jsx)(g.a,{visible:function(e){return e.row.removed},onClick:function(e){t.dataGrid.undeleteRow(e.row.rowIndex),e.event.preventDefault()}})]},"buttons")]);return Object(o.jsx)(_.a.Fragment,{children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(v.default,{style:{height:"calc(100vh - 46px)"},stateStoring:Object(v.stateStoring)("DataGridCubo"),onToolbarPreparing:this.onToolbarPreparing,dataSource:Object(j.a)(this.props.cubo_id),editing:{mode:"batch",allowUpdating:!0,allowAdding:!1,allowDeleting:!0},children:a})})})})}}]),a}(_.a.Component);w.defaultProps={abaTitulo:"Equipe Cubo"};t.default=w},932:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x})),a.d(t,"Edicao",(function(){return y}));var o=a(372),i=a(423),n=a(376),r=a(105),s=a(401),c=a(575),l=a.n(c),d=a(388),u=a.n(d),p=a(454),f=a.n(p),m=a(577),_=a(465),h=a.n(_),v=a(380),b=a(398),j=a(389),O=function(e,t,a,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r={route:"parametro_datagrid/salvar/",data:{id:e,chave:t,nome:a,state_storing:window.CircularJSON.stringify(o)}};i&&(r=Object(v.a)(Object(v.a)({},r),{},{func_response:i})),n&&(r=Object(v.a)(Object(v.a)({},r),{},{func_fail:n})),j.a.post(r)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={route:"parametro_datagrid/excluir/",data:{id:e}};t&&(o=Object(v.a)(Object(v.a)({},o),{},{func_response:t})),a&&(o=Object(v.a)(Object(v.a)({},o),{},{func_fail:a})),j.a.post(o)},w=a(448);function x(e){var t,a=e.chave,c=e.colunasAceitas,m=void 0===c?null:c,_=e.aoAlterarStateStoring,h=function(e){var t=e.chave;return new b.default({pageSize:20,key:"id",load:function(e){var a=window.loadOptionsToActionParams(e);return new Promise((function(e,o){j.a.get({route:"parametro_datagrid/listar/",data:Object(v.a)({chave:t},a),func_response:function(t){var a=window.createLoadExtra(t);e(Object(v.a)(Object(v.a)({},a),{},{data:t.data}))},func_fail:function(e){e.validation&&o(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))},byKey:function(e){return!!e&&new Promise((function(t,a){j.a.get({route:"/parametro_datagrid/listar/",data:{id:e},func_response:function(e){t(e.data)},func_fail:function(e){e.validation&&a(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}))}})}({chave:a}),x=Object(n.useRef)(null),A=Object(n.useState)(),C=Object(i.a)(A,2),S=C[0],R=C[1],I=Object(n.useState)(!1),P=Object(i.a)(I,2),E=P[0],T=P[1],D=Object(n.useState)(!1),k=Object(i.a)(D,2),M=k[0],N=k[1],F=Object(n.useState)(0),L=Object(i.a)(F,2),U=L[0],B=L[1],V=Object(n.useState)(""),z=Object(i.a)(V,2),G=z[0],H=z[1],q=Object(n.useState)(null),W=Object(i.a)(q,2),K=W[0],J=W[1],Q=Object(n.useState)({}),Z=Object(i.a)(Q,2),X=Z[0],Y=Z[1],$=Object(n.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],oe=Object(n.useState)(!1),ie=Object(i.a)(oe,2),ne=ie[0],re=ie[1],se=function(e){return{enabled:!0,type:"custom",customLoad:function(){if(e.colunasParametros&&(r.a.temp.cubo.colunasParametros[a]=e.colunasParametros),m&&Array.isArray(m)&&m.length>0){var t=e.columns;t=Object(s.removeColunasNaoExistentes)(t,m),e.columns=t}return J(e),Y(e),N(!1),e},customSave:function(t){var o,i,n,s,c,l,d={columns:null!==(o=window.clone_obj(t.columns))&&void 0!==o?o:[],colunasParametros:null!==(i=null===r.a||void 0===r.a||null===(n=r.a.temp)||void 0===n||null===(s=n.cubo)||void 0===s?void 0:s.colunasParametros[a])&&void 0!==i?i:[],filterValue:null!==(c=t.filterValue)&&void 0!==c?c:null,searchText:null!==(l=t.searchText)&&void 0!==l?l:""},u=!window.isEquivalent(window.clone_obj(d),window.clone_obj(e));N(u),u&&Y(d),r.a.set_parametro_usuario(a,t)}}},ce=function(e){R(e.selectedRowKeys),e.selectedRowsData[0]&&e.selectedRowsData[0].state_storing&&(B(e.selectedRowsData[0].id),H(e.selectedRowsData[0].nome),_(se(e.selectedRowsData[0].state_storing))),T(!1)},le=function(){ae(!1),re(!1)};K||_(se(null!==(t=r.a.get_parametro_usuario(a))&&void 0!==t?t:{}));var de=te?Object(o.jsx)(y,{nomeInicial:G,visible:te,isSalvarComo:ne,aoSalvar:function(e,t){O(t?null:U,a,e,X,(function(a){le(),x.current&&(B(a.id),R([a.id])),t||H(e)}))},aoExcluir:function(){g(U,(function(e){B(null),R([]),H(""),le()}))},aoCancelar:function(){le()}}):null;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l.a,{value:S,opened:E,valueExpr:"id",deferRendering:!1,displayExpr:function(e){return e&&"".concat(M?"* ":"").concat(e.nome)},placeholder:"Vis\xe3o",showClearButton:!0,dataSource:h,onValueChanged:function(e){R(e.value),e.value||(B(0),H(""))},onOptionChanged:function(e){"opened"===e.name&&T(e.value)},contentRender:function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(f.a,{children:[Object(o.jsx)(p.Item,{locateInMenu:"never",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"save",text:"Salvar",hint:"Salvar",visible:M,onClick:function(){if(!_)return!1;U?O(U,a,G,X):ae(!0)}}}),Object(o.jsx)(p.Item,{locateInMenu:"never",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"edit",text:"Editar",hint:"Editar",visible:U>0,onClick:function(){if(!_)return!1;ae(!0)}}}),Object(o.jsx)(p.Item,{locateInMenu:"never",location:"after",widget:"dxButton",showText:"inMenu",options:{icon:"refresh",text:"Recarregar",hint:"Recarregar",onClick:function(){x.current&&x.current.instance.refresh()}}}),Object(o.jsx)(p.Item,{locateInMenu:"always",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"save",hint:"Salvar Como...",text:"Salvar Como...",visible:U>0,onClick:function(){if(!_)return!1;ae(!0),re(!0)}}}),Object(o.jsx)(p.Item,{locateInMenu:"always",location:"before",widget:"dxButton",showText:"inMenu",options:{icon:"trash",hint:"Excluir",text:"Excluir",visible:U>0,onClick:function(){if(!_)return!1;Object(w.confirm)("Deseja excluir a vis\xe3o?","Aten\xe7\xe3o").then((function(e){if(e){g(U,(function(e){B(null),R([]),H("")}))}}))}}})]}),Object(o.jsxs)(u.a,{ref:x,dataSource:e.component.instance().getDataSource(),hoverStateEnabled:!0,selectedRowKeys:S,onSelectionChanged:ce,height:"100%",showColumnHeaders:!1,remoteOperations:!0,children:[Object(o.jsx)(d.Column,{dataField:"nome",caption:"Nome"}),Object(o.jsx)(d.Selection,{mode:"single"}),Object(o.jsx)(d.Paging,{defaultPageSize:10}),Object(o.jsx)(d.Pager,{visible:!0,displayMode:"compact",showPageSizeSelector:!1,showInfo:!1,showNavigationButtons:!1}),Object(o.jsx)(d.FilterRow,{visible:!0})]})]})},width:300}),de]})}function y(e){var t=e.nomeInicial,a=void 0===t?"":t,r=e.visible,s=void 0!==r&&r,c=e.isSalvarComo,l=void 0!==c&&c,d=e.aoSalvar,u=void 0===d?null:d,p=e.aoExcluir,f=void 0===p?null:p,_=e.aoCancelar,v=void 0===_?null:_,b=Object(n.useState)(a),j=Object(i.a)(b,2),O=j[0],g=j[1];return Object(o.jsxs)(m.Popup,{visible:s,dragEnabled:!1,hideOnOutsideClick:!0,showCloseButton:!1,showTitle:!0,title:"Vis\xe3o",width:300,height:280,children:[Object(o.jsx)(m.Position,{my:"center",collision:"fit"}),Object(o.jsx)(m.ToolbarItem,{widget:"dxButton",toolbar:"top",locateInMenu:"always",options:{icon:"trash",text:"Excluir",onClick:function(e){f&&f(),g(a)}}}),Object(o.jsx)(m.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"before",options:{text:"Cancelar",type:"normal",stylingMode:"text",onClick:function(e){v&&v(),g(a)}}}),Object(o.jsx)(m.ToolbarItem,{widget:"dxButton",toolbar:"bottom",location:"after",options:{icon:"save",text:"Salvar",onClick:function(e){u&&u(O,l)}}}),Object(o.jsx)("p",{children:"Nome:"}),Object(o.jsx)(h.a,{value:O,onValueChanged:function(e){return g(e.value)}})]})}},933:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return k}));var o=a(372),i=a(380),n=a(391),r=a(365),s=a(366),c=a(385),l=a(368),d=a(369),u=a(367),p=a(376),f=a.n(p),m=a(389),_=a(105),h=a(692),v=a.n(h),b=a(448),j=a(408),O=a(63),g=a.n(O),w=a(398),x=a(893),y=a.n(x),A=a(578),C=a(923),S=a(891);var R=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state=Object(i.a)({displayExpression:null,valueExpression:null},o.propsToObjState()),o}return Object(s.a)(a,[{key:"propsToObjState",value:function(){return{lista:this.props.lista}}},{key:"componentDidMount",value:function(){switch(this.props.idModulo){case A.a.documento:this.setState({displayExpression:"nome",valueExpression:"id"});break;case A.a.processo:this.setState({displayExpression:"nome",valueExpression:"processo_id"});break;case A.a.tarefas:case A.a.projeto:case A.a.crm:this.setState({displayExpression:"nome",valueExpression:"id"});break;case A.a.pdca:this.setState({displayExpression:"nome",valueExpression:"pdca_id"})}}},{key:"handleItemDeleting",value:function(e){var t=this,a=g.a.Deferred();Object(b.confirm)("Deseja remover este item dos favoritos? <br /><br /> <strong>"+e.itemData.nome+"</strong>","Aten\xe7\xe3o").done((function(o){a.resolve(!o),o&&(t.props.idModulo===window.MODULOS.DOCUMENTO?window.favoritar_item(e.itemData.tipo,e.itemData.id,!1):t.props.idModulo===window.MODULOS.PROCESSO?window.favoritar_item("solicitacoes",e.itemData.processo_id,!1):t.props.idModulo===window.MODULOS.TAREFAS?window.favoritar_item("tarefa_quadros",e.itemData.id,!1):t.props.idModulo===window.MODULOS.PROJETO?e.itemData.id?window.favoritar_item("projetos",e.itemData.id,!1):e.itemData.projeto_atividade_id&&window.favoritar_item("atividades",e.itemData.projeto_atividade_id,!1):t.props.idModulo===window.MODULOS.RELACIONAMENTO?window.favoritar_item("funis_vendas",e.itemData.id,!1):t.props.idModulo===window.MODULOS.PDCA&&window.favoritar_item("pdcas",e.itemData.pdca_id,!1))})).fail(a.reject),e.cancel=a.promise()}},{key:"handleItemClick",value:function(e){this.props.idModulo===window.MODULOS.DOCUMENTO?"pasta"===e.itemData.tipo?window.View.loadReact(S.default,{documentoPastaId:e.itemData.id},(function(e){}),j.a.ABA.SIM):"documento"===e.itemData.tipo&&(e.itemData.id?"S"===e.itemData.ativa?(window.alert_info("Por favor, aguarde o download do documento"),_.a.obter_token_publico((function(t){_.a.download(window.WS_URI+"documento/download/?documento_revisao_id="+e.itemData.documento_revisao_id+"&token_publico="+t)}))):window.View.load("central_documentos/documento",(function(t,a){a.show(e.itemData.id,window.FORMULARIO.EDITAR)}),window.View.ABA.MULTIPLAS):Object(b.alert)("Nenhuma vers\xe3o do documento dispon\xedvel para download","Aviso")):this.props.idModulo===window.MODULOS.PROCESSO?j.a.loadReact(C.a,{processo_id:e.itemData.processo_id},(function(e){}),j.a.ABA.SIM):this.props.idModulo===window.MODULOS.TAREFAS?window.View.load("tarefa/detalhes",(function(t,a){a.show(e.itemData)}),window.View.ABA.MULTIPLAS,null,null,{tarefaQuadroId:e.itemData.id}):this.props.idModulo===window.MODULOS.PROJETO?e.itemData.id?window.View.load("atividade_projeto/listar",(function(t,a){a.show(e.itemData.id,e.itemData.projeto_template,e.itemData.cliente_nome)}),window.View.ABA.MULTIPLAS,null,null,{projetoId:e.itemData.id}):e.itemData.projeto_atividade_id&&window.View.load("apontamento_projeto/detalhes",(function(t,a){var o={projeto_id:e.itemData.projeto_id,projeto_nome:e.itemData.projeto_nome,cliente_id:e.itemData.cliente_id,cliente_nome:e.itemData.cliente_nome||e.itemData.cliente_razao_social,projeto_atividade_id:e.itemData.projeto_atividade_id};a.onclose=onclose,a.show(o)}),window.View.ABA.MULTIPLAS,null,null,{projetoAtividadeId:e.itemData.projeto_atividade_id}):this.props.idModulo===window.MODULOS.RELACIONAMENTO?window.View.load("oportunidade/listar",(function(t,a){a.show(e.itemData.id)}),window.View.ABA.MULTIPLAS):this.props.idModulo===window.MODULOS.PDCA&&window.View.load("pdca/atividades",(function(t,a){a.show(e.itemData)}),window.View.ABA.MULTIPLAS,null,null,{pdcaId:e.itemData.pdca_id})}},{key:"itemRender",value:function(e){var t=null;switch(this.props.idModulo){case window.MODULOS.DOCUMENTO:"pasta"===e.tipo?t=Object(o.jsx)("i",{className:"fas fa-folder"}):"documento"===e.tipo&&(t=Object(o.jsx)("i",{className:"fas fa-file"}));break;case window.MODULOS.PROJETO:e.projeto_atividade_id&&(t=Object(o.jsx)("i",{className:"fa fa-clock"}))}return Object(o.jsx)(f.a.Fragment,{children:Object(o.jsxs)("div",{title:e.nome,children:[t," ",Object(o.jsx)("span",{children:e.nome})]})})}},{key:"render",value:function(){return Object(o.jsx)("div",{className:y.a.cardContainer,children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:[""!==this.props.iconeUrl&&Object(o.jsx)("img",{src:this.props.iconeUrl,className:y.a.iconeModulo,alt:this.props.nomeModulo}),Object(o.jsx)("span",{className:y.a.topoTitulo,children:this.props.nomeModulo})]}),Object(o.jsx)("div",{children:Object(o.jsx)(v.a,{dataSource:new w.default({store:this.state.lista,paginate:!0,pageSize:10,valueExpr:this.state.valueExpression,displayExpr:this.state.displayExpression}),allowItemDeleting:!0,itemDeleteMode:"static",onItemDeleting:this.handleItemDeleting.bind(this),onItemClick:this.handleItemClick.bind(this),itemRender:this.itemRender.bind(this)})})]})})}}]),a}(f.a.Component);R.defaultProps={iconeUrl:"",nomeModulo:"?",idModulo:null,lista:[]};var I=a(529),P=a.n(I),E=a(876),T=a(1191),D=a.n(T);var k=function(e){Object(l.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(u.a)(e);if(t()){var i=Object(u.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(d.a)(this,a)}}(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).state={allowRender:!1,listouProcessos:!1,listouDocumentos:!1,listouTarefaQuadros:!1,listouProjetos:!1,listouFunisVendas:!1,listouPDCAS:!1,listouAtividades:!1,listaFavoritos:{documentos:[],processos:[],tarefaQuadros:[],projetos:[],funisVendas:[],pdcas:[],atividade:[]}},o.listarFavoritos=o.listarFavoritos.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"listarFavoritosDocumentos",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_documentos")?m.a.get("documento/get_favoritos/",null,(function(t){var a,o,r=[];t&&(t.documentos&&(a=t.documentos),t.pastas&&(o=t.pastas),o&&a?r=[].concat(Object(n.a)(a),Object(n.a)(o)):o?r=o:a&&(r=a)),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{documentos:r}),listouDocumentos:!0}}))})):this.setState({listouDocumentos:!0})}},{key:"listarFavoritosProcessos",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_processos")?m.a.get("solicitacao/listar_disponiveis/",{lista_apenas_favoritas:!0},(function(t){var a=[];t&&(a=t),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{processos:a}),listouProcessos:!0}}))})):this.setState({listouProcessos:!0})}},{key:"listarFavoritosTarefaQuadros",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_tarefas")?m.a.get("tarefa_quadro/listar_favoritos/",null,(function(t){var a=[];t&&(a=t),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{tarefaQuadros:a}),listouTarefaQuadros:!0}}))})):this.setState({listouTarefaQuadros:!0})}},{key:"listarFavoritosProjetos",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_projetos")?m.a.get("projeto/listar_favoritos/",null,(function(t){var a=[];t&&(a=t),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{projetos:a}),listouProjetos:!0}}))})):this.setState({listouProjetos:!0})}},{key:"listarFavoritosFunisVendas",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_relacionamento")?m.a.get("funil_vendas/listar_favoritos/",null,(function(t){var a=[];t&&(a=t),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{funisVendas:a}),listouFunisVendas:!0}}))})):this.setState({listouFunisVendas:!0})}},{key:"listarFavoritosPDCAS",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"pdca")?m.a.get("pdca/listar_favoritos/",null,(function(t){var a=[];t&&(a=t),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{pdcas:a}),listouPDCAS:!0}}))})):this.setState({listouPDCAS:!0})}},{key:"listarFavoritosAtividades",value:function(e){_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_projetos")?m.a.get("atividade_projeto/listar_favoritos/",null,(function(t){var a=[];t&&(a=t),e.setState((function(e){return{listaFavoritos:Object(i.a)(Object(i.a)({},e.listaFavoritos),{},{atividade:a}),listouAtividades:!0}}))})):this.setState({listouAtividades:!0})}},{key:"listarFavoritos",value:function(){var e=this;this.setState({listouDocumentos:!1,listouProcessos:!1,listouTarefaQuadros:!1,listouProjetos:!1,listouFunisVendas:!1,listouPDCAS:!1,listouAtividades:!1,allowRender:!1},(function(){e.listarFavoritosDocumentos(e),e.listarFavoritosProcessos(e),e.listarFavoritosTarefaQuadros(e),e.listarFavoritosProjetos(e),e.listarFavoritosFunisVendas(e),e.listarFavoritosPDCAS(e),e.listarFavoritosAtividades(e)}))}},{key:"componentDidMount",value:function(){this.listarFavoritos()}},{key:"componentDidUpdate",value:function(e,t){this.state.listouDocumentos&&this.state.listouProcessos&&this.state.listouTarefaQuadros&&this.state.listouProjetos&&this.state.listouFunisVendas&&this.state.listouPDCAS&&this.state.listouAtividades&&!t.allowRender&&this.setState({allowRender:!0})}},{key:"render",value:function(){return this.state.allowRender&&Object(o.jsxs)(P.a,{useNative:!0,style:{height:this.props.height},children:[Object(o.jsx)("div",{className:"panel-heading text-primary",children:Object(o.jsxs)("strong",{className:"dropdown home-title",children:[Object(o.jsx)("i",{className:"fa fa-star text-primary","aria-hidden":"true"}),"\xa0",Object(o.jsx)("span",{className:"txt_timeline",children:"Favoritos"}),Object(o.jsx)("button",{className:"btn btn-default btn_refresh_favoritos btn-title",onClick:this.listarFavoritos,children:Object(o.jsx)("span",{className:"fas fa-sync-alt text-primary"})})]})}),Object(o.jsxs)("div",{className:D.a.container,children:[_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_documentos")&&this.state.listaFavoritos.documentos.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/folder.svg",nomeModulo:"Documentos",idModulo:A.a.documento,lista:this.state.listaFavoritos.documentos}),_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_processos")&&this.state.listaFavoritos.processos.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/processos.svg",nomeModulo:"Processos",idModulo:A.a.processo,lista:this.state.listaFavoritos.processos}),_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_tarefas")&&this.state.listaFavoritos.tarefaQuadros.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/tarefa.svg",nomeModulo:"Tarefas",idModulo:A.a.tarefas,lista:this.state.listaFavoritos.tarefaQuadros}),_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_projetos")&&this.state.listaFavoritos.projetos.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/icon_black_project.svg",nomeModulo:"Projetos",idModulo:A.a.projeto,lista:this.state.listaFavoritos.projetos}),_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_relacionamento")&&this.state.listaFavoritos.funisVendas.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/people.svg",nomeModulo:"CRM",idModulo:A.a.crm,lista:this.state.listaFavoritos.funisVendas}),_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"pdca")&&this.state.listaFavoritos.pdcas.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/list_alt.svg",nomeModulo:"PDCA",idModulo:A.a.pdca,lista:this.state.listaFavoritos.pdcas}),_.a.verifica_permissao(_.a.sessao.dados.empresa_filial_id,"gestao_projetos")&&this.state.listaFavoritos.atividade.length>0&&Object(o.jsx)(R,{iconeUrl:"assets/img/icones_bp/central_pendencias.svg",nomeModulo:"Atividades",idModulo:A.a.projeto,lista:this.state.listaFavoritos.atividade})]})]})||Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"panel-heading text-primary",style:{marginBottom:10},children:Object(o.jsxs)("strong",{className:"dropdown home-title",children:[Object(o.jsx)("i",{className:"fa fa-star text-primary","aria-hidden":"true"}),"\xa0",Object(o.jsx)("span",{className:"txt_timeline",children:"Favoritos"}),Object(o.jsx)("button",{className:"btn btn-default btn_refresh_favoritos btn-title",onClick:this.listarFavoritos,children:Object(o.jsx)("span",{className:"fas fa-sync-alt text-primary"})})]})}),Object(o.jsxs)("div",{className:D.a.loadingIndicator,children:[Object(o.jsx)(E.LoadIndicator,{visible:!0,height:40,width:40}),Object(o.jsx)("p",{children:"Por favor, aguarde"})]})]})}}]),a}(f.a.Component);k.defaultProps={height:"calc(100vh - 45px)"}},934:function(e,t,a){"use strict";a.r(t);var o=a(372),i=a(380),n=a(365),r=a(366),s=a(385),c=a(368),l=a(369),d=a(367),u=a(376),p=a.n(u),f=a(692),m=a.n(f),_=a(893),h=a.n(_),v=a(576),b=a(492),j=a(389),O=a(691);a(1192);var g=function(e){Object(c.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(d.a)(e);if(t()){var i=Object(d.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(l.a)(this,a)}}(a);function a(e){var o;return Object(n.a)(this,a),(o=t.call(this,e)).state={lista:null,edicao:!1,salvando:!1,edicaoId:null,edicaoDescricao:"",edicaoConcluido:!1,opcoes:Object(i.a)({exibirConcluidos:!1},window.App.get_parametro_usuario("notas_opcoes"))},o.listRef=p.a.createRef(),o.textDescricaoRef=p.a.createRef(),o.obterLista=o.obterLista.bind(Object(s.a)(o)),o.renderItemLista=o.renderItemLista.bind(Object(s.a)(o)),o.handleExibirOcultarConcluidosClick=o.handleExibirOcultarConcluidosClick.bind(Object(s.a)(o)),o.handleRefreshClick=o.handleRefreshClick.bind(Object(s.a)(o)),o.handleNovoClick=o.handleNovoClick.bind(Object(s.a)(o)),o.handleItemClick=o.handleItemClick.bind(Object(s.a)(o)),o.handleCancelarClick=o.handleCancelarClick.bind(Object(s.a)(o)),o.handleSalvarClick=o.handleSalvarClick.bind(Object(s.a)(o)),o.handleExcluirClick=o.handleExcluirClick.bind(Object(s.a)(o)),o.handleDescricaoChanged=o.handleDescricaoChanged.bind(Object(s.a)(o)),o.handleDescricaoKeyDown=o.handleDescricaoKeyDown.bind(Object(s.a)(o)),o.handleConcluidoChanged=o.handleConcluidoChanged.bind(Object(s.a)(o)),o}return Object(r.a)(a,[{key:"obterLista",value:function(){var e=this;!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];j.a.get({route:"nota/listar/",data:{exibir_concluidos:t},func_response:function(t){e(t)},func_fail:function(e){e.validation&&console.log(new Error(e.validation.messages.map((function(e){return e.message})).join("<br/>")))}})}((function(t){return e.setState({lista:t})}),this.state.opcoes.exibirConcluidos)}},{key:"componentDidMount",value:function(){this.obterLista()}},{key:"componentDidUpdate",value:function(e,t){this.textDescricao&&this.textDescricao.focus()}},{key:"handleRefreshClick",value:function(e){this.obterLista()}},{key:"handleItemClick",value:function(e){this.setState({edicao:!0,salvando:!1,edicaoId:e.itemData.id,edicaoDescricao:e.itemData.descricao,edicaoConcluido:"S"===e.itemData.concluido})}},{key:"handleExibirOcultarConcluidosClick",value:function(e){var t=this,a=Object(i.a)(Object(i.a)({},this.state.opcoes),window.App.get_parametro_usuario("notas_opcoes"));a.exibirConcluidos=!this.state.opcoes.exibirConcluidos,this.setState({opcoes:a},(function(){return t.obterLista()})),window.App.set_parametro_usuario("notas_opcoes",a)}},{key:"handleNovoClick",value:function(e){this.setState({edicao:!0,salvando:!1,edicaoId:null,edicaoDescricao:"",edicaoConcluido:!1})}},{key:"handleSalvarClick",value:function(e){var t,a,o=this;this.setState({salvando:!0}),t={nota_id:this.state.edicaoId,descricao:this.state.edicaoDescricao,concluido:this.state.edicaoConcluido},a=function(e){return o.cancelarEstadoEdicao()},j.a.post("nota/salvar",t,(function(e){a&&a(e)}))}},{key:"handleExcluirClick",value:function(e){var t,a,o=this;t=this.state.edicaoId,a=function(e){return o.cancelarEstadoEdicao()},j.a.post("nota/excluir",{nota_id:t},(function(e){a&&a(e)}))}},{key:"handleCancelarClick",value:function(e){this.cancelarEstadoEdicao()}},{key:"cancelarEstadoEdicao",value:function(){var e=this;this.setState({edicao:!1,salvando:!1,edicaoId:null,edicaoDescricao:"",edicaoConcluido:!1},(function(){e.obterLista()}))}},{key:"handleDescricaoChanged",value:function(e){this.setState({edicaoDescricao:e.target.value})}},{key:"handleDescricaoKeyDown",value:function(e){13!==e.keyCode||e.shiftKey||this.handleSalvarClick(null)}},{key:"handleConcluidoChanged",value:function(e){this.setState({edicaoConcluido:e.value})}},{key:"renderItemLista",value:function(e){var t=this,a="S"===e.concluido?{textDecoration:"line-through"}:{};return Object(o.jsxs)("div",{style:{display:"flex"},children:[Object(o.jsx)(v.CheckBox,{value:"S"===e.concluido,defaultValue:!1,onValueChanged:function(a){a.event&&a.event.stopPropagation();var o=t.state.lista.slice();o.forEach((function(a,i){var n,r,s;+e.id===+a.id&&(o[i].concluido="S"===a.concluido?"N":"S",n=e.id,r=o[i].concluido,s=function(a){var n=o;n.forEach((function(r,s){+e.id===+r.id&&o[i].concluido!==(!0===a.concluido?"S":"N")&&(n[s].concluido=r.concluido?"S":"N",t.setState({lista:n}))}))},j.a.post("nota/concluir",{nota_id:n,concluido:r},(function(e){s&&s(e)})))})),t.setState({lista:o})}}),Object(o.jsx)(b.a,{}),Object(o.jsx)("div",{style:Object(i.a)(Object(i.a)({},a),{},{display:"flex"}),children:e.descricao})]})}},{key:"render",value:function(){var e=Object(o.jsxs)("div",{className:"text-muted",style:{padding:"10px",textAlign:"center",minHeight:"140px"},children:[Object(o.jsx)(b.b,{}),Object(o.jsx)("h5",{children:"Ainda n\xe3o h\xe1 notas"}),Object(o.jsx)("p",{children:"Suas notas ser\xe3o exibidas aqui"}),Object(o.jsx)(O.Button,{stylingMode:"text",onClick:this.handleNovoClick,children:"Criar uma nota..."})]}),t=Object(o.jsxs)("div",{children:[Object(o.jsx)("textarea",{ref:this.textDescricaoRef,className:"form-control",rows:4,value:this.state.edicaoDescricao,onChange:this.handleDescricaoChanged,onKeyDown:this.handleDescricaoKeyDown,maxLength:500,readOnly:this.state.salvando}),Object(o.jsx)(b.b,{}),Object(o.jsx)(v.CheckBox,{value:this.state.edicaoConcluido,defaultValue:!1,onValueChanged:this.handleConcluidoChanged,text:"Conclu\xeddo",readOnly:this.state.salvando}),Object(o.jsx)(b.b,{})]}),a=Object(o.jsx)(O.ScrollView,{useNative:!0,style:{height:this.props.height},children:Object(o.jsx)(m.a,{ref:this.listRef,dataSource:this.state.lista,displayExpr:"descricao",valueExpr:"id",onItemClick:this.handleItemClick,noDataText:"",itemRender:this.renderItemLista})}),i=Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"animationLoading",style:{padding:"10px",minHeight:"140px"},children:[Object(o.jsxs)("div",{className:"animationLoadingInline",children:[Object(o.jsx)("div",{className:"animationLoadingCheckA"}),Object(o.jsx)(b.a,{}),Object(o.jsx)("div",{className:"animationLoadingTaskA"})]}),Object(o.jsxs)("div",{className:"animationLoadingInline",children:[Object(o.jsx)("div",{className:"animationLoadingCheckA"}),Object(o.jsx)(b.a,{}),Object(o.jsx)("div",{className:"animationLoadingTaskA"})]}),Object(o.jsxs)("div",{className:"animationLoadingInline",children:[Object(o.jsx)("div",{className:"animationLoadingCheckA"}),Object(o.jsx)(b.a,{}),Object(o.jsx)("div",{className:"animationLoadingTaskA"})]}),Object(o.jsxs)("div",{className:"animationLoadingInline",children:[Object(o.jsx)("div",{className:"animationLoadingCheckA"}),Object(o.jsx)(b.a,{}),Object(o.jsx)("div",{className:"animationLoadingTaskA"})]})]}),Object(o.jsx)(b.b,{})]}),n=Object(o.jsx)(p.a.Fragment,{});n=this.state.edicao?t:this.state.lista?this.state.lista.length>0?a:e:i;var r=this.state.lista?this.state.lista.filter((function(e){return"N"===e.concluido})).length:0;return Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("div",{className:"panel-heading text-primary",children:Object(o.jsxs)("strong",{className:"dropdown home-title",children:[Object(o.jsx)("i",{className:"fas fa-sticky-note text-primary","aria-hidden":"true"}),"\xa0 Notas ",r>0?Object(o.jsx)("span",{className:"badge",children:r}):"",this.state.edicao?Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Salvar",onClick:this.handleSalvarClick,children:Object(o.jsx)("span",{className:"fa fa-save text-primary"})}),Object(o.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Cancelar",onClick:this.handleCancelarClick,children:Object(o.jsx)("span",{className:"fa fa-undo text-primary"})}),+this.state.edicaoId>0?Object(o.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Excluir",onClick:this.handleExcluirClick,children:Object(o.jsx)("span",{className:"far fa-trash-alt text-primary"})}):null]}):Object(o.jsxs)(p.a.Fragment,{children:[Object(o.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Adicionar",onClick:this.handleNovoClick,children:Object(o.jsx)("span",{className:"fa fa-plus text-primary"})}),Object(o.jsx)("button",{className:"btn btn-default btn-title",title:"Recarregar",onClick:this.handleRefreshClick,children:Object(o.jsx)("span",{className:"fas fa-sync-alt text-primary"})}),Object(o.jsx)("button",{className:"btn btn-sm btn-default btn-title",title:"Exibir/esconder conclu\xeddos",onClick:this.handleExibirOcultarConcluidosClick,children:Object(o.jsx)("span",{className:"fas fa-tasks text-primary"})})]})]})}),Object(o.jsx)("div",{className:h.a.cardContainer,style:{padding:"2px"},children:n})]})}},{key:"list",get:function(){return this.listRef.current?this.listRef.current.instance:null}},{key:"textDescricao",get:function(){return this.textDescricaoRef.current?this.textDescricaoRef.current:null}}]),a}(p.a.Component);g.defaultProps={abaTitulo:"Notas",height:"calc(100vh - 95px)"};t.default=g},943:function(e,t,a){"use strict";a.d(t,"a",(function(){return x})),a.d(t,"b",(function(){return y}));var o=a(372),i=a(388),n=a(484),r=a(485),s=a(413),c=a(549),l=a(365),d=a(368),u=a(369),p=a(367);var f=function(e){Object(d.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(p.a)(e);if(t()){var i=Object(p.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(u.a)(this,a)}}(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return a}(i.Column);f.defaultProps={dataField:"situacao",caption:"Situa\xe7\xe3o",width:100,children:Object(o.jsx)(i.Lookup,{dataSource:window.CHAMADO_SITUACAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"})};var m=a(854),_=a(848),h=a(847),v=a(63),b=a.n(v),j=a(855),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return+e.data.situacao!==window.CHAMADO_SITUACAO.ENCERRADO&&+e.data.situacao!==window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE&&e.data.data_previsao_retorno?Object(o.jsx)(_.a,{TipoGestaoTempo:e.data.tipo_gestao_tempo,HorasEstimadas:e.data.horas_previsao_retorno,DataPrazo:e.data.data_previsao_retorno,CalendarioTrabalhoId:e.data.calendario_trabalho_id_param,ExibirTituloDataPrazo:t,TituloDataPrazo:"Previs\xe3o de Retorno"}):""},g=function(e){var t=parseFloat(e.data.percentual_encerramento_inatividade),a=e.data.tempo_encerramento_inatividade;return![window.CHAMADO_SITUACAO.AGUARDANDO_ATENDIMENTO,window.CHAMADO_SITUACAO.AGUARDANDO_RESPONSAVEL,window.CHAMADO_SITUACAO.ENCERRADO,window.CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE,window.CHAMADO_SITUACAO.AGUARDANDO_FORNECEDOR].includes(+e.data.situacao)&&a?Object(o.jsxs)("div",{className:"small",children:[Object(o.jsx)("div",{style:{display:"flex",flexFlow:"row-reverse"},children:Object(o.jsx)("div",{style:{fontWeight:"bold",paddingLeft:"10px",paddingRight:"0px"},children:Object(o.jsx)("div",{className:"text text-default text-warning",style:{font:"inherit",width:"100%"},children:a})})}),Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"progress div_progress bar_progresso",style:{marginBottom:"0px",height:"12px"},children:Object(o.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-warning bar_progresso",style:{width:t+"%"}})})})]}):""},w=function(e,t){return Object(o.jsx)(h.a,{viewHtmlId:t,detalhes:e.data,autoUpdate:!0})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return[Object(o.jsx)(n.a,{},"id"),Object(o.jsx)(r.a,{dataField:"data_abertura",caption:"Data Abertura"},"data_abertura"),Object(o.jsx)(r.a,{dataField:"data_encerramento",caption:"Data Encerramento"},"data_encerramento"),Object(o.jsx)(s.a,{dataField:"prioridade_nome",caption:"Prioridade"},"prioridade_nome"),Object(o.jsx)(s.a,{dataField:"assunto",caption:"Assunto"},"assunto"),Object(o.jsx)(f,{},"situacao"),Object(o.jsx)(c.default,{caption:"Solicitante",dataField:"usuario_solicitante_nome",dataFieldUsuarioId:"solicitante_id"},"usuario_solicitante_nome"),Object(o.jsx)(c.default,{caption:"Respons\xe1vel",dataField:"usuario_responsavel_nome",dataFieldUsuarioId:"usuario_responsavel_id"},"usuario_responsavel_nome"),Object(o.jsx)(m.a,{},"entidadeTipo"),Object(o.jsx)(s.a,{dataField:"codigo_entidade",caption:"C\xf3digo Entidade"},"codigo_entidade"),Object(o.jsx)(s.a,{dataField:"entidade_nome",caption:"Entidade"},"entidade_nome"),Object(o.jsx)(r.a,{dataField:"data_previsao_retorno",caption:"Previs\xe3o retorno",cellRender:O},"data_previsao_retorno"),Object(o.jsx)(s.a,{dataField:"motivo",caption:"Motivo"},"motivo"),Object(o.jsx)(s.a,{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",visible:!1},"classificacao_nome"),Object(o.jsx)(s.a,{dataField:"grupo_motivo_nome",caption:"Grupo de Motivo"},"grupo_motivo_nome"),Object(o.jsx)(i.Column,{dataField:"percentual_encerramento_inatividade",dataType:"number",caption:"% para encerramento por inatividade",cellRender:g,allowGrouping:!1,allowFiltering:!1,width:150},"percentual_encerramento_inatividade"),Object(o.jsx)(i.Column,{dataField:"sla",dataType:"number",caption:"SLA",cellRender:function(t){return w(t,e)},allowGrouping:!1,allowFiltering:!1,width:150},"sla"),Object(o.jsx)(s.a,{dataField:"nota_avaliacao_nome",caption:"Nota de Avalia\xe7\xe3o",visible:!1},"nota_avaliacao_nome")]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return[Object(o.jsx)(n.a,{},"chamado_id"),Object(o.jsx)(j.a,{dataField:"entidade_nome",caption:"Entidade"},"entidade_nome"),Object(o.jsx)(r.a,{dataField:"data_abertura",caption:"Data Abertura"},"data_abertura"),Object(o.jsx)(r.a,{dataField:"data_previsao_retorno",caption:"Previs\xe3o retorno",cellRender:O,width:180},"data_previsao_retorno"),Object(o.jsx)(s.a,{dataField:"assunto",caption:"Assunto"},"assunto"),Object(o.jsx)(s.a,{dataField:"motivo",caption:"Motivo",cellTemplate:function(e,t){var a=window.Colors(t.data.motivo_cor);b()(e).html('<span class="label" style="background: '+a.hex+"; color: "+a.nome_hex+';">'+t.data.motivo+"</span>")}},"motivo"),Object(o.jsx)(c.default,{caption:"Solicitante",dataField:"usuario_solicitante_nome",dataFieldUsuarioId:"solicitante_id",width:200},"usuario_solicitante_nome"),Object(o.jsx)(c.default,{caption:"Respons\xe1vel",dataField:"usuario_responsavel_nome",dataFieldUsuarioId:"usuario_responsavel_id",width:200},"usuario_responsavel_nome"),Object(o.jsx)(s.a,{dataField:"prioridade_nome",caption:"Prioridade",width:180},"prioridade_nome"),Object(o.jsx)(f,{width:200},"chamado_situacao"),Object(o.jsx)(r.a,{dataField:"data_encerramento",caption:"Data Encerramento"},"data_encerramento"),Object(o.jsx)(i.Column,{dataField:"sla",dataType:"number",caption:"SLA Tempo Atendimento",cellRender:function(t){return w(t,e)},allowGrouping:!1,allowFiltering:!1,allowSorting:!1,width:180},"sla_tempo_atendimento"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_reacao",caption:"SLA Tempo Rea\xe7\xe3o",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_reacao)}},"sla_tempo_reacao"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_resolucao",caption:"SLA Tempo Resolu\xe7\xe3o",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_resolucao)}},"sla_tempo_resolucao"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_total",caption:"SLA Total",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_total)}},"sla_tempo_total"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_solicitante",caption:"SLA Tempo Solicitante",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_solicitante)}},"sla_tempo_solicitante"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_encerrado",caption:"SLA Tempo Encerrado",allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_encerrado)}},"sla_tempo_encerrado"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_reacao_real",caption:"SLA Tempo Rea\xe7\xe3o Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_reacao_real)}},"sla_tempo_reacao_real"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_resolucao_real",caption:"SLA Tempo Resolu\xe7\xe3o Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_resolucao_real)}},"sla_tempo_resolucao_real"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_total_real",caption:"SLA Total Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_total_real)}},"sla_tempo_total_real"),Object(o.jsx)(i.Column,{dataField:"sla_tempo_solicitante_real",caption:"SLA Tempo Solicitante Real",visible:!1,allowHeaderFiltering:!1,allowGrouping:!1,width:150,calculateCellValue:function(e){return window.format_time(e.sla_tempo_solicitante_real)}},"sla_tempo_solicitante_real"),Object(o.jsx)(s.a,{dataField:"classificacao_nome",caption:"Classifica\xe7\xe3o",visible:!1},"classificacao_nome"),Object(o.jsx)(s.a,{caption:"Grupo Motivo",dataField:"grupo_motivo_nome",width:180},"grupo_motivo_nome"),Object(o.jsx)(m.a,{width:100},"entidade_tipo"),Object(o.jsx)(s.a,{dataField:"codigo_entidade",caption:"C\xf3digo Entidade"},"codigo_entidade"),Object(o.jsx)(s.a,{caption:"Nome Projeto",dataField:"projeto_nome",width:100,allowFiltering:!1},"projeto_nome"),Object(o.jsx)(s.a,{caption:"Atividade Projeto",dataField:"projeto_atividade_descricao",width:100,allowFiltering:!1},"projeto_atividade_descricao"),Object(o.jsx)(i.Column,{dataField:"percentual_encerramento_inatividade",dataType:"number",caption:"Percentual Encerramento Inatividade",cellRender:g,allowGrouping:!1,allowFiltering:!1,width:150},"percentual_encerramento_inatividade"),Object(o.jsx)(s.a,{dataField:"nota_avaliacao_nome",caption:"Nota de Avalia\xe7\xe3o",visible:!1},"nota_avaliacao_nome"),Object(o.jsx)(r.a,{dataField:"ultima_mensagem_data_envio",caption:"Ultima A\xe7\xe3o",visible:!1},"ultima_mensagem_data_envio")]}},949:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var o=a(380),i=a(372),n=a(365),r=a(368),s=a(369),c=a(367),l=a(388),d=a(366),u=a(385),p=a(376),f=a.n(p),m=a(63),_=a.n(m),h=a(105),v=a(408),b=a(389),j=a(483),O=a(454),g=a.n(O);a(1129);var w=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(e){var o,i,r,s,c,l,d,p,f,m,_,h,v,b,j,O,g,w,x,y,A,C,S,R,I,P,E;return Object(n.a)(this,a),(E=t.call(this,e)).state={documentoRevisaoID:null!==(o=e.documentoRevisaoID)&&void 0!==o?o:null,documentoRevisaoIDBackup:null!==(i=null!==(r=e.documentoRevisaoIDBackup)&&void 0!==r?r:e.documentoRevisaoID)&&void 0!==i?i:null,documentoRevisaoMimeType:null!==(s=e.documentoRevisaoMimeType)&&void 0!==s?s:null,documentoRevisaoMimeTypeBackup:null!==(c=null!==(l=e.documentoRevisaoMimeTypeBackup)&&void 0!==l?l:e.documentoRevisaoMimeType)&&void 0!==c?c:null,arquivoNome:null!==(d=e.arquivoNome)&&void 0!==d?d:"",arquivoNomeBackup:null!==(p=null!==(f=e.arquivoNomeBackup)&&void 0!==f?f:e.arquivoNome)&&void 0!==p?p:"",arquivoTamanho:null!==(m=e.arquivoTamanho)&&void 0!==m?m:0,arquivoTamanhoBackup:null!==(_=null!==(h=e.arquivoTamanhoBackup)&&void 0!==h?h:e.arquivoTamanho)&&void 0!==_?_:0,arquivoSelecionado:null!==(v=e.arquivoSelecionado)&&void 0!==v?v:null,arquivoPrevisao:null!==(b=e.arquivoPrevisao)&&void 0!==b?b:null,desabilitado:null===(j=e.desabilitado)||void 0===j||j,exibirPrevisao:null===(O=e.exibirPrevisao)||void 0===O||O,obrigatorio:null!==(g=e.obrigatorio)&&void 0!==g&&g,clicksignAtivo:null!==(w=e.clicksignAtivo)&&void 0!==w&&w,certsignAtivo:null!==(x=e.certsignAtivo)&&void 0!==x&&x,d4signAtivo:null!==(y=e.d4signAtivo)&&void 0!==y&&y,elemKey:null!==(A=e.elemKey)&&void 0!==A?A:null,solicitacaoID:null!==(C=e.solicitacaoID)&&void 0!==C?C:null,solicitacaoNumero:null!==(S=e.solicitacaoNumero)&&void 0!==S?S:null,linhaTabela:null!==(R=e.linhaTabela)&&void 0!==R?R:null,objCampoTabela:null!==(I=e.objCampoTabela)&&void 0!==I?I:null,placeholder:null!==(P=e.placeholder)&&void 0!==P?P:"Arraste um arquivo aqui ou clique no bot\xe3o para pesquisar"},E.handleLimparClick=E.handleLimparClick.bind(Object(u.a)(E)),E.handleSelecionarClick=E.handleSelecionarClick.bind(Object(u.a)(E)),E.handleDesfazerClick=E.handleDesfazerClick.bind(Object(u.a)(E)),E.handleVisualizarClick=E.handleVisualizarClick.bind(Object(u.a)(E)),E.handleDownloadClick=E.handleDownloadClick.bind(Object(u.a)(E)),E.handleClicksignSignatariosClick=E.handleClicksignSignatariosClick.bind(Object(u.a)(E)),E.handleCertsignSignatariosClick=E.handleCertsignSignatariosClick.bind(Object(u.a)(E)),E.handleD4SignSignatariosClick=E.handleD4SignSignatariosClick.bind(Object(u.a)(E)),E.handleInputDrop=E.handleInputDrop.bind(Object(u.a)(E)),E}return Object(d.a)(a,[{key:"handleLimparClick",value:function(e){var t=this;this.state.desabilitado||this.setState({documentoRevisaoID:null,arquivoSelecionado:null,arquivoNome:"",arquivoTamanho:0},(function(){t.props.handleAlterado&&t.props.handleAlterado(t.state)}))}},{key:"handleSelecionarClick",value:function(e){var t=this;if(!this.state.desabilitado){var a=document.createElement("input");a.type="file",a.onchange=function(e){var a=e.target.files[0],i={arquivoPrevisao:null};"undefined"!=typeof a&&a&&(i.documentoPastaID=null,i.arquivoSelecionado=a,i.arquivoNome=a.name,i.arquivoTamanho=a.size,i.documentoRevisaoMimeType=a.type),t.setState(Object(o.a)({},i),(function(){t.props.handleAlterado&&t.props.handleAlterado(t.state)}))},this.setState({}),_()(document).ready((function(){a.click()}))}}},{key:"handleDesfazerClick",value:function(e){this.setState({arquivoSelecionado:null,arquivoPrevisao:null,documentoRevisaoID:this.state.documentoRevisaoIDBackup,documentoRevisaoMimeType:this.state.documentoRevisaoMimeTypeBackup,arquivoNome:this.state.arquivoNomeBackup,arquivoTamanho:this.state.arquivoTamanhoBackup})}},{key:"handleVisualizarClick",value:function(e){var t=this;["application/pdf"].includes(this.state.documentoRevisaoMimeType)?v.a.load("central_documentos/visualizar_pdf",(function(e,a){a.show(t.state.documentoRevisaoID)})):["image/png","image/bmp","image/jpeg","image/jpg","image/gif"].includes(this.state.documentoRevisaoMimeType)&&v.a.load("central_documentos/visualizar_documento",(function(e,a){a.show(t.state.documentoRevisaoID)}))}},{key:"handleDownloadClick",value:function(e){var t=this;h.a.obter_token_publico((function(e){t.state.documentoRevisaoID>0&&h.a.download(window.WS_URI+"documento/download/?documento_revisao_id="+t.state.documentoRevisaoID+"&solicitacao=true&token_publico="+e)}),this.state.documentoRevisaoID)}},{key:"handleClicksignSignatariosClick",value:function(e){var t=this;this.state.documentoRevisaoID>0?v.a.load("clicksign/detalhes",(function(e,a){a.show(t.state.documentoRevisaoID)}),v.a.ABA.SIM):v.a.load("clicksign/configurar_signatarios",(function(e,a){a.show(null,!1,t.state.elemKey,t.state.linhaTabela,t.state.solicitacaoID)}),v.a.ABA.SIM)}},{key:"handleCertsignSignatariosClick",value:function(e){var t=this;this.state.documentoRevisaoID>0?v.a.load("certsign/detalhes",(function(e,a){a.show(t.state.documentoRevisaoID)}),v.a.ABA.SIM):v.a.load("certsign/configurar_signatarios",(function(e,a){a.show(null,!1,t.state.elemKey,t.state.linhaTabela,t.state.solicitacaoID)}),v.a.ABA.SIM)}},{key:"handleD4SignSignatariosClick",value:function(e){var t=this;b.a.get("processo/get_parametros/",null,(function(e){var a=e.processo_padrao_mensagem_d4sign,o=t.state.solicitacaoID;"S"===h.a.sessao.dados.parametro_processo.numero_solicitacao_por_processo&&(o=t.state.solicitacaoNumero),t.state.documentoRevisaoID>0?v.a.load("d4sign/detalhes",(function(e,i){i.show(t.state.documentoRevisaoID,null,a,o)}),v.a.ABA.SIM):v.a.load("d4sign/configurar_signatarios",(function(e,i){i.show(null,!1,t.state.elemKey,t.state.linhaTabela,o,a)}),v.a.ABA.MULTIPLAS)}))}},{key:"handleInputDragStart",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"handleInputDragOver",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"handleInputDragLeave",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"handleInputDrop",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var a=!1,i=!1;if(e.dataTransfer&&e.dataTransfer.items&&(e.dataTransfer.items.length>1&&(i=!0),_()(e.dataTransfer.items).each((function(e,t){t.webkitGetAsEntry().isDirectory&&(a=!0)}))),a)window.alert_modal("Aviso","<strong>Ocorreu uma falha na opera\xe7\xe3o!</strong> <br /><br /> <strong>N\xe3o</strong> \xe9 poss\xedvel realizar o <strong>upload de pastas</strong> atrav\xe9s deste campo. Por favor, selecione apenas um arquivo e tente novamente."),this.setState({});else if(i)window.alert_modal("Aviso","<strong>Ocorreu uma falha na opera\xe7\xe3o!</strong> <br /><br /> <strong>N\xe3o</strong> \xe9 poss\xedvel realizar o <strong>upload de v\xe1rios arquivos</strong> atrav\xe9s deste campo. Por favor, selecione apenas um arquivo e tente novamente."),this.setState({});else if(e&&e.dataTransfer&&e.dataTransfer.files){if(this.state.desabilitado)return;var n={arquivoPrevisao:null},r=e.dataTransfer.files[0];"undefined"!=typeof r&&r&&(n.documentoPastaID=null,n.arquivoSelecionado=r,n.arquivoNome=r.name,n.arquivoTamanho=r.size),this.setState(Object(o.a)({},n),(function(){t.props.handleAlterado&&t.props.handleAlterado(t.state)}))}}},{key:"render",value:function(){var e=this,t=null,a=null,n=null,r=null,s=null,c=null,l=null,d=null,u=null,p=null;if(!this.state.desabilitado&&this.state.documentoRevisaoIDBackup>0&&(this.state.arquivoSelecionado||!this.state.documentoRevisaoID)&&(p=Object(i.jsx)(O.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(i.jsx)(j.Button,{onClick:this.handleDesfazerClick,text:"Desfazer",icon:"fa fa-undo",stylingMode:"text",disabled:this.state.desabilitado})})),null!=this.state.arquivoSelecionado||this.state.documentoRevisaoID>0){if("undefined"!=typeof this.state.arquivoTamanho&&(a=Object(i.jsx)(O.Item,{location:"after",children:Object(i.jsx)(j.Button,{text:window.filesize(parseInt(this.state.arquivoTamanho,10)||0),stylingMode:"text",disabled:!0})})),this.state.desabilitado||(n=Object(i.jsx)(O.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(i.jsx)(j.Button,{onClick:this.handleLimparClick,text:"Limpar",icon:"fa fa-trash-alt",stylingMode:"text"})})),this.state.clicksignAtivo){var f=window.extensao_valida(this.state.arquivoNome,window.extensoes_validas_assinatura);s=Object(i.jsx)(O.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(i.jsx)(j.Button,{onClick:f?this.handleClicksignSignatariosClick:null,text:"Assinaturas (Clicksign)",icon:"fa fa-edit",stylingMode:"text",disabled:!f})})}if(this.state.certsignAtivo){var m=window.extensao_valida(this.state.arquivoNome,window.extensoes_validas_assinatura);c=Object(i.jsx)(O.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(i.jsx)(j.Button,{onClick:m?this.handleCertsignSignatariosClick:null,text:"Assinaturas (Certsign)",icon:"fa fa-edit",stylingMode:"text",disabled:!m})})}if(this.state.d4signAtivo){var _=window.extensao_valida(this.state.arquivoNome,window.extensoes_validas_assinatura);l=Object(i.jsx)(O.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(i.jsx)(j.Button,{onClick:_?this.handleD4SignSignatariosClick:null,text:"Assinaturas (D4Sign)",icon:"fa fa-edit",stylingMode:"text",disabled:!_})})}if(this.state.exibirPrevisao){var v=this.state.arquivoPrevisao;if(this.state.arquivoSelecionado){if(null==v){var b=new FileReader;b.onload=function(t){for(var a=!1,o=[".jpg",".jpeg",".bmp",".gif",".png"],i=0;i<o.length;i++){var n=o[i];if(e.state.arquivoNome.substr(e.state.arquivoNome.length-n.length,n.length).toLowerCase()===n.toLowerCase()){a=!0;break}}e.setState({arquivoPrevisao:!!a&&t.target.result})},b.readAsDataURL(this.state.arquivoSelecionado)}}else if(this.state.documentoRevisaoID>0){if(null==v)if(["image/png","image/bmp","image/jpeg","image/jpg","image/gif"].includes(this.state.documentoRevisaoMimeType))v=window.WS_URI+"/documento/midia/?documento_revisao_id="+this.state.documentoRevisaoID+"&tipo=v&tamanho=200&token_midia="+h.a.sessao.token_midia+"&anticache="+(new Date).getTime()}v&&(t=Object(i.jsx)("div",{style:{"border-left":"1px solid #ccc","border-right":"1px solid #ccc","border-bottom":"1px solid #ccc"},children:Object(i.jsx)("img",{src:v,style:{"max-height":"200px","max-width":"100%"},alt:"Imagem"})}))}}else r=Object(i.jsx)(j.Button,{onClick:this.handleSelecionarClick,hint:"Selecionar",icon:"fa fa-upload",stylingMode:"text",disabled:this.state.desabilitado});!this.state.arquivoSelecionado&&this.state.documentoRevisaoID>0&&(["application/pdf","image/png","image/bmp","image/jpeg","image/jpg","image/gif"].includes(this.state.documentoRevisaoMimeType)&&(d=Object(i.jsx)(j.Button,{onClick:this.handleVisualizarClick,hint:"Visualizar",icon:"fa fa-window-maximize",stylingMode:"text"})),u=Object(i.jsx)(O.Item,{locateInMenu:"always",location:"after",widget:"dxButton",children:Object(i.jsx)(j.Button,{onClick:this.handleDownloadClick,text:"Download",icon:"fa fa-download",stylingMode:"text"})}));var w={onDragStart:this.handleInputDragStart,onDrag:this.handleInputDragStart,onDragOver:this.handleInputDragOver,onDragEnter:this.handleInputDragOver,onDragLeave:this.handleInputDragLeave,onDragEnd:this.handleInputDragLeave,onDrop:this.handleInputDrop};return Object(i.jsxs)("div",Object(o.a)(Object(o.a)({},w),{},{style:{display:"flex",justifyContent:"space-around"},children:[Object(i.jsx)("div",{style:{width:"100%"},children:Object(i.jsx)("div",{className:"input-group",style:{border:0,backgroundColor:"transparent",width:"100%"},children:Object(i.jsx)("input",{type:"text",className:"form-control",value:this.state.arquivoNome,readOnly:!0,placeholder:this.state.placeholder,style:{paddingLeft:"3px",paddingRight:"3px",boxShadow:"none",border:0,backgroundColor:"transparent",width:"100%"},onClick:null!=this.state.arquivoSelecionado||this.state.documentoRevisaoID>0?null:this.handleSelecionarClick,required:this.state.obrigatorio})})}),Object(i.jsxs)(g.a,{style:{border:0,backgroundColor:"transparent"},children:[a,Object(i.jsxs)(O.Item,{location:"after",children:[r,d]}),p,u,s,c,l,null,n]}),t]}))}}]),a}(f.a.Component);w.defaultProps={};var x=function(e){Object(r.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,o=Object(c.a)(e);if(t()){var i=Object(c.a)(this).constructor;a=Reflect.construct(o,arguments,i)}else a=o.apply(this,arguments);return Object(s.a)(this,a)}}(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return a}(l.Column);x.defaultProps={dataField:"documento_id",caption:"Documento",width:150,cellRender:function(e){var t,a,n,r,s,c,l,d="object"===typeof e.data.documento_id?e.data.documento_id:{desabilitado:null!==(t=e.data.desabilitado)&&void 0!==t&&t,documentoRevisaoID:null!==(a=e.data.documento_revisao_id)&&void 0!==a?a:null,documentoRevisaoMimeType:null!==(n=e.data.mime_type)&&void 0!==n?n:null,arquivoNome:null!==(r=e.data.nome_arquivo)&&void 0!==r?r:null,arquivoTamanho:null!==(s=e.data.tamanho)&&void 0!==s?s:null,placeholder:null!==(c=e.column.placeholder)&&void 0!==c?c:null,exibirPrevisao:null!==(l=e.column.exibirPrevisao)&&void 0!==l?l:null};return d.handleAlterado=function(t){e.component.cellValue(e.rowIndex,"documento_id",t)},Object(i.jsx)(w,Object(o.a)({},d))},allowEditing:!1}}}]);