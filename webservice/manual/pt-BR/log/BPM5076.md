# Novos pontos de entrada PHP para apontamentos dinâmicos de Atividades de Projetos e cartões do módulo Tarefas
09/04/2021
## Melhoria
## Referência: BPM5076
## Módulo: Projetos / Tarefas
***

Foram adicionados novos pontos de entrada PHP específicos do Next BP:

1. webservice/especificos/pe/Apontamento_Projeto_Dinamico.pe.php

2. webservice/especificos/pe/Tarefas_Mover_Cartao_Lista.pe.php

O primeiro será acionado no momento que o usuário realizar alguma ação na tela Projetos > Atividades por Usuário (iniciar, pausar ou entregar a atividade). Há uma função específica para cada ação executada, possbilitando que cada uma possa ser customizada de forma distinta.

```php
<?php

use \Sys\Basic;
use \Sys\DB;
use \Sys\Validation;
use \Sys\Util;
use \Sys\App;

/**
 * As funções abaixo são executadas a partir da tela Projetos > Atividades por Usuário, nos eventos de iniciar, pausar e entregar uma atividade.
 */

function apontamento_projeto_dinamico_iniciar_antes($atividade_projeto_model) {
    // Ação executada antes de iniciar uma atividade
}

function apontamento_projeto_dinamico_iniciar_depois($atividade_projeto_model) {
    // Ação executada depois de iniciar uma atividade
}

function apontamento_projeto_dinamico_pausar_antes($atividade_projeto_model) {
    // Ação executada antes de pausar uma atividade
}

function apontamento_projeto_dinamico_pausar_depois($atividade_projeto_model) {
    // Ação executada depois de pausar uma atividade
}

function apontamento_projeto_dinamico_entregar_antes($atividade_projeto_model) {
    // Ação executada antes de entregar uma atividade
}

function apontamento_projeto_dinamico_entregar_depois($atividade_projeto_model) {
    // Ação executada depois de entregar uma atividade
}

```

O segundo será acionado no módulo de Tarefas, no momento que o usuário mover o cartão para uma lista diferente da que ele se encontra. Ha duas funções, onde uma é executada antes do cartão ser movido para a outra lista, e a outra é executada após o cartão ser movido para a outra lista.

```php
<?php

use \Sys\Basic;
use \Sys\DB;
use \Sys\Validation;
use \Sys\Util;
use \Sys\App;

/**
 * As funções abaixo são executadas a partir do módulo Tarefas, quando um cartão é movido de uma lista para outra diferente
 */

function tarefas_mover_cartao_lista_antes($tarefa_quadro_lista_cartao_model) {
    // Ação executada antes de mover um cartão para outra lista diferente
    
    /**
     * Lista onde o cartão estava: $tarefa_quadro_lista_cartao_model->tarefa_quadro_lista_id_old;
     * 
     * Lista para onde o cartão foi movido: $tarefa_quadro_lista_cartao_model->tarefa_quadro_lista_id;
     */
}

function tarefas_mover_cartao_lista_depois($tarefa_quadro_lista_cartao_model) {
    // Ação executada depois de mover um cartão para outra lista diferente

    /**
     * Lista onde o cartão estava: $tarefa_quadro_lista_cartao_model->tarefa_quadro_lista_id_old;
     * 
     * Lista para onde o cartão foi movido: $tarefa_quadro_lista_cartao_model->tarefa_quadro_lista_id;
     */
}
```
