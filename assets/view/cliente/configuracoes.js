define([],function(){return function(i){"use strict";var e=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.chk_gerar_codigo=this.dialog.find(".chk_gerar_codigo"),this.edt_codigo_zeros_esquerda=this.dialog.find(".edt_codigo_zeros_esquerda"),this.chk_codigo_unidade_repetidos=this.dialog.find(".chk_codigo_unidade_repetidos"),this.chk_razao_social=this.dialog.find(".chk_razao_social"),this.chk_nome_fantasia=this.dialog.find(".chk_nome_fantasia"),this.chk_tipo=this.dialog.find(".chk_tipo"),this.chk_cep=this.dialog.find(".chk_cep"),this.chk_endereco=this.dialog.find(".chk_endereco"),this.chk_numero=this.dialog.find(".chk_numero"),this.chk_bairro=this.dialog.find(".chk_bairro"),this.chk_municipio=this.dialog.find(".chk_municipio"),this.chk_pais=this.dialog.find(".chk_pais"),this.chk_inscricao_estadual=this.dialog.find(".chk_inscricao_estadual"),this.chk_cnpj=this.dialog.find(".chk_cnpj"),this.chk_cnpj_repetidos=this.dialog.find(".chk_cnpj_repetidos"),this.chk_segmentos=this.dialog.find(".chk_segmentos"),this.chk_representantes=this.dialog.find(".chk_representantes"),this.chk_email_principal=this.dialog.find(".chk_email_principal"),this.chk_somente_consulta=this.dialog.find(".chk_somente_consulta"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.div_cbo_vincular_form=this.dialog.find(".div_cbo_vincular_form"),this.cbo_vincular_form=this.dialog.find(".cbo_vincular_form"),this.arr_botoes=[],this.id_count=0,this.formulario_id=null,this.formulario_alterado_id=null,this.tipo_formulario=1,this.show=function(i){e.preencher(),show_modal(e.modal.attr("id"))},this.preencher=function(){WS.get("cliente/get_parametros/",null,function(i){e.chk_gerar_codigo.prop("checked","S"==i.cliente_codigo_automatico).change(),e.edt_codigo_zeros_esquerda.val(i.cliente_codigo_zeros_esquerda),e.chk_codigo_unidade_repetidos.prop("checked","S"==i.cliente_codigo_unidade_repetidos).change(),e.chk_razao_social.prop("checked","S"==i.cliente_obrig_razao_social).change(),e.chk_nome_fantasia.prop("checked","S"==i.cliente_obrig_nome_fantasia).change(),e.chk_tipo.prop("checked","S"==i.cliente_obrig_tipo).change(),e.chk_cep.prop("checked","S"==i.cliente_obrig_cep).change(),e.chk_endereco.prop("checked","S"==i.cliente_obrig_endereco).change(),e.chk_numero.prop("checked","S"==i.cliente_obrig_numero).change(),e.chk_bairro.prop("checked","S"==i.cliente_obrig_bairro).change(),e.chk_municipio.prop("checked","S"==i.cliente_obrig_municipio).change(),e.chk_pais.prop("checked","S"==i.cliente_obrig_pais).change(),e.chk_cnpj.prop("checked","S"==i.cliente_obrig_cnpj).change(),e.chk_cnpj_repetidos.prop("checked","S"==i.cliente_cnpj_repetidos).change(),e.chk_inscricao_estadual.prop("checked","S"==i.cliente_obrig_inscricao_estadual).change(),e.chk_segmentos.prop("checked","S"==i.cliente_obrig_segmentos).change(),e.chk_representantes.prop("checked","S"==i.cliente_obrig_representantes).change(),e.chk_email_principal.prop("checked","S"==i.cliente_obrig_email_principal).change(),e.chk_somente_consulta.prop("checked","S"==i.somente_consulta_cliente).change(),e.formulario_id=i.formulario_cliente_id,e.formulario_alterado_id=i.formulario_cliente_id,e.render_formulario(e.formulario_id)})},this.render_formulario=function(i){WS.get("formulario/listar/",{tipo_formulario:e.tipo_formulario},function(o){e.cbo_vincular_form.find("option").remove(),add_option(e.cbo_vincular_form,"0","Nenhum"),$(o).each(function(o,c){add_option(e.cbo_vincular_form,c.formulario_id,c.nome),e.formulario_id==c.formulario_id&&c.nome,i&&setTimeout(()=>{e.cbo_vincular_form.val(i).trigger("change")}),e.cbo_vincular_form.selectpicker("refresh")})})},e.cbo_vincular_form.unbind("change"),e.cbo_vincular_form.change(function(i){e.formulario_alterado_id=e.cbo_vincular_form.val()}),this.close=function(){close_modal(e.modal.attr("id")),void 0!==e.onclose&&e.onclose&&e.onclose()},this.unload=function(){e.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){e.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){e.formulario_alterado_id!=e.formulario_id&&null!=e.formulario_alterado_id?(e.formulario_id=e.formulario_alterado_id,alert_modal("Atenção","Tem certeza que deseja alterar o formulário vinculado ao Cadastro de Cliente ?","Confirmar",e.salvar,!0,"Cancelar",null,null,"modal-lg")):e.salvar()}),this.salvar=function(){WS.post("cliente/salvar_configuracoes_cliente",{cliente_codigo_automatico:e.chk_gerar_codigo.prop("checked"),cliente_codigo_zeros_esquerda:e.edt_codigo_zeros_esquerda.val(),cliente_codigo_unidade_repetidos:e.chk_codigo_unidade_repetidos.prop("checked"),cliente_obrig_razao_social:e.chk_razao_social.prop("checked"),cliente_obrig_nome_fantasia:e.chk_nome_fantasia.prop("checked"),cliente_obrig_tipo:e.chk_tipo.prop("checked"),cliente_obrig_cep:e.chk_cep.prop("checked"),cliente_obrig_endereco:e.chk_endereco.prop("checked"),cliente_obrig_numero:e.chk_numero.prop("checked"),cliente_obrig_bairro:e.chk_bairro.prop("checked"),cliente_obrig_municipio:e.chk_municipio.prop("checked"),cliente_obrig_pais:e.chk_pais.prop("checked"),cliente_obrig_cnpj:e.chk_cnpj.prop("checked"),cliente_cnpj_repetidos:e.chk_cnpj_repetidos.prop("checked"),cliente_obrig_inscricao_estadual:e.chk_inscricao_estadual.prop("checked"),cliente_obrig_segmentos:e.chk_segmentos.prop("checked"),cliente_obrig_representantes:e.chk_representantes.prop("checked"),cliente_obrig_email_principal:e.chk_email_principal.prop("checked"),somente_consulta_cliente:e.chk_somente_consulta.prop("checked"),formulario_cliente_id:e.formulario_id},function(i){alert_saved("Configurações salvas com sucesso"),e.unload()})},this.chk_gerar_codigo.unbind("change"),this.chk_gerar_codigo.change(function(i){e.edt_codigo_zeros_esquerda.prop("readonly",!e.chk_gerar_codigo.prop("checked"))})}});