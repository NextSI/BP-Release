define([],function(){return function(a){"use strict";var t=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.onclose=null,this.edt_usuario=this.dialog.find(".edt_usuario"),this.edt_senha=this.dialog.find(".edt_senha"),this.btn_esconder=this.dialog.find(".btn_esconder"),this.ico_senha=this.dialog.find(".ico_senha"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.ead_plataforma_senha="",this.show=function(){t.carregar(),show_modal(t.modal.attr("id")),set_focus(t.edt_usuario)},this.carregar=function(){WS.get({route:"usuario/dados_basicos_usuario/",data:{},func_response:function(a){a&&(t.edt_usuario.val(a.ead_plataforma_usuario?a.ead_plataforma_usuario:""),App.sessao.dados.senhas_ocultas?t.edt_senha.attr("placeholder","Alterar senha"):t.edt_senha.val(a.ead_plataforma_senha?a.ead_plataforma_senha:""),t.ead_plataforma_senha=a.ead_plataforma_senha)},disable_buttons:[t.btn_salvar,t.btn_cancelar]})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.btn_esconder.unbind("click"),this.btn_esconder.click(function(){t.ico_senha.removeClass(),"password"==t.edt_senha.attr("type")?(t.edt_senha.attr("type","text"),t.ico_senha.addClass("glyphicon glyphicon-eye-close")):(t.edt_senha.attr("type","password"),t.ico_senha.addClass("glyphicon glyphicon-eye-open"))}),this.unload=function(){t.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){WS.post("usuario/alterar_ead_plataforma_credencial",{usuario:t.edt_usuario.val(),senha:""==t.edt_senha.val()?t.ead_plataforma_senha:t.edt_senha.val()},function(a){alert_saved("Credencial alterada com sucesso"),t.unload()},[t.btn_salvar,t.btn_cancelar])})}});