define([],function(){return function(i){"use strict";var n=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Funções HPE",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.btn_configuracoes=this.dialog.find(".btn_configuracoes"),this.listar=function(){var i=n.tab_listagem.find("tbody"),t=i.find("tr:first");n.tab_listagem.find("tr:gt(1)").remove(),WS.get("funcao_hpe/listar/",null,function(o){$(o).each(function(o,s){!function(o){var s=t.clone();s.removeAttr("template-row"),s.css("display",""),$(s.find("[template-field='nome']")).text(o.nome),$(s.find("[template-field='missao']")).text(o.missao);var a=$(s.find(".btn_visualizar"));a.unbind("click"),a.click(function(){View.load("funcao_hpe/detalhes",function(i,n){n.show(o.funcao_hpe_id,FORMULARIO.VISUALIZAR)})});var c=$(s.find(".btn_editar")),e=function(){View.load("funcao_hpe/detalhes",function(i,t){t.onclose=n.listar,t.show(o.funcao_hpe_id,FORMULARIO.EDITAR)})};c.unbind("click"),c.click(e),s.dblclick(e);var l=$(s.find(".btn_excluir"));l.unbind("click"),l.click(function(){View.load("funcao_hpe/detalhes",function(i,t){t.onclose=n.listar,t.show(o.funcao_hpe_id,FORMULARIO.EXCLUIR)})}),s.appendTo(i)}(s)})})},1!=App.sessao.dados.admin&&"S"!=App.sessao.dados.supervisor_empenho||n.btn_configuracoes.removeClass("hidden"),this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("funcao_hpe/detalhes",function(i,t){t.onclose=n.listar,t.show(null,FORMULARIO.NOVO)})}),this.btn_configuracoes.unbind("click"),this.btn_configuracoes.click(function(i){View.load("funcao_hpe/configuracoes",function(i,t){t.show(),t.onclose=function(i){n.atuacao_efetiva_escolha_funcao=i}},View.ABA.NAO)}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){n.listar()}),this.unload=function(){View.unload(this.html_id)}}});