var dx_Apontar_Despesa=function(){return{dataField:"apontar_despesa",caption:"Apontar despesa?",dataType:"boolean",alignment:"center",width:80}},dx_KM_Rodado_Col=function(){return{dataField:"km_rodado",caption:App.lang.apontamento_despesa_projeto.km_rodado,dataType:"number",format:{type:"fixedPoint",precision:0},alignment:"left",width:80,calculateDisplayValue:function(a){return!0!==a.apontar_despesa?"-":a.km_rodado}}},dx_Pedagio_Col=function(){return{dataField:"pedagio",caption:App.lang.apontamento_despesa_projeto.pedagio,dataType:"number",format:{type:"fixedPoint",precision:2},alignment:"left",width:80,calculateDisplayValue:function(a){return!0!==a.apontar_despesa?"-":a.pedagio.format_number(2,!0)}}},dx_Refeicao_Col=function(){return{dataField:"refeicao",caption:App.lang.apontamento_despesa_projeto.refeicao,dataType:"number",format:{type:"fixedPoint",precision:2},alignment:"left",width:80,calculateDisplayValue:function(a){return!0!==a.apontar_despesa?"-":a.refeicao.format_number(2,!0)}}},dx_Outras_Despesas_Col=function(){return{dataField:"outras_despesas",caption:App.lang.apontamento_despesa_projeto.outras_despesas,dataType:"number",format:{type:"fixedPoint",precision:2},alignment:"left",width:80,calculateDisplayValue:function(a){return!0!==a.apontar_despesa?"-":a.outras_despesas.format_number(2,!0)}}},dx_Descricao_da_Despesa_Col=function(){return{dataField:"despesa_descricao",caption:App.lang.apontamento_despesa_projeto.descricao_da_despesa,alignment:"left",width:200,calculateDisplayValue:function(a){return!0!==a.apontar_despesa?"-":a.despesa_descricao}}},dx_Despesa_Observacao_Col=function(){return{dataField:"despesa_observacoes",caption:App.lang.apontamento_despesa_projeto.observacoes,alignment:"left",width:200,calculateDisplayValue:function(a){return!0!==a.apontar_despesa?"-":a.despesa_observacoes}}},dx_KM_Rodado=function(){return{dataField:"km_rodado",editorType:"dxNumberBox",editorOptions:{format:{type:"fixedPoint",precision:0}},label:{text:App.lang.apontamento_despesa_projeto.km_rodado}}},dx_Pedagio=function(){return{dataField:"pedagio",editorType:"dxNumberBox",editorOptions:{format:{type:"fixedPoint",precision:2}},label:{text:App.lang.apontamento_despesa_projeto.pedagio}}},dx_Refeicao=function(){return{dataField:"refeicao",editorType:"dxNumberBox",editorOptions:{format:{type:"fixedPoint",precision:2}},label:{text:App.lang.apontamento_despesa_projeto.refeicao}}},dx_Outras_Despesas=function(){return{dataField:"outras_despesas",editorType:"dxNumberBox",editorOptions:{format:{type:"fixedPoint",precision:2}},label:{text:App.lang.apontamento_despesa_projeto.outras_despesas}}},dx_Descricao_da_Despesa=function(){return{dataField:"descricao",editorType:"dxTextArea",editorOptions:{height:90},label:{text:App.lang.apontamento_despesa_projeto.descricao_da_despesa},colSpan:4}},dx_Observacao=function(){return{dataField:"observacoes",editorType:"dxTextArea",editorOptions:{height:90},label:{text:App.lang.apontamento_despesa_projeto.observacoes},colSpan:4}},dx_Apontamento_Depesa_Projeto_Valores_Formulario_Item=function(){return[dx_KM_Rodado(),dx_Pedagio(),dx_Refeicao(),dx_Outras_Despesas(),dx_Descricao_da_Despesa(),dx_Observacao()]},dx_Apontamento_Depesa_Projeto_Valores_Formulario=function(a,o){return{formData:a,items:dx_Apontamento_Depesa_Projeto_Valores_Formulario_Item(),colCount:4,labelLocation:"top",readOnly:void 0!==o&&o}},dx_Apontamento_Depesa_Projeto_Valores_Formulario_ReadOnly=function(a,o){a.option("readOnly",o)},dx_Apontamento_Depesa_Projeto_Valores_Formulario_Valores_ReadOnly=function(a,o){0==a.option("readOnly")&&(a.getEditor("km_rodado").option("readOnly",o),a.getEditor("pedagio").option("readOnly",o),a.getEditor("refeicao").option("readOnly",o),a.getEditor("outras_despesas").option("readOnly",o))},dx_Area_ID=function(){return{dataField:"id",dataType:"number",caption:App.lang.area.id,width:60}},dx_Area_Nome=function(){return{dataField:"nome",caption:App.lang.area.nome,width:200}},dx_Area_Detalhes=function(a,o,e){View.load("area/detalhes",function(t,i){i.onclose=function(){e&&setTimeout(function(){View.get_md5_tela_ativa()==e.html_id&&e.dataGrid.refresh()})},i.show(a?a.id:null,o)},View.ABA.NAO)},dx_Area_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.editar,icon:"fa fa-pencil-alt",cssClass:o,onClick:function(o){dx_Area_Detalhes(o.row.data,FORMULARIO.EDITAR,a)}},{hint:App.lang.generico.excluir,icon:"fa fa-trash",cssClass:o,onClick:function(o){dx_Area_Detalhes(o.row.data,FORMULARIO.EXCLUIR,a)}}]}},dx_Area_Colunas=function(a){return[dx_Area_ID(),dx_Area_Nome(),dx_Area_Botoes(a)]},dx_Area_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){dx_Area_Detalhes(null,FORMULARIO.NOVO,a)}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Atividade_Projeto_Id=function(){return{dataField:"id",caption:App.lang.atividade_projeto.id,visible:!1,showInColumnChooser:!1}},dx_Atividade_Projeto_Codigo=function(){return{dataField:"codigo",caption:App.lang.atividade_projeto.codigo_atividade,width:80}},dx_Atividade_Projeto_Nome_Atividade=function(){return{dataField:"atividade_simplificada",caption:App.lang.atividade_projeto.nome_atividade,width:250}},dx_Atividade_Projeto_Previsao_Inicio=function(){var a=set_format_date(!1);return{caption:App.lang.atividade_projeto.previsao_inicio,width:160,dataType:"date",format:a,dataField:"previsao_inicio"}},dx_Atividade_Projeto_Inicio=function(){var a=set_format_date(!1);return{caption:App.lang.atividade_projeto.inicio,width:160,dataType:"date",format:a,dataField:"inicio"}},dx_Atividade_Projeto_Prazo=function(){var a=set_format_date(!1);return{caption:App.lang.atividade_projeto.prazo,width:160,dataType:"date",format:a,dataField:"prazo"}},dx_Atividade_Projeto_Status=function(){return{dataField:"status",caption:App.lang.atividade_projeto.status,width:100,calculateCellValue:function(a){return str_nome_status(str_identifica_status(a.inicio,a.prazo,a.conclusao))}}},dx_Atividade_Projeto_Tipo_Predecessora=function(){return{dataField:"tipo",caption:App.lang.atividade_projeto.tipo_predecessora,validationRules:[{type:"required"}],lookup:{dataSource:[{id:"1",descricao:"Finish-to-Start (FS)"},{id:"2",descricao:"Start-to-Start (SS)"},{id:"3",descricao:"Finish-to-Finish (FF)"},{id:"4",descricao:"Start-to-Finish (SF)"}],displayExpr:"descricao",valueExpr:"id"},width:150}},dx_Atividade_Projeto_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.excluir,icon:"fa fa-trash",visible:function(a){return!a.row.removed},cssClass:o,onClick:function(o){a.dataGrid.deleteRow(o.row.rowIndex)}},{hint:App.lang.generico.recuperar_registro,icon:"fa fa-undo",visible:function(a){return a.row.removed},cssClass:"icon_black",onClick:function(o){a.dataGrid.undeleteRow(o.row.rowIndex)}}]}},dx_Atividade_Projeto_Colunas=function(a){return[dx_Atividade_Projeto_Id(),dx_Atividade_Projeto_Codigo(),dx_Atividade_Projeto_Nome_Atividade(),dx_Atividade_Projeto_Previsao_Inicio(),dx_Atividade_Projeto_Inicio(),dx_Atividade_Projeto_Prazo(),dx_Atividade_Projeto_Status(),dx_Atividade_Projeto_Tipo_Predecessora(),dx_Atividade_Projeto_Botoes(a)]},dx_Atividade_Projeto_Btn_Novo=function(a,o){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){(App.sessao.dados.admin||a.permissoes_projeto.gerente_projeto||a.permissoes_projeto.permissao_atividade)&&dx_Atividade_Projeto_Adicionar_Atividade(a,o)}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Atividade_Projeto_Editing_Mode=function(){return{mode:"batch",allowUpdating:!0,useIcons:!0}},dx_Atividade_Projeto_Adicionar_Atividade=function(a,o){a.dxPopup=a.popup.dxPopup({contentTemplate:function(e){WS.get({route:"atividade_projeto/listar/",data:{projeto_id:a.projeto_id},func_response:function(t){t.atividades.push({atividade_simplificada:t.projeto.nome,id:"raiz",projeto_atividade_sintetica_pai_id:null,tipo_atividade:"P",marco:!1,horas_previstas:"000:00"}),o.render(a.ListarAtividadeProjeto,e[0]),a.ListarAtividadeProjeto.props.setParams({div:e,html_id:a.html_id,data:t||[],dialog:a.dialog,parametro_usuario:"projeto_predecessora",somente_leitura:!0,diferenca_altura:10,obter_tamanho_div_pai:!0})},html_id:a.html_id})},toolbarItems:[{widget:"dxButton",toolbar:"bottom",location:"after",options:{text:App.lang.generico.selecionar,onClick:function(o){for(var e=a.ListarAtividadeProjeto.props.treeList.getSelectedRowsData(),t=0;t<e.length;t++){var i=e[t],r=i.id,n=!1;a.projeto_atividade_id==r&&(n=!0);var d=a.arr_atividades_predecessoras.filter(function(a){if(a.id==r)return a});n||0!=d.length||(i.tipo=null,dx_Atividade_Projeto_Preencher_Celulas(a,i))}a.dxPopup.hide()}}}],showTitle:!0,title:App.lang.atividade_projeto.selecione_predecessora,visible:!0}).dxPopup("instance")},dx_Atividade_Projeto_Preencher_Celulas=function(a,o){for(var e=!0,t=0;t<a.dataGrid.getController("editing").getChanges().length;t++){var i=a.dataGrid.getController("editing").getChanges()[t];if("insert"==i.type&&i.data.id==o.id)return void(e=!1)}e&&(a.dataGrid.addRow(),a.dataGrid.cellValue(0,"id",o.id),a.dataGrid.cellValue(0,"codigo",o.codigo),a.dataGrid.cellValue(0,"atividade_simplificada",o.atividade_simplificada),a.dataGrid.cellValue(0,"previsao_inicio",o.previsao_inicio),a.dataGrid.cellValue(0,"inicio",o.inicio),a.dataGrid.cellValue(0,"prazo",o.prazo),a.dataGrid.cellValue(0,"status",o.status),a.dataGrid.cellValue(0,"tipo",o.tipo),a.dataGrid.cellValue(0,"cancelada",o.cancelada))},dx_Atividade_Projeto_Verificar_Tipo_Atividade_Predecessora=function(a,o,e){var t={alterar:"",data:null,data_anterior:null};switch(+a){case ATIVIDADE_PREDECESSORA_TIPO.FINISH_TO_START:t.data=o.prazo,t.alterar="previsao_inicio",t.data_anterior=get_datepicker(e.edt_previsao_inicio);break;case ATIVIDADE_PREDECESSORA_TIPO.START_TO_START:t.data=o.inicio||o.previsao_inicio,t.alterar="previsao_inicio",t.data_anterior=get_datepicker(e.edt_previsao_inicio);break;case ATIVIDADE_PREDECESSORA_TIPO.FINISH_TO_FINISH:t.data=o.prazo,t.alterar="prazo",t.data_anterior=get_datepicker(e.edt_prazo_projeto);break;case ATIVIDADE_PREDECESSORA_TIPO.START_TO_FINISH:t.data=o.inicio||o.previsao_inicio,t.alterar="prazo",t.data_anterior=get_datepicker(e.edt_prazo_projeto)}return t},dx_Atividade_Projeto_Atualizar_Data_Conforme_Tipo_Atividade_Predecessora=function(a,o,e){var t=dx_Atividade_Projeto_Verificar_Tipo_Atividade_Predecessora(a,o,e);if(t.data&&(t.data||t.data_anterior)){var i=new Validation,r="";(t.data_anterior||t.data)&&(r="Deseja alterar a data de ","previsao_inicio"==t.alterar?r+="previsão de inicio":r+="prazo",t.data_anterior&&(r+=" de "+t.data_anterior.format_date()),t.data&&(r+=" para "+t.data.format_date())),i.add(new ValidationMessage(Validation.CODES.ERR_FIELD,r)),i.is_valid()||alert_modal(o.atividade_simplificada,i,"Alterar",function(){"previsao_inicio"==t.alterar?(e.edt_previsao_inicio.val(t.data.substr(0,10)),e.edt_prazo_dias.change(),e.edt_previsao_inicio.blur()):e.edt_prazo_projeto.val(t.data.substr(0,10))},!0)}},dx_Atividade_Projeto_On_Editor_Preparing=function(a){return function(o){if("tipo"===o.dataField&&"dataRow"===o.parentType){var e=o.editorOptions.onValueChanged;o.editorOptions.onValueChanged=function(t){if(a.cbo_tipo_previsao_inicio.val()==TIPO_PREVISAO_INICIO.DEVE_INICIAR_EM){var i=t.value;dx_Atividade_Projeto_Atualizar_Data_Conforme_Tipo_Atividade_Predecessora(i,o.row.data,a)}e(t)}}}},dx_Chamados_Interagidos_Chamado_ID=function(){return{dataField:"chamado_id",dataType:"number",caption:"Número do Chamado",width:60}},dx_Chamados_Interagidos_Nome_Usuario=function(){return{dataField:"nome",caption:"Nome do Usuário",groupIndex:0,width:200}},dx_Chamados_Interagidos_Data_Interacao=function(){return{dataField:"data_envio",dataType:"datetime",caption:"Data da Ação",width:200}},dx_Chamados_Interagidos_Tipo_Acao=function(){return{dataField:"tipo",lookup:{dataSource:[{id:"1",descricao:"Abertura"},{id:"2",descricao:"Normal"},{id:"3",descricao:"Encerramento"},{id:"4",descricao:"Reabertura"},{id:"5",descricao:"Reclassificacao"},{id:"6",descricao:"Encerramento inatividade"},{id:"7",descricao:"Observacao interna"}],valueExpr:"id",displayExpr:"descricao"},caption:"Tipo da Ação  ",width:200}},dx_Chamados_Interagidos_Horas_Trabalhadas=function(){return{dataField:"horas_trabalhadas",dataType:"string",caption:"Horas Trabalhadas",width:200}},dx_Chamados_Interagidos_Summary=function(){return{groupItems:[{column:"chamado_id",summaryType:"custom",displayFormat:"{0} Chamados",name:"contagem_chamado_id"},{column:"atendimentos",summaryType:"custom",displayFormat:"{0} Atendimentos",name:"atendimentos"},{column:"id",summaryType:"count",displayFormat:"{0} Interações"},{column:"horas_trabalhadas",summaryType:"custom",displayFormat:"{0} Horas Trabalhadas",name:"soma_horas_trabalhadas"}],calculateCustomSummary:function(a){"contagem_chamado_id"===a.name?("start"===a.summaryProcess&&(arr_contagem_chamado_id=[],a.totalValue=0),"calculate"===a.summaryProcess&&(-1==arr_contagem_chamado_id.indexOf(a.value)&&a.totalValue++,arr_contagem_chamado_id.push(a.value))):"atendimentos"===a.name?("start"===a.summaryProcess&&(arr_atendimentos=[],a.totalValue=0),"calculate"===a.summaryProcess&&(-1==arr_atendimentos.indexOf(a.value)&&a.totalValue++,arr_atendimentos.push(a.value))):"soma_horas_trabalhadas"===a.name&&("start"===a.summaryProcess&&(a.totalValue=0),"calculate"===a.summaryProcess&&(a.totalValue=somar_horas(a.totalValue,a.value)))}}},dx_Chamados_Interagidos_Nome_Usuario_Responsavel=function(){return{dataField:"responsavel_nome",caption:"Nome do Usuário Responsável",width:200}},dx_Chamados_Interagidos_Chamado_Motivo=function(){return{dataField:"chamado_motivo",caption:"Motivo do Chamado",width:200}},dx_Chamados_Interagidos_Colunas=function(a){return[dx_Chamados_Interagidos_Chamado_ID(),dx_Chamados_Interagidos_Nome_Usuario(),dx_Chamados_Interagidos_Data_Interacao(),dx_Chamados_Interagidos_Tipo_Acao(),dx_Chamados_Interagidos_Horas_Trabalhadas(),dx_Chamados_Interagidos_Chamado_Motivo(),dx_Chamados_Interagidos_Nome_Usuario_Responsavel()]},dx_Cores_Itens_Colunas=function(a){return[dx_Cores_Itens_Coluna_Nome(),dx_Cores_Itens_Coluna_Cor_Fundo(a),dx_Cores_Itens_Coluna_Cor_Fonte(a),dx_Cores_Itens_Coluna_Botoes(a)]},dx_Cores_Itens_Coluna_Nome=function(){return{dataField:"nome",caption:"Nome"}},dx_Cores_Itens_Coluna_Cor_Fundo=function(a){return{dataField:"cor_fundo",caption:"Cor de fundo",cellTemplate:function(o,e){$("<div>").dxColorBox({onInitialized:function(a){a.component.option("value",e.data.cor_fundo)},onValueChanged:function(o){a.dataGrid.cellValue(e.rowIndex,"cor_fundo",o.value)}}).appendTo(o)},allowEditing:!1}},dx_Cores_Itens_Coluna_Cor_Fonte=function(a){return{dataField:"cor_fonte",caption:"Cor da fonte",cellTemplate:function(o,e){$("<div>").dxColorBox({onInitialized:function(a){a.component.option("value",e.data.cor_fonte)},onValueChanged:function(o){a.dataGrid.cellValue(e.rowIndex,"cor_fonte",o.value)}}).appendTo(o)},allowEditing:!1}},dx_Cores_Itens_Coluna_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(a){return!a.row.removed},onClick:function(o){a.dataGrid.deleteRow(o.row.rowIndex),o.event.preventDefault()}},{hint:App.lang.generico.recuperar_registro,icon:"fa fa-undo",cssClass:o,visible:function(a){return a.row.removed},onClick:function(o){a.dataGrid.undeleteRow(o.row.rowIndex),o.event.preventDefault()}}]}},dx_Cores_Itens_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){a.dataGrid.addRow()}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Cores_Itens_Editing_Mode=function(){return{mode:"batch",allowUpdating:!0,useIcons:!0}},dx_Cores_Itens_Funcao_Salvar=function(a){return function(){WS.post("cores_itens/salvar/",{data:CircularJSON.stringify(a.dataGrid.getController("editing").getChanges())},function(o){alert_saved("Registros salvos com sucesso"),a.listar()})}},dx_Cores_Itens_OnLoaded=function(a){return function(o){a.dataGrid.repaint()}},dx_Documento_Codigo=function(){return{dataField:"codigo",caption:App.lang.documento.codigo,width:80}},dx_Documento_Nome=function(){return{dataField:"nome",caption:App.lang.documento.nome,width:200}},dx_Documento_Pasta_Path=function(){return{dataField:"path",caption:App.lang.documento.pasta,width:200}},dx_Documento_Aprovador_Nome=function(){return{dataField:"nome_usuario",caption:App.lang.documento.aprovador_nome,width:200,groupIndex:0}},dx_Documento_Recebimento_Data=function(){return{dataField:"recebimento_data",caption:App.lang.documento.recebimento_data,width:110,dataType:"date",format:"dd/MM/yyyy HH:mm"}},dx_Documento_Data_Aprovacao_Alcada=function(){return{dataField:"data_aprovacao_alcada",caption:App.lang.documento.data_aprovacao_alcada,width:110,dataType:"date",format:"dd/MM/yyyy HH:mm"}},dx_Documento_Prazo=function(){return{dataField:"prazo_data",caption:App.lang.documento.prazo,dataType:"date",format:"dd/MM/yyyy HH:mm",width:110,cellTemplate:function(a,o){switch(o.data.aprovacao_atrasada){case"1":a.text(o.text),a.addClass("text-danger"),a.attr("title","Atrasado");break;default:a.text(o.text)}}}},dx_Documento_Tag=function(){return{dataField:"tag",caption:App.lang.documento.tag,width:100}},dx_Documento_Assunto=function(){return{dataField:"assunto_descricao",caption:App.lang.documento.assunto,width:100}},dx_Documento_Tipo=function(){return{dataField:"tipo_documento_nome",caption:App.lang.documento.tipo,width:100}},dx_Documento_Revisao=function(){return{dataField:"revisao_sequencia",caption:App.lang.documento.revisao,width:80}},dx_Documento_Tipo_Pendencia=function(){return{dataField:"tipo_pendencia",caption:App.lang.documento.tipo_pendencia,width:80,lookup:{dataSource:[{id:"A",descricao:"Aprovação"},{id:"D",descricao:"Distribuição"}],displayExpr:"descricao",valueExpr:"id"}}},dx_Documento_Pendencia_Situacao=function(){return{dataField:"situacao",caption:App.lang.documento.situacao,width:200,lookup:{dataSource:[{id:"A1",descricao:"Pendente de Aprovação"},{id:"A2",descricao:"Aprovado"},{id:"A3",descricao:"Reprovado"},{id:"A4",descricao:"Aprovado por terceiro"},{id:"A5",descricao:"Reprovado por terceiro"},{id:"A6",descricao:"Aguardando Alçada"},{id:"D1",descricao:"Adicionar documento em um local"},{id:"D2",descricao:"Remover documento de um local"},{id:"D3",descricao:"Documento pendente de leitura"}],displayExpr:"descricao",valueExpr:"id"},cellTemplate:function(a,o){switch(o.data.situacao){case"A"+GED_APROVACAO_SITUACAO.APROVADO:case"A"+GED_APROVACAO_SITUACAO.APROVADO_POR_TERCEIRO:a.text("Aprovado Nível "+o.data.nivel+" em "+o.data.data_aprovacao_alcada.format_date_time());break;case"A"+GED_APROVACAO_SITUACAO.REPROVADO:case"A"+GED_APROVACAO_SITUACAO.REPROVADO_POR_TERCEIRO:a.text("Reprovado Nível "+o.data.nivel+" em "+o.data.data_aprovacao_alcada.format_date_time());break;case"D"+DISTRIBUICAO_CONTROLADA_TIPO_ACAO.CIENCIA:a.text("Documento pendente de leitura");break;case"D"+DISTRIBUICAO_CONTROLADA_TIPO_ACAO.ADICIONAR:a.text("Adicionar documento "+(o.data.local_distribuicao?" localizado em: "+o.data.local_distribuicao:""));break;case"D"+DISTRIBUICAO_CONTROLADA_TIPO_ACAO.REMOVER:a.text("Remover documento "+(o.data.local_distribuicao?" localizado em: "+o.data.local_distribuicao:""));break;default:a.text(o.displayValue)}}}},dx_Documento_Pendencia_Situacao_Prazo=function(){return{dataField:"aprovacao_atrasada",caption:App.lang.documento.situacao_prazo,width:100,lookup:{dataSource:[{id:"1",descricao:"Atrasado"},{id:"0",descricao:"Dentro do prazo"}],displayExpr:"descricao",valueExpr:"id"}}},dx_Documento_Tamanho=function(){return{dataField:"revisao_tamanho",caption:App.lang.documento.tamanho,width:80,allowFiltering:!1,cellTemplate:function(a,o){var e=o.data.revisao_tamanho||0;a.text(filesize(parseInt(e,10)||0))}}},dx_Documento_Modificacao=function(){return{dataField:"revisao_data_envio",caption:App.lang.documento.modificacao,width:110,dataType:"date",format:"dd/MM/yyyy HH:mm"}},dx_Documento_Vigente_Ate=function(){return{dataField:"vigente_ate",caption:App.lang.documento.vigente_ate,width:110,dataType:"date",format:"dd/MM/yyyy HH:mm"}},dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Request=function(a,o,e,t,i){var r={documento_id:o.documento_id,documento_revisao_id:o.documento_revisao_id,aprovacao:e,documento_aprovacao_alcada_id:o.documento_aprovacao_alcada_id};null!=a&&(r.rejeitar=a),null!=t&&(r.consideracoes=t),WS.post("documento/salvar_documento_aprovacao_revisoes/",r,function(a){a&&i.dataGridPendencias.refresh()})},dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Documento=function(a,o,e,t){void 0!==a.documento_id&&0!==parseInt(a.documento_id,10)&&WS.get({route:"documento/qtde_revisoes_pendentes/",data:{documento_id:a.documento_id},func_response:function(i){if(parseInt(i.qtde)>0){alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aviso!',"<div><p>Deseja rejeitar as revisões anteriores do documento ?</p></div>","Sim",function(){dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Request(!0,a,o,e,t)},!0,"Não",null,function(){dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Request(!1,a,o,e,t)})}else dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Request(!1,a,o,e,t)}})},dx_Documento_Pendencias_Distribuicao_Upload_Arquivo=null,dx_Documento_Pendencias_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.download,icon:"glyphicon glyphicon-download",cssClass:o,visible:function(a){return!!a.row.data.documento_revisao_id},onClick:function(a){a.row.data.documento_revisao_id?App.obter_token_publico(function(o){App.download(WS_URI+"documento/download/?documento_revisao_id="+a.row.data.documento_revisao_id+"&token_publico="+o)}):alert_modal("Download","Nenhuma versão do documento disponível para download")}},{hint:App.lang.generico.visualizar,icon:"fa fa-window-maximize",cssClass:o,visible:function(a){return!!a.row.data.documento_revisao_id},onClick:function(a){"application/pdf"==a.row.data.mime_type?View.load("central_documentos/visualizar_pdf",function(o,e){e.show(a.row.data.documento_revisao_id)}):"image/png"==a.row.data.mime_type||"image/bmp"==a.row.data.mime_type||"image/jpeg"==a.row.data.mime_type||"image/jpg"==a.row.data.mime_type||"image/gif"==a.row.data.mime_type?View.load("central_documentos/visualizar_documento",function(o,e){e.show(a.row.data.documento_revisao_id)}):View.load("central_documentos/documento",function(o,e){e.show(a.row.data.documento_id,FORMULARIO.EDITAR,a.row.data.documento_pasta_id,!1,null,null,null,null,null)},View.ABA.MULTIPLAS)}},{hint:App.lang.documento.observacoes,icon:"glyphicon glyphicon-comment",cssClass:o,onClick:function(a){View.load("central_documentos/documento",function(o,e){e.show(a.row.data.documento_id,FORMULARIO.EDITAR,a.row.data.documento_pasta_id,!1,null,null,null,null,null,!0)},View.ABA.MULTIPLAS)}},{hint:App.lang.documento.substituir_arquivo,icon:"fa fa-cloud-upload-alt",cssClass:o,visible:function(a){return a.row.data.situacao=="A"+GED_APROVACAO_SITUACAO.AGUARDANDO&&App.verifica_permissao(App.temp.empresa,"substituir_revisao")},onClick:function(o){var e=function(){a.dataGridPendencias.refresh()};View.load("central_documentos/substituir_revisao",function(a,t){t.onsave=e,t.show(o.row.data.documento_aprovacao_alcada_id,o.row.data.codigo,o.row.data.nome,o.row.data.revisao_sequencia,o.row.data.revisao_nome,o.row.data.revisao_tamanho)})}},{hint:App.lang.generico.aprovar,icon:"glyphicon glyphicon-ok",cssClass:o,visible:function(a){return a.row.data.situacao=="A"+GED_APROVACAO_SITUACAO.AGUARDANDO},onClick:function(o){alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aviso!',"Deseja realmente aprovar o Documento: "+o.row.data.nome+' ?<div class="form-group"><br /><textarea class="form-control" rows="5" id="consideracoes" style="min-width: 100%; max-width: 100%" placeholder="Considerações sobre o documento."></textarea></div>',"Sim",function(){var e=document.getElementById("consideracoes").value;dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Documento(o.row.data,"S",e,a)},!0,"Não",null,function(){return!1})}},{hint:App.lang.generico.reprovar,icon:"glyphicon glyphicon-remove",cssClass:o,visible:function(a){return a.row.data.situacao=="A"+GED_APROVACAO_SITUACAO.AGUARDANDO},onClick:function(o){alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Aviso!',"Por gentileza, informe o motivo pelo qual deseja reprovar o Documento: <br />"+o.row.data.nome+'<div class="form-group"><br /><textarea class="form-control" rows="5" id="consideracoes" style="min-width: 100%; max-width: 100%" placeholder="digite o motivo da reprova do documento."></textarea></div>',"Reprovar",function(){var e=document.getElementById("consideracoes").value;dx_Documento_Pendencias_Botoes_Aprovar_Reprova_Documento(o.row.data,"N",e,a)},!0,"Cancelar",null,function(){return!1})}},{hint:App.lang.generico.marcar_realizado,icon:"glyphicon glyphicon-ok",cssClass:o,visible:function(a){return"D"==a.row.data.tipo_pendencia},onClick:function(o){alert_modal('<i class="fa fa-exclamation-triangle pull-left" aria-hidden="true"></i> Atenção !','<div class="alert alert-info" style="text-align: center"> <span href="#" class="alert-link"><strong>Esta ação irá marcar essa atividade como </strong>concluído,<strong> deseja continuar ?</strong></span></div><div id="file-uploader"></div>','<i class="fa fa-check" aria-hidden="true"></i> Confirmar',function(){WS.post("documento_distribuicao_controlada/marcar_realizado/",{id:o.row.data.documento_distribuicao_controlada_id,documento_id:o.row.data.documento_id,documento_revisao_id:o.row.data.documento_revisao_id,documento_confirmacao_distribuicao:dx_Documento_Pendencias_Distribuicao_Upload_Arquivo.props.arquivoSelecionado},function(o){var e=!0===o?"success":"error",t=!0===o?"Atividade concluída com sucesso":"Falha ao concluir a atividade";DevExpress.ui.notify.default({message:t,type:e,displayTime:3e3,width:300}),!0===o&&a.dataGridPendencias.refresh()},null,null,!0)},!0),require(["react","react-dom","assets/view/componentes_react/InputArquivo"],function(a,o,e){dx_Documento_Pendencias_Distribuicao_Upload_Arquivo=a.createElement(e,null,null),o.render(dx_Documento_Pendencias_Distribuicao_Upload_Arquivo,$("#file-uploader")[0]),dx_Documento_Pendencias_Distribuicao_Upload_Arquivo.props.setDesabilitado(!1)})}}]}},dx_Documentos_Pendencias_Colunas=function(a){return[dx_Documento_Aprovador_Nome(),dx_Documento_Codigo(),dx_Documento_Nome(),dx_Documento_Recebimento_Data(),dx_Documento_Prazo(),dx_Documento_Data_Aprovacao_Alcada(),dx_Documento_Pendencia_Situacao_Prazo(),dx_Documento_Tag(),dx_Documento_Assunto(),dx_Documento_Tipo(),dx_Documento_Revisao(),dx_Documento_Tipo_Pendencia(),dx_Documento_Pendencia_Situacao(),dx_Documento_Tamanho(),dx_Documento_Modificacao(),dx_Documento_Vigente_Ate(),dx_Documento_Pasta_Path(),dx_Documento_Pendencias_Botoes(a)]},dx_Filter_Builder=function(a){if(a){a=spread({div_html:null,fields:null,valor:null},a);var o=tratar_formulario(a.fields);return a.div_html.dxFilterBuilder({allowHierarchicalFields:!0,fields:o,value:a.valor?tratar_valor(a.valor,o):null,groupOperations:["and","or"],customOperations:[{name:"anyof",caption:App.lang.gateway_destino_evento.anyof,icon:"check",editorTemplate:function(a){return $("<div>").dxTagBox({value:a.value,items:a.field.lookup.dataSource,onValueChanged:function(o){a.setValue(o.value&&o.value.length?o.value:null)},width:"auto"})},calculateFilterExpression:function(a,o){return a&&a.length&&Array.prototype.concat.apply([],a.map(function(a){return[[o.dataField,"=",a],"or"]})).slice(0,-1)}}],onContentReady:function(a){a.element.find(".dx-filterbuilder-item-field").unbind("click").click(function(){setTimeout(function(){$(".dx-item").unbind("click").click(function(a){$(this).parent().find(".dx-treeview-toggle-item-visibility").length&&a.stopPropagation()})})})}}).dxFilterBuilder("instance")}},tratar_valor=function(a,o){var e=[];if("string"==typeof a[0])for(var t=0;t<o.length;t++){(i=o[t]).dataField==a[0]&&e.push(a)}else for(t=0;t<a.length;t++){var i,r=!1;if("object"==typeof(i=a[t]))if("string"==typeof i[0]){for(var n=0;n<o.length;n++)if(o[n].dataField==i[0]){r=!0,e.push(i);break}r||t++}else e.push(tratar_valor(i,o));else e.push(i)}return e},tratar_formulario=function(a){for(var o=[],e=0;e<a.grupos.length;e++){var t=a.grupos[e];o.push({dataField:t.id.toString(),caption:t.nome,filterOperations:[null]});for(var i=0;i<t.elementos.length;i++){var r=t.elementos[i];r.tipo!=ELEMENTO_TIPO.TABELA&&r.id_elemento&&r.tipo!=ELEMENTO_TIPO.ANEXO&&r.tipo!=ELEMENTO_TIPO.SELECAO_DOCUMENTO&&r.tipo!=ELEMENTO_TIPO.BOTAO&&o.push({dataField:t.id+"."+r.id_elemento,caption:r.nome+" ID: #"+r.id_elemento,dataType:datatype_elemento_tipo(r.tipo),format:r.tipo==ELEMENTO_TIPO.DECIMAL?{type:"fixedPoint",precision:parseInt(r.decimais)}:r.tipo==ELEMENTO_TIPO.DATA?"dd/MM/yyyy":null,filterOperations:r.tipo!=ELEMENTO_TIPO.OPCOES||r.tipo_lista_opcoes!=TIPO_LISTA_OPCOES.CHECKBOX&&r.tipo_lista_opcoes!=TIPO_LISTA_OPCOES.OPTION_MULTIPLAS?r.tipo==ELEMENTO_TIPO.CAIXA_VERIFICACAO?["=","<>"]:void 0:["=","<>","isblank","isnotblank","anyof"],lookup:r.tipo==ELEMENTO_TIPO.OPCOES?{dataSource:r.opcoes}:null,customizeText:function(a){return"date"==this.dataType?a.value.format_date():a.value}})}}return o},localizar_condicao=function(a){var o="";if(a)if("string"==typeof a[0])o+="("+formatar_condicao(a)+")";else if(a.length){o+="(";for(var e=0;e<a.length;e++){var t=a[e];o+="object"==typeof t?"string"==typeof t[0]?formatar_condicao(t):localizar_condicao(t):converter_operador(t)}o+=")"}return o},formatar_condicao=function(a){var o=a[0].split(".");o.length>1&&o.shift(),o=o.join(".");var e=a[1];!0!==a[2]&&!1!==a[2]||(a[2]=!0===a[2]?"S":"N");var t=null==a[2]?'""':'"'+a[2]+'"',i="("+o+".attr('type_campo') == 'inteiro' ? parseInt("+o+".val()) || 0 : ("+o+".attr('type_campo') == 'decimal' ? parseFloat("+o+".val().replace('.', '').replace(',', '.')) || 0 : ("+o+".hasClass('text_fixo') ? "+o+".text() : ("+o+".attr('type') == 'radio' ? "+o+".filter(':checked').val() : ("+o+".attr('type') == 'checkbox' ? obter_valores_checkBox("+o+") : ("+o+".hasClass('input_consulta_integracao') ? "+o+".find('.dx-dropdownbox').dxDropDownBox('instance').option('value') || '' : "+o+".val()))))))";let r=null;switch(e){case"=":case"<>":case"<":case"<=":case">":case">=":r="("+i+converter_operador(e)+" ("+o+".attr('type_campo') == 'inteiro' ? parseInt("+t+") || 0 : ("+o+".attr('type_campo') == 'decimal' ? parseFloat("+t+") || 0 : ("+o+".attr('type') == 'date' ? "+t+".substr(0,10) : "+t+"))))";break;case"between":r="("+i+" >= "+("("+o+".attr('type_campo') == 'inteiro' ? parseInt("+t+".split(',')[0]) || 0 : ("+o+".attr('type_campo') == 'decimal' ? parseFloat("+t+".split(',')[0]) || 0 : ("+o+".attr('type') == 'date' ? "+t+".split(',')[0].substr(0,10) : "+t+")))")+" && "+i+" <= "+("("+o+".attr('type_campo') == 'inteiro' ? parseInt("+t+".split(',')[1]) || 0 : ("+o+".attr('type_campo') == 'decimal' ? parseFloat("+t+".split(',')[1]) || 0 : ("+o+".attr('type') == 'date' ? "+t+".split(',')[1].substr(0,10) : "+t+")))")+")";break;case"contains":r="("+i+".includes("+t+"))";break;case"notcontains":r="(!"+i+".includes("+t+"))";break;case"startswith":r="("+i+".startsWith("+t+"))";break;case"endswith":r="("+i+".endsWith("+t+"))";break;case"isblank":r="("+i+")";break;case"isnotblank":r="(!"+i+")";break;case"or":r=" || ";break;case"and":r=" && ";break;case"anyof":r="findOne("+i+","+t+".split(','))"}return r="(typeof("+o+") != 'undefined' ? ("+r+") : console.warn('campo "+o+" está sendo chamado, porém não está disponível nesta etapa do processo')) "},converter_operador=function(a){switch(a){case"=":return" == ";case"<>":return" != ";case"<":return" < ";case"<=":return" <= ";case">":return" > ";case">=":return" >= ";case"or":return" || ";case"and":return" && "}},dx_Listagem_Padrao=function(a){if(a){a=spread({div_html:null,coluna_chave:null,colunas:null,toolbar:null,masterDetail:null,datasource:null,url_params:null,nome:null,nome_parametro_usuario:null,editing_mode:{useIcons:!0},funcao_botao_salvar:null,on_row_prepared:null,on_editing_start:null,on_editor_preparing:null,on_loaded:null,fn_refresh_click:null,summary:null,diferenca_altura:null,filter_value:null,on_row_click:null,reordenar:!1},a);var o=document.createElement("div");o.className="div_listagem",o.style="min-width: 100%;",a.div_html.find(".div_listagem").remove(),a.div_html[0].appendChild(o);var e=detectmob()?"select":"dragAndDrop";get_icon_class();null!=a.diferenca_altura&&a.div_html.find(".div_listagem").css("height","calc(100vh - "+a.diferenca_altura+"px)");var t=null,i=!1,r=a.div_html.find(".div_listagem").dxDataGrid({dataSource:"object"==typeof a.datasource?a.datasource:DevExpress.data.AspNet.createStore({key:a.coluna_chave,loadUrl:a.datasource,onBeforeSend:function(o,e){e.xhrFields={withCredentials:XHR_WITH_CREDENTIALS},e.headers=WS.dxHeaders(),e.data.dx_grid=!0,a.url_params&&(e.data=spread(e.data,a.url_params))},onLoaded:a.on_loaded}),key:Array.isArray(a.datasource)?a.coluna_chave:null,remoteOperations:!Array.isArray(a.datasource),filterValue:Array.isArray(a.filter_value)?a.filter_value:null,onRowClick:a.on_row_click,showBorders:!0,columnResizingMode:"widget",rowAlternationEnabled:!1,searchPanel:{visible:!detectmob(),width:200,placeholder:"Pesquisa geral"},paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},masterDetail:a.masterDetail,allowColumnReordering:!0,allowColumnResizing:!0,columnChooser:{enabled:!0,allowSearch:!0,mode:e},stateStoring:{enabled:!!a.nome_parametro_usuario,type:"custom",customLoad:function(){var o=null;return a.nome_parametro_usuario&&void 0!==(o=App.get_parametro_usuario(a.nome_parametro_usuario)).datagrid&&(o.datagrid.selectedRowKeys=null),t=o.obj_param?o.obj_param:t,o.datagrid},customSave:function(o){a.nome_parametro_usuario&&App.set_parametro_usuario(a.nome_parametro_usuario,{datagrid:o,obj_param:t})}},selection:{mode:"multiple"},export:{enabled:!0,fileName:a.nome+" "+agora(),allowExportSelectedData:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},filterPanel:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!0},columnFixing:{enabled:!0},rowDragging:{allowReordering:a.reordenar,showDragIcons:!0,onReorder:function(o){var e=o.component.getVisibleRows(),t=a.datasource.indexOf(e[o.toIndex].data),i=a.datasource.indexOf(o.itemData);a.datasource.splice(i,1),a.datasource.splice(t,0,o.itemData),o.component.refresh()}},onRowPrepared:a.on_row_prepared,onEditingStart:a.on_editing_start,onEditorPreparing:a.on_editor_preparing,onToolbarPreparing:function(o){var e=[];a.toolbar&&(e=e.concat(a.toolbar)),e.push(dx_Btn_Refresh(this,a.fn_refresh_click)),o.toolbarOptions.items=add_botao_dx_toolbar(e,o.toolbarOptions.items);for(var t=0;t<o.toolbarOptions.items.length;t++){var i=o.toolbarOptions.items[t];"saveButton"==i.name&&(a.funcao_botao_salvar?i.options.onClick=a.funcao_botao_salvar:i.visible=!1)}},editing:a.editing_mode,columns:a.colunas,summary:a.summary,onContextMenuPreparing:function(a){"header"==a.target&&Array.isArray(a.items)&&a.items.push({text:"Restaurar estado das colunas",visible:!0,beginGroup:!0,onItemClick:function(a){DevExpress.ui.dialog.confirm("Os filtros, ordenações, agrupamentos, posição, tamanho, e visibilidade das colunas desta listagem serão restauradas ao estado padrão. <b>Deseja continuar?</b>","Restaurar estado das colunas").done(function(a){a&&(i=!0,r.refresh())})}})},onContentReady:function(a){i&&(r.state({}),i=!1)}}).dxDataGrid("instance");return r.endCustomLoading(),r}},dx_Btn_Refresh=function(a,o){return{widget:"dxButton",options:{icon:"fa fa-sync",hint:App.lang.generico.recarregar,text:App.lang.generico.recarregar,onClick:function(){o?o():a.refresh()}},showText:"inMenu",location:"after",name:"btnRefresh",locateInMenu:"auto"}},dx_Local_Agenda_ID=function(){return{dataField:"id",dataType:"number",caption:App.lang.local_agenda.id,width:60}},dx_Local_Agenda_Nome=function(){return{dataField:"nome",caption:App.lang.local_agenda.nome,width:200}},dx_Local_Agenda_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.editar,icon:"fa fa-pencil-alt",cssClass:o,onClick:function(o){dx_Local_Agenda_Detalhes(o.row.data,FORMULARIO.EDITAR,a)}},{hint:App.lang.generico.excluir,icon:"fa fa-trash",cssClass:o,onClick:function(o){dx_Local_Agenda_Detalhes(o.row.data,FORMULARIO.EXCLUIR,a)}}]}},dx_Local_Agenda_Colunas=function(a){return[dx_Local_Agenda_ID(),dx_Local_Agenda_Nome(),dx_Local_Agenda_Botoes(a)]},dx_Local_Agenda_Detalhes=function(a,o,e){View.load("local_agenda/detalhes",function(t,i){i.onclose=function(){e&&setTimeout(function(){View.get_md5_tela_ativa()==e.html_id&&e.dataGrid.refresh()})},i.show(a?a.id:null,o)},View.ABA.NAO)},dx_Local_Agenda_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){dx_Local_Agenda_Detalhes(null,FORMULARIO.NOVO,a)}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Parametros_Consulta_Integracao_Parametro=function(){return{dataField:"parametro",caption:"Parâmetro",allowEditing:!1}},dx_Parametros_Consulta_Integracao_Nome=function(){return{dataField:"nome"}},dx_Parametros_Consulta_Integracao_Valor=function(){return{dataField:"valor"}},dx_Parametros_Consulta_Integracao_Colunas=function(){return[dx_Parametros_Consulta_Integracao_Parametro(),dx_Parametros_Consulta_Integracao_Nome(),dx_Parametros_Consulta_Integracao_Valor()]},dx_Parametros_Consulta_Integracao_Colunas_Editing_Mode=function(){return{mode:"batch",allowUpdating:!0,useIcons:!0}},dx_Projeto_Categoria_ID=function(){return{dataField:"id",dataType:"number",allowEditing:!1,width:60}},dx_Projeto_Categoria_Nome=function(){return{dataField:"descricao",caption:"Categoria",width:200}},dx_Projeto_Categoria_Bloqueado=function(){return{dataField:"bloqueado",dataType:"boolean",calculateCellValue:function(a){return!0===a.bloqueado||"S"==a.bloqueado},width:200}},dx_Projeto_Categoria_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.excluir,icon:"fa fa-trash",cssClass:o,onClick:function(o){a.dataGrid.deleteRow(o.row.rowIndex),o.event.preventDefault()}}]}},dx_Projeto_Categoria_Colunas=function(a){return[dx_Projeto_Categoria_ID(),dx_Projeto_Categoria_Nome(),dx_Projeto_Categoria_Bloqueado(),dx_Projeto_Categoria_Botoes(a)]},dx_Projeto_Categoria_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){a.dataGrid.addRow()}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Projeto_Categoria_Editing_Mode=function(){return{mode:"batch",allowUpdating:!0,useIcons:!0}},dx_Projeto_Categoria_Funcao_Salvar=function(a){return function(){WS.post("projeto_categoria/salvar/",{data:CircularJSON.stringify(a.dataGrid.getController("editing").getChanges())},function(o){alert_saved("Categoria de projeto salva com sucesso !"),a.listar()})}},dx_Quadro_Nome_Lista=function(){return{dataField:"nome_lista",caption:"Nome da Lista"}},dx_Quadro_Nome_Cartao=function(){return{dataField:"nome",caption:"Nome do Cartão"}},dx_Quadro_Responsaveis=function(){return{dataField:"arr_responsavel",caption:"Responsaveis",calculateCellValue:function(a){for(var o="",e=0;e<a.arr_responsavel.length;e++){var t=a.arr_responsavel[e];o+=o?", "+t.nome:t.nome}return o}}},dx_Quadro_Etiquetas=function(){return{dataField:"arr_etiqueta",caption:"Etiquetas",calculateCellValue:function(a){for(var o="",e=0;e<a.arr_etiqueta.length;e++){var t=a.arr_etiqueta[e];o+=o?", "+t.nome:t.nome}return o}}},dx_Quadro_Data_Prazo=function(){return{dataField:"data_prazo",caption:"Data Prazo",dataType:"date",format:"dd/MM/yyyy HH:mm"}},dx_Quadro_Data_Conclusao=function(){return{dataField:"data_conclusao",caption:"Data Conclusão",dataType:"date",format:"dd/MM/yyyy HH:mm"}},dx_Quadro_Colunas=function(){return[dx_Quadro_Nome_Lista(),dx_Quadro_Nome_Cartao(),dx_Quadro_Responsaveis(),dx_Quadro_Etiquetas(),dx_Quadro_Data_Prazo(),dx_Quadro_Data_Conclusao()]},dx_Substituto_Usuario_Substituido_Nome=function(){return{dataField:"usuario_substituido_nome",caption:"Substituido",width:200}},dx_Substituto_Usuario_Substituto_Nome=function(){return{dataField:"usuario_substituto_nome",caption:"Substituto",width:200}},dx_Substituto_Periodo_Inicio=function(){return{dataField:"periodo_inicio",dataType:"date",format:"dd/MM/yyyy",width:100}},dx_Substituto_Periodo_Fim=function(){return{dataField:"periodo_fim",dataType:"date",format:"dd/MM/yyyy",width:100}},dx_Substituto_Vigente=function(){return{dataField:"vigente",width:200}},dx_Substituto_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.tarefa.gerenciar_equipe,icon:"fa fa-pencil-alt",cssClass:o,onClick:function(o){View.load("substituto/detalhes",function(e,t){t.onclose=a.listar,t.show(o.row.data.id,FORMULARIO.EDITAR)},View.ABA.MULTIPLAS)}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,onClick:function(a){$(function(){DevExpress.ui.dialog.confirm("<i>"+App.lang.generico.questionar_apagar_registro+"</i>",App.lang.generico.apagar_registro).done(function(o){o&&WS.post("substituto/excluir",{id:a.row.data.id},function(a){alert_saved("Substituto excluido com sucesso")})})})}}]}},dx_Substituto_Colunas=function(a){return[dx_Substituto_Usuario_Substituido_Nome(),dx_Substituto_Usuario_Substituto_Nome(),dx_Substituto_Periodo_Inicio(),dx_Substituto_Periodo_Fim(),dx_Substituto_Vigente(),dx_Substituto_Botoes(a)]},dx_Substituto_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){View.load("substituto/detalhes",function(o,e){e.onclose=a.listar,e.show(null,FORMULARIO.NOVO)},View.ABA.MULTIPLAS)}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Substituto_Funcao_OnLoaded=function(a){return function(){setTimeout(function(){a.dataGrid.repaint()})}},dx_Tarefa_Quadro_Nome=function(){return{dataField:"nome",caption:App.lang.generico.nome,width:200}},dx_Tarefa_Quadro_Formulario=function(){return{dataField:"formulario_tarefa_quadro_lista_cartao_id",lookup:{dataSource:DevExpress.data.AspNet.createStore({key:"formulario_id",loadUrl:WS_URI+"formulario/listar/",onBeforeSend:function(a,o){o.xhrFields={withCredentials:XHR_WITH_CREDENTIALS},o.headers=WS.dxHeaders(),o.data.dx_grid=!0,o.data=spread(o.data,{tipo_formulario:TIPO_FORMULARIO.CADASTRO_PERSONALIZADO})}}),displayExpr:"nome",valueExpr:"formulario_id"},caption:App.lang.tarefa.formulario_vinculado,width:200}},dx_Tarefa_Quadro_Redimensionar_Colunas=function(){return{dataField:"redimensionar_colunas",lookup:{dataSource:[{redimensionar_colunas:"S",descricao:"Sim"},{redimensionar_colunas:"N",descricao:"Não"}],displayExpr:"descricao",valueExpr:"redimensionar_colunas"},caption:"Redimensionar colunas",width:200}},dx_Tarefa_Quadro_Particular=function(){return{dataField:"particular",lookup:{dataSource:[{particular:"S",descricao:"Sim"},{particular:"N",descricao:"Não"}],displayExpr:"descricao",valueExpr:"particular"},caption:"Particular",width:200}},dx_Tarefa_Quadro_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.tarefa.acessar_quadro,icon:"fab fa-trello",cssClass:o,onClick:function(a){View.load("tarefa/detalhes",function(o,e){e.show(a.row.data)},View.ABA.MULTIPLAS,null,null,{tarefaQuadroId:a.row.data.id})}},{hint:"Etiquetas",icon:"fas fa-tags",cssClass:o,visible:function(a){return a.row.data.id&&(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(a){View.loadReact(views.etiqueta.Listagem.default,{pai_tabela:"tarefa_quadro",pai_id:a.row.data.id,titulo:a.row.data.nome},a=>{},View.ABA.MULTIPLAS)}},{hint:App.lang.tarefa.gerenciar_equipe,icon:"fa fa-users",cssClass:o,visible:function(a){return a.row.data.id&&"N"==a.row.data.particular&&(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(a){View.load("tarefa/detalhes_equipe_quadro",function(o,e){e.show(a.row.data.id,a.row.data.nome)},View.ABA.MULTIPLAS)}},{hint:"Referências",icon:"fas fa-link",cssClass:o,visible:a=>a.row.data.id,onClick:o=>{View.loadReact(window.views.Referencias.ReferenciasQuadroTarefas.default,{quadro_id:o.row.data.id,abaTitulo:`Referências - ${o.row.data.nome}`,html_id:a.html_id})}},{hint:App.lang.tarefa.alterar_imagem,icon:"fa fa-image",cssClass:o,visible:function(a){return a.row.data.id&&(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(o){View.load("tarefa/alterar_imagem",function(e,t){t.onclose=a.listar,t.show(FORMULARIO.NOVO,o.row.data.id,o.row.data.imagem_id)})}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(a){return(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)&&!a.row.removed},onClick:function(o){a.dataGrid.deleteRow(o.row.rowIndex),o.event.preventDefault()}},{hint:App.lang.generico.recuperar_registro,icon:"fa fa-undo",cssClass:o,visible:function(a){return(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)&&a.row.removed},onClick:function(o){a.dataGrid.undeleteRow(o.row.rowIndex),o.event.preventDefault()}},{hint:"Favoritar",icon:"far fa-star",cssClass:o,visible:function(a){return!verifica_favorito("tarefa_quadros",a.row.data.id)},onClick:function(o){favoritar_item("tarefa_quadros",o.row.data.id,!0),a.listar()}},{hint:"Desfavoritar",icon:"fas fa-star",cssClass:o,visible:function(a){return verifica_favorito("tarefa_quadros",a.row.data.id)},onClick:function(o){favoritar_item("tarefa_quadros",o.row.data.id,!1),a.listar()}}]}},dx_Tarefa_Quadro_Colunas=function(a){return[dx_Tarefa_Quadro_Nome(),dx_Tarefa_Quadro_Formulario(),dx_Tarefa_Quadro_Redimensionar_Colunas(),dx_Tarefa_Quadro_Particular(),dx_Tarefa_Quadro_Botoes(a)]},dx_Tarefa_Quadro_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){a.dataGrid.addRow()}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Tarefa_Quadro_Btn_Listar_Todos=function(a){var o=App.get_parametro_usuario("tarefas");return{widget:"dxButton",options:{icon:"fa fa-users",hint:o.listar_todos_quadros?"Listar somente meus quadros":"Listar todos os quadros.",text:o.listar_todos_quadros?"Listar somente meus quadros":"Listar todos os quadros.",onClick:function(){var o=App.get_parametro_usuario("tarefas");App.set_parametro_usuario("tarefas",{listar_todos_quadros:!o.listar_todos_quadros}),a.listar()},onInitialized:function(a){App.get_parametro_usuario("tarefas").listar_todos_quadros&&a.component.element().addClass("dx-state-active")}},visible:App.sessao.dados.admin,showText:"inMenu",location:"after",name:"BtnModoTeste",locateInMenu:"auto"}},dx_Tarefa_Quadro_Editing_Mode=function(){return{mode:"batch",allowUpdating:function(a){return App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE},useIcons:!0}},dx_Tarefa_Quadro_Funcao_Salvar=function(a){return function(){WS.post("tarefa_quadro/salvar/",{data:CircularJSON.stringify(a.dataGrid.getController("editing").getChanges())},function(o){var e=!0===o?"success":"error",t=!0===o?"Todos os quadros foram salvos":"Falha ao salvar o(s) quadro(s)";DevExpress.ui.notify.default({message:t,type:e,displayTime:3e3,width:300}),!0===o&&a.listar()})}},dx_Tarefa_Quadro_Funcao_OnLoaded=function(a){return function(){setTimeout(function(){a.dataGrid.repaint()})}},dx_Tarefa_Quadro_Equipe_Usuario=function(a){return{dataField:"integrante_id",lookup:{dataSource:{store:{type:"array",data:a.arrUsuarios,key:"id_usuario_grupo"},pageSize:10,paginate:!0},displayExpr:"nome",valueExpr:"id_usuario_grupo"},caption:App.lang.generico.nome,width:200}},dx_Tarefa_Quadro_Equipe_Tipo_Permissao=function(a){return{dataField:"tipo_permissao",lookup:{dataSource:TAREFA_QUADRO_TIPO_PERMISSAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"},width:200}},dx_Tarefa_Quadro_Equipe_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(a){return!a.row.removed},onClick:function(o){a.dataGrid.deleteRow(o.row.rowIndex),o.event.preventDefault()}},{hint:App.lang.generico.recuperar_registro,icon:"fa fa-undo",cssClass:o,visible:function(a){return a.row.removed},onClick:function(o){a.dataGrid.undeleteRow(o.row.rowIndex),o.event.preventDefault()}}]}},dx_Tarefa_Quadro_Equipe_Colunas=function(a){return[dx_Tarefa_Quadro_Equipe_Usuario(a),dx_Tarefa_Quadro_Equipe_Tipo_Permissao(a),dx_Tarefa_Quadro_Equipe_Botoes(a)]},dx_Tarefa_Quadro_Equipe_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){a.dataGrid.addRow()}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Tarefa_Quadro_Equipe_Editing_Mode=function(){return{mode:"batch",allowUpdating:!0,useIcons:!0}},dx_Tarefa_Quadro_Equipe_Funcao_Salvar=function(a){return function(){for(var o=a.dataGrid.getController("data")._items,e=[],t=0;t<o.length;t++){var i=o[t];i.removed||e.push(i.data)}WS.post("tarefa_quadro/salvar_equipe/",{quadro_id:a.quadro_id,arr_equipe:CircularJSON.stringify(e)},function(o){alert_saved("Todos os usuários foram salvos !"),a.listar()})}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Numero_Chamado=function(){return{dataField:"id",dataType:"number",caption:"#",width:50}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Abertura=function(){return{dataField:"data_abertura",dataType:"date",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Encerramento=function(){return{dataField:"data_encerramento",dataType:"date",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Prioridade_Nome=function(){return{dataField:"prioridade_nome",caption:"Prioridade",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Assunto=function(){return{dataField:"assunto",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Situacao=function(){return{dataField:"situacao",caption:"Situação",lookup:{dataSource:CHAMADO_SITUACAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Solicitante_Nome=function(){return{dataField:"usuario_solicitante_nome",cellTemplate:function(a,o){var e=o.data.usuario_solicitante_foto_id,t=e?WS_URI+"documento/midia/?&tamanho=20&documento_id="+e+"&token_midia="+App.sessao.token_midia:"assets/img/imagem_usuario_padrao.svg",i=o.data.usuario_solicitante_nome;a.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+t+'"><span style="margin-left: 5px;">'+i+"</span></div>")},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Responsavel_Nome=function(){return{dataField:"usuario_responsavel_nome",cellTemplate:function(a,o){var e=o.data.usuario_responsavel_nome;if(e){var t=o.data.foto_usuario_responsavel,i=t?WS_URI+"documento/midia/?&tamanho=20&documento_id="+t+"&token_midia="+App.sessao.token_midia:"assets/img/imagem_usuario_padrao.svg";a.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+i+'"><span style="margin-left: 5px;">'+e+"</span></div>")}},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Tipo_Entidade=function(){return{dataField:"tipo_entidade",calculateCellValue:function(a){return a?DescricaoTipoEntidade(a.tipo):null},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Codigo_Entidade=function(){return{dataField:"codigo_entidade",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Entidade_Nome=function(){return{dataField:"entidade_nome",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Previsao_Retorno=function(a,o,e,t){return{dataField:"data_previsao_retorno",caption:"Previsão retorno",dataType:"date",format:"dd/MM/yyyy HH:mm",cellTemplate:function(i,r){if(r.data.situacao!=CHAMADO_FILTRO.AGUARDANDO_ATENDIMENTO&&r.data.situacao!=CHAMADO_FILTRO.MINHAS_SOLICITACOES_EM_ABERTO){var n=o.createElement(t,null,null);e.render(n,i[0]);var d={ViewParent:a.html_id,StyleWidth:"100%",Alinhamento:"right",TipoGestaoTempo:r.data.tipo_gestao_tempo,HorasEstimadas:r.data.horas_previsao_retorno,DataPrazo:r.data.data_previsao_retorno,CalendarioTrabalhoId:r.data.calendario_trabalho_id_param,TituloDataPrazo:"Previsão de Retorno",LabelExcedente:"atrasado",LabelRestante:"restante"};n.props.setConfiguracoes(d),a.divs_informativo_prazo.push(n)}},width:150}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Percentual_Encerramento_Inatividade=function(){return{dataField:"percentual_encerramento_inatividade",dataType:"number",cellTemplate:function(a,o){var e=parseFloat(o.data.percentual_encerramento_inatividade),t=o.data.tempo_encerramento_inatividade;o.data.situacao!=CHAMADO_FILTRO.AGUARDANDO_ATENDIMENTO&&o.data.situacao!=CHAMADO_FILTRO.MINHAS_SOLICITACOES_EM_ABERTO&&t&&a.html('<div class="small"><div style="display: flex; flex-flow: row-reverse;"><div style="font-weight: bold; padding-left: 10px; padding-right: 0px;"><div class="text text-default text-warning" style="font: inherit; width: 100%;">'+t+'</div></div></div><div><div class="progress div_progress bar_progresso" style="margin-bottom: 0px; height: 12px;"><div class="progress-bar progress-bar-striped progress-bar-warning bar_progresso" style="width: '+e+'%;"></div></div></div></div>')},width:150}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_SLA=function(){return{dataField:"sla",caption:"SLA",dataType:"number",calculateCellValue:function(a){return a&&"S"==a.utiliza_resolucao_atendimento?"S"==a.sla_excedido?"Excedido":(a.percentual_tempo_sem_resposta>100?100:parseInt(a.percentual_tempo_sem_resposta,10))+"%":""},cellTemplate:function(a,o){if("S"==o.data.utiliza_resolucao_atendimento){var e=str_sla(o.data.sla_excedido),t=o.data.tempo_restante_resolucao?format_time(o.data.tempo_restante_resolucao):null,i=o.data.cor_percentual_sla?Colors(o.data.cor_percentual_sla):null,r="";if(o.data.situacao!=CHAMADO_SITUACAO.ENCERRADO&&o.data.situacao!=CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE){var n=o.data.percentual_tempo_sem_resposta>100?100:o.data.percentual_tempo_sem_resposta;r='<div><div class="progress div_progress bar_progresso" style="margin-bottom: 0px; height: 12px;"><div class="progress-bar progress-bar-striped bar_progresso '+("S"==o.data.sla_excedido?"progress-bar-danger":null)+'" style="width: '+parseFloat(n)+"%;"+(i?"background-color:"+i.hex+"; color:"+i.nome_hex:null)+'"><div style="margin-top: -3px;">'+parseInt(n)+"%</div></div></div></div>"}a.html('<div class="small"><div style="display: flex; flex-flow: row-reverse;"><div style="padding-left: 10px; padding-right: 0px;"><span data-toggle="tooltip" style="padding-right: 4px;" class="'+e.classe+'">'+t+'</span></div><div><span class="'+e.classe+'" data-situacao-sla="">'+e.texto+"</span></div></div>"+r+"</div>")}},width:150}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Motivo=function(a){return{dataField:"motivo",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Classificacao_Nome=function(){return{dataField:"classificacao_nome",visible:"S"==App.sessao.dados.parametro_chamado.chamado_classificacoes,width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Nome=function(){return{caption:"Nome do projeto",dataField:"projeto_nome",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Atividade_Descricao=function(){return{caption:"Atividade do projeto",dataField:"projeto_atividade_descricao",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Grupo_Motivo_Nome=function(){return{caption:"Grupo de Motivo",dataField:"grupo_motivo_nome",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:"Visualizar chamado",icon:"fa fa-comments",cssClass:o,onClick:function(a){View.loadReact(window.views.chamado.Detalhes.default,{chamadoId:a.row.data.id},function(a,o){},View.ABA.MULTIPLAS)}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(o){return App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel},onClick:function(o){$(function(){DevExpress.ui.dialog.confirm("<i>"+App.lang.generico.questionar_apagar_registro+"</i>",App.lang.generico.apagar_registro).done(function(e){e&&WS.post("chamado/excluir_relacionamento_tarefa_quadro_lista_cartao_chamado/",{cartao_id:a.cartao_id,chamado_id:o.row.data.id},function(o){alert_saved(App.lang.alert_saved.registro_excluido),a.renderizar_chamados()})})})}}]}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Colunas=function(a,o,e,t){return[dx_Tarefa_Quadro_Lista_Cartao_Chamado_Numero_Chamado(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Abertura(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Encerramento(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Prioridade_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Assunto(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Situacao(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Solicitante_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Responsavel_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Tipo_Entidade(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Codigo_Entidade(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Entidade_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Previsao_Retorno(a,o,e,t),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Percentual_Encerramento_Inatividade(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_SLA(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Motivo(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Classificacao_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Atividade_Descricao(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Grupo_Motivo_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Botoes(a)]},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,visible:App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel,onClick:function(){View.loadReact(window.views.chamado.Detalhes.default,{onClose:function(){a.listagem_chamado.refresh()},cartaoId:a.cartao_id},function(a,o){},View.ABA.MULTIPLAS)}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Nome=function(){return{dataField:"nome",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Assunto_Descricao=function(){return{dataField:"assunto_descricao",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Tipo_Documento_Nome=function(){return{dataField:"tipo_documento_nome",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Versao=function(){return{dataField:"versao",dataType:"number",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Revisao_Data_Envio=function(){return{dataField:"revisao_data_envio",dataType:"datetime",format:"dd/MM/yyyy HH:mm",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:"Visualizar documento",icon:"fa fa-file",cssClass:o,onClick:function(o){View.load("central_documentos/documento",function(e,t){t.onclose=function(){a.listagem_documento.refresh()},t.show(o.row.data.documento_id,FORMULARIO.EDITAR,null,!1,null,null,null,null,null,null,null,null,null,null,null,null)},View.ABA.MULTIPLAS)}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(o){return App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel},onClick:function(o){$(function(){DevExpress.ui.dialog.confirm("<i>"+App.lang.generico.questionar_apagar_registro+"</i>",App.lang.generico.apagar_registro).done(function(e){e&&WS.post("documento/excluir_relacionamento_tarefa_quadro_lista_cartao_documento/",{cartao_id:a.cartao_id,documento_id:o.row.data.documento_id},function(o){alert_saved(App.lang.alert_saved.registro_excluido),a.listagem_documento.refresh()})})})}}]}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Colunas=function(a){return[dx_Tarefa_Quadro_Lista_Cartao_Documento_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Documento_Assunto_Descricao(),dx_Tarefa_Quadro_Lista_Cartao_Documento_Tipo_Documento_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Documento_Versao(),dx_Tarefa_Quadro_Lista_Cartao_Documento_Revisao_Data_Envio(),dx_Tarefa_Quadro_Lista_Cartao_Documento_Botoes(a)]},dx_Tarefa_Quadro_Lista_Cartao_Documento_OnLoaded=function(a){return function(o){a.listagem_documento.repaint()}},dx_Tarefa_Quadro_Lista_Cartao_Documento_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,visible:App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel,onClick:function(){View.load("central_documentos/documento",function(o,e){e.onclose=function(){a.listagem_documento.refresh()},e.show(null,FORMULARIO.NOVO,null,null,null,null,null,null,null,null,null,null,null,null,null,a.cartao_id)},View.ABA.MULTIPLAS)}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Tarefa_Quadro_Lista_Cartao_Historico_Usuario=function(){return{dataField:"usuario_id",lookup:{dataSource:DevExpress.data.AspNet.createStore({key:"id",loadUrl:WS_URI+"usuario/listar_usuarios_grupos/",onBeforeSend:function(a,o){o.xhrFields={withCredentials:XHR_WITH_CREDENTIALS},o.headers=WS.dxHeaders(),o.data.dx_grid=!0}}),displayExpr:"nome",valueExpr:"id"},caption:App.lang.generico.nome,width:200}},dx_Tarefa_Quadro_Lista_Cartao_Historico_Data=function(){return{dataField:"data",dataType:"datetime",format:"dd/MM/yyyy HH:mm",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Historico_Campo=function(){return{dataField:"campo",lookup:{dataSource:TIPO_ACAO_HISTORICO_TAREFA_QUADRO_LISTA_CARTAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"},width:200}},dx_Tarefa_Quadro_Lista_Cartao_Historico_Valor_Antigo=function(){return{dataField:"valor_antigo",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Historico_Valor_Novo=function(){return{dataField:"valor_novo",width:200}},dx_Tarefa_Quadro_Lista_Cartao_Historico_Colunas=function(a){return[dx_Tarefa_Quadro_Lista_Cartao_Historico_Usuario(),dx_Tarefa_Quadro_Lista_Cartao_Historico_Data(),dx_Tarefa_Quadro_Lista_Cartao_Historico_Campo(),dx_Tarefa_Quadro_Lista_Cartao_Historico_Valor_Antigo(),dx_Tarefa_Quadro_Lista_Cartao_Historico_Valor_Novo()]},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Numero_Controle=function(){return{dataField:"S"==App.sessao.dados.parametro_processo.numero_solicitacao_por_processo?"numero":"solicitacao_id",dataType:"number",caption:"#",width:50}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Solicitacao=function(){return{dataField:"data_solicitacao",dataType:"date",caption:"Início Solicitação",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Prazo=function(){return{dataField:"atividade_prazo_entrega",dataType:"date",caption:"Prazo",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Entrega=function(){return{dataField:"atividade_data_entregue",dataType:"date",caption:"Entregue em",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Finalizacao=function(){return{dataField:"data_finalizacao",dataType:"date",caption:"Fim Solicitação",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Processo_Nome=function(){return{dataField:"nome",caption:"Processo",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Atividade_Nome=function(){return{dataField:"atividade_nome",caption:"Atividade",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Versao_Processo=function(){return{dataField:"versao_Processo",dataType:"number",caption:"Versao do processo",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Solicitante_Nome=function(){return{dataField:"usuario_solicitacao_nome",caption:"Solicitante",cellTemplate:function(a,o){var e=o.data.usuario_solicitante_foto_id,t=e?WS_URI+"documento/midia/?&tamanho=20&documento_id="+e+"&token_midia="+App.sessao.token_midia:"assets/img/imagem_usuario_padrao.svg",i=o.data.usuario_solicitacao_nome;a.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+t+'"><span style="margin-left: 5px;">'+i+"</span></div>")},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Responsavel_Nome=function(){return{dataField:"atividade_responsaveis",dataType:"string",caption:"Responsável",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:"Visualizar solicitacao",icon:"fa fa-comments",cssClass:o,onClick:function(a){View.load("solicitacao/detalhes",function(o,e){e.show(a.row.data.solicitacao_atividade_id)},View.ABA.MULTIPLAS)}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(o){return App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel},onClick:function(o){$(function(){DevExpress.ui.dialog.confirm("Tem certeza que deseja desvincular esta solicitação do cartão? Todas as atividades dela também serão desvinculadas","Desvincular solicitação").done(function(e){e&&WS.post("solicitacao/excluir_relacionamento_tarefa_quadro_lista_cartao_solicitacao/",{cartao_id:a.cartao_id,solicitacao_id:o.row.data.solicitacao_id},function(o){alert_saved(App.lang.alert_saved.registro_excluido),a.renderizar_solicitacoes()})})})}}]}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Colunas=function(a){return[dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Numero_Controle(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Solicitacao(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Solicitante_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Responsavel_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Processo_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Atividade_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Prazo(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Entrega(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Finalizacao(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Botoes(a)]},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,visible:App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel,onClick:function(){View.load("solicitacao/nova",function(o,e){e.onclose=function(){a.listagem_solicitacao.refresh()},e.show(null,null,null,null,null,null,null,null,null,null,null,null,a.cartao_id)})}},location:"after",name:"btnNovo",locateInMenu:"auto"}};