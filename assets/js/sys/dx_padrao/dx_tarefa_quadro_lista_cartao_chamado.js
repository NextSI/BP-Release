var dx_Tarefa_Quadro_Lista_Cartao_Chamado_Numero_Chamado=function(){return{dataField:"id",dataType:"number",caption:"#",width:50}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Abertura=function(){return{dataField:"data_abertura",dataType:"date",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Encerramento=function(){return{dataField:"data_encerramento",dataType:"date",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Prioridade_Nome=function(){return{dataField:"prioridade_nome",caption:"Prioridade",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Assunto=function(){return{dataField:"assunto",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Situacao=function(){return{dataField:"situacao",caption:"Situação",lookup:{dataSource:CHAMADO_SITUACAO_LOOKUP,displayExpr:"descricao",valueExpr:"id"},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Solicitante_Nome=function(){return{dataField:"usuario_solicitante_nome",cellTemplate:function(a,o){var t=o.data.usuario_solicitante_foto_id,e=t?WS_URI+"documento/midia/?&tamanho=20&documento_id="+t+"&token_midia="+App.sessao.token_midia:"assets/img/imagem_usuario_padrao.svg",r=o.data.usuario_solicitante_nome;a.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+e+'"><span style="margin-left: 5px;">'+r+"</span></div>")},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Responsavel_Nome=function(){return{dataField:"usuario_responsavel_nome",cellTemplate:function(a,o){var t=o.data.usuario_responsavel_nome;if(t){var e=o.data.foto_usuario_responsavel,r=e?WS_URI+"documento/midia/?&tamanho=20&documento_id="+e+"&token_midia="+App.sessao.token_midia:"assets/img/imagem_usuario_padrao.svg";a.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+r+'"><span style="margin-left: 5px;">'+t+"</span></div>")}},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Tipo_Entidade=function(){return{dataField:"tipo_entidade",calculateCellValue:function(a){return a?DescricaoTipoEntidade(a.tipo):null},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Codigo_Entidade=function(){return{dataField:"codigo_entidade",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Entidade_Nome=function(){return{dataField:"entidade_nome",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Previsao_Retorno=function(a,o,t,e){return{dataField:"data_previsao_retorno",caption:"Previsão retorno",dataType:"date",format:"dd/MM/yyyy HH:mm",cellTemplate:function(r,_){if(_.data.situacao!=CHAMADO_FILTRO.AGUARDANDO_ATENDIMENTO&&_.data.situacao!=CHAMADO_FILTRO.MINHAS_SOLICITACOES_EM_ABERTO){var d=o.createElement(e,null,null);t.render(d,r[0]);var i={ViewParent:a.html_id,StyleWidth:"100%",Alinhamento:"right",TipoGestaoTempo:_.data.tipo_gestao_tempo,HorasEstimadas:_.data.horas_previsao_retorno,DataPrazo:_.data.data_previsao_retorno,CalendarioTrabalhoId:_.data.calendario_trabalho_id_param,TituloDataPrazo:"Previsão de Retorno",LabelExcedente:"atrasado",LabelRestante:"restante"};d.props.setConfiguracoes(i),a.divs_informativo_prazo.push(d)}},width:150}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Percentual_Encerramento_Inatividade=function(){return{dataField:"percentual_encerramento_inatividade",dataType:"number",cellTemplate:function(a,o){var t=parseFloat(o.data.percentual_encerramento_inatividade),e=o.data.tempo_encerramento_inatividade;o.data.situacao!=CHAMADO_FILTRO.AGUARDANDO_ATENDIMENTO&&o.data.situacao!=CHAMADO_FILTRO.MINHAS_SOLICITACOES_EM_ABERTO&&e&&a.html('<div class="small"><div style="display: flex; flex-flow: row-reverse;"><div style="font-weight: bold; padding-left: 10px; padding-right: 0px;"><div class="text text-default text-warning" style="font: inherit; width: 100%;">'+e+'</div></div></div><div><div class="progress div_progress bar_progresso" style="margin-bottom: 0px; height: 12px;"><div class="progress-bar progress-bar-striped progress-bar-warning bar_progresso" style="width: '+t+'%;"></div></div></div></div>')},width:150}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_SLA=function(){return{dataField:"sla",caption:"SLA",dataType:"number",calculateCellValue:function(a){return a&&"S"==a.utiliza_resolucao_atendimento?"S"==a.sla_excedido?"Excedido":(a.percentual_tempo_sem_resposta>100?100:parseInt(a.percentual_tempo_sem_resposta,10))+"%":""},cellTemplate:function(a,o){if("S"==o.data.utiliza_resolucao_atendimento){var t=str_sla(o.data.sla_excedido),e=o.data.tempo_restante_resolucao?format_time(o.data.tempo_restante_resolucao):null,r=o.data.cor_percentual_sla?Colors(o.data.cor_percentual_sla):null,_="";if(o.data.situacao!=CHAMADO_SITUACAO.ENCERRADO&&o.data.situacao!=CHAMADO_SITUACAO.ENCERRADO_INATIVIDADE){var d=o.data.percentual_tempo_sem_resposta>100?100:o.data.percentual_tempo_sem_resposta;_='<div><div class="progress div_progress bar_progresso" style="margin-bottom: 0px; height: 12px;"><div class="progress-bar progress-bar-striped bar_progresso '+("S"==o.data.sla_excedido?"progress-bar-danger":null)+'" style="width: '+parseFloat(d)+"%;"+(r?"background-color:"+r.hex+"; color:"+r.nome_hex:null)+'"><div style="margin-top: -3px;">'+parseInt(d)+"%</div></div></div></div>"}a.html('<div class="small"><div style="display: flex; flex-flow: row-reverse;"><div style="padding-left: 10px; padding-right: 0px;"><span data-toggle="tooltip" style="padding-right: 4px;" class="'+t.classe+'">'+e+'</span></div><div><span class="'+t.classe+'" data-situacao-sla="">'+t.texto+"</span></div></div>"+_+"</div>")}},width:150}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Motivo=function(a){return{dataField:"motivo",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Classificacao_Nome=function(){return{dataField:"classificacao_nome",visible:"S"==App.sessao.dados.parametro_chamado.chamado_classificacoes,width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Nome=function(){return{caption:"Nome do projeto",dataField:"projeto_nome",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Atividade_Descricao=function(){return{caption:"Atividade do projeto",dataField:"projeto_atividade_descricao",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Grupo_Motivo_Nome=function(){return{caption:"Grupo de Motivo",dataField:"grupo_motivo_nome",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:"Visualizar chamado",icon:"fa fa-comments",cssClass:o,onClick:function(a){View.loadReact(window.views.chamado.Detalhes.default,{chamadoId:a.row.data.id},function(a,o){},View.ABA.MULTIPLAS)}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(o){return App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel},onClick:function(o){$(function(){DevExpress.ui.dialog.confirm("<i>"+App.lang.generico.questionar_apagar_registro+"</i>",App.lang.generico.apagar_registro).done(function(t){t&&WS.post("chamado/excluir_relacionamento_tarefa_quadro_lista_cartao_chamado/",{cartao_id:a.cartao_id,chamado_id:o.row.data.id},function(o){alert_saved(App.lang.alert_saved.registro_excluido),a.renderizar_chamados()})})})}}]}},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Colunas=function(a,o,t,e){return[dx_Tarefa_Quadro_Lista_Cartao_Chamado_Numero_Chamado(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Abertura(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Encerramento(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Prioridade_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Assunto(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Situacao(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Solicitante_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Usuario_Responsavel_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Tipo_Entidade(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Codigo_Entidade(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Entidade_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Data_Previsao_Retorno(a,o,t,e),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Percentual_Encerramento_Inatividade(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_SLA(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Motivo(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Classificacao_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Projeto_Atividade_Descricao(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Grupo_Motivo_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Chamado_Botoes(a)]},dx_Tarefa_Quadro_Lista_Cartao_Chamado_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,visible:App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel,onClick:function(){View.loadReact(window.views.chamado.Detalhes.default,{onClose:function(){a.listagem_chamado.refresh()},cartaoId:a.cartao_id},function(a,o){},View.ABA.MULTIPLAS)}},location:"after",name:"btnNovo",locateInMenu:"auto"}};