define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.carrega_img=this.dialog.find(".carrega_img"),this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.modal_carregar_curtida=this.dialog.find(".modal_carregar_curtida"),this.div_load=this.dialog.find(".div_load"),this.titulo=this.dialog.find(".titulo"),this.grupo_id_param=null,this.arr_curtidas_usuario=null,this.arr_membros=[],this.arr_grupo=[],this.arr_todos=[],this.limite=0,this.quantidade=0,this.membros=null,this.count_solicitacao,this.count_membro,this.flag=null,this.show=function(i){t.grupo_id_param=i,show_modal(t.modal.attr("id")),t.listar()},this.listar=function(){WS.get({route:"grupo_usuarios/objeto/",data:{grupo_usuarios_id:t.grupo_id_param,limite:t.limite},func_response:function(i){i&&(t.titulo.text("UsuÃ¡rios "+i.nome),t.arr_membros=i.usuarios,t.flag=!0,t.render_usuarios())}})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.render_usuarios=function(i){var a=t.tab_listagem.find("tbody"),o=a.find("tr:first");t.tab_listagem.find("tr:gt(-1)").remove(),$(t.arr_membros).each(function(i,r){null==r.nome&&""==r.nome||(null!=r.foto_id?t.carrega_img.attr("src",WS_URI+"documento/midia/?documento_id="+r.foto_id+"&token_midia="+App.sessao.token_midia+"&anticache="+(new Date).getTime()):t.carrega_img.attr("src","assets/img/icones_bp/imagem_usuario_padrao.svg")),function(i){var t=o.clone();t.removeAttr("template-row"),t.css("display",""),$(t.find("[template-field='img_usuario_grupo']"));var r=$(t.find("[template-field='nome_usuario_grupo']"));$(t.find(".link_grupo")),r.text(i.nome),t.appendTo(a)}(r)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),t.flag=!0,this.modal_carregar_curtida.unbind("scroll"),this.modal_carregar_curtida.scroll(function(){t.modal_carregar_curtida.scrollTop()+t.modal_carregar_curtida.height()>t.tab_listagem.get(0).scrollHeight&&(t.div_load.removeClass("hidden"),1==t.flag&&(t.flag=!1,t.limite=t.limite+5,t.listar()))})}});