define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="TÃ©cnicos",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.btn_configuracoes=this.dialog.find(".btn_configuracoes"),this.listar=function(){var i=t.tab_listagem.find("tbody"),n=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),WS.get("tecnico/listar/",null,function(o){$(o).each(function(o,c){!function(o){var c=n.clone();c.removeAttr("template-row"),c.css("display",""),$(c.find("[template-field='codigo']")).text(o.codigo?o.codigo:""),$(c.find("[template-field='nome']")).text(o.nome),$(c.find("[template-field='valor_km']")).text(o.valor_km),$(c.find("[template-field='tipo']")).text(o.tipo_nome);var e=$(c.find(".btn_visualizar"));e.unbind("click"),e.click(function(){View.load("tecnicos/detalhes",function(i,t){t.show(o.tecnico_id,FORMULARIO.VISUALIZAR,o.tecnico_codigo_automatico)})});var l=$(c.find(".btn_editar")),a=function(){View.load("tecnicos/detalhes",function(i,n){n.onclose=t.listar,n.show(o.tecnico_id,FORMULARIO.EDITAR,o.tecnico_codigo_automatico)})};l.unbind("click"),l.click(a),c.dblclick(a);var s=$(c.find(".btn_excluir"));s.unbind("click"),s.click(function(){View.load("tecnicos/detalhes",function(i,n){n.onclose=t.listar,n.show(o.tecnico_id,FORMULARIO.EXCLUIR,o.tecnico_codigo_automatico)})}),c.appendTo(i)}(c)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){var i;WS.get("tecnico/get_parametros/",null,function(n){i=n.tecnico_codigo_automatico,View.load("tecnicos/detalhes",function(n,o){o.onclose=t.listar,o.show(null,FORMULARIO.NOVO,i)})})}),this.btn_configuracoes.unbind("click"),this.btn_configuracoes.click(function(){View.load("tecnicos/configuracoes",function(i,n){n.onclose=t.listar,n.show()})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});