define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.tab_listagem=this.dialog.find(".tab_listagem"),this.edt_codigo=this.dialog.find(".edt_codigo"),this.edt_descricao=this.dialog.find(".edt_descricao"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.instancia_tab_listagem=this.dialog.find(".tab_listagem").Tabela_Padrao_Next(),this.tipo_itens=[],this.arr_tipo_itens=[],this.limite=0,this.incrementar_limite=!1,this.limite_a_cada=50,this.controle_ignore_error=!1,this.ultimo_limite_incrementado=0,this.bloqueia_scroll=!1,this.nao_exibir=[],this.show=function(i,e,a){if("object"==typeof i){var o=extender_parametros({tipo_itens_id:null,onselect:null,tipo_itens:[],esconder_por_status:[]},i);e=o.onselect,i=o.tipo_itens_id,t.nao_exibir=o.tipo_itens}t.tipo_itens_id=i,t.onselect=e,t.listar(!0),show_modal(t.modal.attr("id")),set_focus(t.edt_codigo)},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.limpar_tabela=function(i){t.limite=0,t.bloqueia_scroll=!1,$.Tabela_Padrao_Next.clear(t.instancia_tab_listagem),arguments.length>0&&arguments[0]&&t.listar(!0)},this.listar=function(i){if(t.tipo_itens=[],void 0!==i&&"boolean"==typeof i||(i=!1),!t.bloqueia_scroll){var e={codigo:t.edt_codigo.val(),descricao:t.edt_descricao.val(),limite:t.limite};WS.get("tipo_itens/listar/",e,function(e){i&&(t.limite=t.limite+t.limite_a_cada),0==e.length&&(t.bloqueia_scroll=!0),t.arr_tipo_itens=e,$(t.arr_tipo_itens).each(function(i,e){$(t.nao_exibir).in_array(e.id)||function(i){i=extender_parametros({codigo:"-",descricao:"-"},i);var e=$.Tabela_Padrao_Next.create_row(t.instancia_tab_listagem),a=($.Tabela_Padrao_Next.getColumn(e,"codigo").text(i.codigo),$.Tabela_Padrao_Next.getColumn(e,"descricao").text(i.descricao),$.Tabela_Padrao_Next.getColumn(e,"acao"));$.Tabela_Padrao_Next.getColumn(a,"btn_selecionar").unbind("click").click(function(e){void 0!==t.onselect&&t.onselect(i),t.unload()}),$.Tabela_Padrao_Next.RenderRow(t.instancia_tab_listagem,e)}(e)})})}},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),this.edt_codigo.unbind("keyup"),this.edt_codigo.keyup($.debounce(500,function(){t.limpar_tabela(!0)})),this.edt_descricao.unbind("keyup"),this.edt_descricao.keyup($.debounce(500,function(){t.limpar_tabela(!0)})),$(t.modal).scroll(function(){var i=t.modal;t.html_id&&$(i).scrollTop()+$(this).height()==$(this).get(0).scrollHeight&&(t.bloqueia_scroll||t.listar(!0))})}});