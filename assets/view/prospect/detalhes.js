var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),define(["react","react-dom","./../componentes_react/InputCEP","./../componentes_react/TabelaPreco","./../componentes_react/CondicaoPagamento"],function(e,a,i,o,t){return function(n){"use strict";var r=this;this.html_id=n,this.dialog=$("#"+this.html_id),this.title="Detalhe Organização",this.onclose=null,this.onsave=null,this.edt_nome=this.dialog.find(".edt_nome"),this.edt_razao_social=this.dialog.find(".edt_razao_social"),this.edt_email_agenda=this.dialog.find(".edt_email_agenda"),this.edt_dominio_interacao=this.dialog.find(".edt_dominio_interacao"),this.edt_telefone1=this.dialog.find(".edt_telefone1"),this.edt_telefone2=this.dialog.find(".edt_telefone2"),this.edt_telefone3=this.dialog.find(".edt_telefone3"),this.edt_telefone4=this.dialog.find(".edt_telefone4"),this.files=this.dialog.find(".files"),this.carrega_img=this.dialog.find(".carrega_img"),this.razao_social_obrig=this.dialog.find(".razao_social_obrig"),this.nome_fantasia_obrig=this.dialog.find(".nome_fantasia_obrig"),this.tipo_obrig=this.dialog.find(".tipo_obrig"),this.endereco_obrig=this.dialog.find(".endereco_obrig"),this.numero_obrig=this.dialog.find(".numero_obrig"),this.bairro_obrig=this.dialog.find(".bairro_obrig"),this.municipio_obrig=this.dialog.find(".municipio_obrig"),this.pais_obrig=this.dialog.find(".pais_obrig"),this.cnpj_obrig=this.dialog.find(".cnpj_obrig"),this.inscricao_estadual_obrig=this.dialog.find(".inscricao_estadual_obrig"),this.edt_codigo=this.dialog.find(".edt_codigo"),this.edt_unidade=this.dialog.find(".edt_unidade"),this.chk_bloqueado=this.dialog.find(".chk_bloqueado"),this.cbo_tipo_pessoa=this.dialog.find(".cbo_tipo_pessoa"),this.cbo_tipo_cadastro=this.dialog.find(".cbo_tipo_cadastro"),this.edt_endereco=this.dialog.find(".edt_endereco"),this.edt_numero=this.dialog.find(".edt_numero"),this.edt_complemento=this.dialog.find(".edt_complemento"),this.edt_bairro=this.dialog.find(".edt_bairro"),this.edt_municipio=this.dialog.find(".edt_municipio"),this.btn_municipio=this.dialog.find(".btn_municipio"),this.edt_pais=this.dialog.find(".edt_pais"),this.btn_pais=this.dialog.find(".btn_pais"),this.div_componente_cnpj=this.dialog.find(".div_componente_cnpj"),this.edt_inscricao_estadual=this.dialog.find(".edt_inscricao_estadual"),this.edt_id_estrangeiro=this.dialog.find(".edt_id_estrangeiro"),this.edt_incricao_municipal=this.dialog.find(".edt_incricao_municipal"),this.cbo_tipo_orgao=this.dialog.find(".cbo_tipo_orgao"),this.cbo_classificacao=this.dialog.find(".cbo_classificacao"),this.chk_qualificado=this.dialog.find(".chk_qualificado"),this.edt_uf=this.dialog.find(".edt_uf"),this.edt_data_fundacao=this.dialog.find(".edt_data_fundacao"),this.edt_site=this.dialog.find(".edt_site"),this.edt_email_principal=this.dialog.find(".edt_email_principal"),this.edt_observacoes=this.dialog.find(".edt_observacoes"),this.tab_listagem_segmento=this.dialog.find(".tab_listagem_segmento"),this.tab_listagem_contato=this.dialog.find(".tab_listagem_contato"),this.tab_listagem_representante=this.dialog.find(".tab_listagem_representante"),this.tab_listagem_regiao_venda=this.dialog.find(".tab_listagem_regiao_venda"),this.btn_incluir_segmento=this.dialog.find(".btn_incluir_segmento"),this.menu_geral=this.dialog.find(".menu_geral"),this.menu_vendas=this.dialog.find(".menu_vendas"),this.menu_contatos=this.dialog.find(".menu_contatos"),this.menu_segmentos=this.dialog.find(".menu_segmentos"),this.menu_representantes=this.dialog.find(".menu_representantes"),this.menu_regiao_vendas=this.dialog.find(".menu_regiao_vendas"),this.menu_tabela_preco=this.dialog.find(".menu_tabela_preco"),this.menu_condicao_pagamento=this.dialog.find(".menu_condicao_pagamento"),this.menu_personalizado=this.dialog.find(".menu_personalizado"),this.aba_geral=this.dialog.find(".aba_geral"),this.aba_vendas=this.dialog.find(".aba_vendas"),this.aba_contatos=this.dialog.find(".aba_contatos"),this.aba_segmentos=this.dialog.find(".aba_segmentos"),this.aba_representantes=this.dialog.find(".aba_representantes"),this.aba_regiao_vendas=this.dialog.find(".aba_regiao_vendas"),this.aba_tabela_preco=this.dialog.find(".aba_tabela_preco"),this.aba_condicao_pagamento=this.dialog.find(".aba_condicao_pagamento"),this.aba_personalizado=this.dialog.find(".aba_personalizado"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.btn_alterar_logo=this.dialog.find(".btn_alterar_logo"),this.btn_remover_logo=this.dialog.find(".btn_remover_logo"),this.dx_contato=this.dialog.find(".dx_contato"),this.cbo_representante=this.dialog.find(".cbo_representante"),this.edt_representante=null,this.cbo_regiao_venda=this.dialog.find(".cbo_regiao_venda"),this.edt_regiao_venda=null,this.template_grupo=this.dialog.find("[template-grupo]"),this.template_campo=this.dialog.find("[template-campo]"),this.divFormularioPersonalizado=this.dialog.find(".divFormularioPersonalizado"),this.div_componente_cep=this.dialog.find(".div_componente_cep"),this.inputCEP=e.createElement(i,null,null),this.div_componente_tabela_preco=this.dialog.find(".div_componente_tabela_preco"),this.tabelaPreco=e.createElement(o,null,null),this.div_componente_condicao_pagamento=this.dialog.find(".div_componente_condicao_pagamento"),this.condicaoPagamento=e.createElement(t,null,null);var d={aoAlterar:(e,a)=>{window.functions.CNPJ.preencherCampos(r,a)}};a.render(e.createElement(window.components.TextBoxCPFCNPJ.default,d),r.div_componente_cnpj[0]),this.btn_historico_entidade=this.dialog.find(".btn_historico_entidade"),this.logo_id=null,this.prospect_id=null,this.tipo=null,this.cod_municipio=null,this.cod_pais=null,this.codigo=null,this.tipo_operacao=null,this.OPERACAO_CRIAR_UNIDADE=4,this.PESSOA_JURIDICA="J",this.campos_personalizados=null,this.arr_segmentos=[],this.arr_segmentos_filtrados=[],this.arr_contatos=[],this.arr_contatos_filtrados=[],this.arr_representante=[],this.arr_representante_filtrados=[],this.arr_listagem_representante=[],this.arr_regiao_venda=[],this.arr_regiao_venda_filtrados=[],this.arr_listagem_regiao_venda=[],this.formularioGetPostParams=null,this.formularioValidar=null,this.formularioMain={},this.componenteCnpjInstance=r.div_componente_cnpj.children().dxTextBox("instance"),this.show=function(e,i,o,t){switch(r.aba_geral.attr("id","aba_geral"+r.html_id),r.aba_vendas.attr("id","aba_vendas"+r.html_id),r.aba_contatos.attr("id","aba_contatos"+r.html_id),r.aba_segmentos.attr("id","aba_segmentos"+r.html_id),r.aba_representantes.attr("id","aba_representantes"+r.html_id),r.aba_regiao_vendas.attr("id","aba_regiao_vendas"+r.html_id),r.aba_tabela_preco.attr("id","aba_tabela_preco"+r.html_id),r.aba_condicao_pagamento.attr("id","aba_condicao_pagamento"+r.html_id),r.aba_personalizado.attr("id","aba_personalizado"+r.html_id),r.menu_geral.attr("href","#"+r.aba_geral.attr("id")),r.menu_vendas.attr("href","#"+r.aba_vendas.attr("id")),r.menu_contatos.attr("href","#"+r.aba_contatos.attr("id")),r.menu_segmentos.attr("href","#"+r.aba_segmentos.attr("id")),r.menu_representantes.attr("href","#"+r.aba_representantes.attr("id")),r.menu_regiao_vendas.attr("href","#"+r.aba_regiao_vendas.attr("id")),r.menu_regiao_vendas.attr("href","#"+r.aba_regiao_vendas.attr("id")),r.menu_tabela_preco.attr("href","#"+r.aba_tabela_preco.attr("id")),r.menu_condicao_pagamento.attr("href","#"+r.aba_condicao_pagamento.attr("id")),r.menu_personalizado.attr("href","#"+r.aba_personalizado.attr("id")),r.validar_campos_obrigatorios(),a.render(r.inputCEP,r.div_componente_cep[0]),r.inputCEP.props.setCampoEndereco(r.edt_endereco),r.inputCEP.props.setCampoBairro(r.edt_bairro),r.inputCEP.props.setCampoCidade(r.edt_municipio,r.edt_uf,r.alterar_cod_municipio),r.inputCEP.props.setCampoPais(r.edt_pais,r.alterar_cod_pais),isMobile&&(r.edt_numero.attr("type","number"),r.edt_email_principal.attr("type","email"),r.edt_email_agenda.attr("type","email")),r.tipo=i,r.codigo=o,set_datepicker(r.edt_data_fundacao),r.render_dx_contato(e),!App.sessao.dados.admin&&App.verifica_permissao(App.sessao.dados.empresa_filial_id,"prospect_somente_leitura")&&(r.tipo=FORMULARIO.VISUALIZAR),r.tipo){case FORMULARIO.NOVO:r.btn_salvar.show(),r.btn_excluir.hide(),r.permite_alterar(!0),r.cod_pais="1058",r.edt_pais.val("BRASIL");break;case FORMULARIO.EDITAR:r.btn_salvar.show(),r.btn_excluir.hide(),r.permite_alterar(!0);break;case FORMULARIO.VISUALIZAR:r.btn_salvar.hide(),r.btn_excluir.hide(),r.permite_alterar(!1);break;case FORMULARIO.EXCLUIR:r.btn_salvar.hide(),r.btn_excluir.show(),r.permite_alterar(!1);break;case FORMULARIO.CRIAR_UNIDADE:r.btn_salvar.show(),r.btn_excluir.hide(),r.permite_alterar(!0),r.tipo_operacao=r.OPERACAO_CRIAR_UNIDADE,r.edt_codigo.val(r.codigo),r.cod_pais="1058",r.edt_pais.val("BRASIL")}if(r.btn_historico_entidade.tooltip({title:"Histórico do cliente",placement:"auto"}),void 0!==e&&e?(r.prospect_id=e,r.preencher()):(App.titulo_aba(r.html_id,"Organização - Novo"),r.permite_alterar_chave(),void 0!==t&&"undefined"!=t&&null!=t&&(r.edt_nome.val(t),r.edt_razao_social.val(t),set_focus(r.edt_nome)),r.componenteCnpjInstance.option("value","")),null==r.edt_representante){create_combobox(r.cbo_representante,r.render_representantes);var n=r.cbo_representante.parent();r.edt_representante=n.find(".edt_combobox"),r.edt_representante.keypress(function(e){if(13==e.keyCode){var a=r.cbo_representante.parent().find(".ncbo_scroll").find(".row_selected").attr("id_registro");r.relacionar_representante_existente(a)}})}null==r.edt_regiao_venda&&(create_combobox(r.cbo_regiao_venda,r.render_regiao_vendas),n=r.cbo_regiao_venda.parent(),r.edt_regiao_venda=n.find(".edt_combobox"),r.edt_regiao_venda.keypress(function(e){if(13==e.keyCode){var a=r.cbo_regiao_venda.parent().find(".ncbo_scroll").find(".row_selected").attr("id_registro");r.relacionar_regiao_venda_existente(a)}})),r.render_formulario(),r.renderiza_tabela_preco(),r.renderiza_condicao_pagamento()},this.renderiza_tabela_preco=function(){a.render(r.tabelaPreco,r.div_componente_tabela_preco[0]),r.tabelaPreco.props.objEntidade={tipo:"O",id:r.prospect_id},r.tabelaPreco.props.mainExterno=r,r.tabelaPreco.props.listar(r.prospect_id,"O")},this.renderiza_condicao_pagamento=function(){a.render(r.condicaoPagamento,r.div_componente_condicao_pagamento[0]),r.condicaoPagamento.props.objEntidade={tipo:"O",id:r.prospect_id},r.condicaoPagamento.props.mainExterno=r,r.condicaoPagamento.props.listar(r.prospect_id,"O")},this.alterar_cod_municipio=function(){r.cod_municipio=r.inputCEP.props.CodigoMunicipio},this.alterar_cod_pais=function(){r.cod_pais=r.inputCEP.props.CodigoPais},this.render_representantes=function(e){WS.get("representante/listar/",{nome_fantasia:r.edt_representante.val()},function(a){limpar_combobox(r.cbo_representante),r.arr_listagem_representante=a,$(a).each(function(e,a){var i=[];i.Nome=a.nome_fantasia,add_option_combobox(r.cbo_representante,e,a.representante_id,i)}),r.cbo_representante.parent().find(".ul_row").click(function(){var e=$(this).parent().attr("id_registro");r.relacionar_representante_existente(e)}),e(!0)})},this.relacionar_representante_existente=function(e){if(e>0){var a=r.cbo_representante.parent(),i=a.find(".edt_combobox");if(1==a.find(".btn_novo").hasClass("hidden")){var o=!1;if($(r.arr_representante).each(function(a,i){i.representante_id==e&&0==i.removido&&(o=!0)}),o)i.val(""),set_focus(i);else{var t=new Object;t.representante_id=e,t.removido=!1,$(r.arr_listagem_representante).each(function(e,a){a.representante_id==t.representante_id&&(t.email_principal=a.email_principal,t.nome=a.nome_fantasia)}),r.arr_representante.push(t),r.listar_representante(),setTimeout(function(){i.val(""),set_focus(i)},100)}}}},this.relacionar_regiao_venda_existente=function(e){if(e>0){var a=r.cbo_regiao_venda.parent(),i=a.find(".edt_combobox");if(1==a.find(".btn_novo").hasClass("hidden")){var o=!1;if($(r.arr_regiao_venda).each(function(a,i){i.regiao_vendas_id==e&&0==i.removido&&(o=!0)}),o)i.val(""),set_focus(i);else{var t=new Object;t.regiao_vendas_id=e,t.removido=!1,t.padrao="N",$(r.arr_listagem_regiao_venda).each(function(e,a){a.regiao_vendas_id==t.regiao_vendas_id&&(t.descricao=a.descricao)}),r.arr_regiao_venda.push(t),r.listar_regiao_venda(),setTimeout(function(){i.val(""),set_focus(i)},100)}}}},this.close=function(){void 0!==r.onclose&&r.onclose&&r.onclose()},this.unload=function(){r.close(),View.unload(this.html_id)},this.permite_alterar=function(e){r.files.prop("disabled",!e),r.edt_nome.prop("readonly",!e),r.edt_razao_social.prop("readonly",!e),r.edt_email_agenda.prop("readonly",!e),r.edt_dominio_interacao.prop("readonly",!e),r.edt_telefone1.prop("readonly",!e),r.edt_telefone2.prop("readonly",!e),r.edt_telefone3.prop("readonly",!e),r.edt_telefone4.prop("readonly",!e),r.edt_codigo.prop("readonly",!e),r.edt_unidade.prop("readonly",!e),r.chk_bloqueado.prop("readonly",!e),r.chk_qualificado.prop("readonly",!e),r.cbo_tipo_pessoa.prop("disabled",!e),r.cbo_tipo_cadastro.prop("disabled",!e),r.inputCEP.props.setCampoCepLeitura(!e),r.edt_endereco.prop("readonly",!e),r.edt_numero.prop("readonly",!e),r.edt_complemento.prop("readonly",!e),r.edt_bairro.prop("readonly",!e),r.edt_municipio.prop("readonly",!e),r.btn_municipio.prop("disabled",!e),r.edt_pais.prop("readonly",!e),r.btn_pais.prop("disabled",!e),r.componenteCnpjInstance.option("readOnly",!e),r.edt_inscricao_estadual.prop("readonly",!e),r.edt_id_estrangeiro.prop("readonly",!e),r.edt_incricao_municipal.prop("readonly",!e),r.cbo_tipo_orgao.prop("disabled",!e),r.cbo_classificacao.prop("disabled",!e),r.edt_data_fundacao.prop("readonly",!e),r.edt_site.prop("readonly",!e),r.edt_email_principal.prop("readonly",!e)},this.permite_alterar_chave=function(e){r.tipo==FORMULARIO.NOVO?WS.get("prospect/get_parametros/",null,function(e){r.edt_codigo.prop("readonly","S"==e.prospect_codigo_automatico),r.edt_unidade.prop("readonly","S"==e.prospect_codigo_automatico)}):r.tipo==FORMULARIO.EDITAR?(r.edt_codigo.prop("readonly",!0),r.edt_unidade.prop("readonly",!0),""==r.edt_codigo.val().trim()&&""==r.edt_unidade.val().trim()&&(r.edt_codigo.prop("readonly",!1),r.edt_unidade.prop("readonly",!1))):r.tipo==FORMULARIO.CRIAR_UNIDADE&&(r.edt_codigo.prop("readonly",!0),r.edt_unidade.prop("readonly",!0),WS.get("prospect/get_parametros/",null,function(e){r.edt_unidade.prop("readonly","S"==e.prospect_codigo_automatico)}))},this.validar_campos_obrigatorios=function(){WS.get("prospect/get_parametros/",null,function(e){!1!==e.prospect_obrig_nome_fantasia&&"N"!=e.prospect_obrig_nome_fantasia||r.nome_fantasia_obrig.remove(),!1!==e.prospect_obrig_razao_social&&"N"!=e.prospect_obrig_razao_social||r.razao_social_obrig.remove(),!1!==e.prospect_obrig_tipo&&"N"!=e.prospect_obrig_tipo||r.tipo_obrig.remove(),r.inputCEP.props.set_cepObrigatorio(!0===e.prospect_obrig_cep||"S"==e.prospect_obrig_cep),!1!==e.prospect_obrig_endereco&&"N"!=e.prospect_obrig_endereco||r.endereco_obrig.remove(),!1!==e.prospect_obrig_numero&&"N"!=e.prospect_obrig_numero||r.numero_obrig.remove(),!1!==e.prospect_obrig_bairro&&"N"!=e.prospect_obrig_bairro||r.bairro_obrig.remove(),!1!==e.prospect_obrig_municipio&&"N"!=e.prospect_obrig_municipio||r.municipio_obrig.remove(),!1!==e.prospect_obrig_pais&&"N"!=e.prospect_obrig_pais||r.pais_obrig.remove(),!1!==e.prospect_obrig_cnpj&&"N"!=e.prospect_obrig_cnpj||r.cnpj_obrig.remove(),!1!==e.prospect_obrig_inscricao_estadual&&"N"!=e.prospect_obrig_inscricao_estadual||r.inscricao_estadual_obrig.remove()})},this.preencher=function(){WS.get("prospect/objeto/",{prospect_id:r.prospect_id},function(e){null!=e.nome_fantasia&&App.titulo_aba(r.html_id,"Organização - "+e.nome_fantasia.substring(0,15)),"S"==e.efetivado&&(r.btn_salvar.hide(),r.btn_excluir.hide(),r.btn_cancelar.show(),r.permite_alterar(!1)),r.edt_nome.val(e.nome_fantasia),r.edt_razao_social.val(e.razao_social),r.edt_email_agenda.val(e.email_agenda),r.edt_dominio_interacao.val(e.dominio_interacao),r.edt_telefone1.val(e.telefone1),r.edt_telefone2.val(e.telefone2),r.edt_telefone3.val(e.telefone3),r.edt_telefone4.val(e.telefone4),r.edt_uf.text(e.uf_sigla),r.arr_segmentos=e.arr_segmentos,r.render_segmentos(),r.arr_contatos=e.arr_contatos,r.render_contatos(),r.arr_representante=e.arr_representante,r.listar_representante(),r.arr_regiao_venda=e.arr_regiao_venda,r.listar_regiao_venda(),r.edt_codigo.val(e.codigo),r.edt_unidade.val(e.unidade),r.chk_bloqueado.bootstrapSwitch("state","S"==e.bloqueado),r.chk_qualificado.bootstrapSwitch("state","S"==e.qualificado),r.cbo_tipo_pessoa.val(e.tipo_pessoa),r.cbo_tipo_cadastro.val(e.tipo_cadastro),r.inputCEP.props.setCampoCep(e.cep),r.edt_endereco.val(e.endereco),r.edt_numero.val(e.numero),r.edt_complemento.val(e.complemento),r.edt_bairro.val(e.bairro),r.cod_municipio=e.cod_municipio,r.cod_pais=e.cod_pais,r.edt_municipio.val(e.municipio),r.edt_pais.val(e.pais),r.componenteCnpjInstance.option("value",e.cnpj),r.edt_inscricao_estadual.val(e.inscricao_estadual),r.edt_id_estrangeiro.val(e.id_estrangeiro),r.edt_incricao_municipal.val(e.inscricao_municipal),r.cbo_tipo_orgao.val(e.tipo_orgao),r.cbo_classificacao.val(e.classificacao),setTimeout(function(){set_datepicker(r.edt_data_fundacao,e.data_fundacao)},150),r.edt_site.val(e.site),r.edt_email_principal.val(e.email_principal),r.edt_observacoes.val(e.observacoes),null!=e.logo_id&&(r.logo_id=e.logo_id.id),null!=e.logo_id&&0==e.logo_id.excluido?"S"==e.logo_id.midia&&r.carrega_img.attr("src",WS_URI+"documento/midia/?tipo=v&tamanho=60&documento_id="+e.logo_id.id+"&token_midia="+App.sessao.token_midia+"&considera_excluido=S&anticache="+(new Date).getTime()):r.carrega_img.attr("src","assets/img/img.svg"),r.permite_alterar_chave()})},this.preview_logo=function(e){var a=e.target.files[0],i=new FileReader;i.onload=function(e){r.carrega_img.attr("src",e.target.result)},i.readAsDataURL(a)},this.render_segmentos=function(){var e=r.tab_listagem_segmento.find("tbody"),a=e.find("tr:first");$(r.arr_segmentos).each(function(e,a){void 0===r.arr_segmentos[e].removido&&(r.arr_segmentos[e].removido=!1)}),r.arr_segmentos_filtrados=r.arr_segmentos.filter(function(e){var a=!0;return!0===e.removido&&(a=!1),a}),r.tab_listagem_segmento.find("tr:gt(1)").remove(),$(r.arr_segmentos_filtrados).each(function(i,o){!function(i){var o=a.clone();o.removeAttr("template-row"),o.css("display",""),$(o.find("[template-field='nome_segmento']")).text(i.nome);var t=$(o.find(".btn_deletar_segmento"));switch(t.unbind("click"),t.click(function(){alert_modal("Segmento","Deseja remover o seguimento?","Remover",function(){$(r.arr_segmentos).each(function(e,a){a.segmento_id==i.segmento_id&&(r.arr_segmentos[e].removido=!0,r.render_segmentos())})},!0)}),r.tipo){case FORMULARIO.VISUALIZAR:case FORMULARIO.EXCLUIR:t.prop("disabled",!0)}o.appendTo(e)}(o)}),App.aplicar_mascaras(e)},this.render_contatos=function(){var e=r.tab_listagem_contato.find("tbody"),a=e.find("tr:first");$(r.arr_contatos).each(function(e,a){void 0===r.arr_contatos[e].removido&&(r.arr_contatos[e].removido=!1)}),r.arr_contatos_filtrados=r.arr_contatos.filter(function(e){var a=!0;return!0===e.removido&&(a=!1),a}),r.tab_listagem_contato.find("tr:gt(1)").remove(),$(r.arr_contatos_filtrados).each(function(i,o){!function(i){var o=a.clone();o.removeAttr("template-row"),o.css("display","");var t=$(o.find("[template-field='nome']"));t.text(i.nome);var n=$(o.find("[template-field='email']"));n.text(i.email);var d=$(o.find("[template-field='telefone1']"));d.text(i.telefone1);var _=$(o.find("[template-field='telefone2']"));_.text(i.telefone2);var s=$(o.find("[template-field='telefone3']"));s.text(i.telefone3);var c=$(o.find("[template-field='telefone4']"));c.text(i.telefone4);var l=$(o.find(".btn_editar_contato")),p=function(){View.load("contato/detalhes",function(e,a){a.show(i.contato_id,FORMULARIO.EDITAR,function(e){t.text(e.nome),n.text(e.email),d.text(e.telefone1),_.text(e.telefone2),s.text(e.telefone3),c.text(e.telefone4)})},View.ABA.MULTIPLAS)};l.unbind("click"),l.click(p),o.dblclick(p);var m=$(o.find(".btn_deletar_contato"));m.unbind("click"),m.click(function(){alert_modal("Contato","Deseja remover o seguimento?","Remover",function(){$(r.arr_contatos).each(function(e,a){a.contato_id==i.contato_id&&(r.arr_contatos[e].removido=!0,r.render_contatos())})},!0)}),o.appendTo(e)}(o)}),App.aplicar_mascaras(e)},this.listar_representante=function(){var e=r.tab_listagem_representante.find("tbody"),a=e.find("tr:first");$(r.arr_representante).each(function(e,a){void 0===r.arr_representante[e].removido&&(r.arr_representante[e].removido=!1)}),r.arr_representante_filtrados=r.arr_representante.filter(function(e){var a=!0;return!0===e.removido&&(a=!1),a}),r.tab_listagem_representante.find("tr:gt(1)").remove(),$(r.arr_representante_filtrados).each(function(i,o){!function(i){var o=a.clone();o.removeAttr("template-row"),o.css("display",""),$(o.find("[template-field='nome']")).text(i.nome),$(o.find("[template-field='email']")).text(i.email_principal);var t=$(o.find(".btn_deletar_representante"));t.unbind("click"),t.click(function(){alert_modal("Representante","Deseja remover?","Remover",function(){$(r.arr_representante).each(function(e,a){a.representante_id==i.representante_id&&(r.arr_representante[e].removido=!0,r.listar_representante())})},!0)}),o.appendTo(e)}(o)}),App.aplicar_mascaras(e)},this.listar_regiao_venda=function(){var e=r.tab_listagem_regiao_venda.find("tbody"),a=e.find("tr:first"),i=function(i){var o=function(e){var a=-1;return r.arr_regiao_venda.filter(function(i,o){i.regiao_vendas_id==e&&(a=o)}),a}(i.regiao_vendas_id),t=function(a){void 0===a&&(a=!1);var i,o=(i=!1,r.arr_regiao_venda.filter(function(e,a){"S"!=e.padrao||0!=e.removido||(i=!0)}),i);if(r.arr_regiao_venda.length>0&&!o)for(var t=0;t<r.arr_regiao_venda.length;t++)if(0==r.arr_regiao_venda[t].removido&&"N"==r.arr_regiao_venda[t].padrao){r.arr_regiao_venda[t].padrao="S",0!=a?a.prop("checked",!0):$(e).find("tr:not([template-row])").eq(t).find('[template-field="chk_padrao"]').prop("checked",!0);break}},n=a.clone();n.removeAttr("template-row"),n.css("display",""),$(n.find("[template-field='nome']")).text(i.descricao);var d=$(n.find("[template-field='chk_padrao']"));d.removeClass("template_switch"),d.prop("checked","S"==r.arr_regiao_venda[o].padrao).change(function(a){d.prop("checked")&&(function(){e.find('[template-field="chk_padrao"]').removeClass("disabled").removeAttr("disabled").prop("checked",!1).change();for(var a=0;a<r.arr_regiao_venda.length;a++)r.arr_regiao_venda[a].padrao="N"}(),r.arr_regiao_venda[o].padrao="S",$(this).bootstrapToggle("disable"))}),"S"==r.arr_regiao_venda[o].padrao&&d.addClass("disabled").attr("disabled","true");var _=$(n.find(".btn_deletar_regiao_venda"));_.unbind("click"),_.click(function(){alert_modal("regiao_venda","Deseja remover?","Remover",function(){r.arr_regiao_venda[o].removido=!0,"S"==r.arr_regiao_venda[o].padrao&&t(),r.listar_regiao_venda()},!0)}),0==$(e).find("tr:not([template-row])").length&&t(d),n.appendTo(e)};$(r.arr_regiao_venda).each(function(e,a){void 0===r.arr_regiao_venda[e].removido&&(r.arr_regiao_venda[e].removido=!1)}),r.arr_regiao_venda_filtrados=r.arr_regiao_venda.filter(function(e){var a=!0;return!0===e.removido&&(a=!1),a}),r.tab_listagem_regiao_venda.find("tr:gt(1)").remove(),$(r.arr_regiao_venda_filtrados).each(function(e,a){i(a)}),App.aplicar_checkbox(e),App.aplicar_mascaras(e)},this.render_regiao_vendas=function(e){var a={descricao:r.edt_regiao_venda.val()};WS.get("regiao_vendas/listar/",a,function(a){limpar_combobox(r.cbo_regiao_venda),r.arr_listagem_regiao_venda=a,$(a).each(function(e,a){var i=[];i.Descricao=a.descricao,add_option_combobox(r.cbo_regiao_venda,e,a.regiao_vendas_id,i)}),r.cbo_regiao_venda.parent().find(".ul_row").click(function(){var e=$(this).parent().attr("id_registro");r.relacionar_regiao_venda_existente(e)}),e(!0)})},this.render_formulario=function(){ReactDOM.render(React.createElement(window.components.FormularioPersonalizado.default,{main:r.formularioMain,abaFormularioPersonalizado:r.menu_personalizado,urlGet:"/formulario_prospect/get_formulario/",urlGetParams:{prospect_id:r.prospect_id},readOnly:r.tipo===FORMULARIO.VISUALIZAR,callbackGetPostParams:function(e){r.formularioGetPostParams=e},callbackValidar:function(e){r.formularioValidar=e}}),r.divFormularioPersonalizado[0])},this.alerta_campo_obrigatorio=function(e,a){e.tooltip({title:"Campo obrigatorio",placement:void 0!==a?a:"auto"}),e.tooltip("show")},this.btn_municipio.unbind("click"),this.btn_municipio.click(function(){View.load("municipio/selecionar",function(e,a){a.show(function(e){r.cod_municipio=e.cod_municipio,r.edt_municipio.val(e.municipio),r.edt_uf.text(e.uf_sigla)})})}),this.btn_pais.unbind("click"),this.btn_pais.click(function(){View.load("pais/selecionar",function(e,a){a.show(function(e){r.cod_pais=e.cod_pais,r.edt_pais.val(e.nome)})})}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){r.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){if(r.formularioValidar()){$.each(r.files,function(e,a){a.files.length>0&&(r.logo_id=a.files[0])});var e={prospect_id:r.prospect_id,nome:r.edt_nome.val(),razao_social:r.edt_razao_social.val(),email_agenda:r.edt_email_agenda.val(),dominio_interacao:r.edt_dominio_interacao.val(),telefone1:r.edt_telefone1.val(),telefone2:r.edt_telefone2.val(),telefone3:r.edt_telefone3.val(),telefone4:r.edt_telefone4.val(),logo_id:r.logo_id,codigo:r.edt_codigo.val(),unidade:r.edt_unidade.val(),bloqueado:r.chk_bloqueado.bootstrapSwitch("state"),qualificado:r.chk_qualificado.bootstrapSwitch("state"),tipo_pessoa:r.cbo_tipo_pessoa.val(),tipo_cadastro:r.cbo_tipo_cadastro.val(),cep:r.inputCEP.props.CampoCep,endereco:r.edt_endereco.val(),numero:r.edt_numero.val(),complemento:r.edt_complemento.val(),bairro:r.edt_bairro.val(),cod_municipio:r.cod_municipio,cod_pais:r.cod_pais,cnpj:r.componenteCnpjInstance.option("value"),inscricao_estadual:r.edt_inscricao_estadual.val(),id_estrangeiro:r.edt_id_estrangeiro.val(),inscricao_municipal:r.edt_incricao_municipal.val(),tipo_orgao:r.cbo_tipo_orgao.val(),classificacao:r.cbo_classificacao.val(),data_fundacao:get_datepicker(r.edt_data_fundacao),site:r.edt_site.val(),email_principal:r.edt_email_principal.val(),observacoes:r.edt_observacoes.val(),tipo_operacao:r.tipo_operacao,arr_segmentos:JSON.stringify(r.arr_segmentos_filtrados),arr_contatos:JSON.stringify(r.arr_contatos_filtrados),arr_representante:JSON.stringify(r.arr_representante_filtrados),arr_regiao_venda:JSON.stringify(r.arr_regiao_venda_filtrados),arr_tabela_precos:JSON.stringify(r.arr_tabela_precos),arr_condicao_pagamento:JSON.stringify(r.arr_condicao_pagamento)};e=Object.assign(e,r.formularioGetPostParams()),WS.post("prospect/salvar",e,function(e){r.prospect_id=e.id,alert_saved(e.nome_fantasia+" salvo com sucesso"),void 0!==r.onsave&&r.onsave&&r.onsave(e,"O"),r.unload()},[r.btn_excluir,r.btn_salvar,r.btn_cancelar],null,!0)}}),this.btn_historico_entidade.unbind("click"),this.btn_historico_entidade.click(function(){r.prospect_id&&View.load("entidade_historico/listar",function(e,a){a.show(r.prospect_id,"O")},View.ABA.MULTIPLAS)}),this.btn_excluir.unbind("click"),this.btn_excluir.click(function(){WS.post("prospect/excluir",{prospect_id:r.prospect_id},function(e){alert_saved(e.nome_fantasia+" excluido com sucesso"),r.unload()})}),this.btn_alterar_logo.unbind("click"),this.btn_alterar_logo.click(function(){r.files.click()}),this.btn_remover_logo.unbind("click"),this.btn_remover_logo.click(function(){alert_modal("Remover Logo","Deseja remover este logo?","Remover",function(){WS.post("documento/excluir",{documento_id:r.logo_id,excluir:!0,excluir_foto_usuario:!0,prospect_id:r.prospect_id},function(e){alert_saved("Logo removido com sucesso"),r.carrega_img.attr("src","assets/img/img.svg")},null,null,!0)},!0)}),this.btn_incluir_segmento.unbind("click"),this.btn_incluir_segmento.click(function(){View.load("segmento/selecionar",function(e,a){a.show(function(e){var a=!1;$(r.arr_segmentos).each(function(i,o){o.segmento_id==e.segmento_id&&(a=!0,r.arr_segmentos[i].removido=!1)}),a||r.arr_segmentos.push(e),r.render_segmentos()})})}),this.render_dx_contato=(e=>{ReactDOM.render(React.createElement(window.components.SelecaoContato.default,{entidadeTipo:"O",entidadeId:e,readOnly:r.tipo==FORMULARIO.VISUALIZAR||r.tipo==FORMULARIO.EXCLUIR,dataGridSearchPanelEnabled:!1,dataGridExportEnabled:!1,dataGridColumnChooserEnabled:!1,aoAlterar:(e,a)=>{r.arr_contatos.filter(a=>+a.contato_id==+e&&(void 0===a.removido||!1===a.removido)).length>0||(r.arr_contatos.push(a),r.render_contatos())}}),r.dx_contato[0])}),r.files[0].addEventListener("change",r.preview_logo,!1)}});