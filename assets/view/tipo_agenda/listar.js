define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title=App.lang.tipo_agenda.tipo_agenda,this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){var i=t.tab_listagem.find("tbody"),n=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),WS.get("tipo_agenda/listar/",null,function(a){$(a).each(function(a,l){!function(a){var l=n.clone();l.removeAttr("template-row"),l.css("display",""),$(l.find("[template-field='id']")).text(a.tipo_agenda_id),$(l.find("[template-field='nome']")).text(a.nome),$(l.find("[template-field='cor']")).append('<span class="badge" style="padding-right: 100px; background: '+a.cor+'">&nbsp;</span>');var e=$(l.find("[template-field='particular']"));"S"!=a.particular&&1!=a.particular||e.append('<span class="label label-danger" data-toggle="tooltip" title="Particular"><span class="fa fa-lock"></span></span>'),$(l.find("[template-field='notificar_antes']")).text(a.notificar_antes?a.notificar_antes.substr(0,5):"");var o=$(l.find(".btn_visualizar"));o.unbind("click"),o.click(function(){View.load("tipo_agenda/detalhes",function(i,t){t.show(a.tipo_agenda_id,FORMULARIO.VISUALIZAR)})});var d=$(l.find(".btn_editar")),s=function(){View.load("tipo_agenda/detalhes",function(i,n){n.onclose=t.listar,n.show(a.tipo_agenda_id,FORMULARIO.EDITAR)})};d.unbind("click"),d.click(s),l.dblclick(s);var c=$(l.find(".btn_excluir"));c.unbind("click"),c.click(function(){View.load("tipo_agenda/detalhes",function(i,n){n.onclose=t.listar,n.show(a.tipo_agenda_id,FORMULARIO.EXCLUIR)})}),l.appendTo(i)}(l)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("tipo_agenda/detalhes",function(i,n){n.onclose=t.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});