define([],function(){return function(o){"use strict";var i=this;this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.modal_body=this.dialog.find(".modal-body"),this.edt_codigo=this.dialog.find(".edt_codigo"),this.edt_unidade=this.dialog.find(".edt_unidade"),this.edt_nome=this.dialog.find(".edt_nome"),this.edt_razao_social=this.dialog.find(".edt_razao_social"),this.select_bloqueado=this.dialog.find(".select_bloqueado"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_pesquisar=this.dialog.find(".btn_pesquisar"),this.campo_dinamico=[],this.options=[{id:"",descricao:"Desativado"},{id:"S",descricao:"Sim"},{id:"N",descricao:"NÃ£o"}],this.show=function(o,e,t,l,a,d,n,c){void 0!==t&&null!=t&&""!=t.trim()&&i.edt_codigo.val(t.trim()),void 0!==l&&null!=l&&""!=l.trim()&&i.edt_unidade.val(l.trim()),void 0!==a&&null!=a&&""!=a.trim()&&i.edt_nome.val(a.trim()),void 0!==d&&null!=d&&""!=d.trim()&&i.edt_razao_social.val(d.trim()),i.select_bloqueado.dxSelectBox({dataSource:i.options,displayExpr:"descricao",valueExpr:"id",value:n}),i.onselect=o,show_modal(i.modal.attr("id")),2==e&&(document.getElementById("modal_usuario_parametros_label").innerHTML="Selecionar Fornecedor"),i.render_campo_pesquisa(c),set_focus(i.edt_codigo)},this.render_campo_pesquisa=function(o){var e="",t="";WS.get("formulario_cliente/get_formulario/",null,function(l){$(l.grupos).each(function(l,a){$(a.elementos).each(function(l,a){if(a.tipo!=ELEMENTO_TIPO.OPCOES?(e=a.tipo==ELEMENTO_TIPO.DATA?"date":"text",t='<input type="'+e+'" class="'+a.id_elemento+' form-control" id="'+a.id_elemento+'" maxlength="50" placeholder="Filtro por '+a.nome+'">'):t=a.tipo_lista_opcoes==TIPO_LISTA_OPCOES.OPTION_MULTIPLAS?'<select title="" type="select" class="formulario_campo form-control selectpicker vld_lista_option_multiplas '+a.id_elemento+'"  multiple id="'+a.id_elemento+'">':'<select type="select" class="formulario_campo form-control id_elemento vld_lista_option '+a.id_elemento+'" id="'+a.id_elemento+'">',"S"==a.utiliza_filtro){var d=$('<div class="row"><div class="col-md-12 col-sm-12"><div class="form-group"><label for="'+a.id_elemento+'">'+a.nome+"</label>"+t+"</div></div></div>");if(d.appendTo(i.modal_body),i.campo_dinamico.push({id_elemento:a.id_elemento,option:a.tipo==ELEMENTO_TIPO.OPCOES}),a.tipo==ELEMENTO_TIPO.OPCOES){var n=d.find("select");add_option(n,"",""),$(a.opcoes).each(function(o,i){add_option(n,i,i)}),a.tipo_lista_opcoes==TIPO_LISTA_OPCOES.OPTION_MULTIPLAS&&n.selectpicker("refresh")}App.aplicar_mascaras(d),o&&$(o).each(function(o,i){i.id_elemento==a.id_elemento&&i.valor&&(a.tipo_lista_opcoes==TIPO_LISTA_OPCOES.OPTION_MULTIPLAS?$(document).find("."+i.id_elemento).val(i.valor).trigger({type:"change",execute:!0}).selectpicker("refresh"):$(document).find("."+i.id_elemento).val(i.valor))})}})})})},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_pesquisar.unbind("click"),this.btn_pesquisar.click(function(){$(i.campo_dinamico).each(function(o,e){i.campo_dinamico[o].valor=i.modal_body.find("#"+e.id_elemento).val()});var o={codigo:i.edt_codigo.val(),unidade:i.edt_unidade.val(),nome_fantasia:i.edt_nome.val(),razao_social:i.edt_razao_social.val(),bloqueado:i.select_bloqueado.dxSelectBox("instance").option("value"),campo_dinamico:i.campo_dinamico};i.onselect(o),i.unload()})}});