define([],function(){return function(a){"use strict";var i=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.title=App.lang.grupo_agenda_ativos.grupo_agenda_ativos,this.onclose=null,this.params={limite:0},this.params_template={limite:0},this.limite=0,this.incrementar_limite=!1,this.limite_a_cada=50,this.controle_ignore_error=!1,this.ultimo_limite_incrementado=0,this.bloqueia_limite=!1,this.btn_novo=this.dialog.find(".btn_novo"),this.btn_atualizar=this.dialog.find(".btn_atualizar"),this.btn_limpar_filtros=this.dialog.find(".btn_limpar_filtros"),this.btn_ordenacao=this.dialog.find(".orderbypointer"),this.btn_carregar_mais=this.dialog.find(".btn_carregar_mais"),this.tab_listagem=this.dialog.find(".tab_listagem").Tabela_Padrao_Next(),this.show=function(){i.inicializar_componentes(),i.listar(!0)},this.listar=function(a){if(void 0!==a&&"boolean"==typeof a||(a=!1),!i.bloqueia_limite){i.params.limite=i.limite;var t=function(a,t){t=extender_parametros({nome:"-"},t);var n=$.Tabela_Padrao_Next.create_row(i.tab_listagem),e=($.Tabela_Padrao_Next.getColumn(n,"nome").text(t.nome),$.Tabela_Padrao_Next.getColumn(n,"acao")),r=$.Tabela_Padrao_Next.getColumn(e,"btn_visualizar"),o=$.Tabela_Padrao_Next.getColumn(e,"btn_editar"),s=$.Tabela_Padrao_Next.getColumn(e,"btn_excluir");r.unbind("click").click(function(a){i.evento_visualizar($(this),t)}),o.unbind("click").click(function(a){i.evento_editar($(this),t)}),s.unbind("click").click(function(a){i.evento_excluir($(this),t)}),$.Tabela_Padrao_Next.RenderRow(i.tab_listagem,n)};WS.post({route:"grupo_ativos/listar/",type:"GET",data:i.params,func_response:function(n){if(i.btn_carregar_mais.find("span.txt_carregar_mais").text(App.lang.btn_carregar_mais.carregar_mais_registros),i.btn_carregar_mais.find("span.icn_carregar_mais").remove(),i.btn_carregar_mais.append('<span class="icn_carregar_mais fa fa-arrow-down"></span>'),n){a&&(i.limite=i.limite+i.limite_a_cada);for(var e=0;e<n.length;e++){var r=n[e];t(0,r)}0==n.length&&(i.btn_carregar_mais.find("span.txt_carregar_mais").text(App.lang.btn_carregar_mais.todos_carregados),i.btn_carregar_mais.find("span.icn_carregar_mais").remove(),i.btn_carregar_mais.append('<span class="icn_carregar_mais fa fa-check"></span>'),i.bloqueia_limite=!0)}},html_id:i.html_id,disable_buttons:[i.btn_atualizar,i.btn_limpar_filtros]})}},this.limpar_tabela=function(){$.Tabela_Padrao_Next.clear(i.tab_listagem),i.params.limite=0,i.limite=0,i.bloqueia_limite=!1},this.unload=function(){View.unload(this.html_id)},this.inicializar_componentes=function(){$.Tabela_Padrao_Next.Filtros.Start(i.tab_listagem,null,function(a,t,n){i.params=extender_parametros(i.params_template,a),setTimeout(function(){i.evento_atualizar()},300)})},this.evento_atualizar=function(){i.limpar_tabela(),i.listar(!0)},this.evento_visualizar=function(a,t){View.load("grupo_ativos/detalhes",function(a,n){var e={tipo:FORMULARIO.VISUALIZAR,grupo_ativos_id:t.id};n.onclose=function(){i.evento_atualizar()},n.show(e)},View.ABA.SIM)},this.evento_editar=function(a,t){View.load("grupo_ativos/detalhes",function(a,n){var e={tipo:FORMULARIO.EDITAR,grupo_ativos_id:t.id};n.onclose=function(){i.evento_atualizar()},n.show(e)},View.ABA.SIM)},this.evento_excluir=function(a,t){View.load("grupo_ativos/detalhes",function(a,n){var e={tipo:FORMULARIO.EXCLUIR,grupo_ativos_id:t.id};n.onclose=function(){i.evento_atualizar()},n.show(e)},View.ABA.SIM)},this.func_organizacao=function(a,t){i.limpar_tabela(),i.params=i.params_template,i.params.orderby=a,i.params.asc=t,setTimeout(function(){i.listar(!0)},300)},this.btn_atualizar.unbind("click").click(function(a){i.evento_atualizar()}),this.btn_limpar_filtros.unbind("click").click(function(a){$.tabela_padrao_bp_filtro("clean",i.html_id,i.tab_listagem),i.params=i.params_template,i.limpar_tabela(),i.listar(!0)}),this.btn_novo.unbind("click").click(function(a){View.load("grupo_ativos/detalhes",function(a,t){t.onclose=function(){i.evento_atualizar()},t.show()},View.ABA.SIM)}),this.btn_ordenacao.unbind("click").click(function(a){var t=$(this),n=$(t).attr("data-ordername"),e=$(t).attr("data-asc");if(0===e.length){for(var r=0;r<i.btn_ordenacao.length;r++)if($(i.btn_ordenacao[r])!==$(t)){try{$(i.btn_ordenacao[r]).find(".icon_orderby").removeClass("fa-sort-up fa-sort-down").addClass("hidden fa-sort-down")}catch(a){}$(i.btn_ordenacao[r]).attr("data-asc","")}e=!0,$(t).attr("data-asc",e),$(t).find(".icon_orderby").removeClass("hidden")}else e=!(e="true"==e),$(t).attr("data-asc",e),$(t).find(".icon_orderby").toggleClass("fa-sort-down fa-sort-up");i.func_organizacao(n,e)}),this.btn_carregar_mais.unbind("click").click(function(){i.bloqueia_limite||(i.btn_carregar_mais.find("span.txt_carregar_mais").text(App.lang.btn_carregar_mais.aguarde),i.btn_carregar_mais.find("span.icn_carregar_mais").remove(),i.btn_carregar_mais.append('<span class="icn_carregar_mais fa fa-spinner fa-spin">'),i.listar(!0))})}});