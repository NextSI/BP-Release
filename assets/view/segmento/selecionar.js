define([],function(){return function(t){"use strict";var e=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.edt_nome_segmento=this.dialog.find(".edt_nome_segmento"),this.usuario_id=null,this.arr_segmentos=[],this.show=function(t,n){e.onselect=t,show_modal(e.modal.attr("id")),set_focus(e.edt_nome_segmento)},this.close=function(){close_modal(e.modal.attr("id")),void 0!==e.onclose&&e.onclose&&e.onclose()},this.unload=function(){e.close(),View.unload(this.html_id)},this.listar=function(t){e.arr_segmentos=[],""!=e.edt_nome_segmento.val().trim()?WS.get("segmento/listar/",{nome:e.edt_nome_segmento.val()},function(t){e.arr_segmentos=t,e.render_lista()}):e.render_lista()},this.render_lista=function(){var t=e.tab_listagem.find("tbody"),n=t.find("tr:first");e.tab_listagem.find("tr:gt(1)").remove(),$(e.arr_segmentos).each(function(i,o){!function(i){var o=n.clone();o.removeAttr("template-row"),o.css("display",""),$(o.find("[template-field='nome_segmento']")).text(i.nome);var s=$(o.find(".btn_selecionar")),l=function(){e.onselect(i),e.unload()};s.unbind("click"),s.click(l),o.dblclick(l),o.appendTo(t)}(o)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){e.unload()}),this.edt_nome_segmento.unbind("keyup"),this.edt_nome_segmento.keyup($.debounce(500,e.listar))}});