"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,o,t){return o&&_defineProperties(e.prototype,o),t&&_defineProperties(e,t),e}function _possibleConstructorReturn(e,o){return!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(e):o}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&_setPrototypeOf(e,o)}function _setPrototypeOf(e,o){return(_setPrototypeOf=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}define(["react","react-dom"],function(e,o){return function(o){function t(e,o){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).props.ClienteSelecionado=null,n.props.FunctionSelect=null,n.props.OnChange=!1,n.props.setConfiguracoes={},n.props.setFunctionSelect=function(e){n.props.FunctionSelect=e},n.props.setCliente=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.props.OnChange=o,null!==e&&(set_value_combobox($(n.refs.cbo_cliente),e.cliente_id,e.cliente_nome),null!==n.props.OnChange&&"function"==typeof n.props.OnChange&&n.props.OnChange())},n}return _inherits(t,e.Component),_createClass(t,[{key:"componentDidMount",value:function(){this.criarCombobox()}},{key:"listarClientes",value:function(e,o,t){var n=o.parent().find(".edt_combobox"),i=$(window).width()<992,r=t.props.setConfiguracoes.main_externo,a=t.props.setConfiguracoes.WS_params||{};a.texto_pesquisa=n.val(),r&&void 0!==r.edt_representante&&""==r.edt_representante.val()?alert_modal("Atenção","Por favor, informe o Representante","Ok",function(){n.val(""),set_focus(r.edt_representante)}):WS.get("agenda_contatos/listar/",a,function(r){if(limpar_combobox(o),$(r).each(function(e,n){var r=[],a=$('<span class="label lb_tipo" style="margin: 5px;"></span>');r.Nome=""==n.nome_fantasia||null==n.nome_fantasia?n.razao_social.trim():n.nome_fantasia.trim(),null!=r.Nome&&""!=r.Nome||(r.Nome="-"),r["Razão"]=null!=n.razao_social&&""!=n.razao_social?n.razao_social.trim():"-",r["Código"]=""==n.codigo||null==n.codigo?"-":n.codigo,r.Unidade=""==n.unidade||null==n.unidade?"-":n.unidade,i||(r.CNPJ=""==n.cnpj||null==n.cnpj?"-":n.cnpj,r.Telefone=""==n.telefone||null==n.telefone?"-":n.telefone),void 0!==t.props.setConfiguracoes.exibe_tipo_entidade&&!1!==t.props.setConfiguracoes.exibe_tipo_entidade&&("C"==n.tipo?(a.addClass("label-info"),a.attr("title","Cliente")):"O"==n.tipo?(a.addClass("label-primary"),a.attr("title","Organização")):"F"==n.tipo?(a.addClass("label-warning"),a.attr("title","Fornecedor")):"E"==n.tipo&&(a.addClass("label-success"),a.attr("title","Empresa")),a.tooltip(),a.text(null!=n.tipo?n.tipo:"")),add_option_combobox(o,e,n.id>0?n.id:null,r,a,JSON.stringify(n))}),r.length>0&&e(!0),t.props.setConfiguracoes.WS_params.cadastra_novo&&(!App.verifica_permissao(App.sessao.dados.empresa_filial_id,"prospect")||""==n.val()||r.length>0?o.parent().find(".btn_novo").addClass("hidden"):o.parent().find(".btn_novo").removeClass("hidden")),i){var a,s=parent.find(".combobox");a=$(s).width()-535,$(parent).find(".multi-column-dropdown").css("left",a+"px")}else{var l=o.parent(),c=l.find(".combobox"),p=$(c).width();$(l).find(".multi-column-dropdown").css("width","900px"),p=parseInt(p)-28,$(l).find(".multi-column-dropdown").css("left","-"+p+"px")}$(o.parent()).find(".ul_row").click(function(){t.eventosCombobox(t,o,$(this).parent())})})}},{key:"criarCombobox",value:function(){create_combobox($(this.refs.cbo_cliente),this.listarClientes,null,null,this),this.criar_events($(this.refs.cbo_cliente))}},{key:"eventosCombobox",value:function(e,o,t){var n=o.parent(),i=n.find(".edt_combobox"),r=(n.find(".ncbo_scroll").find(".row_selected"),n.find(".ninput-group-btn-dropdown"),null);void 0!==t?void 0!==t.attr("dados-adicionais")&&(r=JSON.parse(t.attr("dados-adicionais"))):void 0!==i&&""!=i.val()&&void 0!==i.attr("dados-adicionais")&&(r=JSON.parse(i.attr("dados-adicionais"))),null!==r?(e.props.ClienteSelecionado=r,null!=e.props.FunctionSelect&&r&&e.props.FunctionSelect()):(e.props.ClienteSelecionado={id:null,nome_fantasia:"",tipo:""},e.props.FunctionSelect())}},{key:"criar_events",value:function(e){var o=e.parent().find(".edt_combobox"),t=this;o.keypress(function(o){13==o.keyCode&&setTimeout(function(){t.eventosCombobox(t,$(e))},150)}),o.keyup(function(o){""==o.target.value&&setTimeout(function(){t.eventosCombobox(t,$(e))},150)})}},{key:"render",value:function(){var o=!1;return void 0!==this.props.initial_values.disabled&&(o=this.props.initial_values.disabled),e.createElement("select",{ref:"cbo_cliente",className:"form-control select-multi-column",placeholder:this.props.initial_values.placeholder,disabled:o})}}]),t}()});