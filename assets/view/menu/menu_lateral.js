define([],function(){return function(){"use strict";this.show=function(){var e="assets/img/logo_transp.png?anticache="+(new Date).getTime();$("body").css("height","100vh"),$("#scrollview").css("height","calc(100vh - 32px)"),require(["./assets/view/menu/menu"],function(n){var t=(new n).menu,i=null,s=[],o="";!function e(n){for(var t=n.length;t--;){var i=0;if(n[t].submenus&&(i=n[t].submenus.length,e(n[t].submenus)),n[t].permissao){if("object"==typeof n[t].permissao&&n[t].permissao.length){var s=[];if(n[t].permissao.forEach(function(e,n){var t=App.verifica_permissao(App.temp.empresa||App.sessao.dados.empresa_filial_id,e);s.push(t)}),!s.reduce(function(e,n){return!0===e||!0===n})){n.splice(t,1);continue}}else if("string"==typeof n[t].permissao&&!App.verifica_permissao(App.temp.empresa||App.sessao.dados.empresa_filial_id,n[t].permissao)){n.splice(t,1);continue}}else{if(n[t].submenus&&0==n[t].submenus.length&&i){n.splice(t,1);continue}void 0===n[t].tags?n[t].tags="":n[t].tags+=" ",n[t].tags+=removerAcentos(n[t].nome)}}}(t),App.menu=t;var a=function(){App.drawerInstance=$("#drawer").dxDrawer({opened:!1,closeOnOutsideClick:function(e){App.drawerInstance.option("opened")&&$("#menu").trigger("click")},shading:!0,openedStateMode:"overlap",position:"left",revealMode:"slide",minSize:40,template:function(s){setTimeout(function(){s.parent().parent().css("z-index","1040")});var r=$("<div>");return i=r.dxTreeView({items:t,displayExpr:"nome",itemsExpr:"submenus",noDataText:"<div style='text-align: center' class='text-muted'><i class='icon dx-icon-close' style='font-size: 17px; vertical-align: text-top;'></i>    Sem resultados</div> ",width:300,searchEnabled:!0,searchMode:"contains",searchExpr:["nome","tags"],searchEditorOptions:{onKeyUp:function(e){""==(o=e.component.option("value"))&&(i.collapseAll(),a())},buttons:[{name:"clearCustom",location:"after",options:{hint:"Limpar pesquisa",icon:"revert",type:"normal",stylingMode:"text",elementAttr:{class:"dx-treeview-buttons"},onClick:function(){i.option("searchValue")&&(o="",i.option("searchValue",""),i.collapseAll(),a())}}},{name:"searchCustom",location:"after",options:{icon:"fas fa-bars",type:"normal",stylingMode:"text",elementAttr:{class:"dx-treeview-buttons menu-search"},onClick:function(){$("#menu").trigger("click"),i._searchEditor.focus()}}}]},onItemExpanded:function(e){App.drawerInstance.option("opened")?n(i.getNodes()):i.collapseItem(e.itemData)},onItemCollapsed:function(){n(i.getNodes())},elementAttr:{class:"dx-theme-accent-as-background-color"},itemTemplate:function(e){var n=$('<div title="'+e.nome+'">');return e.icone&&n.append('<img style="height: 20px; width: 20px;" src="'+e.icone+'">'),n.append(" "+e.nome),e.icone&&(App.drawerInstance&&App.drawerInstance.option("opened")?n.append('<img style="height: 20px; width: 20px;" class="pull-right esconderMenuRetraido hidden" src="'+e.icone+'">'):n.append('<img style="height: 20px; width: 20px;" class="pull-right esconderMenuRetraido" src="'+e.icone+'">')),n},onItemClick:function(e){var n=e.itemData;n.click&&(n.click(),App.drawerInstance.option("opened")&&$("#menu").trigger("click"))},elementAttr:{class:"dx-theme-background-color"}}).dxTreeView("instance"),r.css("min-width","250px"),r.css("max-width","600px"),r.children().last().css("height","calc(100vh - 105px)"),i._$element.prepend('<div style="text-align: center;"><img class="esconderMenuRetraido pull-right" src="assets/img/favicon.png" onError="this.onerror=null;this.src=\'assets/img/favicon.png.sample\';" style="padding-right: 5px; max-width: 35px;" /><img style="max-height: 59px; padding: 10px;" class="mostrarMenuRetraido hidden" src="'+e+'" /></div>'),r},onOptionChanged:function(e){e.value&&e.element.find(".dx-theme-background-color").parent().css("width","")}}).dxDrawer("instance"),$(".dx-drawer-content").css({height:"100vh",overflow:"hidden"});var n=function(e){setTimeout(function(){for(var t=0;t<e.length;t++){var i=e[t];i.expanded&&!s.includes(i.key)?s.push(i.key):App.drawerInstance.option("opened")&&!i.expanded&&s.includes(i.key)&&s.splice(s.indexOf(i.key),1),i.items&&n(i.items)}})},a=function(){for(var e=0;e<s.length;e++){var n=s[e];i.expandItem(n)}};$("#menu").dxButton({icon:"menu",visible:!1,onClick:function(){if(function(){if(App.drawerInstance.toggle(),void 0!==App.drawerInstance&&App.drawerInstance&&App.drawerInstance.option("opened")){var e=i._searchEditor.option("buttons");i.option("searchValue",o),e.splice(-1,1),i._searchEditor.option("buttons",e),App.drawerInstance._$element.find(".dx-drawer-shader").css("z-index","1039")}}(),App.drawerInstance.option("opened"))$(".esconderMenuRetraido").addClass("hidden"),$(".mostrarMenuRetraido").removeClass("hidden"),a();else{$(".esconderMenuRetraido").removeClass("hidden"),$(".mostrarMenuRetraido").addClass("hidden");var e=i._searchEditor.option("buttons");e.push({name:"searchCustom",location:"after",options:{icon:"fas fa-bars",type:"normal",stylingMode:"text",elementAttr:{class:"dx-treeview-buttons menu-search"},onClick:function(){$("#menu").trigger("click"),i._searchEditor.focus()}}}),i._searchEditor.option("buttons",e),i._searchEditor.option("value",""),i.collapseAll()}}})},r=function(e,n){if(View.validaExistenciaPE(e)){var t=document.createElement("script");t.setAttribute("src",WS_URI.replace("webservice/index.php","")+e+"?anticache="+(new Date).getTime()),t.onload=function(){manutencao_menu(),n()},t.onerror=function(){manutencao_menu(),n()},document.head.appendChild(t)}else n()};r("webservice/peJS/menu.pe.js",function(){r("webservice/especificos/peJS/menu.pe.js",function(){a()})})})}}});