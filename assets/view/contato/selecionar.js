define([],function(){return function(t){"use strict";var n=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.edt_nome_contato=this.dialog.find(".edt_nome_contato"),this.btn_novo=this.dialog.find(".btn_novo"),this.usuario_id=null,this.arr_contatos=[],this.show=function(t,o){n.onselect=t,show_modal(n.modal.attr("id")),set_focus(n.edt_nome_contato)},this.close=function(){close_modal(n.modal.attr("id")),void 0!==n.onclose&&n.onclose&&n.onclose()},this.unload=function(){n.close(),View.unload(this.html_id)},this.listar=function(t){n.arr_contatos=[],""!=n.edt_nome_contato.val().trim()?WS.get("contato/listar/",{nome:n.edt_nome_contato.val()},function(t){n.arr_contatos=t,n.render_lista()}):n.render_lista()},this.render_lista=function(){var t=n.tab_listagem.find("tbody"),o=t.find("tr:first");n.tab_listagem.find("tr:gt(1)").remove(),$(n.arr_contatos).each(function(i,a){!function(i){var a=o.clone();a.removeAttr("template-row"),a.css("display",""),$(a.find("[template-field='nome_contato']")).text(i.nome);var e=$(a.find(".btn_selecionar")),l=function(){n.onselect(i),n.unload()};e.unbind("click"),e.click(l),a.dblclick(l),a.appendTo(t)}(a)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){n.unload()}),this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("contato/detalhes",function(t,n){n.show(null,FORMULARIO.NOVO)},View.ABA.MULTIPLAS),n.unload()}),this.edt_nome_contato.unbind("keyup"),this.edt_nome_contato.keyup($.debounce(500,n.listar))}});