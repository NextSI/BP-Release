$.ContainerFiltroAPI=function(a,t){if(""!=a&&null!=a&&"clean"==a)for(var e=$("#"+t).find('[data-api-token*="CFApi_"]'),o=0;o<e.length;o++){var i=e[o];if($(i).attr("data-api-tipo")==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX){for(var n=$(i).find("[data-api-combobox]").find("option"),r=0;r<n.length;r++){var l=n[r];$(l).prop("selected",!0)}$(i).find("[data-api-combobox]").selectpicker("refresh")}else $(i).find("[data-api-button]").html('<span class="glyphicon glyphicon-repeat"></span> Atualizar Filtro').attr("data-limpar","false"),$(i).find("[data-api-label]").text("")}},$.fn.ContainerFiltroAPI=function(a,t){var e=!1,o=$(this).parent(),i="CFApi_"+md5(new Date+"_CFApi"),n=$(this),r=null,l=null,d=null,p=n.data("instance")||{};if(void 0!==a&&null!=a&&"object"==typeof a){$(o).attr("data-api-token",i),$(o).attr("data-api-tipo",a.tipo),a.tipo=void 0!==a.tipo&&null!=a.tipo?a.tipo:PROJETO_ATIVIDADE_TIPO_FILTRO.TEXT,void 0!==a.update&&null!=a.update&&(e=!0),a.tipo==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX&&void 0!==a.preencher&&null!=a.preencher&&a.preencher();a.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX?(r=$(o).find("[data-api-input]"),l=$(o).find("[data-api-button]").attr("data-limpar","false"),d=$(o).find("[data-api-label]").attr("data-value","")):($(n).attr("data-api-loaded","false"),l=$(o).find("[data-api-button]"),r=$(o).find("[data-api-combobox]"));if(e)a.update();else{n.unbind("click").click(function(t){t.stopPropagation();$(this).find(".dropdown-menu").toggleClass("open"),$(this).find(".dropdown-menu").toggle(),void 0!==a.onOpen&&null!=a.onOpen&&"false"==$(n).attr("data-api-loaded")&&(a.onOpen(),$(n).attr("data-api-loaded","true")),a.tipo===PROJETO_ATIVIDADE_TIPO_FILTRO.DATE&&set_datepicker($(r))});var s=function(){a.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX&&("false"==$(l).attr("data-limpar")?$(l).html('<span class="glyphicon glyphicon-repeat"></span> Atualizar Filtro'):$(l).html('<span class="glyphicon glyphicon-trash"></span> Limpar'))};s();var c=!1,f=function(e){var i="";if(a.tipo==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX){var n=$(r).val();return void 0!==t&&t(n),void(void 0!==a.executar&&null!=a.executar&&a.executar())}if(c&&a.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX&&$(l).attr("data-limpar","false"),"false"==$(l).attr("data-limpar")&&a.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX){if(""==$(r).val())return;if($(l).attr("data-limpar","true"),a.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX)i=n=$(r).val(),a.tipo==PROJETO_ATIVIDADE_TIPO_FILTRO.DATE&&(n=n.format_date()),$(d).text(n).attr("data-value",$(r).val()),$(r).val(""),void 0!==t&&t(i)}else a.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX&&($(d).text("").attr("data-value",""),$(l).attr("data-limpar","false"),void 0!==t&&t(null));s(),$(o).find(".dropdown-menu").toggleClass("open"),c=!1,void 0!==a.executar&&null!=a.executar&&a.executar()};$(l).unbind("click").click(function(){c=!1,f()}),$(r).unbind("keypress").keypress(function(a){if(13==a.which){if(""==$(r).val())return;c=!0,f()}})}p.input=r,p.params=a,p.container=o,p.botao=l,p.etiqueta_resultado=d,p.validar_botao=s,n.data("instance",p)}else if("string"==typeof a&&"val"==a){var _=t;p.params.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX?(r=$(p.container).find("[data-api-input]"),l=$(p.container).find("[data-api-button]").attr("data-limpar","false"),d=$(p.container).find("[data-api-label]").attr("data-value",""),$(l).attr("data-limpar","true"),"false"==$(l).attr("data-limpar")?$(l).html('<span class="glyphicon glyphicon-repeat"></span> Atualizar Filtro'):$(l).html('<span class="glyphicon glyphicon-trash"></span> Limpar'),p.params.tipo==PROJETO_ATIVIDADE_TIPO_FILTRO.DATE&&"string"==typeof _&&(_=_.format_date()),$(d).text(_).attr("data-value",_)):($(p.btn).attr("data-api-loaded","false"),l=$(p.container).find("[data-api-button]"),(r=$(p.container).find("[data-api-combobox]")).val(_).selectpicker("refresh"))}else if("string"==typeof a&&"clear"==a)p.params.tipo!==PROJETO_ATIVIDADE_TIPO_FILTRO.COMBOBOX?(r=$(p.container).find("[data-api-input]"),l=$(p.container).find("[data-api-button]").attr("data-limpar","false"),d=$(p.container).find("[data-api-label]").attr("data-value",""),$(l).attr("data-limpar","false"),p.validar_botao(),p.params.tipo==PROJETO_ATIVIDADE_TIPO_FILTRO.DATE&&"string"==typeof _&&(_=_.format_date()),$(d).text("").attr("data-value","")):($(p.btn).attr("data-api-loaded","false"),l=$(p.container).find("[data-api-button]"),(r=$(p.container).find("[data-api-combobox]")).val(null).selectpicker("refresh"))},$.tabela_padrao_bp_filtro=function(a,t,e){if(""!=a&&null!=a&&"clean"==a){for(var o=$("#"+t).find("[data-tabela-padrao-filtro]"),i=0;i<o.length;i++){var n=o[i];if($(n).attr("data-tipo-filtro")==TABELA_PADRAO_BP_FILTRO.SELECT)if($(n).data("instance").multiplo){for(var r=$(n).filter("select").find("option"),l=0;l<r.length;l++){var d=r[l];$(d).prop("selected",!0)}$(n).filter("select").selectpicker("refresh")}else $(n).find("option").first().prop("selected",!0),$(n).selectpicker("refresh");else $(n).val("")}if(void 0!==e&&null!=e)for(var p in e.obj_request_params)delete e.obj_request_params[p]}},$.fn.tabela_padrao_bp_filtro=function(a,t){var e=this,o=!1,i="tabela_padrao_bp_filtro_"+md5(new Date+"Api")+parseInt(10*Math.random(),10);if(void 0!==a&&null!=a&&"object"==typeof a&&(a.tipo=void 0!==a.tipo&&null!=a.tipo?a.tipo:TABELA_PADRAO_BP_FILTRO.INPUT,a.todos_extension=void 0!==a.todos_extension&&null!=a.todos_extension&&a.todos_extension,a.maxvalue=void 0!==a.maxvalue&&null!=a.maxvalue&&a.maxvalue,a.minvalue=void 0!==a.minvalue&&null!=a.minvalue&&a.minvalue,a.sincronizado_com=void 0!==a.sincronizado_com&&null!=a.sincronizado_com?a.sincronizado_com:null,a.permitir_duplicar=void 0!==a.permitir_duplicar&&null!=a.permitir_duplicar&&a.permitir_duplicar,a.tipo==TABELA_PADRAO_BP_FILTRO.SELECT)){var n=$(e).attr("multiple");n=void 0!==n,a.multiplo=n}$(e).attr("data-tabela-padrao-filtro",""),$(e).attr("data-tipo-filtro",a.tipo),$(e).attr("data-id",i),$(e).attr("id",i),$(e).data("instance",a),a.tipo===TABELA_PADRAO_BP_FILTRO.DATE&&($(e).mask("99/99/9999"),o=!0);var r=function(i){if("select"==i){var n=$(e).val(),r=[];if(a.tipo==TABELA_PADRAO_BP_FILTRO.SELECT||a.tipo==TABELA_PADRAO_BP_FILTRO.COMBOBOX){if(!a.multiplo&&void 0!==$(a.sincronizado_com).data("instance")&&!$(a.sincronizado_com).data("instance").multiplo)return $(a.sincronizado_com).val(n).selectpicker("refresh"),void t(n);if(void 0===n||""==n||null==n)return;for(var l=0;l<n.length;l++)if(-1==parseInt(n[l],10)){n=null;break}try{r=n,a.multiplo&&(n=n)}catch(a){n=null}}if(null==n){if(null!=a.sincronizado_com)if(1==$(a.sincronizado_com).data("instance").todos_extension)$(a.sincronizado_com).val(-1).selectpicker("refresh");else{var d=$(a.sincronizado_com).find("option");for(l=0;l<d.length;l++)a.multiplo&&$(d[l]).prop("selected",!0);a.multiplo||$(a.sincronizado_com).val(),$(a.sincronizado_com).selectpicker("refresh")}}else null!=a.sincronizado_com&&($(e).data("instance").todos_extension||$(e).find("option").length!=r.length||r.push(-1),a.multiplo?$(a.sincronizado_com).val(r).selectpicker("refresh"):$(a.sincronizado_com).val(n).selectpicker("refresh"));void 0!==t&&null!=t&&t(n)}else{var p;n=$(e).val();if(0==$(e).val().length)return void t(n=null);if(o&&(n=n.format_date(!0)),!1!==a.minvalue)(p=parseInt($(e).val(),10))<a.minvalue&&(p=a.minvalue),n=p,$(e).val(n);if(!1!==a.maxvalue)(p=parseInt($(e).val(),10))>a.maxvalue&&(p=a.maxvalue),n=p,$(e).val(n);void 0!==t&&null!=t&&t(n)}};if(a.tipo!=TABELA_PADRAO_BP_FILTRO.SELECT&&a.tipo!=TABELA_PADRAO_BP_FILTRO.COMBOBOX)a.tipo!=TABELA_PADRAO_BP_FILTRO.DATE?$(e).unbind("keyup").keyup($.debounce(500,r)):$(e).unbind("keypress").keypress(function(a){13==a.which&&r()});else if(a.tipo==TABELA_PADRAO_BP_FILTRO.SELECT){a.todos_extension?$(e).Todos_Extension():$(e).unbind("change").change(function(a){r("select")}),a.todos_extension&&a.multiplo&&setTimeout(function(){try{$(e).data("selectpicker").$newElement.on("hide.bs.dropdown",function(a){r("select")}),clearTimeout(this)}catch(a){}},300)}},$.fn.Tabela_Padrao_Next=function(a){var t=$(this);if(void 0===t||null==t)return!1;t.attr("Tabela_Padrao_Next","");var e="Tabela_Padrao_Next_"+($("[Tabela_Padrao_Next]").length+1);return t.attr("id",e),{id:e,tabela:t,head_filtro:t.find("thead .filtro_container"),head:t.find("thead"),body:t.find("tbody"),footer:t.find("tfoot"),obj_request_params:void 0!==a&&null!=a?a.requisicao_params:{},totalizador:0}},$.Tabela_Padrao_Next=function(){},$.Tabela_Padrao_Next.Rows=function(){},$.Tabela_Padrao_Next.Filtros=function(){},$.Tabela_Padrao_Next.create_row=function(a){if(a){var t=$(a.body).find("[template-row]").clone();return t.removeAttr("template-row").removeClass("hidden"),t}console.warn("Desculpe, n達o foi possivel criar uma instancia com o seletor informado, verifique o seletor")},$.Tabela_Padrao_Next.Rows.RemoveAt=function(a,t){a?(a.totalizador--,a.footer.find('[template-field="totalizador"]').text(a.totalizador),a.body.find("tr:not([template-row])").eq(t).remove()):console.warn("Desculpe, n達o foi possivel criar uma instancia com o seletor informado, verifique o seletor")},$.Tabela_Padrao_Next.clear=function(a){a?(a.totalizador=0,a.footer.find("[template-field=totalizador]").text(a.totalizador),a.body.find("tr:not([template-row])").remove()):console.warn("Desculpe, n達o foi possivel criar uma instancia com o seletor informado, verifique o seletor")},$.Tabela_Padrao_Next.getColumn=function(a,t){return a.find("."+t)},$.Tabela_Padrao_Next.addEvent=function(a,t){a.unbind(t.nome).bind(t.nome,t.func)},$.Tabela_Padrao_Next.RenderRow=function(a,t,e){if(a)return $.Tabela_Padrao_Next._renderAction(a,t),a.totalizador++,a.footer.find("[template-field=totalizador]").text(a.totalizador),void 0!==e&&null!=e&&e>0&&a.body.find('tr[elem-key="'+e+'"]').length>0?a.body.find('tr[elem-key="'+e+'"]').after(t):a.body.append(t);console.warn("Desculpe, n達o foi possivel criar uma instancia com o seletor informado, verifique o seletor")},$.Tabela_Padrao_Next.RenderAt=function(a,t,e){a?($.Tabela_Padrao_Next._renderAction(a,t),a.totalizador++,a.footer.find("[template-field=totalizador]").text(a.totalizador),a.body.find("tr:not([template-row])").eq(e).length>0?a.body.find("tr:not([template-row])").eq(e).before(t):a.body.append(t)):console.warn("Desculpe, n達o foi possivel criar uma instancia com o seletor informado, verifique o seletor")},$.Tabela_Padrao_Next.Rows.getIndex=function(a){if(a)return a.index()-1||0;console.warn("Desculpe, n達o foi possive encontrar a linha solicitada")},$.Tabela_Padrao_Next.Rows.ElementAt=function(a,t){if(a)return a.body.find("tr:not([template-row])").eq(t);console.warn("Desculpe, n達o foi possivel criar uma instancia com o seletor informado, verifique o seletor")},$.Tabela_Padrao_Next.Filtros.Start=function(a,t,e){var o=[],i={tipo:TABELA_PADRAO_BP_FILTRO.INPUT,todos_extension:null,maxvalue:null,minvalue:null};t=extender_parametros(i,t),void 0!==e&&null!=e||(e=function(){}),a.head.find(".filtro_container th").each(function(a,e){var i=$(e).find("[data-bp-filtro-column]").attr("data-bp-filtro-column");if(o[i]={nome_campo:null,params_filtro:{}},$(e).find("input, select").length>0)for(var n in t)void 0!==t[i]&&(o[i].params_filtro=t[i]);$(e).find("[data-bp-filtro-column]").length>0&&(o[i].nome_campo=i)}),a.head.find(".filtro_container th").each(function(t,i){var n=$(i).find("[data-bp-filtro-column]").attr("data-bp-filtro-column");$(i).find("input,select").tabela_padrao_bp_filtro(o[n].params_filtro,function(t){null==t||null===t||void 0!==a.obj_request_params[o[n].nome_campo]?delete a.obj_request_params[o[n].nome_campo]:a.obj_request_params[o[n].nome_campo]=t,e(a.obj_request_params,t,n)})})},$.Tabela_Padrao_Next.validar=function(a){},$.Tabela_Padrao_Next._renderAction=function(a,t){};