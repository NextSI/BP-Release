"use strict";define(["react","react-dom"],function(e,t){return class extends e.Component{constructor(e,t){super(e,t),this.props.objEntidade={},this.props.mainExterno=null,this.props.listar=((e,t)=>{this.listar(e,t)}),this.state={arr_tabela_precos:[],arr_tabela_precos_filtrados:[],html_body:[]}}componentDidMount(){this.criarCombobox()}listar(e,t){let a=this;WS.get("tabela_preco_entidade/listar_tabelas_preco/",{tipo_entidade:t,entidade_id:e},function(e){a.setState({arr_tabela_precos:e}),a.props.mainExterno.arr_tabela_precos=a.state.arr_tabela_precos})}criarCombobox(){create_combobox($(this.refs.cbo_tabela_preco),this.listarDadosCombobox,null,null,this)}listarDadosCombobox(e,t,a){let r=t.parent().find(".edt_combobox");WS.get("tabela_precos/listar/",{entidade_tipo:a.props.objEntidade.tipo,entidade_id:a.props.objEntidade.id,descricao:r.val()},function(r){limpar_combobox(t),$(r).each(function(e,a){let r=[];r.Nome=a.descricao,add_option_combobox(t,e,a.tabela_precos_id,r,null,JSON.stringify(a))}),r.length>0&&e(!0),$(t.parent()).find(".ul_row").click(function(e){a.addTabelaPreco(e)})})}addTabelaPreco(e){var t=null,a=[];t=void 0===$(e.target).parent().parent().attr("dados-adicionais")?JSON.parse($(e.target).parent().parent().parent().attr("dados-adicionais")):JSON.parse($(e.target).parent().parent().attr("dados-adicionais")),this.state.arr_tabela_precos.map(e=>e.tabela_precos_id).indexOf(t.tabela_precos_id)<0&&((a=this.state.arr_tabela_precos).push(t),this.setState({arr_tabela_precos:a}),this.props.mainExterno.arr_tabela_precos=this.state.arr_tabela_precos)}excluirTabelaPreco(e,t){alert_modal("Atenção","Deseja remover essa tabela de preço?","Remover",function(){let a=Object.assign({},t.state).arr_tabela_precos;a.splice(e,1),t.setState({arr_tabela_precos:a}),t.props.mainExterno.arr_tabela_precos=t.state.arr_tabela_precos})}render(){let t=this;return e.createElement("div",null,e.createElement("br",null),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-6"},e.createElement("label",null,"Incluir Tabela de Preço"),e.createElement("select",{ref:"cbo_tabela_preco",className:"form-control select-multi-column cbo_tabela_preco",placeholder:"Digite o nome"}))),e.createElement("br",null),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-12"},e.createElement("div",{className:"div_tabela_preco form-group",id:"div_tabela_preco"},e.createElement("table",{className:"tab_listagem_tabela_preco table",ref:"tab_listagem_tabela_preco"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Nome"),e.createElement("th",null,e.createElement("div",{className:"pull-right"},e.createElement("button",{type:"button",className:"btn_incluir_tabela_preco hidden btn btn-default"},e.createElement("span",{className:"glyphicon glyphicon-plus"})))))),e.createElement("tbody",null,this.state.arr_tabela_precos.map(function(a,r){return e.createElement("tr",{"template-row":!0,key:r},e.createElement("td",{"template-field":"descricao"},a.descricao),e.createElement("td",{"template-buttons":"actions"},e.createElement("div",{className:"btn-group pull-right"},e.createElement("button",{type:"button",className:"btn_deletar_tabela_preco btn btn-default",onClick:e=>t.excluirTabelaPreco(r,t)},e.createElement("span",{className:"glyphicon glyphicon-trash"})))))})))))))}}});