define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.div_alert=this.dialog.find(".div_alert"),this.tab_documentos=this.dialog.find(".tab_documentos"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.show=function(t){i.listar(t),show_modal(i.modal.attr("id"))},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id)},this.listar=function(t){var o=i.tab_documentos.find("tbody").find("tr:first");WS.get("documento/get_by_atividade_projeto/",{projeto_atividade_id:t},function(t){t.length>0?(i.tab_documentos.removeClass("hidden"),$(t).each(function(t,d){!function(t){var d=o.clone();d.removeAttr("template-row"),d.css("display",""),$(d.find("[template-field='autor']")).text(t.autor),$(d.find("[template-field='documento']")).text(t.nome),$(d.find("[template-field='modificacao']")).text(t.revisao_data_envio.format_date_time()),$(d.find("[template-field='tamanho']")).text(filesize(parseInt(t.revisao_tamanho,10)||0)),$(d.find("[template-field='btn_download']")).click(function(){App.obter_token_publico(function(i){App.download(WS_URI+"documento/download/?documento_revisao_id="+t.documento_revisao_id+"&token_publico="+i)})}),d.appendTo(i.tab_documentos)}(d)})):(i.tab_documentos.addClass("hidden"),i.div_alert.removeClass("hidden"))})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()})}});