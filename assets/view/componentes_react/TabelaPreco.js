"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}define(["react","react-dom"],function(e,t){return function(t){function a(e,t){var r;return _classCallCheck(this,a),(r=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,e,t))).props.objEntidade={},r.props.mainExterno=null,r.props.listar=function(e,t){r.listar(e,t)},r.state={arr_tabela_precos:[],arr_tabela_precos_filtrados:[],html_body:[]},r}return _inherits(a,e.Component),_createClass(a,[{key:"componentDidMount",value:function(){this.criarCombobox()}},{key:"listar",value:function(e,t){var a=this;WS.get("tabela_preco_entidade/listar_tabelas_preco/",{tipo_entidade:t,entidade_id:e},function(e){a.setState({arr_tabela_precos:e}),a.props.mainExterno.arr_tabela_precos=a.state.arr_tabela_precos})}},{key:"criarCombobox",value:function(){create_combobox($(this.refs.cbo_tabela_preco),this.listarDadosCombobox,null,null,this)}},{key:"listarDadosCombobox",value:function(e,t,a){var r=t.parent().find(".edt_combobox");WS.get("tabela_precos/listar/",{entidade_tipo:a.props.objEntidade.tipo,entidade_id:a.props.objEntidade.id,descricao:r.val()},function(r){limpar_combobox(t),$(r).each(function(e,a){var r=[];r.Nome=a.descricao,add_option_combobox(t,e,a.tabela_precos_id,r,null,JSON.stringify(a))}),r.length>0&&e(!0),$(t.parent()).find(".ul_row").click(function(e){a.addTabelaPreco(e)})})}},{key:"addTabelaPreco",value:function(e){var t=null,a=[];t=void 0===$(e.target).parent().parent().attr("dados-adicionais")?JSON.parse($(e.target).parent().parent().parent().attr("dados-adicionais")):JSON.parse($(e.target).parent().parent().attr("dados-adicionais")),this.state.arr_tabela_precos.map(function(e){return e.tabela_precos_id}).indexOf(t.tabela_precos_id)<0&&((a=this.state.arr_tabela_precos).push(t),this.setState({arr_tabela_precos:a}),this.props.mainExterno.arr_tabela_precos=this.state.arr_tabela_precos)}},{key:"excluirTabelaPreco",value:function(e,t){alert_modal("Atenção","Deseja remover essa tabela de preço?","Remover",function(){var a=Object.assign({},t.state).arr_tabela_precos;a.splice(e,1),t.setState({arr_tabela_precos:a}),t.props.mainExterno.arr_tabela_precos=t.state.arr_tabela_precos})}},{key:"render",value:function(){var t=this;return e.createElement("div",null,e.createElement("br",null),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-6"},e.createElement("label",null,"Incluir Tabela de Preço"),e.createElement("select",{ref:"cbo_tabela_preco",className:"form-control select-multi-column cbo_tabela_preco",placeholder:"Digite o nome"}))),e.createElement("br",null),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-md-12"},e.createElement("div",{className:"div_tabela_preco form-group",id:"div_tabela_preco"},e.createElement("table",{className:"tab_listagem_tabela_preco table",ref:"tab_listagem_tabela_preco"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Nome"),e.createElement("th",null,e.createElement("div",{className:"pull-right"},e.createElement("button",{type:"button",className:"btn_incluir_tabela_preco hidden btn btn-default"},e.createElement("span",{className:"glyphicon glyphicon-plus"})))))),e.createElement("tbody",null,this.state.arr_tabela_precos.map(function(a,r){return e.createElement("tr",{"template-row":!0,key:r},e.createElement("td",{"template-field":"descricao"},a.descricao),e.createElement("td",{"template-buttons":"actions"},e.createElement("div",{className:"btn-group pull-right"},e.createElement("button",{type:"button",className:"btn_deletar_tabela_preco btn btn-default",onClick:function(e){return t.excluirTabelaPreco(r,t)}},e.createElement("span",{className:"glyphicon glyphicon-trash"})))))})))))))}}]),a}()});