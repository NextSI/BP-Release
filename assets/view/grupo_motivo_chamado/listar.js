define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Grupo de Motivos",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.btn_configuracoes=this.dialog.find(".btn_configuracoes"),this.listar=function(){App.sessao.dados.admin||t.btn_configuracoes.addClass("hidden");var i=t.tab_listagem.find("tbody"),o=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),WS.get("grupo_motivo_chamado/listar/",{},function(n){$(n).each(function(n,a){!function(n){var a=o.clone();a.removeAttr("template-row"),a.css("display",""),$(a.find("[template-field='nome']")).text(n.nome);var s=$(a.find(".btn_editar")),c=function(){View.load("grupo_motivo_chamado/detalhes",function(i,o){o.onclose=t.listar,o.show(n.grupo_id,FORMULARIO.EDITAR)})};s.unbind("click"),s.click(c),a.dblclick(c);var l=$(a.find(".btn_visualizar"));l.unbind("click"),l.click(function(){View.load("grupo_motivo_chamado/detalhes",function(i,t){t.show(n.grupo_id,FORMULARIO.VISUALIZAR)})});var d=$(a.find(".btn_excluir"));d.unbind("click"),d.click(function(){View.load("grupo_motivo_chamado/detalhes",function(i,o){o.onclose=t.listar,o.show(n.grupo_id,FORMULARIO.EXCLUIR)})}),a.appendTo(i)}(a)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("grupo_motivo_chamado/detalhes",function(i,o){o.onclose=t.listar,o.show(null,FORMULARIO.NOVO)})}),this.btn_configuracoes.unbind("click"),this.btn_configuracoes.click(function(){if(!App.sessao.dados.admin)return alert_modal("Validação","Sem permissão para alterar as configurações!","Ok",function(){return!1}),!1;View.load("grupo_motivo_chamado/configuracao",function(i,o){o.show(),o.onclose=function(){t.listar()}})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});