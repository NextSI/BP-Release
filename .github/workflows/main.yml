on: 
  push:
    branches:
      - 23@7.2
name: ðŸš€ Deploy on push versÃ£o 23 PHP 7.2
jobs:
  web-deploy:
    name: ðŸŽ‰ Deploy v23 PHP 7.2
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout@v4
    
    - name: ðŸ“‚ Sync files PortalDemo
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5
      with:
        server: ${{ secrets.FTP_HOST_PORTALPRODHOMOLOG }}
        username: ${{ secrets.FTP_USERNAME_PORTALHOMOLOG }}
        password: ${{ secrets.FTP_PASSWORD_PORTALPRODHOMOLOG }}
        server-dir: ./

    - name: ðŸ”— Call API after deploy PortalDemo
      run: |
        curl -f -X POST "${{ secrets.FTP_URL_DBU_HOMOLOG }}${{ secrets.SUFIXO_DBU_API }}" \
        -H "Content-Type: application/json" \
        -H "Dbutoken: ${{ secrets.DBU_API_TOKEN }}" \
        -d '{"status": "success", "message": "FTP deploy complete"}'