define([],function(){return function(a){"use strict";var o=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.title="Calendários de Trabalho",this.grid_calendario_trabalho=this.dialog.find(".grid_calendario_trabalho"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){WS.get("calendario_trabalho/listar/",null,function(a){o.monta_grid(a)})},this.monta_grid=function(a){var t=document.createElement("div");t.className="div_listagem_calendario_trabalho",t.style="min-width: 100%;",o.grid_calendario_trabalho.find(".div_listagem_calendario_trabalho").remove(),o.grid_calendario_trabalho[0].appendChild(t);var i=detectmob()?"select":"dragAndDrop",e=get_icon_class();o.grid_calendario_trabalho.find(".div_listagem_calendario_trabalho").css("height","calc(100vh - 42px)"),o.grid_calendario_trabalho.find(".div_listagem_calendario_trabalho").dxDataGrid({dataSource:a,allowColumnReordering:!0,showBorders:!0,columnResizingMode:"widget",rowAlternationEnabled:!1,searchPanel:{visible:!detectmob(),width:200,placeholder:"Pesquisa geral"},paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},allowColumnReordering:!0,allowColumnResizing:!0,columnChooser:{enabled:!0,allowSearch:!0,mode:i},stateStoring:{enabled:!0,type:"custom",customLoad:function(){return App.get_parametro_usuario("listagem_calendario_trabalho")},customSave:function(a){App.set_parametro_usuario("listagem_calendario_trabalho",a)}},selection:{mode:"multiple"},export:{enabled:!0,fileName:"Relatório de Calendário de Trabalho "+agora(),allowExportSelectedData:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},filterPanel:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!0},columnFixing:{enabled:!0},onToolbarPreparing:function(a){var t=[{widget:"dxButton",options:{icon:"fa fa-plus",hint:"Novo calendário",text:"Novo calendário",onClick:function(){View.load("calendario_trabalho/detalhes",function(a,t){t.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==o.html_id&&o.listar()})},t.show(null,FORMULARIO.NOVO)})}},location:"after",name:"BtnNovoChamado",locateInMenu:"auto"},{widget:"dxButton",options:{icon:"fa fa-sync",hint:"Recarregar listagem de calendário de trabalho",text:"Recarregar listagem de calendário de trabalho",onClick:function(){o.listar()}},showText:"inMenu",location:"after",name:"BtnRefresh",locateInMenu:"auto"}];a.toolbarOptions.items=add_botao_dx_toolbar(t,a.toolbarOptions.items)},onContentReady:function(a){add_filtro_cor_tema(a)},columns:[{caption:"Nome",dataField:"nome"},{type:"buttons",width:"140",buttons:[{hint:"Editar",icon:"edit",cssClass:e,onClick:function(a){View.load("calendario_trabalho/detalhes",function(t,i){i.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==o.html_id&&o.listar()})},i.show(a.row.data.calendario_trabalho_id,FORMULARIO.EDITAR)})}},{hint:"Visualizar",icon:"fa fa-eye",cssClass:e,onClick:function(a){View.load("calendario_trabalho/detalhes",function(o,t){t.show(a.row.data.calendario_trabalho_id,FORMULARIO.VISUALIZAR)})}},{hint:"Clonar",icon:"fa fa-clone",cssClass:e,onClick:function(a){View.load("calendario_trabalho/clonar",function(t,i){i.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==o.html_id&&o.listar()})},i.show(a.row.data.nome,a.row.data.calendario_trabalho_id)})}},{hint:"Excluir",icon:"fa fa-trash",cssClass:e,onClick:function(a){View.load("calendario_trabalho/detalhes",function(t,i){i.onclose=function(){setTimeout(function(){View.get_md5_tela_ativa()==o.html_id&&o.listar()})},i.show(a.row.data.calendario_trabalho_id,FORMULARIO.EXCLUIR)})}}]}]})},this.unload=function(){View.unload(this.html_id)},this.listar()}});