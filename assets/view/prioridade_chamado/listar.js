define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Prioridades do Chamado",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){var i=t.tab_listagem.find("tbody"),n=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),WS.get("chamado_prioridades/listar/",null,function(d){$(d).each(function(d,a){!function(d){var a=n.clone();a.removeAttr("template-row"),a.css("display",""),$(a.find("[template-field='nome']")).text(d.nome);var o=$(a.find("[template-field='padrao']"));"S"==d.padrao&&o.addClass("glyphicon-ok");var e=$(a.find(".btn_visualizar"));e.unbind("click"),e.click(function(){View.load("prioridade_chamado/detalhes",function(i,t){t.show(d.prioridade_id,FORMULARIO.VISUALIZAR)})});var r=$(a.find(".btn_editar")),l=function(){View.load("prioridade_chamado/detalhes",function(i,n){n.onclose=t.listar,n.show(d.prioridade_id,FORMULARIO.EDITAR)})};r.unbind("click"),r.click(l),a.dblclick(l);var c=$(a.find(".btn_excluir"));c.unbind("click"),c.click(function(){View.load("prioridade_chamado/detalhes",function(i,n){n.onclose=t.listar,n.show(d.prioridade_id,FORMULARIO.EXCLUIR)})});var s=a.find("[template-button='order_down']"),h=a.find("[template-button='order_up']");s.unbind("click"),s.click(function(){WS.get("chamado_prioridades/change_order/",{prioridade_id:d.prioridade_id,type:"down"},function(i){t.listar()},[h,s])}),h.unbind("click"),h.click(function(){WS.get("chamado_prioridades/change_order/",{prioridade_id:d.prioridade_id,type:"up"},function(i){t.listar()},[h,s])}),a.appendTo(i)}(a)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("prioridade_chamado/detalhes",function(i,n){n.onclose=t.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});