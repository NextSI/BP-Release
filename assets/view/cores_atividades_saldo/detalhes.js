define([],function(){return function(i){"use strict";var o=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.edt_inicio=this.dialog.find(".edt_inicio"),this.edt_fim=this.dialog.find(".edt_fim"),this.cb_color_fonte=this.dialog.find(".cb_color_fonte"),this.cb_color=this.dialog.find(".cb_color"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.logo_id=null,this.cores_atividades_saldo_id=null,this.show=function(i,t){switch(o.cb_color.dxColorBox({value:"#fff"}),o.cb_color_fonte.dxColorBox({value:"#fff"}),t){case FORMULARIO.NOVO:case FORMULARIO.EDITAR:o.btn_salvar.show(),o.btn_excluir.hide(),o.permite_alterar(!0);break;case FORMULARIO.VISUALIZAR:o.btn_salvar.hide(),o.btn_excluir.hide(),o.permite_alterar(!1);break;case FORMULARIO.EXCLUIR:o.btn_salvar.hide(),o.btn_excluir.show(),o.permite_alterar(!1)}o.tipo=t,void 0!==i&&i&&(o.cores_atividades_saldo_id=i,o.preencher()),show_modal(o.modal.attr("id")),set_focus(o.edt_inicio)},this.close=function(){close_modal(o.modal.attr("id")),void 0!==o.onclose&&o.onclose&&o.onclose()},this.unload=function(){o.close(),View.unload(this.html_id)},this.permite_alterar=function(i){o.edt_inicio.prop("readonly",!i),o.edt_fim.prop("readonly",!i),o.cb_color.dxColorBox({disabled:!i}),o.cb_color_fonte.dxColorBox({disabled:!i})},this.preencher=function(){WS.get("cores_atividades_saldo/objeto/",{cores_atividades_saldo_id:o.cores_atividades_saldo_id},function(i){o.edt_inicio.val(i.inicio),o.edt_fim.val(i.fim),o.cb_color.dxColorBox({value:i.cor}),o.cb_color_fonte.dxColorBox({value:i.cor_fonte})})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){o.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){var i={cores_atividades_saldo_id:o.cores_atividades_saldo_id,inicio:o.edt_inicio.val(),fim:o.edt_fim.val(),cor:o.cb_color.dxColorBox("instance").option("value"),cor_fonte:o.cb_color_fonte.dxColorBox("instance").option("value")};WS.post("cores_atividades_saldo/salvar",i,function(i){o.cores_atividades_saldo_id=i.cores_atividades_saldo_id,alert_saved("Operação realizada com sucesso"),o.unload()},[o.btn_excluir,o.btn_salvar,o.btn_cancelar])}),this.btn_excluir.unbind("click"),this.btn_excluir.click(function(){WS.post("cores_atividades_saldo/excluir",{cores_atividades_saldo_id:o.cores_atividades_saldo_id},function(i){alert_saved("Operação realizada com sucesso"),o.unload()})})}});