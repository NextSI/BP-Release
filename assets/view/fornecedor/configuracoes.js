define([],function(){return function(o){"use strict";var i=this;this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.chk_gerar_codigo=this.dialog.find(".chk_gerar_codigo"),this.edt_codigo_zeros_esquerda=this.dialog.find(".edt_codigo_zeros_esquerda"),this.chk_codigo_unidade_repetidos=this.dialog.find(".chk_codigo_unidade_repetidos"),this.chk_razao_social=this.dialog.find(".chk_razao_social"),this.chk_nome_fantasia=this.dialog.find(".chk_nome_fantasia"),this.chk_tipo=this.dialog.find(".chk_tipo"),this.chk_cep=this.dialog.find(".chk_cep"),this.chk_endereco=this.dialog.find(".chk_endereco"),this.chk_numero=this.dialog.find(".chk_numero"),this.chk_bairro=this.dialog.find(".chk_bairro"),this.chk_municipio=this.dialog.find(".chk_municipio"),this.chk_pais=this.dialog.find(".chk_pais"),this.chk_inscricao_estadual=this.dialog.find(".chk_inscricao_estadual"),this.chk_cnpj=this.dialog.find(".chk_cnpj"),this.cbo_vincular_form=this.dialog.find(".cbo_vincular_form"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.formulario_id=null,this.formulario_alterado_id=null,this.show=function(o){i.preencher(),show_modal(i.modal.attr("id"))},this.preencher=function(){WS.get("fornecedor/get_parametros/",null,function(o){i.chk_gerar_codigo.prop("checked","S"==o.fornecedor_codigo_automatico).change(),i.edt_codigo_zeros_esquerda.val(o.fornecedor_codigo_zeros_esquerda),i.chk_codigo_unidade_repetidos.prop("checked","S"==o.fornecedor_codigo_unidade_repetidos).change(),i.chk_razao_social.prop("checked","S"==o.fornecedor_obrig_razao_social).change(),i.chk_nome_fantasia.prop("checked","S"==o.fornecedor_obrig_nome_fantasia).change(),i.chk_tipo.prop("checked","S"==o.fornecedor_obrig_tipo).change(),i.chk_cep.prop("checked","S"==o.fornecedor_obrig_cep).change(),i.chk_endereco.prop("checked","S"==o.fornecedor_obrig_endereco).change(),i.chk_numero.prop("checked","S"==o.fornecedor_obrig_numero).change(),i.chk_bairro.prop("checked","S"==o.fornecedor_obrig_bairro).change(),i.chk_municipio.prop("checked","S"==o.fornecedor_obrig_municipio).change(),i.chk_pais.prop("checked","S"==o.fornecedor_obrig_pais).change(),i.chk_cnpj.prop("checked","S"==o.fornecedor_obrig_cnpj).change(),i.chk_inscricao_estadual.prop("checked","S"==o.fornecedor_obrig_inscricao_estadual).change(),i.formulario_id=o.formulario_fornecedor_id,i.formulario_alterado_id=o.formulario_fornecedor_id,i.render_formulario(i.formulario_id)})},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id)},this.render_formulario=function(o){WS.get("formulario/listar/",{tipo_formulario:TIPO_FORMULARIO.CADASTRO_PERSONALIZADO},function(r){i.cbo_vincular_form.find("option").remove(),add_option(i.cbo_vincular_form,"0","Nenhum"),$(r).each(function(r,e){add_option(i.cbo_vincular_form,e.formulario_id,e.nome),i.formulario_id==e.formulario_id&&e.nome,o&&i.cbo_vincular_form.val(o).trigger("change"),i.cbo_vincular_form.selectpicker("refresh")})})},this.cbo_vincular_form.on("change",function(o){i.formulario_alterado_id=$(this).val()}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){var o=function(){WS.post("fornecedor/salvar_configuracoes_fornecedor",{fornecedor_codigo_automatico:i.chk_gerar_codigo.prop("checked"),fornecedor_codigo_zeros_esquerda:i.edt_codigo_zeros_esquerda.val(),fornecedor_codigo_unidade_repetidos:i.chk_codigo_unidade_repetidos.prop("checked"),fornecedor_obrig_razao_social:i.chk_razao_social.prop("checked"),fornecedor_obrig_nome_fantasia:i.chk_nome_fantasia.prop("checked"),fornecedor_obrig_tipo:i.chk_tipo.prop("checked"),fornecedor_obrig_cep:i.chk_cep.prop("checked"),fornecedor_obrig_endereco:i.chk_endereco.prop("checked"),fornecedor_obrig_numero:i.chk_numero.prop("checked"),fornecedor_obrig_bairro:i.chk_bairro.prop("checked"),fornecedor_obrig_municipio:i.chk_municipio.prop("checked"),fornecedor_obrig_pais:i.chk_pais.prop("checked"),fornecedor_obrig_cnpj:i.chk_cnpj.prop("checked"),fornecedor_obrig_inscricao_estadual:i.chk_inscricao_estadual.prop("checked"),formulario_fornecedor_id:i.formulario_id},function(o){alert_saved("Configurações salvas com sucesso"),i.unload()})};i.formulario_alterado_id!=i.formulario_id&&null!=i.formulario_alterado_id?(i.formulario_id=i.formulario_alterado_id,alert_modal("Atenção","Tem certeza que deseja alterar o Formulário vinculado ao Cadastro de Fornecedor?","Confirmar",o,!0,"Cancelar",null,null,"modal-lg")):o()}),this.chk_gerar_codigo.unbind("change"),this.chk_gerar_codigo.change(function(o){i.edt_codigo_zeros_esquerda.prop("readonly",!i.chk_gerar_codigo.prop("checked"))})}});