define([],function(){return function(e){"use strict";var a=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.edt_nome=this.dialog.find(".edt_nome"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.cbo_empresa=this.dialog.find(".cbo_empresa"),this.div_empresa=this.dialog.find(".div_empresa"),this.chk_gestao_documentos=this.dialog.find(".chk_gestao_documentos"),this.tbody_gestao_documentos=this.dialog.find(".tbody_gestao_documentos"),this.tbody_gestao_processos=this.dialog.find(".tbody_gestao_processos"),this.chk_gestao_processos=this.dialog.find(".chk_gestao_processos"),this.chk_gestao_relacionamento=this.dialog.find(".chk_gestao_relacionamento"),this.tbody_gestao_relacionamento=this.dialog.find(".tbody_gestao_relacionamento"),this.chk_rede_social=this.dialog.find(".chk_rede_social"),this.tbody_rede_social=this.dialog.find(".tbody_rede_social"),this.tab_sistema=this.dialog.find(".tab_sistema"),this.chk_cliente=this.dialog.find(".chk_cliente"),this.chk_cliente_somente_leitura=this.dialog.find(".chk_cliente_somente_leitura"),this.chk_fornecedor=this.dialog.find(".chk_fornecedor"),this.chk_fornecedor_somente_leitura=this.dialog.find(".chk_fornecedor_somente_leitura"),this.chk_prospect=this.dialog.find(".chk_prospect"),this.chk_prospect_somente_leitura=this.dialog.find(".chk_prospect_somente_leitura"),this.lbl_tab_especificos=this.dialog.find(".lbl_tab_especificos"),this.tab_especificos=this.dialog.find(".tab_especificos"),this.tbody_gestao_agenda=this.dialog.find(".tbody_gestao_agenda"),this.tr_agenda=this.dialog.find(".tr_agenda"),this.tr_manutencao_agenda=this.dialog.find(".tr_manutencao_agenda"),this.tr_manutencao_propria_agenda=this.dialog.find(".tr_manutencao_propria_agenda"),this.tr_agenda_contatos=this.dialog.find(".tr_agenda_contatos"),this.tr_todas_agendas=this.dialog.find(".tr_todas_agendas"),this.tr_agenda_grupo_usuario=this.dialog.find(".tr_agenda_grupo_usuario"),this.chk_agenda=this.dialog.find(".chk_agenda"),this.tr_tipo_agenda=this.dialog.find(".tr_tipo_agenda"),this.tr_locais_agenda=this.dialog.find(".tr_locais_agenda"),this.tr_mensagem_agenda=this.dialog.find(".tr_mensagem_agenda"),this.chk_agenda_grupo_usuarios=this.dialog.find(".chk_agenda_grupo_usuarios"),this.chk_todas_agendas=this.dialog.find(".chk_todas_agendas"),this.chk_manutencao_agenda_todas=this.dialog.find(".chk_manutencao_agenda_todas"),this.chk_manutencao_agenda_propria=this.dialog.find(".chk_manutencao_agenda_propria"),this.chk_manutencao_agenda_ativo=this.dialog.find(".chk_manutencao_agenda_ativo"),this.tr_reclassificar_chamado=this.dialog.find(".tr_reclassificar_chamado"),this.tr_relatorio=this.dialog.find(".tr_relatorio"),this.tr_motivos_chamado=this.dialog.find(".tr_motivos_chamado"),this.tr_grupo_motivos=this.dialog.find(".tr_grupo_motivos"),this.tr_classificacao_chamado=this.dialog.find(".tr_classificacao_chamado"),this.chk_gestao_chamados=this.dialog.find(".chk_gestao_chamados"),this.tbody_gestao_chamados=this.dialog.find(".tbody_gestao_chamados"),this.painel_sistema=this.dialog.find(".painel_sistema"),this.painel_gestao_processos=this.dialog.find(".painel_gestao_processos"),this.painel_gestao_documentos=this.dialog.find(".painel_gestao_documentos"),this.painel_gestao_agenda=this.dialog.find(".painel_gestao_agenda"),this.painel_gestao_projetos=this.dialog.find(".painel_gestao_projetos"),this.painel_gestao_pdca=this.dialog.find(".painel_gestao_pdca"),this.painel_gestao_chamados=this.dialog.find(".painel_gestao_chamados"),this.painel_gestao_relacionamento=this.dialog.find(".painel_gestao_relacionamento"),this.painel_rede_social=this.dialog.find(".painel_rede_social"),this.painel_detalhes=this.dialog.find(".painel_detalhes"),this.painel_especificos=this.dialog.find(".painel_especificos"),this.painel_gestao_tarefas=this.dialog.find(".painel_gestao_tarefas"),this.painel_central_pendencias=this.dialog.find(".painel_central_pendencias"),this.painel_gestao_cubos=this.dialog.find(".painel_gestao_cubos"),this.painel_ead_plataforma=this.dialog.find(".painel_ead_plataforma"),this.menu_sistema=this.dialog.find(".menu_sistema"),this.menu_agenda=this.dialog.find(".menu_agenda"),this.menu_processos=this.dialog.find(".menu_processos"),this.menu_documentos=this.dialog.find(".menu_documentos"),this.menu_projetos=this.dialog.find(".menu_projetos"),this.menu_pdca=this.dialog.find(".menu_pdca"),this.menu_chamados=this.dialog.find(".menu_chamados"),this.menu_relacionamento=this.dialog.find(".menu_relacionamento"),this.menu_social=this.dialog.find(".menu_social"),this.menu_especificos=this.dialog.find(".menu_especificos"),this.menu_gestao_tarefas=this.dialog.find(".menu_gestao_tarefas"),this.menu_central_pendencias=this.dialog.find(".menu_central_pendencias"),this.menu_gestao_cubos=this.dialog.find(".menu_gestao_cubos"),this.menu_ead_plataforma=this.dialog.find(".menu_ead_plataforma"),this.chk_gestao_projetos=this.dialog.find(".chk_gestao_projetos"),this.tbody_gestao_projetos=this.dialog.find(".tbody_gestao_projetos"),this.chk_pdca=this.dialog.find(".chk_pdca"),this.tbody_pdca=this.dialog.find(".tbody_pdca"),this.chk_gestao_tarefas=this.dialog.find(".chk_gestao_tarefas"),this.tbody_gestao_tarefas=this.dialog.find(".tbody_gestao_tarefas"),this.chk_gestao_cubos=this.dialog.find(".chk_gestao_cubos"),this.tbody_gestao_cubos=this.dialog.find(".tbody_gestao_cubos"),this.chk_ead_plataforma=this.dialog.find(".chk_ead_plataforma"),this.tbody_ead_plataforma=this.dialog.find(".tbody_ead_plataforma"),this.usuario_id=null,this.tipo_usuario=null,this.admin=null,this.eh_perfil=!1,this.main_configuracoes=null,this.show=function(e,o,t,i){switch(a.tipo=o,a.tipo_usuario=t,a.admin=i,a.eh_perfil=!1,a.tipo){case FORMULARIO.EDITAR:a.btn_salvar.show(),a.btn_excluir.hide(),a.permite_alterar(!0);break;case FORMULARIO.VISUALIZAR:a.btn_salvar.hide(),a.btn_excluir.hide(),a.permite_alterar(!1)}void 0!==e&&e&&(a.usuario_id=e,a.preencher("permissoes/objeto/")),show_modal(a.modal.attr("id")),a.edt_nome.prop("readonly",!0),set_focus(a.edt_nome),a.painel_sistema.attr("id","painel_sistema"+a.html_id),a.painel_gestao_processos.attr("id","painel_gestao_processos"+a.html_id),a.painel_gestao_documentos.attr("id","painel_gestao_documentos"+a.html_id),a.painel_gestao_agenda.attr("id","painel_gestao_agenda"+a.html_id),a.painel_gestao_projetos.attr("id","painel_gestao_projetos"+a.html_id),a.painel_gestao_chamados.attr("id","painel_gestao_chamados"+a.html_id),a.painel_gestao_pdca.attr("id","painel_gestao_pdca"+a.html_id),a.painel_gestao_relacionamento.attr("id","painel_gestao_relacionamento"+a.html_id),a.painel_rede_social.attr("id","painel_rede_social"+a.html_id),a.painel_especificos.attr("id","painel_especificos"+a.html_id),a.menu_sistema.attr("href","#"+a.painel_sistema.attr("id")),a.menu_processos.attr("href","#"+a.painel_gestao_processos.attr("id")),a.menu_documentos.attr("href","#"+a.painel_gestao_documentos.attr("id")),a.menu_agenda.attr("href","#"+a.painel_gestao_agenda.attr("id")),a.menu_projetos.attr("href","#"+a.painel_gestao_projetos.attr("id")),a.menu_pdca.attr("href","#"+a.painel_gestao_pdca.attr("id")),a.menu_chamados.attr("href","#"+a.painel_gestao_chamados.attr("id")),a.menu_relacionamento.attr("href","#"+a.painel_gestao_relacionamento.attr("id")),a.menu_social.attr("href","#"+a.painel_rede_social.attr("id")),a.menu_especificos.attr("href","#"+a.painel_especificos.attr("id")),a.menu_gestao_tarefas.attr("href","#"+a.painel_gestao_tarefas.attr("id")),a.menu_central_pendencias.attr("href","#"+a.painel_central_pendencias.attr("id")),a.menu_gestao_cubos.attr("href","#"+a.painel_gestao_cubos.attr("id")),a.menu_ead_plataforma.attr("href","#"+a.painel_ead_plataforma.attr("id")),a.permissoes_gestao_chamados(),a.permissoes_agenda(),a.permissoes_gestao_documentos(),a.permissoes_gestao_processos(),a.permissoes_gestao_relacionamento(),a.permissoes_rede_social(),a.permissoes_gestao_projetos(),a.permissoes_pdca(),a.permissoes_gestao_tarefas(),a.permissao_cliente_fornecedor(),a.painel_detalhes.addClass("hidden"),t!=USUARIO_TIPO.ANALISTA?a.painel_detalhes.removeClass("hidden"):(a.div_empresa.removeClass("hidden"),a.listar_empresas()),a.permissoes_usuario()},this.show_permissoes_importacao=function(e){a.btn_excluir.hide(),a.permite_alterar(!0),a.main_configuracoes=e,a.tipo_usuario=USUARIO_TIPO.ANALISTA,show_modal(a.modal.attr("id")),a.edt_nome.val(usuario_tipo(a.tipo_usuario)),a.edt_nome.prop("readonly",!0),a.painel_sistema.attr("id","painel_sistema"+a.html_id),a.painel_gestao_processos.attr("id","painel_gestao_processos"+a.html_id),a.painel_gestao_documentos.attr("id","painel_gestao_documentos"+a.html_id),a.painel_gestao_agenda.attr("id","painel_gestao_agenda"+a.html_id),a.painel_gestao_projetos.attr("id","painel_gestao_projetos"+a.html_id),a.painel_gestao_chamados.attr("id","painel_gestao_chamados"+a.html_id),a.painel_gestao_pdca.attr("id","painel_gestao_pdca"+a.html_id),a.painel_gestao_relacionamento.attr("id","painel_gestao_relacionamento"+a.html_id),a.painel_rede_social.attr("id","painel_rede_social"+a.html_id),a.menu_sistema.attr("href","#"+a.painel_sistema.attr("id")),a.menu_processos.attr("href","#"+a.painel_gestao_processos.attr("id")),a.menu_documentos.attr("href","#"+a.painel_gestao_documentos.attr("id")),a.menu_agenda.attr("href","#"+a.painel_gestao_agenda.attr("id")),a.menu_projetos.attr("href","#"+a.painel_gestao_projetos.attr("id")),a.menu_chamados.attr("href","#"+a.painel_gestao_chamados.attr("id")),a.menu_pdca.attr("href","#"+a.painel_gestao_pdca.attr("id")),a.menu_relacionamento.attr("href","#"+a.painel_gestao_relacionamento.attr("id")),a.menu_social.attr("href","#"+a.painel_rede_social.attr("id")),a.permissoes_gestao_chamados(),a.permissoes_agenda(),a.permissoes_gestao_documentos(),a.permissoes_gestao_processos(),a.permissoes_gestao_relacionamento(),a.permissoes_rede_social(),a.permissoes_gestao_projetos(),a.permissoes_pdca(),a.permissao_cliente_fornecedor(),a.permissoes_usuario(),a.permissoes_gestao_tarefas()},this.show_permissoes_perfil=function(e,o,t){switch(a.tipo=e,a.tipo_usuario=o,a.admin=t,a.eh_perfil=!0,a.tipo){case FORMULARIO.EDITAR:a.btn_salvar.show(),a.btn_excluir.hide(),a.permite_alterar(!0);break;case FORMULARIO.VISUALIZAR:a.btn_salvar.hide(),a.btn_excluir.hide(),a.permite_alterar(!1)}a.preencher("perfil_padrao_permissao/objeto/"),show_modal(a.modal.attr("id")),a.edt_nome.val(usuario_tipo(a.tipo_usuario)),a.edt_nome.prop("readonly",!0),set_focus(a.edt_nome),a.painel_sistema.attr("id","painel_sistema"+a.html_id),a.painel_gestao_processos.attr("id","painel_gestao_processos"+a.html_id),a.painel_gestao_documentos.attr("id","painel_gestao_documentos"+a.html_id),a.painel_gestao_agenda.attr("id","painel_gestao_agenda"+a.html_id),a.painel_gestao_projetos.attr("id","painel_gestao_projetos"+a.html_id),a.painel_gestao_chamados.attr("id","painel_gestao_chamados"+a.html_id),a.painel_gestao_relacionamento.attr("id","painel_gestao_relacionamento"+a.html_id),a.painel_rede_social.attr("id","painel_rede_social"+a.html_id),a.menu_sistema.attr("href","#"+a.painel_sistema.attr("id")),a.menu_processos.attr("href","#"+a.painel_gestao_processos.attr("id")),a.menu_documentos.attr("href","#"+a.painel_gestao_documentos.attr("id")),a.menu_agenda.attr("href","#"+a.painel_gestao_agenda.attr("id")),a.menu_projetos.attr("href","#"+a.painel_gestao_projetos.attr("id")),a.menu_chamados.attr("href","#"+a.painel_gestao_chamados.attr("id")),a.menu_relacionamento.attr("href","#"+a.painel_gestao_relacionamento.attr("id")),a.menu_social.attr("href","#"+a.painel_rede_social.attr("id")),a.permissoes_gestao_chamados(),a.permissoes_agenda(),a.permissoes_gestao_documentos(),a.permissoes_gestao_processos(),a.permissoes_gestao_relacionamento(),a.permissoes_rede_social(),a.permissoes_gestao_projetos(),a.permissoes_pdca(),a.permissao_cliente_fornecedor(),a.permissoes_usuario(),a.permissoes_gestao_tarefas()},this.cbo_empresa.change(function(e){var o="";a.painel_detalhes.removeClass("hidden"),o=a.eh_perfil?"perfil_padrao_permissao/objeto/":"permissoes/objeto/",a.preencher(o)}),this.listar_empresas=function(e){a.cbo_empresa.find("option").remove(),add_option(a.cbo_empresa,"","Selecione a empresa"),WS.get("usuario_empresa/listar/",{usuario_id:a.usuario_id},function(o){if(1==o.length)add_option(a.cbo_empresa,o[0].empresa_id,o[0].nome_fantasia),a.cbo_empresa.val(o[0].empresa_id).trigger("change");else for(var t=0;t<o.length;t++)add_option(a.cbo_empresa,o[t].empresa_id,o[t].nome_fantasia);e&&a.cbo_empresa.val(e).trigger("change"),a.cbo_empresa.selectpicker("refresh")},null,null,null,null,null,a.html_id)},this.permissao_cliente_fornecedor=function(){a.tipo_usuario!=USUARIO_TIPO.CLIENTE&&a.tbody_gestao_processos.find(".tr_processos_administrador_entidade").hide(),a.tipo_usuario!=USUARIO_TIPO.CLIENTE&&a.tipo_usuario!=USUARIO_TIPO.FORNECEDOR&&a.tipo_usuario!=USUARIO_TIPO.PROSPECT||"S"==a.admin||(a.tab_sistema.hide(),a.tbody_gestao_processos.find("tr").not(".tr_processos_administrador_entidade").hide(),a.tbody_gestao_relacionamento.hide(),a.tbody_rede_social.hide(),a.tbody_gestao_documentos.find(".tr_assunto").hide(),a.tbody_gestao_documentos.find(".tr_tipo_documento").hide(),a.tbody_gestao_documentos.find(".tr_versoes_documento").hide(),a.tbody_gestao_chamados.find(".tr_nota_avaliacao").hide(),a.tbody_gestao_chamados.find(".tr_grupo_motivos").hide(),a.tbody_gestao_chamados.find(".tr_relatorio").hide(),a.tbody_gestao_chamados.find(".tr_motivos_chamado").hide(),a.tbody_gestao_chamados.find(".tr_chamados_recorrentes").hide(),a.tbody_gestao_chamados.find(".tr_chamado_prioridades").hide(),a.tbody_gestao_chamados.find(".tr_chamado_fundir_chamados").hide(),a.tbody_gestao_chamados.find(".tr_classificacao_chamado").hide(),a.tbody_gestao_chamados.find(".tr_chamado_chamado_percentual_conclusao").hide(),a.tbody_gestao_chamados.find(".tr_edicao_horas_trabalhadas").hide(),a.tbody_gestao_chamados.find(".tr_reclassificar_chamado").show(),a.tbody_gestao_chamados.find(".tr_chamado_administrador_entidade").show(),a.tbody_gestao_chamados.find(".tr_altera_responsavel").show(),a.tbody_gestao_projetos.hide(),a.tr_agenda.hide(),a.tr_agenda_contatos.hide(),a.tr_manutencao_agenda.hide(),a.tr_manutencao_propria_agenda.hide(),a.tr_relatorio.hide(),a.tr_motivos_chamado.hide(),a.tr_grupo_motivos.hide(),a.tbody_gestao_chamados.find(".tr_motivos_chamado").hide(),a.tbody_ead_plataforma.find(".tr_ead_plataforma_configuracoes").hide())},this.permissoes_usuario=function(){var e=new Array,o=a.dialog.find('input[type="checkbox"]'),t=App.sessao.dados.permissoes.slice(0);t.push({chave:"chamado_administrador_entidade"}),t.push({chave:"processo_administrador_entidade"}),t.push({chave:"altera_responsavel"}),t.push({chave:"reclassificar_chamado"}),App.verifica_permissao(App.sessao.dados.empresa_filial_id,"manutencao_agenda")&&t.push({chave:"manutencao_propria_agenda"}),$(t).each(function(a,t){$(o).each(function(a,o){t.chave==$(o).val()&&(e[a]=!0)})}),$(o).each(function(a,o){e[a]||$(o).closest("tr").addClass("hidden")})},this.close=function(){close_modal(a.modal.attr("id")),void 0!==a.onclose&&a.onclose&&a.onclose()},this.unload=function(){a.close(),View.unload(this.html_id)},this.permite_alterar=function(e){a.edt_nome.prop("readonly",!e)},this.preencher=function(e){var o;WS.get(e,{usuario_id:a.usuario_id,tipo_usuario:a.tipo_usuario,empresa_filial_id:null==a.cbo_empresa.val()||""==a.cbo_empresa.val()?0:a.cbo_empresa.val()},function(e){o=null==e.nome?a.edt_nome.val():e.nome,a.edt_nome.val(o);var t=Object.keys(e.todas_permissoes);a.tab_especificos.find("tr").remove();for(var i=!1,s=0;s<t.length;s++){var _=e.todas_permissoes[t[s]];void 0!==_.descricao&&void 0!==_.especifico&&1==_.especifico&&(void 0===_.perfil||!_.perfil||Array.isArray(_.perfil)&&_.perfil.indexOf(parseInt(a.tipo_usuario,0))>=0||Number.isInteger(_.perfil)&&_.perfil==parseInt(a.tipo_usuario,0))&&(a.adicionar_especifica(t[s],_.descricao),i=!0)}i?(a.lbl_tab_especificos.show(),a.tab_especificos.show()):(a.lbl_tab_especificos.hide(),a.tab_especificos.hide()),a.dialog.find('input[type="checkbox"]').prop("checked",!1).change(),App.aplicar_checkbox(a.dialog),$(e.permissoes).each(function(e,o){var t=a.dialog.find('input[type="checkbox"][value="'+o.chave+'"]');t&&t.prop("checked",!0).change()}),a.permissoes_usuario()})},this.adicionar_especifica=function(e,o){var t=$("<td>"+o+"</td>"),i=$('<td class="text-center" style="width: 80px"><input type="checkbox" value="'+e+'" class="checkbox_bootstrap_toggle"></td>'),s=$("<tr>");s.append(t),s.append(i),a.tab_especificos.find("tbody").append(s)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){a.unload()}),this.chk_todas_agendas.unbind("change").change(function(e){1==$(this).prop("checked")&&a.chk_agenda_grupo_usuarios.prop("checked",!1).change()}),this.chk_agenda_grupo_usuarios.unbind("change").change(function(e){1==$(this).prop("checked")&&a.chk_todas_agendas.prop("checked",!1).change()}),this.chk_manutencao_agenda_todas.unbind("change").change(function(e){1==$(this).prop("checked")&&a.chk_manutencao_agenda_propria.prop("checked",!1).change()}),this.chk_manutencao_agenda_propria.unbind("change").change(function(e){1==$(this).prop("checked")&&a.chk_manutencao_agenda_todas.prop("checked",!1).change()}),this.chk_gestao_chamados.unbind("change").change(function(e){a.permissoes_gestao_chamados()}),this.chk_gestao_documentos.unbind("change").change(function(e){a.permissoes_gestao_documentos()}),this.chk_gestao_processos.unbind("change").change(function(e){a.permissoes_gestao_processos()}),this.chk_gestao_projetos.unbind("change").change(function(e){a.permissoes_gestao_projetos()}),this.chk_pdca.unbind("change").change(function(e){a.permissoes_pdca()}),this.chk_gestao_relacionamento.unbind("change").change(function(e){a.permissoes_gestao_relacionamento()}),this.chk_rede_social.unbind("change").change(function(e){a.permissoes_rede_social()}),this.chk_agenda.unbind("change").change(function(){a.permissoes_agenda()}),this.chk_gestao_tarefas.unbind("change").change(function(e){a.permissoes_gestao_tarefas()}),this.chk_gestao_cubos.unbind("change").change(function(e){a.permissoes_gestao_cubos()}),this.chk_ead_plataforma.unbind("change").change(function(e){a.permissoes_ead_plataforma()}),this.chk_cliente.on("change",function(){!0===$(this).prop("checked")&&a.chk_cliente_somente_leitura.prop("checked",!1).trigger("change")}),this.chk_cliente_somente_leitura.on("change",function(){!0===$(this).prop("checked")&&a.chk_cliente.prop("checked",!1).trigger("change")}),this.chk_fornecedor.on("change",function(){!0===$(this).prop("checked")&&a.chk_fornecedor_somente_leitura.prop("checked",!1).trigger("change")}),this.chk_fornecedor_somente_leitura.on("change",function(){!0===$(this).prop("checked")&&a.chk_fornecedor.prop("checked",!1).trigger("change")}),this.chk_prospect.on("change",function(){!0===$(this).prop("checked")&&a.chk_prospect_somente_leitura.prop("checked",!1).trigger("change")}),this.chk_prospect_somente_leitura.on("change",function(){!0===$(this).prop("checked")&&a.chk_prospect.prop("checked",!1).trigger("change")}),this.permissoes_gestao_chamados=function(){var e=a.dialog.find('.tbody_gestao_chamados input[type="checkbox"]');a.chk_gestao_chamados.prop("checked")?a.tbody_gestao_chamados.show():(e.each(function(e,a){$(a).prop("checked")&&($(a).bootstrapSwitch("state",!1),$(a).prop("checked",!1))}),a.tbody_gestao_chamados.hide()),a.permissao_cliente_fornecedor()},this.permissoes_gestao_projetos=function(){var e=a.dialog.find('.tbody_gestao_projetos input[type="checkbox"]');a.chk_gestao_projetos.prop("checked")?a.tbody_gestao_projetos.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_projetos.hide()),a.permissao_cliente_fornecedor()},this.permissoes_pdca=function(){var e=a.dialog.find('.tbody_pdca input[type="checkbox"]');a.chk_pdca.prop("checked")?a.tbody_pdca.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_pdca.hide()),a.permissao_cliente_fornecedor()},this.permissoes_gestao_documentos=function(){var e=a.dialog.find('.tbody_gestao_documentos input[type="checkbox"]');a.chk_gestao_documentos.prop("checked")?a.tbody_gestao_documentos.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_documentos.hide()),a.permissao_cliente_fornecedor()},this.permissoes_gestao_processos=function(){var e=a.dialog.find('.tbody_gestao_processos input[type="checkbox"]');a.chk_gestao_processos.prop("checked")?a.tbody_gestao_processos.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_processos.hide()),a.permissao_cliente_fornecedor()},this.permissoes_gestao_relacionamento=function(){var e=a.dialog.find('.tbody_gestao_relacionamento input[type="checkbox"]');a.chk_gestao_relacionamento.prop("checked")?a.tbody_gestao_relacionamento.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_relacionamento.hide()),a.permissao_cliente_fornecedor()},this.permissoes_rede_social=function(){var e=a.dialog.find('.tbody_rede_social input[type="checkbox"]');a.chk_rede_social.prop("checked")?a.tbody_rede_social.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_rede_social.hide()),a.permissao_cliente_fornecedor()},this.permissoes_agenda=function(){var e=a.dialog.find('.tbody_gestao_agenda input[type="checkbox"]');a.chk_agenda.prop("checked")?a.tbody_gestao_agenda.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_agenda.hide()),a.permissao_cliente_fornecedor()},this.permissoes_gestao_tarefas=function(){var e=a.dialog.find('.tbody_gestao_tarefas input[type="checkbox"]');a.chk_gestao_tarefas.prop("checked")?a.tbody_gestao_tarefas.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_tarefas.hide()),a.permissao_cliente_fornecedor()},this.permissoes_gestao_cubos=function(){var e=a.dialog.find('.tbody_gestao_cubos input[type="checkbox"]');a.chk_gestao_cubos.prop("checked")?a.tbody_gestao_cubos.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_gestao_cubos.hide()),a.permissao_cliente_fornecedor()},this.permissoes_ead_plataforma=function(){var e=a.dialog.find('.tbody_ead_plataforma input[type="checkbox"]');a.chk_ead_plataforma.prop("checked")?a.tbody_ead_plataforma.show():(e.each(function(e,a){$(a).prop("checked")&&$(a).prop("checked",!1).change()}),a.tbody_ead_plataforma.hide()),a.permissao_cliente_fornecedor()},this.btn_salvar_importacao=function(){var e=a.dialog.find('input[type="checkbox"]'),o=[];e.each(function(e,a){o.push({chave:a.value,permitido:$(a).prop("checked")})}),a.main_configuracoes.permissoes=o,a.unload()},this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){if(a.main_configuracoes)return a.btn_salvar_importacao(),!1;var e,o,t=a.dialog.find('input[type="checkbox"]'),i=[];t.each(function(e,a){i.push({chave:a.value,permitido:$(a).prop("checked")})}),o=a.eh_perfil?"perfil_padrao_permissao/salvar/":"permissoes/salvar/",WS.post(o,{usuario_id:a.usuario_id,nome:a.edt_nome.val(),tipo_usuario:a.tipo_usuario,permissoes:JSON.stringify(i),empresa_filial_id:null==a.cbo_empresa.val()||""==a.cbo_empresa.val()?0:a.cbo_empresa.val()},function(o){a.usuario_id=o.id,e=null==o.nome?"Perfil "+a.edt_nome.val():o.nome,alert_saved(e+" salvo com sucesso"),a.unload()},[a.btn_cancelar,a.btn_salvar])})}});