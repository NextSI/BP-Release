define([],function(){return function(t){"use strict";var o=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.edt_nome=this.dialog.find(".edt_nome"),this.cbo_cor=this.dialog.find(".cbo_cor"),this.cor_exemplo=this.dialog.find(".cor_exemplo"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.chk_padrao=this.dialog.find(".chk_padrao"),this.status_oportunidade_id=null,this.show=function(t,i){for(var a=new Colors,e=0;e<a.length;e++)o.cbo_cor.append('<option value="'+a[e].hex+'" style="background:'+a[e].hex+"; color: "+a[e].nome_hex+'">'+a[e].nome+"</option>");switch(i){case FORMULARIO.NOVO:o.btn_salvar.show(),o.btn_excluir.hide(),o.permite_alterar(!0),o.cbo_cor.val("");break;case FORMULARIO.EDITAR:o.btn_salvar.show(),o.btn_excluir.hide(),o.permite_alterar(!0);break;case FORMULARIO.VISUALIZAR:o.btn_salvar.hide(),o.btn_excluir.hide(),o.permite_alterar(!1);break;case FORMULARIO.EXCLUIR:o.btn_salvar.hide(),o.btn_excluir.show(),o.permite_alterar(!1)}o.tipo=i,void 0!==t&&t&&(o.status_oportunidade_id=t,o.preencher()),show_modal(o.modal.attr("id")),set_focus(o.edt_nome)},this.close=function(){close_modal(o.modal.attr("id")),void 0!==o.onclose&&o.onclose&&o.onclose()},this.unload=function(){o.close(),View.unload(this.html_id)},this.cbo_cor_change=function(){o.cor_exemplo.css("background",o.cbo_cor.val()?o.cbo_cor.val():"")},this.permite_alterar=function(t){o.edt_nome.prop("readonly",!t),o.cbo_cor.prop("disabled",!t),o.cor_exemplo.prop("readonly",!t)},this.preencher=function(){WS.get("status_oportunidade/objeto/",{status_oportunidade_id:o.status_oportunidade_id},function(t){o.edt_nome.val(t.nome),o.cbo_cor.val(t.cor),o.cbo_cor_change(),"S"==t.padrao?o.chk_padrao.bootstrapSwitch("state",!0):o.chk_padrao.bootstrapSwitch("state",!1)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){o.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){WS.post("status_oportunidade/salvar",{status_oportunidade_id:o.status_oportunidade_id,nome:o.edt_nome.val(),cor:o.cbo_cor.val(),padrao:o.chk_padrao.bootstrapSwitch("state")},function(t){o.status_oportunidade_id=t.status_oportunidade_id,alert_saved(t.nome+" salvo com sucesso"),o.unload()},[o.btn_salvar,o.btn_cancelar,o.btn_excluir])}),this.btn_excluir.unbind("click"),this.btn_excluir.click(function(){WS.post("status_oportunidade/excluir",{status_oportunidade_id:o.status_oportunidade_id},function(t){alert_saved(t.nome+" excluido com sucesso"),o.unload()},[o.btn_salvar,o.btn_cancelar,o.btn_excluir])}),this.cbo_cor.change(function(){o.cbo_cor_change()})}});