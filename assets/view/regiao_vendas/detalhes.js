var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),define([],function(){return function(e){"use strict";var a=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.title="Detalhes Região de Vendas",this.onclose=null,this.onselect=null,this.onsave=null,this.ondelete=null,this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.edt_descricao=this.dialog.find(".edt_descricao"),this.edt_observacoes=this.dialog.find(".edt_observacoes"),this.chk_bloqueado=this.dialog.find(".chk_bloqueado"),this.tab_listagem_representante=this.dialog.find(".tab_listagem_representante"),this.cbo_representante=this.dialog.find(".cbo_representante"),this.cbo_regiao_vendas_pai=this.dialog.find(".cbo_regiao_vendas_pai"),this.arr_listagem_representante=[],this.arr_representante=[],this.arr_representante_filtrados=[],this.regiao_vendas_id=null,this.show=function(e,t){switch(create_combobox(a.cbo_representante,a.render_select_multi_column),create_combobox(a.cbo_regiao_vendas_pai,a.render_regiao_vendas_pai),t){case FORMULARIO.NOVO:a.btn_salvar.show(),a.btn_excluir.hide(),App.titulo_aba(a.html_id,"Novo - Região de Vendas"),a.permite_alterar(!0);break;case FORMULARIO.EDITAR:a.btn_salvar.show(),a.btn_excluir.hide(),a.permite_alterar(!0);break;case FORMULARIO.VISUALIZAR:a.btn_salvar.hide(),a.btn_excluir.hide(),a.permite_alterar(!1);break;case FORMULARIO.EXCLUIR:a.btn_salvar.hide(),a.btn_excluir.show(),a.permite_alterar(!1);break;case FORMULARIO.CRIAR_UNIDADE:a.btn_salvar.show(),a.btn_excluir.hide(),a.permite_alterar(!0)}void 0!==e&&e&&(a.regiao_vendas_id=e,a.preencher()),a.btn_novo_cadastro(),set_focus(a.edt_descricao)},this.render_regiao_vendas_pai=function(e){var t=a.cbo_regiao_vendas_pai.parent().find(".edt_combobox"),n={regiao_vendas_atual_id:a.regiao_vendas_id,descricao:t.val()};WS.get("regiao_vendas/listar/",n,function(t){limpar_combobox(a.cbo_regiao_vendas_pai),$(t).each(function(e,t){var n=[];n.Descricao=t.descricao,add_option_combobox(a.cbo_regiao_vendas_pai,e,t.regiao_vendas_id,n)}),e(!0)})},this.close=function(){void 0!==a.onclose&&a.onclose&&a.onclose()},this.unload=function(){a.close(),View.unload(this.html_id)},this.permite_alterar=function(e){a.edt_descricao.prop("disabled",!e),a.edt_observacoes.prop("disabled",!e),a.chk_bloqueado.prop("disabled",!e);var t=a.cbo_representante.parent();t.find(".edt_combobox").prop("disabled",!e),t.find(".btn_combobox").prop("disabled",!e)},this.preencher=function(){WS.get("regiao_vendas/objeto/",{regiao_vendas_id:a.regiao_vendas_id},function(e){App.titulo_aba(a.html_id,e.descricao+" - Região de Vendas"),a.edt_descricao.val(e.descricao),a.edt_observacoes.val(e.observacoes),set_value_combobox(a.cbo_regiao_vendas_pai,e.regiao_vendas_pai_id,e.regiao_vendas_pai_descricao),e.bloqueado&&a.chk_bloqueado.bootstrapSwitch("state",!0),a.arr_representante=e.arr_representante,a.render_representante()})},this.btn_novo_cadastro=function(){var e=a.cbo_representante.parent(),t=e.find(".edt_combobox");t.attr("placeholder","Digite o Nome"),e.find(".btn_novo").click(function(){View.load("representante/detalhes",function(e,n){n.onsave=a.relacionar_novo_representante,n.show(null,FORMULARIO.NOVO,null,t.val())},View.ABA.MULTIPLAS)}),t.keypress(function(e){if(13==e.keyCode){var t=a.cbo_representante.parent().find(".ncbo_scroll").find(".row_selected").attr("id_registro");a.relacionar_representante_existente(t)}})},this.relacionar_novo_representante=function(e){var t=a.cbo_representante.parent(),n=t.find(".edt_combobox");t.find(".btn_novo").addClass("hidden"),n.val(""),set_focus(n),e.representante_id=e.id,a.arr_representante.push(e),a.render_representante()},this.render_select_multi_column=function(e){var t=a.cbo_representante.parent(),n=t.find(".edt_combobox");WS.get("representante/listar/",{razao_social:n.val(),nome_fantasia:n.val()},function(n){limpar_combobox(a.cbo_representante),a.arr_listagem_representante=n,$(n).each(function(e,t){var n=[];n["Nome Fantasia"]=t.nome_fantasia,n["Razão Social"]=t.razao_social,add_option_combobox(a.cbo_representante,e,t.representante_id,n)}),t.find(".ul_row").click(function(){var e=$(this).parent().attr("id_registro");a.relacionar_representante_existente(e)}),n.length>0?e(!0):e(!1)})},this.relacionar_representante_existente=function(e){var t=a.cbo_representante.parent(),n=t.find(".edt_combobox");if(1==t.find(".btn_novo").hasClass("hidden")){var i=!1;if($(a.arr_representante).each(function(a,t){t.representante_id==e&&(i=!0)}),i)n.val(""),set_focus(n);else{var r=new Object;r.representante_id=e,r.removido=!1,$(a.arr_listagem_representante).each(function(e,a){a.representante_id==r.representante_id&&(r.nome_fantasia=a.nome_fantasia,r.razao_social=a.razao_social,r.email_principal=a.email_principal,r.telefone1=a.telefone1,r.telefone2=a.telefone2,r.telefone3=a.telefone3,r.telefone4=a.telefone4)}),a.arr_representante.push(r),a.render_representante(),setTimeout(function(){n.val(""),set_focus(n)},100)}}},this.render_representante=function(){var e=a.tab_listagem_representante.find("tbody"),t=e.find("tr:first");$(a.arr_representante).each(function(e,t){void 0===a.arr_representante[e].removido&&(a.arr_representante[e].removido=!1)}),a.arr_representante_filtrados=a.arr_representante.filter(function(e){var a=!0;return!0===e.removido&&(a=!1),a}),a.tab_listagem_representante.find("tr:gt(1)").remove(),$(a.arr_representante_filtrados).each(function(n,i){!function(n){var i=t.clone();i.removeAttr("template-row"),i.css("display",""),$(i.find("[template-field='nome_fantasia']")).text(n.nome_fantasia),$(i.find("[template-field='razao_social']")).text(n.razao_social),$(i.find("[template-field='email']")).text(n.email_principal),$(i.find("[template-field='telefone1']")).text(n.telefone1),$(i.find("[template-field='telefone2']")).text(n.telefone2),$(i.find("[template-field='telefone3']")).text(n.telefone3),$(i.find("[template-field='telefone4']")).text(n.telefone4);var r=$(i.find(".btn_deletar_representante"));r.unbind("click"),r.click(function(){alert_modal("Representante","Deseja remover?","Remover",function(){$(a.arr_representante).each(function(e,t){t.representante_id==n.representante_id&&(a.arr_representante[e].removido=!0,a.render_representante())})},!0)}),i.appendTo(e)}(i)}),App.aplicar_mascaras(e)},this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){var e={regiao_vendas_id:a.regiao_vendas_id,descricao:a.edt_descricao.val(),observacoes:a.edt_observacoes.val(),bloqueado:a.chk_bloqueado.bootstrapSwitch("state"),regiao_vendas_pai_id:get_value_combobox(a.cbo_regiao_vendas_pai),arr_representante:JSON.stringify(a.arr_representante_filtrados)};WS.post("regiao_vendas/salvar",e,function(e){void 0!==a.onsave&&a.onsave&&a.onsave(e),a.regiao_vendas_id=e.id,alert_saved("Operação realizada com sucesso!"),a.unload()},[a.btn_salvar,a.btn_cancelar])}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){a.unload()}),this.btn_excluir.unbind("click"),this.btn_excluir.click(function(){})}});