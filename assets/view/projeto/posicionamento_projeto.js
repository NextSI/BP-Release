define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Rel. Posicionamento do Projeto",this.onclose=null,this.btn_gera_relatorio=this.dialog.find(".btn_gera_relatorio"),this.btn_fechar=this.dialog.find(".btn_fechar"),this.busca_cliente=this.dialog.find(".busca_cliente"),this.edt_data_inicio=this.dialog.find(".edt_data_inicio"),this.edt_data_fim=this.dialog.find(".edt_data_fim"),this.edt_cliente_de=this.dialog.find(".edt_cliente_de"),this.edt_cliente_ate=this.dialog.find(".edt_cliente_ate"),this.busca_tecnico=this.dialog.find(".busca_tecnico"),this.busca_projeto=this.dialog.find(".busca_projeto"),this.edt_tecnico_de=this.dialog.find(".edt_tecnico_de"),this.edt_tecnico_ate=this.dialog.find(".edt_tecnico_ate"),this.edt_projeto_de=this.dialog.find(".edt_projeto_de"),this.edt_projeto_ate=this.dialog.find(".edt_projeto_ate"),this.cbo_tipo_projeto=this.dialog.find(".cbo_tipo_projeto"),this.chk_exibir_atividades=this.dialog.find(".chk_exibir_atividades"),this.lbl_exibir_atividades=this.dialog.find(".lbl_exibir_atividades"),this.chk_exibir_valor=this.dialog.find(".chk_exibir_valor"),this.lbl_exibir_valor=this.dialog.find(".lbl_exibir_valor"),this.cliente_id=0,this.show=function(){const i=t.html_id+"_chk_exibir_atividades";t.chk_exibir_atividades.attr("id",i),t.lbl_exibir_atividades.attr("for",i);const e=t.html_id+"_chk_exibir_valor";t.chk_exibir_valor.attr("id",e),t.lbl_exibir_valor.attr("for",e)},this.unload=function(){View.unload(this.html_id)},t.btn_fechar.unbind("click"),t.btn_fechar.click(function(){t.unload()}),this.busca_cliente.unbind("click"),this.busca_cliente.click(function(i){var t=$(i.target).closest(".input-group").find("input");View.load("cliente/selecionar",function(i,e){e.show(function(i){t.val(i.codigo)},!0)})}),this.busca_tecnico.unbind("click"),this.busca_tecnico.click(function(i){var t=$(i.target).closest(".input-group").find("input");View.load("tecnicos/selecionar",function(i,e){e.show(function(i){t.val(i.codigo)})})}),this.busca_projeto.unbind("click"),this.busca_projeto.click(function(i){var t=$(i.target).closest(".input-group").find("input");View.load("projeto/selecionar",function(i,e){e.show(function(i){t.val(i.obj_projeto.codigo)})})}),t.btn_gera_relatorio.unbind("click"),t.btn_gera_relatorio.click(function(i){App.obter_token_publico(function(i){if(App.temp.empresa)var e=App.temp.empresa;var o=t.edt_tecnico_de.val(),a=t.edt_tecnico_ate.val(),d=t.edt_cliente_de.val(),n=t.edt_cliente_ate.val(),_=t.edt_projeto_de.val(),c=t.edt_projeto_ate.val(),l=get_datepicker(t.edt_data_inicio),r=get_datepicker(t.edt_data_fim),s=t.cbo_tipo_projeto.val(),h=1==t.chk_exibir_atividades.prop("checked")?"S":"N",p=1==t.chk_exibir_valor.prop("checked")?"S":"N",b=new Validation;return""==l||""==r?(b.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Selecione a data inicial e final.")),alert_modal("Validação",b),!1):new Date(l).getTime()>new Date(r).getTime()?(b.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"A data inicial deve ser menor que a data final.")),alert_modal("Validação",b),!1):(alert_modal("Relatório de Posicionamento do Projeto","Aguarde, em instantes seu relatório será gerado."),void App.download(WS_URI+"apontamento_projeto/gerar_posicionamento_projeto_pdf/?empresa_id="+e+"&token_publico="+i+"&cliente_id="+(void 0!==App.temp.cliente_id_apontamento_despesa?App.temp.cliente_id_apontamento_despesa:"")+"&tecnico_de="+o+"&tecnico_ate="+a+"&cliente_de="+d+"&cliente_ate="+n+"&projeto_de="+_+"&projeto_ate="+c+"&data_inicio="+l+"&data_fim="+r+"&tipo_projeto="+s+"&exibir_atividades="+h+"&exibir_valor="+p))})})}});