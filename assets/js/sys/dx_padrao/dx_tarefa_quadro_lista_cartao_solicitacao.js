var dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Numero_Controle=function(){return{dataField:"S"==App.sessao.dados.parametro_processo.numero_solicitacao_por_processo?"numero":"solicitacao_id",dataType:"number",caption:"#",width:50}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Solicitacao=function(){return{dataField:"data_solicitacao",dataType:"date",caption:"Início Solicitação",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Prazo=function(){return{dataField:"atividade_prazo_entrega",dataType:"date",caption:"Prazo",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Entrega=function(){return{dataField:"atividade_data_entregue",dataType:"date",caption:"Entregue em",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Finalizacao=function(){return{dataField:"data_finalizacao",dataType:"date",caption:"Fim Solicitação",format:"dd/MM/yyyy HH:mm",width:110}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Processo_Nome=function(){return{dataField:"nome",caption:"Processo",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Atividade_Nome=function(){return{dataField:"atividade_nome",caption:"Atividade",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Versao_Processo=function(){return{dataField:"versao_Processo",dataType:"number",caption:"Versao do processo",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Solicitante_Nome=function(){return{dataField:"usuario_solicitacao_nome",caption:"Solicitante",cellTemplate:function(a,o){var i=o.data.usuario_solicitante_foto_id,t=i?WS_URI+"documento/midia/?&tamanho=20&documento_id="+i+"&token_midia="+App.sessao.token_midia:"assets/img/icones_bp/imagem_usuario_padrao.svg",_=o.data.usuario_solicitacao_nome;a.html('<div style="margin-top: 3px;"><img style="height: 20px; width: 20px" class="imagem_responsavel" src="'+t+'"><span style="margin-left: 5px;">'+_+"</span></div>")},width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Responsavel_Nome=function(){return{dataField:"atividade_responsaveis",dataType:"string",caption:"Responsável",width:100}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:"Visualizar solicitacao",icon:"fa fa-comments",cssClass:o,onClick:function(a){View.load("solicitacao/detalhes",function(o,i){i.show(a.row.data.solicitacao_atividade_id)},View.ABA.MULTIPLAS)}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(o){return App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel},onClick:function(o){$(function(){DevExpress.ui.dialog.confirm("Tem certeza que deseja desvincular esta solicitação do cartão? Todas as atividades dela também serão desvinculadas","Desvincular solicitação").done(function(i){i&&WS.post("solicitacao/excluir_relacionamento_tarefa_quadro_lista_cartao_solicitacao/",{cartao_id:a.cartao_id,solicitacao_id:o.row.data.solicitacao_id},function(o){alert_saved(App.lang.alert_saved.registro_excluido),a.renderizar_solicitacoes()})})})}}]}},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Colunas=function(a){return[dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Numero_Controle(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Solicitacao(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Solicitante_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Usuario_Responsavel_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Processo_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Atividade_Nome(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Prazo(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Entrega(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Data_Finalizacao(),dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Botoes(a)]},dx_Tarefa_Quadro_Lista_Cartao_Solicitacao_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,visible:App.sessao.dados.admin||a.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE||a.usuario_responsavel,onClick:function(){View.load("solicitacao/nova",function(o,i){i.onclose=function(){a.listagem_solicitacao.refresh()},i.show(null,null,null,null,null,null,null,null,null,null,null,null,a.cartao_id)})}},location:"after",name:"btnNovo",locateInMenu:"auto"}};