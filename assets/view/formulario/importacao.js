define([],function(){return function(a){"use strict";var o=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.file_importacao_formulario=this.dialog.find(".file_importacao_formulario"),this.grid_consultas_integracao=this.dialog.find(".grid_consultas_integracao"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.consultas_integracao=[],this.show=function(){show_modal(o.modal.attr("id"))},this.close=function(){close_modal(o.modal.attr("id")),void 0!==o.onclose&&o.onclose&&o.onclose()},this.unload=function(){o.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){o.unload()}),o.file_importacao_formulario.change(function(){var a=null;this.files.length?(a=this.files[0].name,WS.post("formulario/get_envolvidos/",{arquivo_formulario:o.file_importacao_formulario[0].files[0]},function(a){o.consultas_integracao=a.consulta_integracao,o.render_consultas_integracao()},null,null,!0)):a="Arraste seu arquivo aqui ou clique nesta área",$(this).parent().find("span").text(a)}),this.render_consultas_integracao=function(){o.dataGridConsultas_integracao=o.grid_consultas_integracao.dxDataGrid({dataSource:o.consultas_integracao,keyExpr:"nome_modelagem",editing:{mode:"cell",allowUpdating:!0,useIcons:!1},sorting:null,columns:[{caption:"Nome",dataField:"nome_modelagem",allowEditing:!1},{caption:"Consulta de Integração",dataField:"consulta_integracao_id",calculateDisplayValue:"consulta_integracao_nome",editCellTemplate(a,t){let i=$("<div>");ReactDOM.render(React.createElement(window.components.SelecaoConsultaIntegracao.default,{aoAlterar:(a,i)=>{t.setValue(a),t.row.data.consulta_integracao_nome=i.nome,o.consultas_integracao[t.row.dataIndex].consulta_integracao_id=a,o.consultas_integracao[t.row.dataIndex].consulta_integracao_nome=i.nome}}),i[0]),i.appendTo(a)}}]}).dxDataGrid("instance")},this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){WS.post("formulario/importar/",{arquivo_formulario:o.file_importacao_formulario[0].files[0],consultas_integracao:JSON.stringify(o.consultas_integracao)},function(a){alert_saved(a.nome+" importado com sucesso"),o.unload()},null,null,!0)})}});