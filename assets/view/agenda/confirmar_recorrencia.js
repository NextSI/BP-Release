define([],function(){return function(e){"use strict";var a=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.btn_confirmar=this.dialog.find(".btn_confirmar"),this.dx_eventos=this.dialog.find(".dx_eventos"),this.arr_eventos=[],this.view_aviso=this.dialog.find("[aviso]"),this.view_eventos=this.dialog.find("[container-eventos]"),this.agenda_recorrente_id=null,this.agenda_evento_id=null,this.dia_evento=null,this.agenda_ativo_id=null,this.tipo_reprogramacao=null,this.loading=this.dialog.find("[loading]"),this.scheme_parametros={usuario_id:null,agenda_recorrente_id:null,agenda_ativo_id:null,limite:0,agenda_evento_origem_id:null,dia_evento:null,tipo_reprogramacao:null},this.show=function(e){e=extender_parametros(a.scheme_parametros,e),a.agenda_recorrente_id=e.agenda_recorrente_id,a.agenda_evento_id=e.agenda_evento_origem_id,a.agenda_ativo_id=e.agenda_ativo_id,a.dia_evento=e.dia_evento,a.tipo_reprogramacao=e.tipo_reprogramacao,a.listar(e),show_modal(a.modal.attr("id"))},this.close=function(){close_modal(a.modal.attr("id")),void 0!==a.onclose&&a.onclose&&a.onclose()},this.listar=function(e){a.loading.removeClass("hidden"),WS.get("agenda_evento/listar_eventos_recorrentes/",e,e=>{ReactDOM.render(React.createElement(window.views.agenda.ListagemEventosRecorrentes.default,{dados:e,onRowUpdated:a.listagemEventosRecorrentesOnRowUpdated}),a.dx_eventos[0],()=>{for(var t=0;t<e.length;t++){var i=e[t];a.arr_eventos.push({id:i.id,data:i.dia,registrar:i.registrar})}a.loading.addClass("hidden")})},[a.btn_confirmar])},this.listagemEventosRecorrentesOnRowUpdated=(e=>{for(let t=0;t<a.arr_eventos.length;t++)if(+a.arr_eventos[t].id==+e.data.id){a.arr_eventos[t].registrar=e.data.registrar;break}}),this.unload=function(){a.close(),View.unload(this.html_id)},this.btn_confirmar.unbind("click").click(function(e){a.view_eventos.addClass("hidden"),a.view_aviso.removeClass("hidden");var t={eventos:a.arr_eventos,agenda_evento_id:a.agenda_evento_id,tipo_reprogramacao:a.tipo_reprogramacao},i={eventos:JSON.stringify(t)};WS.post({route:"agenda_evento/confirmar_eventos_recorrentes/",data:i,type:"POST",func_response:function(e){e?(alert_saved(App.lang.gestao_agenda.eventos_recorrentes_criados),a.unload()):(alert_fail(App.lang.gestao_agenda.eventos_recorrentes_nao_criados),a.unload())},disable_buttons:[a.btn_confirmar]})})}});