define([],function(){return function(a){"use strict";var t=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.title="Locais de armazenamento",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.lbl_uso_disco_armazenamento=this.dialog.find(".lbl_uso_disco_armazenamento"),this.listar=function(){var a=t.tab_listagem.find("tbody"),i=a.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),WS.get("local_armazenamento/listar_v2/",null,function(o){$(o.lista).each(function(o,n){!function(o){var n=i.clone();n.removeAttr("template-row"),n.css("display",""),$(n.find("[template-field='nome']")).text(o.nome),$(n.find("[template-field='diretorio']")).text(o.diretorio),$(n.find("[template-field='espaco_livre']")).text(o.espaco_livre.format_number(3,!0)+" GB"),$(n.find("[template-field='espaco_total']")).text(o.espaco_total.format_number(3,!0)+" GB"),$(n.find("[template-field='tipo_local']")).text(str_tipo_local_armazenamento(o.tipo));var e=$(n.find("[template-field='td_diretorio']"));1!=o.existe&&(e.append('<span class="glyphicon glyphicon-thumbs-down"></span>'),n.addClass("bg-danger"));var l=$(n.find("[template-field='padrao_chamados']"));1==o.padrao_chamados&&l.addClass("glyphicon-ok");var d=$(n.find("[template-field='padrao_sistema']"));1==o.padrao_sistema&&d.addClass("glyphicon-ok");var s=$(n.find("[template-field='padrao_processos']"));1==o.padrao_processos&&s.addClass("glyphicon-ok");var r=$(n.find("[template-field='padrao_documentos']"));1==o.padrao_documentos&&r.addClass("glyphicon-ok");var c=$(n.find("[template-field='padrao_projeto']"));1==o.padrao_projeto&&c.addClass("glyphicon-ok");var m=$(n.find("[template-field='padrao_atendimento_relacionamento']"));1==o.padrao_atendimento_relacionamento&&m.addClass("glyphicon-ok");var _=$(n.find(".btn_visualizar"));_.unbind("click"),_.click(function(){View.load("local_armazenamento/detalhes",function(a,t){t.show(o.local_armazenamento_id,FORMULARIO.VISUALIZAR)})});var f=$(n.find(".btn_editar")),p=function(){View.load("local_armazenamento/detalhes",function(a,i){i.onclose=t.listar,i.show(o.local_armazenamento_id,FORMULARIO.EDITAR)})};f.unbind("click"),f.click(p),n.dblclick(p);var h=$(n.find(".btn_excluir"));h.unbind("click"),h.click(function(){View.load("local_armazenamento/detalhes",function(a,i){i.onclose=t.listar,i.show(o.local_armazenamento_id,FORMULARIO.EXCLUIR)})}),n.appendTo(a)}(n)}),t.lbl_uso_disco_armazenamento.text(filesize(o.uso_disco_armazenamento))})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("local_armazenamento/detalhes",function(a,i){i.onclose=t.listar,i.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});