"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}function _possibleConstructorReturn(e,a){return!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(e):a}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_setPrototypeOf(e,a)}function _setPrototypeOf(e,a){return(_setPrototypeOf=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}define(["react","react-dom"],function(e,a){return function(a){function t(e){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).selecaoProjetoRef=null,a.state={SalvarEnviar:"",NovoChamado:"",NovaSolicitacao:"",Salvar:"",SalvarSair:"",Cancelar:"",Reprogramar:"",AlterarResponsavel:"",AssumirAtividade:"hidden",DesvincularResponsabilidade:"hidden",CancelarSolicitacao:"hidden",ReabrirSolicitacao:"hidden",RetornarAtividadeAnterior:"",VincularProjeto:"hidden",PorcentagemConcluido:"",PorcentagemNecessario:"",ProjetoID:"",ProjetoTemplate:"",TextoCancelar:"Cancelar alterações",Visualizar:"",DownloadTodosAnexos:"hidden",DownloadPdf:"",ImprimirPdf:"",DownloadTemplate:"",SupervisorProcesso:!1,CamposHabilitados:!1,projetoVinculadoPendente:!1},a.handleSalvarEnviarClick=a.handleSalvarEnviarClick.bind(_assertThisInitialized(a)),a.handleVisualizarAtividadesProjeto=a.handleVisualizarAtividadesProjeto.bind(_assertThisInitialized(a)),a.handleDownloadPDFClick=a.handleDownloadPDFClick.bind(_assertThisInitialized(a)),a.handleImprimirPdfClick=a.handleImprimirPdfClick.bind(_assertThisInitialized(a)),a.handleDownloadTemplateClick=a.handleDownloadTemplateClick.bind(_assertThisInitialized(a)),a.handleNovoChamadoClick=a.handleNovoChamadoClick.bind(_assertThisInitialized(a)),a.handleNovaSolicitacaoClick=a.handleNovaSolicitacaoClick.bind(_assertThisInitialized(a)),a.handleSalvarClick=a.handleSalvarClick.bind(_assertThisInitialized(a)),a.handleSalvarSairClick=a.handleSalvarSairClick.bind(_assertThisInitialized(a)),a.handleCancelarClick=a.handleCancelarClick.bind(_assertThisInitialized(a)),a.handleReprogramarClick=a.handleReprogramarClick.bind(_assertThisInitialized(a)),a.handleAlterarResponsavelClick=a.handleAlterarResponsavelClick.bind(_assertThisInitialized(a)),a.handleAssumirAtividadeClick=a.handleAssumirAtividadeClick.bind(_assertThisInitialized(a)),a.handleDesvincularResponsabilidadeClick=a.handleDesvincularResponsabilidadeClick.bind(_assertThisInitialized(a)),a.handleCancelarSolicitacaoClick=a.handleCancelarSolicitacaoClick.bind(_assertThisInitialized(a)),a.handleReabrirSolicitacaoClick=a.handleReabrirSolicitacaoClick.bind(_assertThisInitialized(a)),a.handleRetornarAtividadeAnteriorClick=a.handleRetornarAtividadeAnteriorClick.bind(_assertThisInitialized(a)),a.handleDownloadTodosAnexos=a.handleDownloadTodosAnexos.bind(_assertThisInitialized(a)),a.handleHabilitarEdicaoCampos=a.handleHabilitarEdicaoCampos.bind(_assertThisInitialized(a)),a.handleAlterarProjetoVinculado=a.handleAlterarProjetoVinculado.bind(_assertThisInitialized(a)),a.props.setDisplaySalvarEnviar=function(e){a.setState({SalvarEnviar:e}),a.forceUpdate()},a.props.setDisplayImprimirPDF=function(e){a.setState({ImprimirPdf:e}),a.forceUpdate()},a.props.setDisplayDownloadPdf=function(e){a.setState({DownloadPdf:e}),a.forceUpdate()},a.props.setDisplayDownloadTemplate=function(e){a.setState({DownloadTemplate:e}),a.forceUpdate()},a.props.setDisplayNovoChamado=function(e){a.setState({NovoChamado:e}),a.forceUpdate()},a.props.setDisplayNovaSolicitacao=function(e){a.setState({NovaSolicitacao:e}),a.forceUpdate()},a.props.setDisplaySalvar=function(e){a.setState({Salvar:e}),a.forceUpdate()},a.props.setDisplaySalvarSair=function(e){a.setState({SalvarSair:e}),a.forceUpdate()},a.props.setDisplayCancelar=function(e){a.setState({Cancelar:e}),a.forceUpdate()},a.props.setDisplayReprogramar=function(e){a.setState({Reprogramar:e}),a.forceUpdate()},a.props.setDisplayAlterarResponsavel=function(e){a.setState({AlterarResponsavel:e}),a.forceUpdate()},a.props.setDisplayAssumirAtividade=function(e){a.setState({AssumirAtividade:e}),a.forceUpdate()},a.props.setDisplayDesvincularResponsabilidade=function(e){a.setState({DesvincularResponsabilidade:e}),a.forceUpdate()},a.props.setDisplayCancelarSolicitacao=function(e){a.setState({CancelarSolicitacao:e}),a.forceUpdate()},a.props.setDisplayReabrirSolicitacao=function(e){a.setState({ReabrirSolicitacao:e}),a.forceUpdate()},a.props.setDisplayRetornarAtividadeAnterior=function(e){a.setState({RetornarAtividadeAnterior:e}),a.forceUpdate()},a.props.setDisplayVincularProjeto=function(e){a.setState({VincularProjeto:e}),a.forceUpdate()},a.props.setPorcentagemConcluido=function(e){a.setState({PorcentagemConcluido:e}),a.forceUpdate()},a.props.setPorcentagemNecessario=function(e){a.setState({PorcentagemNecessario:e}),a.forceUpdate()},a.props.setProjetoID=function(e){a.setState({ProjetoID:e}),a.forceUpdate()},a.props.setProjetoTemplate=function(e){a.setState({ProjetoTemplate:e})},a.props.setTextoCancelar=function(e){a.setState({TextoCancelar:e})},a.props.setVisualizar=function(e){a.setState({Visualizar:e})},a.props.setDisplayDownloadTodosAnexos=function(e){a.setState({DownloadTodosAnexos:e}),a.forceUpdate()},a.props.setSupervisorProcesso=function(e){a.setState({SupervisorProcesso:e})},a.props.setProjetoVinculadoPendente=function(e){a.setState({projetoVinculadoPendente:e}),a.forceUpdate()},a}return _inherits(t,e.Component),_createClass(t,[{key:"handleSalvarEnviarClick",value:function(e){this.state.projetoVinculadoPendente?window.alertaPopUp("Validação","Não foi possível avançar com o Processo, pois o Projeto vinculado ainda não atingiu a porcentagem de conclusão necessária.<br><br><strong>- Necessário:</strong> "+this.state.PorcentagemNecessario+"<br><strong>- Concluído:</strong> "+this.state.PorcentagemConcluido,"Ok",function(){}):this.props.handleSalvarEnviarClick()}},{key:"handleVisualizarAtividadesProjeto",value:function(e){var a=this.state.ProjetoID,t=this.state.ProjetoTemplate;View.load("atividade_projeto/listar",function(e,i){i.show(a,t)},View.ABA.MULTIPLAS)}},{key:"handleDownloadPDFClick",value:function(e){this.props.handleDownloadPDFClick()}},{key:"handleImprimirPdfClick",value:function(e){this.props.handleImprimirPdfClick()}},{key:"handleDownloadTemplateClick",value:function(e){this.props.handleDownloadTemplateClick()}},{key:"handleNovoChamadoClick",value:function(e){this.props.handleNovoChamadoClick()}},{key:"handleNovaSolicitacaoClick",value:function(e){this.props.handleNovaSolicitacaoClick()}},{key:"handleSalvarClick",value:function(e){this.props.handleSalvarClick()}},{key:"handleSalvarSairClick",value:function(e){this.props.handleSalvarSairClick()}},{key:"handleCancelarClick",value:function(e){this.props.handleCancelarClick()}},{key:"handleReprogramarClick",value:function(e){this.props.handleReprogramarClick()}},{key:"handleAlterarResponsavelClick",value:function(e){this.props.handleAlterarResponsavelClick()}},{key:"handleAssumirAtividadeClick",value:function(e){this.props.handleAssumirAtividadeClick()}},{key:"handleDesvincularResponsabilidadeClick",value:function(e){this.props.handleDesvincularResponsabilidadeClick()}},{key:"handleCancelarSolicitacaoClick",value:function(e){this.props.handleCancelarSolicitacaoClick()}},{key:"handleReabrirSolicitacaoClick",value:function(e){this.props.handleReabrirSolicitacaoClick()}},{key:"handleRetornarAtividadeAnteriorClick",value:function(e){this.props.handleRetornarAtividadeAnteriorClick()}},{key:"handleDownloadTodosAnexos",value:function(e){this.props.handleDownloadTodosAnexos()}},{key:"handleHabilitarEdicaoCampos",value:function(e){this.setState({CamposHabilitados:!0}),this.props.handleHabilitarEdicaoCampos()}},{key:"handleAlterarProjetoVinculado",value:function(e,a,t,i){this.props.handleAlterarProjetoVinculado(e,a,t,i)}},{key:"render",value:function(){var a=this,t=e.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle btnOpcoesFiltroProcesso BotaoResponsivo pull-right","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.createElement("span",{className:"fa fa-filter"})," ","Opções ",e.createElement("span",{className:"caret pull-right",style:{marginTop:"8px"}})),i=e.createElement(window.components.SelecaoProjeto.default,{width:350,dataGridWidth:700,selecionado:this.state.ProjetoID,style:{float:"right",marginTop:3,marginRight:10,marginLeft:10},aoAlterar:this.handleAlterarProjetoVinculado,getDropDownRef:function(e){a.selecaoProjetoRef=e},dataGridOnToolbarPreparing:function(e){var t=[{widget:"dxButton",options:{icon:"fa fa-plus",hint:"Adicionar Projeto",text:"Adicionar",onClick:function(){a.selecaoProjetoRef&&a.selecaoProjetoRef.current&&a.selecaoProjetoRef.current._instance.close(),View.load("projeto/detalhes",function(e,a){a.show(null,FORMULARIO.NOVO)},View.ABA.MULTIPLAS)}},location:"after",name:"BtnNovoApontamento",locateInMenu:"auto"}];e.toolbarOptions.items=window.add_botao_dx_toolbar(t,e.toolbarOptions.items)}}),o=e.createElement("button",{type:"button",className:"btn "+(this.state.projetoVinculadoPendente?"btn-warning":"btn-primary")+" btn_enviar BotaoResponsivo "+this.state.SalvarEnviar,onClick:this.handleSalvarEnviarClick},e.createElement("span",{className:this.state.projetoVinculadoPendente?"fas fa-exclamation-triangle":"fas fa-forward"})," Salvar e enviar"),s=e.createElement("button",{type:"button",className:"pull-right btn btn-default btn_assumir_atividade BotaoResponsivo "+this.state.AssumirAtividade,onClick:this.handleAssumirAtividadeClick},"Assumir Atividade"),l=e.createElement("button",{type:"button",className:"pull-right btn btn-default btn_desvincular_responsabilidade BotaoResponsivo "+this.state.DesvincularResponsabilidade,onClick:this.handleDesvincularResponsabilidadeClick},"Desvincular Responsabilidade");return e.createElement("div",{className:"row",style:{paddingTop:"10px"}},e.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12"},!this.state.Visualizar&&""==this.state.SalvarEnviar&&o),e.createElement("div",{className:"col-md-10 col-sm-12 col-xs-12"},t,!this.state.Visualizar&&"hidden"!==this.state.VincularProjeto&&i,e.createElement("ul",{className:"dropdown-menu BotaoResponsivo pull-right",style:{marginRight:"15px"}},"hidden"!=this.state.DownloadPdf&&e.createElement("li",{className:this.state.DownloadPdf},"                                                                                    ",e.createElement("a",{href:"javascript:;",onClick:this.handleDownloadPDFClick},"              ",e.createElement("div",{className:"fa fa-file-pdf"},"               "),"   Download do formulário           ")),"hidden"!=this.state.ImprimirPdf&&e.createElement("li",{className:this.state.ImprimirPdf},"                                                                                    ",e.createElement("a",{href:"javascript:;",onClick:this.handleImprimirPdfClick},"              ",e.createElement("div",{className:"fa fa-print"},"               "),"   Imprimir formulário           ")),"hidden"!=this.state.DownloadTemplate&&e.createElement("li",{className:this.state.Template},e.createElement("a",{href:"javascript:;",onClick:this.handleDownloadTemplateClick},e.createElement("div",{className:"fas fa-file-export"}),"   Download Template")),""==this.state.DownloadTodosAnexos&&e.createElement("li",{className:this.state.DownloadTodosAnexos},"                                                                             ",e.createElement("a",{href:"javascript:;",onClick:this.handleDownloadTodosAnexos},"            ",e.createElement("div",{className:"fa fa-file-archive"},"           "),"   Download de todos anexos         ")),!(!this.state.SupervisorProcesso||this.state.CamposHabilitados)&&e.createElement("li",{className:this.state.SupervisorProcesso},"                                                                              ",e.createElement("a",{href:"javascript:;",onClick:this.handleHabilitarEdicaoCampos},"          ",e.createElement("div",{className:"fa fa-pencil-alt"}),"   Editar Campos                           ")),!(!(!this.state.Visualizar||this.state.SupervisorProcesso&&this.state.CamposHabilitados)||""!=this.state.Salvar)&&e.createElement("li",{className:this.state.Salvar},"                                                                                          ",e.createElement("a",{href:"javascript:;",onClick:this.handleSalvarClick},"                    ",e.createElement("div",{className:"far fa-save"}),"   Salvar                           ")),!(!(!this.state.Visualizar||this.state.SupervisorProcesso&&this.state.CamposHabilitados)||""!=this.state.SalvarSair)&&e.createElement("li",{className:this.state.SalvarSair},"                                                                                      ",e.createElement("a",{href:"javascript:;",onClick:this.handleSalvarSairClick},"                ",e.createElement("div",{className:"far fa-save"}),e.createElement("div",{className:"fa fa-sign-out-alt icon-on-top"}),"Salvar e sair                    ")),""==this.state.Cancelar&&e.createElement("li",{className:this.state.Cancelar},"                                                                                                                                   ",e.createElement("a",{href:"javascript:;",onClick:this.handleCancelarClick},"                  ",e.createElement("div",{className:"fa fa-times"},"      "),"   ",this.state.TextoCancelar,"      ")),!this.state.Visualizar&&""==this.state.CancelarSolicitacao&&e.createElement("li",{className:this.state.CancelarSolicitacao},"                                                                             ",e.createElement("a",{href:"javascript:;",onClick:this.handleCancelarSolicitacaoClick},"       ",e.createElement("div",{className:"fa fa-trash"},"       "),"   Cancelar solicitação            ")),!this.state.Visualizar&&""==this.state.ReabrirSolicitacao&&e.createElement("li",{className:this.state.ReabrirSolicitacao},"                                                                               ",e.createElement("a",{href:"javascript:;",onClick:this.handleReabrirSolicitacaoClick},"       ",e.createElement("div",{className:"fa fa-undo"},"       "),"   Reabrir solicitação            ")),!this.state.Visualizar&&!window.App.sessao.sessao_login_anonimo&&e.createElement("li",{role:"separator",className:"divider"}),!this.state.Visualizar&&""==this.state.NovoChamado&&e.createElement("li",{className:this.state.NovoChamado},"                                                                                     ",e.createElement("a",{href:"javascript:;",onClick:this.handleNovoChamadoClick},"               ",e.createElement("img",{src:"assets/img/icones_bp/comunication.svg",width:"15px"}),"   Novo chamado                    ")),!this.state.Visualizar&&""==this.state.NovaSolicitacao&&e.createElement("li",{className:this.state.NovaSolicitacao},"                                                                                 ",e.createElement("a",{href:"javascript:;",onClick:this.handleNovaSolicitacaoClick},"           ",e.createElement("img",{src:"assets/img/icones_bp/processos.svg",width:"15px"}),"   Nova solicitação                ")),!this.state.Visualizar&&""==this.state.Salvar&&!window.App.sessao.sessao_login_anonimo&&e.createElement("li",{role:"separator",className:"divider"}),!this.state.Visualizar&&""==this.state.AlterarResponsavel&&""==this.state.Salvar&&e.createElement("li",{className:this.state.AlterarResponsavel},"                                                                              ",e.createElement("a",{href:"javascript:;",onClick:this.handleAlterarResponsavelClick},"        ",e.createElement("div",{className:"fa fa-edit"},"        "),"   Alterar responsável             ")),!this.state.Visualizar&&""==this.state.Reprogramar&&""==this.state.Salvar&&e.createElement("li",{className:this.state.Reprogramar},"                                                                                     ",e.createElement("a",{href:"javascript:;",onClick:this.handleReprogramarClick},"               ",e.createElement("div",{className:"fa fa-calendar"},"        "),"   Reprogramar                     ")),!this.state.Visualizar&&""==this.state.RetornarAtividadeAnterior&&e.createElement("li",{className:this.state.RetornarAtividadeAnterior},"                                                                       ",e.createElement("a",{href:"javascript:;",onClick:this.handleRetornarAtividadeAnteriorClick}," ",e.createElement("div",{className:"fa fa-step-backward"},"  "),"   Retornar para atividade anterior")),!this.state.Visualizar&&+this.state.ProjetoID>0&&!window.App.sessao.sessao_login_anonimo&&e.createElement("li",{role:"separator",className:"divider"}),!this.state.Visualizar&&+this.state.ProjetoID>0&&e.createElement("li",{className:this.state.VincularProjeto},e.createElement("a",{href:"javascript:;",onClick:this.handleVisualizarAtividadesProjeto},e.createElement("div",{className:"fa fa-list"},e.createElement("div",{className:"fa fa-eye icon-on-top"})),"Visualizar projeto"))),!this.state.Visualizar&&""==this.state.AssumirAtividade&&""==this.state.Salvar&&s,!this.state.Visualizar&&""==this.state.DesvincularResponsabilidade&&""==this.state.Salvar&&l))}}]),t}()});