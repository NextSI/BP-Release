define([],function(){return function(e){"use strict";var t=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.onsave=null,this.oncancel=null,this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_confirmar=this.dialog.find(".btn_salvar"),this.cbo_representante=this.dialog.find(".cbo_representante"),this.representante_id=null,this.grupo_representantes=null,this.label_transferencia=this.dialog.find(".label_transferencia"),this.alerta=this.dialog.find(".alerta"),this.show=function(e){t.grupo_representantes=e,t.label_transferencia.text("("+t.grupo_representantes.length+") Oportunidades ser√£o transferidas!"),show_modal(t.modal.attr("id")),create_combobox(t.cbo_representante,t.listar_representante);var n=t.cbo_representante.parent();t.edt_representante=n.find(".edt_combobox"),t.edt_representante.keypress(function(e){if(13==e.keyCode){var n=t.cbo_representante.parent(),i=n.find(".ncbo_scroll").find(".row_selected").attr("id_registro");t.representante_id=i,n.find(".ncbo_item").removeClass("bg-primary"),n.find(".ncbo_item").removeClass("row_selected")}})},this.listar=function(){},this.preencher=function(){},this.listar_representante=function(e){var n={nome:t.edt_representante.val(),modulo:MODULOS.RELACIONAMENTO};WS.get("supervisor/listar_representantes_supervisionados/",n,function(n){limpar_combobox(t.cbo_representante),$(n).each(function(e,n){var i=[];i.Nome=n.usuario_nome,add_option_combobox(t.cbo_representante,e,n.usuario_id,i)}),t.cbo_representante.parent().find(".ul_row").click(function(){var e=$(this).parent().attr("id_registro");t.representante_id=e}),e(!0)})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click").click(function(e){void 0!==t.oncancel&&t.oncancel&&t.oncancel(),t.unload()}),this.btn_confirmar.unbind("click").click(function(){t.alerta.removeClass("hidden").fadeIn(200),WS.post({route:"oportunidade/transferir/",type:"POST",data:{oportunidades:JSON.stringify(t.grupo_representantes),novo_representante:t.representante_id},func_response:function(e){e&&(alert_saved("Oportunidades transferidas com sucesso."),void 0!==t.onsave&&t.onsave&&t.onsave(),t.unload())},html_id:t.html_id,disable_buttons:[t.btn_confirmar,t.btn_cancelar]})})}});