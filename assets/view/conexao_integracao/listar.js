define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.title="Conexões de Integração",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){var t=i.tab_listagem.find("tbody"),n=t.find("tr:first");i.tab_listagem.find("tr:gt(1)").remove(),WS.get("conexao_integracao/listar/",null,function(e){$(e).each(function(e,o){!function(e){var o,a=n.clone();a.removeAttr("template-row"),a.css("display",""),$(a.find("[template-field='conexao_id']")).text(e.conexao_id),$(a.find("[template-field='banco_dados']")).text(e.banco_dados_nome),e.banco_dados_tipo==CONEXAO_INTEGRACAO_BANCO_DADOS.PDO_DNS_STRING?((o=$(a.find("[template-field='database']"))).text(e.pdo_dns_string),o.attr("colspan",2),$(a.find("[template-field='endereco']")).remove()):((o=$(a.find("[template-field='database']"))).text(e.database_nome),$(a.find("[template-field='endereco']")).text(e.endereco));var d=$(a.find(".btn_visualizar"));d.unbind("click"),d.click(function(){View.load("conexao_integracao/detalhes",function(t,i){i.show(e.conexao_id,FORMULARIO.VISUALIZAR)})});var l=$(a.find(".btn_editar")),c=function(){View.load("conexao_integracao/detalhes",function(t,n){n.onclose=i.listar,n.show(e.conexao_id,FORMULARIO.EDITAR)})};l.unbind("click"),l.click(c),a.dblclick(c);var s=$(a.find(".btn_excluir"));s.unbind("click"),s.click(function(){View.load("conexao_integracao/detalhes",function(t,n){n.onclose=i.listar,n.show(e.conexao_id,FORMULARIO.EXCLUIR)})}),0==+e.conexao_id&&$(a.find('[template-buttons="actions"] .btn-group')).hide(),a.appendTo(t)}(o)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("conexao_integracao/detalhes",function(t,n){n.onclose=i.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){i.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});