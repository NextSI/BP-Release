define([],function(){return function(a){"use strict";var o=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.title="Documentos",this.dx_listagem_pendencias=this.dialog.find(".dx_listagem_pendencias"),this.aviso_pendentes=this.dialog.find(".aviso_pendentes"),this.show=function(a){if(!a)return!1;var e=new DevExpress.data.DataSource.default({load:function(e){var n=$.Deferred(),t=loadOptionsToActionParams(e);return WS.post({route:"documento/listar_pendencias/",data:t,func_response:function(e){if(!1===a){var t=e.total_aguardando_aprovacao+e.total_aguardando_distribuicao;t>0&&(t>1?o.aviso_pendentes.text(t+" documentos aguardam sua aprovação"):o.aviso_pendentes.text("Um documento aguarda sua aprovação"),o.aviso_pendentes.removeClass("hidden"))}else o.aviso_pendentes.addClass("hidden");n.resolve(e)},func_fail:function(a){a.validation&&n.reject(new Error(a.validation.messages.map(function(a){return a.message}).join("<br/>")))},html_id:o.html_id}),n.promise()}});o.dataGridPendencias=dx_Listagem_Padrao({div_html:o.dx_listagem_pendencias,coluna_chave:"id",colunas:dx_Documentos_Pendencias_Colunas(o),toolbar:[],datasource:e,nome:"Aprovação Pendente",nome_parametro_usuario:"listagem_documentos_pendencias",filter_value:[["nome_usuario","=",App.sessao.dados.nome],"and",[["situacao","=","A1"],"or",["situacao","=","D1"],"or",["situacao","=","D2"],"or",["situacao","=","D3"]]],on_row_click:function(a){onDoubleClick(a,function(){View.load("central_documentos/documento",function(o,e){e.show(a.row.data.documento_id,FORMULARIO.EDITAR,a.row.data.documento_pasta_id,!1,null,null,null,null,null)},View.ABA.MULTIPLAS)})},diferenca_altura:45,summary:{groupItems:[{column:"id",summaryType:"count",displayFormat:"{0} registros"}]}})},this.unload=function(){View.unload(this.html_id)}}});