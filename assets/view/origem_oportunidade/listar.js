define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Origem da Oportunidade",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.show=function(){t.listar()},this.listar=function(){var i=t.tab_listagem.find("tbody"),n=i.find("tr:first");WS.get("oportunidade_origem/listar/",null,function(o){t.tab_listagem.find("tr:gt(1)").remove(),$(o).each(function(o,e){!function(o){var e=n.clone();e.removeAttr("template-row"),e.css("display",""),$(e.find("[template-field='nome']")).text(o.nome),$(e.find("[template-field='telefone']")).text(o.telefone?o.telefone:""),$(e.find("[template-field='observacao']")).text(o.observacao?o.observacao:"");var l=$(e.find(".btn_visualizar"));l.unbind("click"),l.click(function(){View.load("origem_oportunidade/detalhes",function(i,t){t.show(o.oportunidade_origem_id,FORMULARIO.VISUALIZAR)})});var a=$(e.find(".btn_editar")),d=function(){View.load("origem_oportunidade/detalhes",function(i,n){n.onclose=t.listar,n.show(o.oportunidade_origem_id,FORMULARIO.EDITAR)})};a.unbind("click"),a.click(d),e.dblclick(d);var s=$(e.find(".btn_excluir"));s.unbind("click"),s.click(function(){View.load("origem_oportunidade/detalhes",function(i,n){n.onclose=t.listar,n.show(o.oportunidade_origem_id,FORMULARIO.EXCLUIR)})}),e.appendTo(i)}(e)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("origem_oportunidade/detalhes",function(i,n){n.onclose=t.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)}}});