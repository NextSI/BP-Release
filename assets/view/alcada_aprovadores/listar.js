define([],function(){return function(a){"use strict";var i=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.title="Alçada de Aprovadores",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_refresh=this.dialog.find(".btn_refresh"),this.btn_novo=this.dialog.find(".btn_novo"),this.listar_alcadas=function(){var a=i.tab_listagem.find("tbody"),t=a.find("tr:first");i.tab_listagem.find("tr:gt(1)").remove(),WS.get("alcada_aprovadores/listar/",null,function(e){e.length>0&&$(e).each(function(e,n){!function(e){var n=t.clone();n.removeAttr("template-row"),n.removeAttr("style"),$(n.find("[template-field='id']")).text("#"+e.alcada_generica_id),$(n.find("[template-field='nome']")).append("<span>"+e.nome+"</span>"),$(n.find(".btn_excluir")).click(function(){alert_modal("Excluir","Deseja excluir <b>"+e.nome+"</b>?","Excluir",function(){i.excluir_registro(e.alcada_generica_id)},!0,"Cancelar",function(){})}),$(n.find(".btn_editar")).click(function(){View.load("alcada_aprovadores/detalhes",function(a,t){t.show(e.alcada_generica_id),t.onsave=function(){i.listar_alcadas()}},View.ABA.MULTIPLAS)}),$(window).width()<992&&$(n.find("[template-field='ferramentas']")).css("display","flex"),n.appendTo(a)}(n)})})},this.excluir_registro=function(a){WS.post("alcada_aprovadores/excluir/",{alcada_generica_id:a},function(a){alert_saved("Excluído com sucesso"),i.listar_alcadas()})},this.btn_refresh.click(function(){i.listar_alcadas()}),this.btn_novo.click(function(){View.load("alcada_aprovadores/detalhes",function(a,t){t.show(),t.onsave=function(){i.listar_alcadas()}},View.ABA.MULTIPLAS)}),i.listar_alcadas()}});