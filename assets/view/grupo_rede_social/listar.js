define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Meus Grupos",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){var i=t.tab_listagem.find("tbody"),n=i.find("tr:first"),a=App.sessao.dados.app_url+"/#/social/grupo/";t.tab_listagem.find("tr:gt(1)").remove(),WS.get("grupos_rede_social/listar/",{usuario_id:App.sessao.usuario_id},function(s){s&&$(s).each(function(s,o){!function(s){var o=n.clone();o.removeAttr("template-row"),o.css("display",""),$(o.find("[template-field='id']")).text(s.grupo_id),$(o.find("[template-field='nome']")).text(s.nome);var l=$(o.find("[template-field='privado']")),e=grupo_social_privacidade(s.privado),d='<div class="small text-muted"><a class="btn_abrir_aba" href="javascript:;">Acessar grupo</a>'+(s.link_sufixo&&""!=s.link_sufixo?'&nbsp;<a style="margin-left: 4px;" target="_blank" href="'+a+s.link_sufixo+'"><span class="fa fa-external-link-alt"></span>&nbsp;Link de acesso</a>':"")+"</div>";l.html('<div><div><span class="'+e.classe_img+'"></span>&nbsp;'+e.texto+"</div></div>"+d+"</div>"),l.find(".btn_abrir_aba").click(function(){View.load("grupo_rede_social_pagina/listar",function(i,t){t.show(s.grupo_id)},View.ABA.MULTIPLAS)});var r=$(o.find(".btn_visualizar"));r.unbind("click"),r.click(function(){View.load("grupo_rede_social/detalhes",function(i,t){t.show(s.grupo_id,FORMULARIO.VISUALIZAR)})});var c=$(o.find(".btn_editar")),u=function(){View.load("grupo_rede_social/detalhes",function(i,n){n.onclose=t.listar,n.show(s.grupo_id,FORMULARIO.EDITAR)})};c.unbind("click"),c.click(u),o.dblclick(u);var _=$(o.find(".btn_excluir"));_.unbind("click"),_.click(function(){View.load("grupo_rede_social/detalhes",function(i,n){n.onclose=t.listar,n.show(s.grupo_id,FORMULARIO.EXCLUIR)})}),o.appendTo(i)}(o)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("grupo_rede_social/detalhes",function(i,n){n.onclose=t.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});