!function(n){var e=function(e,t){this.instance={name:"",elementRoot:e,elementResult:null,menu:null,component:this,loader:null,parameters:t||{},tmp_options:[],options:[],values:[]};var a=this;this.create=function(){var e="select_bp_"+md5((new Date).getTime()),t="";void 0!==a.instance.parameters.placeholder&&(t=a.instance.parameters.placeholder);var i='<div class="dropdown '+e+'" style="position:relative;"><button class="btn dropdown-toggle btn-default" data-toggle="dropdown"  data-valor-atual style="min-width:120px; max-width:300px">'+(a.instance.options.length>0?'<span class="text hideextra" style="display: block; max-width: 230px; float: left;">'+a.instance.options[0].name+"</span>":'<span class="text">'+t+"</span>")+'&nbsp;<span class=""><span class="caret"></span></span></button>\x3c!--.btn--\x3e</div>\x3c!--.dropdown--\x3e',s=n('<div class="loader-dropdown" style="background-color:rgba(194, 194, 194, 0.59);position:absolute; top:0; left:0;width:100%;height:100%;display:none;"><i class="fa fa-circle-notch fa-spin fa-2x" style="position: absolute; left:43%; top: 12%;"></i></div>'),l='<ul class="dropdown-menu select_bp-menu '+a.util.getDirection()+'"></ul>',o=n(l),c=n(i);n.each(a.util.generateOptions(),function(e,t){n(t).appendTo(o)}),c.append(o),c.appendTo(a.instance.elementRoot),s.appendTo(c),a.instance.loader=a.instance.elementRoot.find(".loader-dropdown"),a.instance.menu=a.instance.elementRoot.find(".dropdown-menu"),a.instance.elementResult=a.instance.elementRoot.find("[data-valor-atual]"),a.instance.name=e},this.initializeEvents=function(){a.instance.elementRoot.find("ul > li").unbind("click").click(function(){var e=new Event("change"),t=n(this),i="true"==t.attr("data-marked");t.attr("data-marked",!i);var s=t.children().eq(0).children().eq(1).text();t.parents("."+a.instance.name).children().eq(0).children().eq(0).text(s);a.util.isMultiple()?t.find(".fa").toggleClass("fa-check"):(a.instance.elementRoot.find(".select_bp-menu").find(".fa-check").each(function(e,t){n(t).removeClass("fa-check")}),t.find(".fa").toggleClass("fa-check"),a.instance.values=[t.data("originalValues")],a.instance.elementRoot.get(0).dispatchEvent(e))})},this.init=function(){a.create(),a.initializeEvents()},this.render=function(e){void 0===e&&(e=!1),e||(a.instance.options=a.instance.options.concat(a.instance.tmp_options),n.each(a.util.generateOptions(),function(e,t){n(t).appendTo(a.instance.menu)}),a.instance.tmp_options=[],a.initializeEvents()),a.get().find("[data-value]").length>0&&a.instance.values.map(function(n,e){a.get().find('[data-value="'+n.value+'"]').click()})},this.add=function(n,e,t){a.instance.tmp_options.push({name:n,value:e,extra:t||null}),a.render()},this.get=function(){return a.instance.elementRoot},this.getJSON=function(){if(a.instance.values.length>0)return a.instance.values[0]},this.val=function(n){var e;return void 0===n||null==n?0!=(e=a.instance.values.map(function(n){return n.value})[0])?e||null:0:a.instance.options.length>0?(a.util.mark(n),0!=(e=a.instance.values.map(function(n){return n.value})[0])?e||null:0):void 0},a.util={generateOptions:function(){return a.instance.tmp_options.length>0?a.instance.tmp_options.map(function(e,t){var a=n('<li data-value="'+e.value+'" data-marked="false"><a href="javascript:;"><span class="fa "></span>&nbsp;<span class="text hideextra" style="max-width: 350px;">'+e.name+"</span></a></li>");return a.data("originalValues",e),a}):a.instance.options.map(function(e,t){var a=n('<li data-value="'+e.value+'" data-marked="false"><a href="javascript:;"><span class="fa "></span>&nbsp;<span class="text hideextra" style=";max-width: 350px;">'+e.name+"</span></a></li>");return a.data("originalValues",e),a})},getDirection:function(){return void 0!==a.instance.parameters.direction?"dropdown-menu-"+a.instance.parameters.direction:""},isMultiple:function(){return void 0!==a.instance.parameters.multiple&&a.instance.parameters.multiple},val:function(){return 0!=a.instance.values[0].value?a.instance.values[0].value||null:0},mark:function(n){var e=a.instance.options.filter(function(e,t){return e.value==n});e.length>0?(a.instance.values=[e[0]],a.render(!0)):a.instance.values=[]}}};n.fn.select_bp=function(t){var a=n(this),i=new e(a,t);return i.init(),i.initializeEvents(),i},n.select_bp={},n.select_bp.values=function(n){return n.instance.values},n.select_bp.set=function(n,e){n.instance.options=e,n.render()},n.select_bp.add=function(n,e,t){n.add(e,t)}}(jQuery);