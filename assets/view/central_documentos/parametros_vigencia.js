define([],function(){return function(i){"use strict";var a=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_pesquisar=this.dialog.find(".btn_pesquisar"),this.cbo_vigencia=this.dialog.find(".cbo_vigencia"),this.cbo_situacao_aprovacao=this.dialog.find(".cbo_situacao_aprovacao"),this.edt_vigencia_inicio=this.dialog.find(".edt_vigencia_inicio"),this.edt_vigencia_fim=this.dialog.find(".edt_vigencia_fim"),this.linha_datas=this.dialog.find(".linha_datas"),this.edt_reprova_inicio=this.dialog.find(".edt_reprova_inicio"),this.edt_reprova_fim=this.dialog.find(".edt_reprova_fim"),this.linha_datas_reprova=this.dialog.find(".linha_datas_reprova"),this.chk_exibir_informacoes_reprova=this.dialog.find(".chk_exibir_informacoes_reprova"),this.show=function(){show_modal(a.modal.attr("id")),a.chk_exibir_informacoes_reprova.prop("checked",!0).change()},this.close=function(){close_modal(a.modal.attr("id")),void 0!==a.onclose&&a.onclose&&a.onclose()},this.unload=function(){a.close(),View.unload(this.html_id)},this.btn_pesquisar.unbind("click"),this.btn_pesquisar.click(function(){if(!(""==a.edt_vigencia_inicio.val()&&""==a.edt_vigencia_fim.val()||""!=a.edt_vigencia_inicio.val()&&""!=a.edt_vigencia_fim.val())){var i=new Validation;return i.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Data de vigência inicial e final precisam ser preenchidas.")),alert_modal("Validação",i),!1}var o={vigencia_inicio:get_datepicker(a.edt_vigencia_inicio),vigencia_fim:get_datepicker(a.edt_vigencia_fim),reprova_inicio:get_datepicker(a.edt_reprova_inicio),reprova_fim:get_datepicker(a.edt_reprova_fim),vigencia:a.cbo_vigencia.val(),situacao_aprovacao:a.cbo_situacao_aprovacao.val(),exibir_informacoes_reprova:a.chk_exibir_informacoes_reprova.prop("checked")};a.onselect(o),a.unload()}),this.cbo_vigencia.change(function(){a.cbo_vigencia.val()==GED_RELATORIO_TIPO_VIGENCIA.TODOS||a.cbo_vigencia.val()==GED_RELATORIO_TIPO_VIGENCIA.SEM_VIGENCIA?a.linha_datas.addClass("hidden"):a.linha_datas.removeClass("hidden")}),this.cbo_situacao_aprovacao.change(function(){a.cbo_situacao_aprovacao.val()==GED_RELATORIO_SITUACAO_DOCUMENTO.TODOS||a.cbo_situacao_aprovacao.val()==GED_RELATORIO_SITUACAO_DOCUMENTO.REPROVADO?a.linha_datas_reprova.removeClass("hidden"):a.linha_datas_reprova.addClass("hidden")}),this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){a.unload()})}});