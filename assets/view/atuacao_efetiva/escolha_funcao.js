define([],function(){return function(o){"use strict";var a=this;this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.cbo_funcoes=this.dialog.find(".cbo_funcoes"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.atuacao_efetiva_id=0,this.indicador_id=0,this.versao_base=0,this.versao_controle=0,this.show=function(){a.listar_funcoes(),a.btn_salvar.addClass("hidden"),show_modal(a.modal.attr("id"))},this.listar_funcoes=function(o){WS.get("funcao_hpe/listar/",null,function(o){a.cbo_funcoes.find("option").remove(),add_option(a.cbo_funcoes,-1,"Selecione uma função");for(var i=0;i<o.length;i++){var t=o[i];add_option(a.cbo_funcoes,t.funcao_hpe_id,t.nome)}a.cbo_funcoes.selectpicker("refresh"),a.btn_salvar.prop("disabled",!0)})},a.cbo_funcoes.unbind(),a.cbo_funcoes.change(function(o){-1!=$(o.target).val()?a.btn_salvar.removeClass("hidden"):a.btn_salvar.addClass("hidden")}),this.close=function(){close_modal(a.modal.attr("id")),void 0!==a.onclose&&a.onclose&&a.onclose()},this.unload=function(){a.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){a.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){WS.get("funcao_hpe/listar/",{funcao_id:a.cbo_funcoes.val()},function(o){WS.post("atuacao_efetiva/salvar",{funcao:a.cbo_funcoes.find("option:selected").text(),funcao_id:a.cbo_funcoes.val(),tela_atual:3,missao_cargo:o[0].missao},function(o){alert_saved("Salvo com sucesso"),View.load("atuacao_efetiva/passos_atuacao_efetiva",function(i,t){t.show(o.atuacao_efetiva_indicador_id,o.id,a.cbo_funcoes.val())},View.ABA.MULTIPLAS),a.unload()})})})}});