define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.edt_titulo=this.dialog.find(".edt_titulo"),this.desc_nova_lista=this.dialog.find(".desc_nova_lista"),this.chk_encerrar_lista=this.dialog.find(".chk_encerrar_lista"),this.div_encerrar_lista=this.dialog.find(".div_encerrar_lista"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.grupo_id=null,this.tipo=null,this.lista_id=null,this.valor=null,this.show=function(i,a,e){switch(a){case FORMULARIO.NOVO:t.btn_salvar.show(),t.btn_excluir.hide(),t.div_encerrar_lista.hide(),t.permite_alterar(!0),set_tinymce(t.desc_nova_lista,"");break;case FORMULARIO.EDITAR:t.btn_salvar.show(),t.btn_excluir.hide(),t.div_encerrar_lista.show(),t.permite_alterar(!0),t.preencher(e);break;case FORMULARIO.VISUALIZAR:t.btn_salvar.hide(),t.btn_excluir.hide(),t.div_encerrar_lista.hide(),t.permite_alterar(!1),t.preencher(e);break;case FORMULARIO.EXCLUIR:t.btn_salvar.hide(),t.btn_excluir.show(),t.div_encerrar_lista.hide(),t.permite_alterar(!1),t.preencher(e)}t.tipo=a,t.grupo_id=i,show_modal(t.modal.attr("id")),set_focus(t.edt_nome)},this.preencher=function(i){t.lista_id=i,WS.get("listas_discussao/objeto/",{lista_id:i},function(i){tinymce.remove(),t.edt_titulo.val(i.titulo),set_tinymce(t.desc_nova_lista,i.descricao),t.grupo_id=i.grupo_id,1==i.topico_fechado||"S"==i.topico_fechado?t.chk_encerrar_lista.bootstrapSwitch("state",!0):t.chk_encerrar_lista.bootstrapSwitch("state",!1)})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){tinymce.remove(),t.close(),View.unload(this.html_id)},this.permite_alterar=function(i){t.edt_titulo.prop("readonly",!i),t.edt_titulo.prop("readonly",!i),t.chk_encerrar_lista.prop("readonly",!i),t.valor=i},t.btn_cancelar.unbind("click"),t.btn_cancelar.click(function(){t.unload()}),t.btn_salvar.unbind("click"),t.btn_salvar.click(function(){var i=null;i=1==(i=t.chk_encerrar_lista.prop("checked"))?"S":"N",WS.post("listas_discussao/salvar",{lista_id:t.lista_id,grupo_id:t.grupo_id,titulo:t.edt_titulo.val(),descricao:get_tinymce(t.desc_nova_lista),topico_fechado:i},function(i){alert_saved("Mensagem publicada com sucesso"),t.unload()},[t.btn_salvar],null,!0)}),t.btn_excluir.unbind("click"),t.btn_excluir.click(function(){WS.post("listas_discussao/excluir",{lista_id:t.lista_id},function(i){alert_saved("Mensagem publicada com sucesso"),t.unload()},[t.btn_excluir],null,!0)})}});