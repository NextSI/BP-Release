define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.title="Assuntos de Projeto",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){var t=i.tab_listagem.find("tbody"),n=t.find("tr:first");i.tab_listagem.find("tr:gt(1)").remove(),WS.get("assunto_projeto/listar/",null,function(o){$(o).each(function(o,s){!function(o){var s=n.clone();s.removeAttr("template-row"),s.css("display",""),$(s.find("[template-field='descricao']")).text(o.descricao);var l=$(s.find(".btn_visualizar"));l.unbind("click"),l.click(function(){View.load("assunto_projeto/detalhes",function(t,i){i.show(o.assunto_projeto_id,FORMULARIO.VISUALIZAR)})});var a=$(s.find(".btn_editar")),e=function(){View.load("assunto_projeto/detalhes",function(t,n){n.onclose=i.listar,n.show(o.assunto_projeto_id,FORMULARIO.EDITAR)})};a.unbind("click"),a.click(e),s.dblclick(e);var c=$(s.find(".btn_excluir"));c.unbind("click"),c.click(function(){View.load("assunto_projeto/detalhes",function(t,n){n.onclose=i.listar,n.show(o.assunto_projeto_id,FORMULARIO.EXCLUIR)})}),s.appendTo(t)}(s)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("assunto_projeto/detalhes",function(t,n){n.onclose=i.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){i.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});