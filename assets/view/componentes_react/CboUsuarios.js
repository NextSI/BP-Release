"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function _createClass(o,e,r){return e&&_defineProperties(o.prototype,e),r&&_defineProperties(o,r),o}function _possibleConstructorReturn(o,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(o):e}function _assertThisInitialized(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),e&&_setPrototypeOf(o,e)}function _setPrototypeOf(o,e){return(_setPrototypeOf=Object.setPrototypeOf||function(o,e){return o.__proto__=e,o})(o,e)}define(["react","react-dom"],function(o,e){return function(e){function r(o){var e;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,o))).state={LabelCampo:null},e.props.UsuarioSelecionado=null,e.props.FunctionSelect=null,e.props.ObjParam={EquipeInterna:!1,ClienteId:-1,EmpresaId:-1,Clientes:!1,Fornecedores:!1,Prospects:!1,ExibirTecnicos:!1,ExibirApenasTecnicos:!1,ExibirApenasSupervisionados:!1,Modulo:null,ExibirGrupos:!1,LabelCampo:null,ArrUsuarios:[],ArrGrupoUsuarios:[],LimpaConteudoAposSelecionar:!1},e.props.setObjParam=function(o){for(var r in o)o.hasOwnProperty(r)&&e.props.ObjParam.hasOwnProperty(r)&&(e.props.ObjParam[r]=o[r],"LabelCampo"==r&&e.setState({LabelCampo:o[r]}))},e.props.setUsuario=function(o){set_value_combobox($(e.refs.cbo_usuario),o.usuario_id,o.usuario_nome)},e.props.setCampoUsuarioLeitura=function(o){var r=$(e.refs.cbo_usuario).parent(),t=r.find(".edt_combobox"),a=r.find("button");$(t).attr("disabled",o),$(t).attr("readonly",o),$(a).attr("disabled",o)},e.props.setFunctionSelect=function(o){e.props.FunctionSelect=o},e}return _inherits(r,o.Component),_createClass(r,[{key:"componentDidMount",value:function(){this.CriarCombobox()}},{key:"ListarUsuarios",value:function(o,e,r){var t=e.parent().find(".edt_combobox"),a=new Object;a.nome=t.val(),a.cliente_id=r.props.ObjParam.ClienteId,a.equipe_interna=r.props.ObjParam.EquipeInterna,a.clientes=r.props.ObjParam.Clientes,a.fornecedores=r.props.ObjParam.Fornecedores,a.prospects=r.props.ObjParam.Prospects,a.considera_tecnico=r.props.ObjParam.ExibirTecnicos,a.apenas_tecnico=r.props.ObjParam.ExibirApenasTecnicos,a.apenas_supervisionados=r.props.ObjParam.ExibirApenasSupervisionados,a.modulo=r.props.ObjParam.Modulo,a.listar_grupos=r.props.ObjParam.ExibirGrupos,a.arr_usuarios=r.props.ObjParam.ArrUsuarios,a.arr_grupo_usuarios=r.props.ObjParam.ArrGrupoUsuarios,a.limpa_conteudo_apos_selecionar=r.props.ObjParam.LimpaConteudoAposSelecionar,WS.get("usuario/listar_usuarios_grupos/",a,function(t){limpar_combobox(e),$(t).each(function(o,r){var t=[];t.Nome=r.nome;var n=$('<span class="label lb_tipo" style="margin: 5px;"></span>');n.attr("tipo",r.tipo),"usuarios"==r.tipo?(n.addClass("label-info"),n.text("U")):"grupo_usuarios"==r.tipo?(n.text("GU"),n.addClass("label-warning")):"usuario_cliente"==r.tipo?(n.text("C"),n.addClass("label-primary")):"usuario_prospect"==r.tipo?(n.text("O"),n.addClass("label-primary")):"usuario_fornecedor"==r.tipo&&(n.text("F"),n.addClass("label-primary")),n.tooltip(),add_option_combobox(e,o,r.id>0?r.id:null,t,n,JSON.stringify(r),null,null,a.limpa_conteudo_apos_selecionar)}),o(!0),e.parent().find(".ul_row").click(function(){var o=$(this).parent().attr("dados-adicionais")?JSON.parse($(this).parent().attr("dados-adicionais")):null;r.props.UsuarioSelecionado=o,null!=r.props.FunctionSelect&&o&&r.props.FunctionSelect()})})}},{key:"CriarCombobox",value:function(){var o=this;create_combobox($(this.refs.cbo_usuario),this.ListarUsuarios,null,null,this),$(this.refs.cbo_usuario).parent().find(".edt_combobox").keypress(function(e){if(13==e.keyCode){var r=$(o.refs.cbo_usuario).parent().find(".ncbo_scroll").find(".row_selected"),t=r.attr("dados-adicionais")?JSON.parse(r.attr("dados-adicionais")):null;o.props.UsuarioSelecionado=t,null!=o.props.FunctionSelect&&t&&(o.props.FunctionSelect(),o.props.ObjParam.LimpaConteudoAposSelecionar&&$(o.refs.cbo_usuario).parent().find(".edt_combobox").val(""))}})}},{key:"render",value:function(){var e=null;return null!=this.state.LabelCampo&&(e=o.createElement("label",null,this.state.LabelCampo)),o.createElement("div",null,e||"",o.createElement("select",{ref:"cbo_usuario",class:"select-multi-column",placeholder:"Digite o nome"}))}}]),r}()});