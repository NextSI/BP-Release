define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.title="Status de Oportunidade",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.show=function(){i.listar()},this.listar=function(){var t=i.tab_listagem.find("tbody"),n=t.find("tr:first");i.tab_listagem.find("tr:gt(1)").remove(),WS.get("status_oportunidade/listar/",null,function(a){$(a).each(function(a,o){!function(a){var o=n.clone();o.removeAttr("template-row"),o.css("display",""),$(o.find("[template-field='id']")).text(a.status_oportunidade_id),$(o.find("[template-field='nome']")).text(a.nome),$(o.find("[template-field='cor']")).append('<span class="badge" style="padding-right: 100px; background: '+a.cor+'">&nbsp;</span>'),$(o.find("[template-field='pintar_cartao']")).addClass("S"==a.pintar_cartao?"glyphicon-ok text-success":"glyphicon-remove text-muted"),$(o.find("[template-field='padrao']")).addClass("S"==a.padrao?"glyphicon-ok text-success":"glyphicon-remove text-muted");var s=$(o.find(".btn_visualizar"));s.unbind("click"),s.click(function(){View.load("status_oportunidade/detalhes",function(t,i){i.show(a.status_oportunidade_id,FORMULARIO.VISUALIZAR)})});var d=$(o.find(".btn_editar")),e=function(){View.load("status_oportunidade/detalhes",function(t,n){n.onclose=i.listar,n.show(a.status_oportunidade_id,FORMULARIO.EDITAR)})};d.unbind("click"),d.click(e),o.dblclick(e);var l=$(o.find(".btn_excluir"));l.unbind("click"),l.click(function(){View.load("status_oportunidade/detalhes",function(t,n){n.onclose=i.listar,n.show(a.status_oportunidade_id,FORMULARIO.EXCLUIR)})}),o.appendTo(t)}(o)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("status_oportunidade/detalhes",function(t,n){n.onclose=i.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){i.listar()}),this.unload=function(){View.unload(this.html_id)}}});