define([],function(){return function(e){"use strict";var i=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.title="Rel. Faturamento do Projeto",this.onclose=null,this.btn_gera_relatorio=this.dialog.find(".btn_gera_relatorio"),this.btn_fechar=this.dialog.find(".btn_fechar"),this.busca_cliente=this.dialog.find(".busca_cliente"),this.edt_data_inicio=this.dialog.find(".edt_data_inicio"),this.edt_data_fim=this.dialog.find(".edt_data_fim"),this.edt_cliente_de=this.dialog.find(".edt_cliente_de"),this.edt_cliente_ate=this.dialog.find(".edt_cliente_ate"),this.edt_tecnico_de=this.dialog.find(".edt_tecnico_de"),this.edt_tecnico_ate=this.dialog.find(".edt_tecnico_ate"),this.edt_projeto_de=this.dialog.find(".edt_projeto_de"),this.edt_projeto_ate=this.dialog.find(".edt_projeto_ate"),this.cbo_tipo_projeto=this.dialog.find(".cbo_tipo_projeto"),this.cbo_mostrar_atividades=this.dialog.find(".cbo_mostrar_atividades"),this.cliente_id=0,this.show=function(){},this.unload=function(){View.unload(this.html_id)},i.btn_fechar.unbind("click"),i.btn_fechar.click(function(){i.unload()}),this.busca_cliente.unbind("click"),this.busca_cliente.click(function(e){var i=$(e.target).closest(".input-group").find("input");View.load("cliente/selecionar",function(e,t){t.show(function(e){i.val(e.codigo)})})}),i.btn_gera_relatorio.unbind("click"),i.btn_gera_relatorio.click(function(e){App.obter_token_publico(function(e){if(App.temp.empresa)var t=App.temp.empresa;var a=i.edt_cliente_de.val(),d=i.edt_cliente_ate.val(),n=i.edt_data_inicio.val(),o=i.edt_data_fim.val(),l=new Validation;return a!=d||""==a&&""==d?a>d?(l.add(new ValidationMessage(Validation.CODES.ERR_FIELD,'Código do campo "Cliente de", deve ser maior que o de "Cliente Até"!')),alert_modal("Validação",l),!1):""==n||""==o?(l.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Selecione a data inicial e final.")),alert_modal("Validação",l),!1):new Date(n).getTime()>new Date(o).getTime()?(l.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"A data inicial deve ser menor que a data final.")),alert_modal("Validação",l),!1):(alert_modal("Relatório de Despesas","Aguarde, em instantes seu relatório será gerado."),void App.download(WS_URI+"apontamento_despesas/gerar_apontamento_despesas_pdf/?empresa_id="+t+"&token_publico="+e+"&cliente_id="+(void 0!==App.temp.cliente_id_apontamento_despesa?App.temp.cliente_id_apontamento_despesa:"")+"&dt_ini="+n+"&dt_fim="+o+"&tipo_relatorio=cliente&cliente_de="+a+"&cliente_ate="+d)):(l.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Selecione Clientes diferentes.")),alert_modal("Validação",l),!1)})})}});