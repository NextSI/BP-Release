define([],function(){function a(a){var o={nome_campo:a};WS.post("nota_avaliacao/update_avaliacao/",o,function(a){alert_saved("Avaliações Pendetes Atualizadas!")})}return function(o){"use strict";var t=this,i="N",e="N",c="N",s="N";this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.onsave=null,this.chk_cli=this.dialog.find(".chk_cli"),this.chk_col=this.dialog.find(".chk_col"),this.chk_for=this.dialog.find(".chk_for"),this.chk_org=this.dialog.find(".chk_org"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.show=function(){show_modal(t.modal.attr("id")),WS.get("nota_avaliacao/get_parametros/",null,function(a){"S"==a.avaliacao_cliente&&(t.chk_cli.prop("checked",!0).trigger("change"),i="S"),"S"==a.avaliacao_colaborador&&(t.chk_col.prop("checked",!0).trigger("change"),e="S"),"S"==a.avaliacao_fornecedor&&(t.chk_for.prop("checked",!0).trigger("change"),c="S"),"S"==a.avaliacao_organizacao&&(t.chk_org.prop("checked",!0).trigger("change"),s="S")})},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},t.btn_cancelar.unbind("click"),t.btn_cancelar.click(function(a){t.unload()}),t.btn_salvar.unbind("click"),t.btn_salvar.click(function(o){var r;r={avaliacao_cliente:1==t.chk_cli.bootstrapSwitch("state")?"S":"N",avaliacao_colaborador:1==t.chk_col.bootstrapSwitch("state")?"S":"N",avaliacao_fornecedor:1==t.chk_for.bootstrapSwitch("state")?"S":"N",avaliacao_organizacao:1==t.chk_org.bootstrapSwitch("state")?"S":"N"},WS.post("nota_avaliacao/salvar_chk_avaliacao/",r,function(a){i=1==t.chk_cli.bootstrapSwitch("state")?"S":"N",e=1==t.chk_col.bootstrapSwitch("state")?"S":"N",c=1==t.chk_for.bootstrapSwitch("state")?"S":"N",s=1==t.chk_org.bootstrapSwitch("state")?"S":"N",alert_saved("Permissões salvas com sucesso!"),t.unload()}),"S"==i&&"N"==(1==t.chk_cli.bootstrapSwitch("state")?"S":"N")&&alert_modal("Alerta !","Suas novas configurações foram salvas ! <br /> Deseja remover as avaliações Pendentes para os Clientes ?","Remover",function(){a("chamado.usuario_cliente_id")},!0),"S"==e&&"N"==(1==t.chk_col.bootstrapSwitch("state")?"S":"N")&&alert_modal("Alerta !","Suas novas configurações foram salvas ! <br /> Deseja remover as avaliações Pendentes para os Colaboradores ?","Remover",function(){a("chamado.usuario_empresa_id")},!0),"S"==c&&"N"==(1==t.chk_for.bootstrapSwitch("state")?"S":"N")&&alert_modal("Alerta !","Suas novas configurações foram salvas ! <br /> Deseja remover as avaliações Pendentes para os Fornecedores ?","Remover",function(){a("chamado.usuario_fornecedor_id")},!0),"S"==s&&"N"==(1==t.chk_org.bootstrapSwitch("state")?"S":"N")&&alert_modal("Alerta !","Suas novas configurações foram salvas ! <br /> Deseja remover as avaliações Pendentes para as Organizações ?","Remover",function(){a("chamado.usuario_prospect_id")},!0)})}});