var dx_Listagem_Padrao=function(e){if(e){e=spread({div_html:null,coluna_chave:null,colunas:null,toolbar:null,masterDetail:null,datasource:null,url_params:null,nome:null,nome_parametro_usuario:null,editing_mode:{useIcons:!0},funcao_botao_salvar:null,on_row_prepared:null,on_editing_start:null,on_editor_preparing:null,on_loaded:null,fn_refresh_click:null,summary:null,diferenca_altura:null,filter_value:null,on_row_click:null,reordenar:!1},e);var a=document.createElement("div");a.className="div_listagem",a.style="min-width: 100%;",e.div_html.find(".div_listagem").remove(),e.div_html[0].appendChild(a);var o=detectmob()?"select":"dragAndDrop";get_icon_class();null!=e.diferenca_altura&&e.div_html.find(".div_listagem").css("height","calc(100vh - "+e.diferenca_altura+"px)");var r=null,t=!1,n=e.div_html.find(".div_listagem").dxDataGrid({dataSource:"object"==typeof e.datasource?e.datasource:DevExpress.data.AspNet.createStore({key:e.coluna_chave,loadUrl:e.datasource,onBeforeSend:function(a,o){o.xhrFields={withCredentials:XHR_WITH_CREDENTIALS},o.headers=WS.dxHeaders(),o.data.dx_grid=!0,e.url_params&&(o.data=spread(o.data,e.url_params))},onLoaded:e.on_loaded}),key:Array.isArray(e.datasource)?e.coluna_chave:null,remoteOperations:!Array.isArray(e.datasource),filterValue:Array.isArray(e.filter_value)?e.filter_value:null,onRowClick:e.on_row_click,showBorders:!0,columnResizingMode:"widget",rowAlternationEnabled:!1,searchPanel:{visible:!detectmob(),width:200,placeholder:"Pesquisa geral"},paging:{pageSize:20},pager:{showPageSizeSelector:!0,allowedPageSizes:[20,50,100],showInfo:!0},masterDetail:e.masterDetail,allowColumnReordering:!0,allowColumnResizing:!0,columnChooser:{enabled:!0,allowSearch:!0,mode:o},stateStoring:{enabled:!!e.nome_parametro_usuario,type:"custom",customLoad:function(){var a=null;return e.nome_parametro_usuario&&void 0!==(a=App.get_parametro_usuario(e.nome_parametro_usuario)).datagrid&&(a.datagrid.selectedRowKeys=null),r=a.obj_param?a.obj_param:r,a.datagrid},customSave:function(a){e.nome_parametro_usuario&&App.set_parametro_usuario(e.nome_parametro_usuario,{datagrid:a,obj_param:r})}},selection:{mode:"multiple"},export:{enabled:!0,fileName:e.nome+" "+agora(),allowExportSelectedData:!0},filterRow:{visible:!0,applyFilter:"auto"},headerFilter:{visible:!0},filterPanel:{visible:!0},sorting:{mode:"multiple"},groupPanel:{visible:!0},columnFixing:{enabled:!0},rowDragging:{allowReordering:e.reordenar,showDragIcons:!0,onReorder:function(a){var o=a.component.getVisibleRows(),r=e.datasource.indexOf(o[a.toIndex].data),t=e.datasource.indexOf(a.itemData);e.datasource.splice(t,1),e.datasource.splice(r,0,a.itemData),a.component.refresh()}},onRowPrepared:e.on_row_prepared,onEditingStart:e.on_editing_start,onEditorPreparing:e.on_editor_preparing,onToolbarPreparing:function(a){var o=[];e.toolbar&&(o=o.concat(e.toolbar)),o.push(dx_Btn_Refresh(this,e.fn_refresh_click)),a.toolbarOptions.items=add_botao_dx_toolbar(o,a.toolbarOptions.items);for(var r=0;r<a.toolbarOptions.items.length;r++){var t=a.toolbarOptions.items[r];"saveButton"==t.name&&(e.funcao_botao_salvar?t.options.onClick=e.funcao_botao_salvar:t.visible=!1)}},editing:e.editing_mode,columns:e.colunas,summary:e.summary,onContextMenuPreparing:function(e){"header"==e.target&&Array.isArray(e.items)&&e.items.push({text:"Restaurar estado das colunas",visible:!0,beginGroup:!0,onItemClick:function(e){DevExpress.ui.dialog.confirm("Os filtros, ordenações, agrupamentos, posição, tamanho, e visibilidade das colunas desta listagem serão restauradas ao estado padrão. <b>Deseja continuar?</b>","Restaurar estado das colunas").done(function(e){e&&(t=!0,n.refresh())})}})},onContentReady:function(e){t&&(n.state({}),t=!1)}}).dxDataGrid("instance");return n.endCustomLoading(),n}},dx_Btn_Refresh=function(e,a){return{widget:"dxButton",options:{icon:"fa fa-sync",hint:App.lang.generico.recarregar,text:App.lang.generico.recarregar,onClick:function(){a?a():e.refresh()}},showText:"inMenu",location:"after",name:"btnRefresh",locateInMenu:"auto"}};