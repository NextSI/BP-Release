define([],function(){var i=function(i){"use strict";var o=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Condições de Pagamento",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.btn_configuracoes=this.dialog.find(".btn_configuracoes"),this.td_bloqueado=this.dialog.find(".td_bloqueado"),this.somente_leitura=this.dialog.find(".somente_leitura"),this.somente_visualizar=this.dialog.find(".somente_visualizar"),this.edt_codigo=this.dialog.find(".edt_codigo"),this.edt_descricao=this.dialog.find(".edt_descricao"),this.chk_bloqueado=this.dialog.find(".chk_bloqueado"),this.somente_consulta_condicao_pagamento="N",this.show=function(){o.listar(),o.verifica_config()},this.verifica_config=function(){!0===App.sessao.dados.admin?o.btn_configuracoes.removeClass("hidden"):o.btn_configuracoes.addClass("hidden"),WS.get("condicao_pagamento/get_parametros/",null,function(i){o.somente_consulta_condicao_pagamento=i.somente_consulta_condicao_pagamento,"S"==o.somente_consulta_condicao_pagamento?(o.somente_leitura.addClass("hidden"),o.somente_visualizar.removeClass("hidden")):(o.somente_leitura.removeClass("hidden"),o.somente_visualizar.addClass("hidden"))})},this.listar=function(){var i=o.tab_listagem.find("tbody"),t=i.find("tr:first"),n={codigo:o.edt_codigo.val(),descricao:o.edt_descricao.val(),bloqueado:1==o.chk_bloqueado.prop("checked")?"S":"N"};WS.get("condicao_pagamento/listar/",n,function(n){o.tab_listagem.find("tr:gt(1)").remove(),$(n).each(function(n,a){!function(n){var a=t.clone();a.removeAttr("template-row"),a.css("display",""),$(a.find("[template-field='codigo']")).text(n.codigo),$(a.find("[template-field='descricao']")).text(n.descricao);var e=$(a.find("[template-field='bloqueado']"));"S"==n.bloqueado&&(e.addClass("label label-danger"),e.text("Sim")),$(a.find(".btn_editar")).click(function(){"N"==o.somente_consulta_condicao_pagamento&&View.load("condicao_pagamento/detalhes",function(i,t){t.onclose=o.listar,t.show(n.condicao_pagamento_id,FORMULARIO.EDITAR)},View.ABA.MULTIPLAS)}),$(a.find(".btn_visualizar")).click(function(){View.load("condicao_pagamento/detalhes",function(i,t){t.onclose=o.listar,t.show(n.condicao_pagamento_id,FORMULARIO.VISUALIZAR)},View.ABA.MULTIPLAS)}),$(a.find(".btn_excluir")).click(function(){"N"==o.somente_consulta_condicao_pagamento&&View.load("condicao_pagamento/detalhes",function(i,t){t.onclose=o.listar,t.show(n.condicao_pagamento_id,FORMULARIO.EXCLUIR)},View.ABA.MULTIPLAS)}),a.appendTo(i)}(a)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){"N"==o.somente_consulta_condicao_pagamento&&View.load("condicao_pagamento/detalhes",function(i,t){t.onclose=o.listar,t.show(null,FORMULARIO.NOVO)},View.ABA.MULTIPLAS)}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){o.listar()}),this.btn_configuracoes.unbind("click"),this.btn_configuracoes.click(function(){View.load("condicao_pagamento/configuracoes",function(i,t){t.onclose=function(){o.verifica_config(),o.listar()},t.show()})}),this.unload=function(){View.unload(this.html_id)}};return i});