define([],function(){return function(e){"use strict";var i=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.title="Relatório de Despesas",this.onclose=null,this.btn_gera_relatorio=this.dialog.find(".btn_gera_relatorio"),this.edt_data_inicio=this.dialog.find(".edt_data_inicio"),this.edt_data_fim=this.dialog.find(".edt_data_fim"),this.edt_cliente_de=this.dialog.find(".edt_cliente_de"),this.edt_cliente_ate=this.dialog.find(".edt_cliente_ate"),this.btn_fechar=this.dialog.find(".btn_fechar"),this.busca_cliente=this.dialog.find(".busca_cliente"),this.cliente_id=0,this.show=function(){},this.unload=function(){View.unload(this.html_id)},i.btn_fechar.unbind("click"),i.btn_fechar.click(function(){i.unload()}),this.busca_cliente.unbind("click"),this.busca_cliente.click(function(e){var i=$(e.target).closest(".input-group").find("input");View.load("cliente/selecionar",function(e,t){t.show(function(e){i.val(e.codigo)},!0)})}),i.btn_gera_relatorio.unbind("click"),i.btn_gera_relatorio.click(function(e){App.obter_token_publico(function(e){if(App.temp.empresa)var t=App.temp.empresa;var a=i.edt_cliente_de.val(),n=i.edt_cliente_ate.val(),d=get_datepicker(i.edt_data_inicio),o=get_datepicker(i.edt_data_fim),l=new Validation;return""==d||""==o?(l.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Selecione a data inicial e final.")),alert_modal("Validação",l),!1):new Date(d).getTime()>new Date(o).getTime()?(l.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"A data inicial deve ser menor que a data final.")),alert_modal("Validação",l),!1):(alert_modal("Relatório de Despesas","Aguarde, em instantes seu relatório será gerado."),void App.download(WS_URI+"apontamento_despesas/gerar_apontamento_despesas_pdf/?empresa_id="+t+"&token_publico="+e+"&cliente_id="+(void 0!==App.temp.cliente_id_apontamento_despesa?App.temp.cliente_id_apontamento_despesa:"")+"&dt_ini="+d+"&dt_fim="+o+"&tipo_relatorio=cliente&cliente_de="+a+"&cliente_ate="+n))})})}});