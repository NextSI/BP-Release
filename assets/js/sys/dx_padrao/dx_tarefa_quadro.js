var dx_Tarefa_Quadro_Nome=function(){return{dataField:"nome",caption:App.lang.generico.nome,width:200}},dx_Tarefa_Quadro_Formulario=function(){return{dataField:"formulario_tarefa_quadro_lista_cartao_id",lookup:{dataSource:DevExpress.data.AspNet.createStore({key:"formulario_id",loadUrl:WS_URI+"formulario/listar/",onBeforeSend:function(a,o){o.xhrFields={withCredentials:XHR_WITH_CREDENTIALS},o.headers=WS.dxHeaders(),o.data.dx_grid=!0,o.data=spread(o.data,{tipo_formulario:TIPO_FORMULARIO.CADASTRO_PERSONALIZADO})}}),displayExpr:"nome",valueExpr:"formulario_id"},caption:App.lang.tarefa.formulario_vinculado,width:200}},dx_Tarefa_Quadro_Redimensionar_Colunas=function(){return{dataField:"redimensionar_colunas",lookup:{dataSource:[{redimensionar_colunas:"S",descricao:"Sim"},{redimensionar_colunas:"N",descricao:"NÃ£o"}],displayExpr:"descricao",valueExpr:"redimensionar_colunas"},caption:"Redimensionar colunas",width:200}},dx_Tarefa_Quadro_Botoes=function(a){var o=get_icon_class();return{type:"buttons",buttons:[{hint:App.lang.tarefa.acessar_quadro,icon:"fab fa-trello",cssClass:o,onClick:function(a){View.load("tarefa/detalhes",function(o,r){r.show(a.row.data)},View.ABA.MULTIPLAS)}},{hint:App.lang.tarefa.gerenciar_equipe,icon:"fa fa-users",cssClass:o,visible:function(a){return a.row.data.id&&(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(a){View.load("tarefa/detalhes_equipe_quadro",function(o,r){r.show(a.row.data.id,a.row.data.nome)},View.ABA.MULTIPLAS)}},{hint:App.lang.tarefa.alterar_imagem,icon:"fa fa-image",cssClass:o,visible:function(a){return a.row.data.id&&(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)},onClick:function(o){View.load("tarefa/alterar_imagem",function(r,e){e.onclose=a.listar,e.show(FORMULARIO.NOVO,o.row.data.id,o.row.data.imagem_id)})}},{hint:App.lang.generico.apagar_registro,icon:"fa fa-trash",cssClass:o,visible:function(a){return(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)&&!a.row.removed},onClick:function(o){a.dataGrid.deleteRow(o.row.rowIndex),o.event.preventDefault()}},{hint:App.lang.generico.recuperar_registro,icon:"fa fa-undo",cssClass:o,visible:function(a){return(App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE)&&a.row.removed},onClick:function(o){a.dataGrid.undeleteRow(o.row.rowIndex),o.event.preventDefault()}},{hint:"Favoritar",icon:"far fa-star",cssClass:o,visible:function(a){return!verifica_favorito("tarefa_quadros",a.row.data.id)},onClick:function(o){favoritar_item("tarefa_quadros",o.row.data.id,!0),a.listar()}},{hint:"Desfavoritar",icon:"fas fa-star",cssClass:o,visible:function(a){return verifica_favorito("tarefa_quadros",a.row.data.id)},onClick:function(o){favoritar_item("tarefa_quadros",o.row.data.id,!1),a.listar()}}]}},dx_Tarefa_Quadro_Colunas=function(a){return[dx_Tarefa_Quadro_Nome(),dx_Tarefa_Quadro_Formulario(),dx_Tarefa_Quadro_Redimensionar_Colunas(),dx_Tarefa_Quadro_Botoes(a)]},dx_Tarefa_Quadro_Btn_Novo=function(a){return{widget:"dxButton",options:{icon:"fa fa-plus",hint:App.lang.generico.adicionar,text:App.lang.generico.adicionar,onClick:function(){a.dataGrid.addRow()}},location:"after",name:"btnNovo",locateInMenu:"auto"}},dx_Tarefa_Quadro_Btn_Listar_Todos=function(a){var o=App.get_parametro_usuario("tarefas");return{widget:"dxButton",options:{icon:"fa fa-users",hint:o.listar_todos_quadros?"Listar somente meus quadros":"Listar todos os quadros.",text:o.listar_todos_quadros?"Listar somente meus quadros":"Listar todos os quadros.",onClick:function(){var o=App.get_parametro_usuario("tarefas");App.set_parametro_usuario("tarefas",{listar_todos_quadros:!o.listar_todos_quadros}),a.listar()},onInitialized:function(a){App.get_parametro_usuario("tarefas").listar_todos_quadros&&a.component.element().addClass("dx-state-active")}},visible:App.sessao.dados.admin,showText:"inMenu",location:"after",name:"BtnModoTeste",locateInMenu:"auto"}},dx_Tarefa_Quadro_Editing_Mode=function(){return{mode:"batch",allowUpdating:function(a){return App.sessao.dados.admin||a.row.data.tipo_permissao==TAREFA_QUADRO_TIPO_PERMISSAO.GERENTE},useIcons:!0}},dx_Tarefa_Quadro_Funcao_Salvar=function(a){return function(){WS.post("tarefa_quadro/salvar/",{data:CircularJSON.stringify(a.dataGrid.getController("editing").getChanges())},function(o){var r=!0===o?"success":"error",e=!0===o?"Todos os quadros foram salvos":"Falha ao salvar o(s) quadro(s)";DevExpress.ui.notify.default({message:e,type:r,displayTime:3e3,width:300}),!0===o&&a.listar()})}},dx_Tarefa_Quadro_Funcao_OnLoaded=function(a){return function(){setTimeout(function(){a.dataGrid.repaint()})}};