define([],function(){return function(o){"use strict";var i=this;this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.ondelete=null,this.div_viewer=this.dialog.find(".div_viewer"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_download=this.dialog.find(".btn_download"),this.video_responsive=this.dialog.find(".video_responsive"),this.arquivo=null,this.documento_revisao_id=null,this.token=null,this.show=function(o){i.documento_revisao_id=o,i.token=cripto(WS.token),i.arquivo=WS_URI+"documento/download/?documento_revisao_id="+i.documento_revisao_id+"&token_publico="+i.token+"&tipo=S&acao=abrir",$(i.video_responsive).attr("src",i.arquivo),show_modal(i.modal.attr("id"))},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_download.unbind("click"),this.btn_download.click(function(){App.sessao?App.obter_token_publico(function(o){App.download(WS_URI+"documento/download/?documento_revisao_id="+i.documento_revisao_id+"&token_publico="+o),"safari"!=getBrowser()&&i.unload()}):(App.download(WS_URI+"documento/download/?documento_revisao_id="+i.documento_revisao_id),"safari"!=getBrowser()&&i.unload())})}});