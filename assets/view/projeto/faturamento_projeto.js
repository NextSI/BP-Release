define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.title="Rel. Faturamento do Projeto",this.onclose=null,this.btn_gera_relatorio=this.dialog.find(".btn_gera_relatorio"),this.btn_fechar=this.dialog.find(".btn_fechar"),this.busca_cliente=this.dialog.find(".busca_cliente"),this.edt_data_inicio=this.dialog.find(".edt_data_inicio"),this.edt_data_fim=this.dialog.find(".edt_data_fim"),this.edt_cliente_de=this.dialog.find(".edt_cliente_de"),this.edt_cliente_ate=this.dialog.find(".edt_cliente_ate"),this.busca_tecnico=this.dialog.find(".busca_tecnico"),this.busca_projeto=this.dialog.find(".busca_projeto"),this.edt_tecnico_de=this.dialog.find(".edt_tecnico_de"),this.edt_tecnico_ate=this.dialog.find(".edt_tecnico_ate"),this.edt_projeto_de=this.dialog.find(".edt_projeto_de"),this.edt_projeto_ate=this.dialog.find(".edt_projeto_ate"),this.cbo_tipo_projeto=this.dialog.find(".cbo_tipo_projeto"),this.chk_mostrar_atividades=this.dialog.find(".chk_mostrar_atividades"),this.cliente_id=0,this.show=function(){},this.unload=function(){View.unload(this.html_id)},i.btn_fechar.unbind("click"),i.btn_fechar.click(function(){i.unload()}),this.busca_cliente.unbind("click"),this.busca_cliente.click(function(t){var i=$(t.target).closest(".input-group").find("input");View.load("cliente/selecionar",function(t,e){e.show(function(t){i.val(t.codigo)},!0)})}),this.busca_tecnico.unbind("click"),this.busca_tecnico.click(function(t){var i=$(t.target).closest(".input-group").find("input");View.load("tecnicos/selecionar",function(t,e){e.show(function(t){i.val(t.codigo)})})}),this.busca_projeto.unbind("click"),this.busca_projeto.click(function(t){var i=$(t.target).closest(".input-group").find("input");View.load("projeto/selecionar",function(t,e){e.show(function(t){i.val(t.obj_projeto.codigo)})})}),i.btn_gera_relatorio.unbind("click"),i.btn_gera_relatorio.click(function(t){App.obter_token_publico(function(t){if(App.temp.empresa)var e=App.temp.empresa;var o=i.edt_tecnico_de.val(),a=i.edt_tecnico_ate.val(),n=i.edt_cliente_de.val(),d=i.edt_cliente_ate.val(),c=i.edt_projeto_de.val(),_=i.edt_projeto_ate.val(),l=get_datepicker(i.edt_data_inicio),s=get_datepicker(i.edt_data_fim),r=i.cbo_tipo_projeto.val(),p=1==i.chk_mostrar_atividades.prop("checked")?"S":"N",h=new Validation;return""==l||""==s?(h.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"Selecione a data inicial e final.")),alert_modal("Validação",h),!1):new Date(l).getTime()>new Date(s).getTime()?(h.add(new ValidationMessage(Validation.CODES.ERR_FIELD,"A data inicial deve ser menor que a data final.")),alert_modal("Validação",h),!1):(alert_modal("Relatório de Faturamento","Aguarde, em instantes seu relatório será gerado."),void App.download(WS_URI+"apontamento_projeto/gerar_faturamento_projeto_pdf/?empresa_id="+e+"&token_publico="+t+"&cliente_id="+(void 0!==App.temp.cliente_id_apontamento_despesa?App.temp.cliente_id_apontamento_despesa:"")+"&tecnico_de="+o+"&tecnico_ate="+a+"&cliente_de="+n+"&cliente_ate="+d+"&projeto_de="+c+"&projeto_ate="+_+"&data_inicio="+l+"&data_fim="+s+"&tipo_projeto="+r+"&mostrar_atividade="+p))})})}});