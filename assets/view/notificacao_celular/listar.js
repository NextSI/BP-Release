var t;define([],function(){return function(i){"use strict";var o=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Notificações",this.div_notificacao=this.dialog.find(".div_notificacao"),this.notificacao=this.dialog.find(".notificacao"),this.show=function(){o.notificacao.find(".class-rows-notificacoes").remove(),o.carregar_notificaco()},this.carregar_notificaco=function(){var i=o.dialog.find("[template-notificacao]"),a=($(".imagem_notificacoes"),$(".btn_mais_notificacao")),t=999999999999999,c=function(n,s){var e=i.clone(),d=null;e.removeAttr("template-notificacao"),e.removeClass("hidden"),e.addClass("class-rows-notificacoes"),$(e).attr("notificacao_id",n.notificacao_id),parseInt(n.notificacao_id,10)<parseInt(t,10)&&(t=n.notificacao_id);var f=$(e.find("[template-field='notificacoes']")),r=$(e.find(".carrega_img_notificacoes")),l=$(e.find(".check_notificacao"));n.tipo==NOTIFICACAO.MARCACAO_COMENTARIO&&(d="<b>"+n.nome_usuario_inicio+"</b> citou você em um comentário.",$(e).attr("mensagem_id",n.id_origem),e.unbind("click"),e.click(function(){View.load("pagina_inicial/mensagem",function(i,o){o.show(n.id_origem,n.id_origem_opcional,NOTIFICACAO.MARCACAO_COMENTARIO)},View.ABA.MULTIPLAS),m()})),f.html(d),null!=n.foto_id?r.attr("src",WS_URI+"documento/midia_imagens_menores/?documento_id="+n.foto_id+"&tamanho=50&token_midia="+App.sessao.token_midia):r.attr("src","assets/img/imagem_usuario_padrao.svg"),"S"!=n.lido&&1!=n.lido||(e.css("opacity","0.6"),e.css("filter","alpha(opacity=60)"),l.hasClass("hidden")&&l.removeClass("hidden")),n.count_notificacao>6?a.hasClass("hidden")&&a.removeClass("hidden"):a.hasClass("hidden")||a.addClass("hidden"),e.appendTo(o.notificacao).after(a),a.unbind("click"),a.click(function(i){i.stopPropagation(),WS.post("notificacoes/listar/",{parametro_limitador:!0,menor_id:t},function(i){$(i).each(function(i,o){c(o,i)})})});var m=function(){WS.post("notificacoes/salvar",{notificacao_id:n.notificacao_id},function(i){i&&(o.notificacao.find(".class-rows-notificacoes").remove(),$(i).each(function(i,o){c(o,i)}))})}};WS.post("notificacoes/listar/",{parametro_limitador:!0},function(i){$(i).each(function(i,o){c(o,i)})})}}});