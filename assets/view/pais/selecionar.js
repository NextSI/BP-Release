define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.tab_listagem=this.dialog.find(".tab_listagem"),this.edt_pais=this.dialog.find(".edt_pais"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.pais_id=null,this.arr_pais=[],this.show=function(i){t.onselect=i,show_modal(t.modal.attr("id")),set_focus(t.edt_pais)},this.close=function(){close_modal(t.modal.attr("id")),void 0!==t.onclose&&t.onclose&&t.onclose()},this.unload=function(){t.close(),View.unload(this.html_id)},this.listar=function(i){if(t.arr_pais=[],""!=t.edt_pais.val().trim()){var s={pais:t.edt_pais.val()};WS.get("pais/listar/",s,function(i){t.arr_pais=i,t.render_lista()})}else t.render_lista()},this.render_lista=function(){var i=t.tab_listagem.find("tbody"),s=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),$(t.arr_pais).each(function(a,n){!function(a){var n=s.clone();n.removeAttr("template-row"),n.css("display",""),$(n.find("[template-field='nome']")).text(a.nome);var l=$(n.find(".btn_selecionar")),e=function(){t.onselect(a),t.unload()};l.unbind("click"),l.click(e),n.dblclick(e),n.appendTo(i)}(n)})},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){t.unload()}),this.edt_pais.unbind("keyup"),this.edt_pais.keyup($.debounce(500,t.listar))}});