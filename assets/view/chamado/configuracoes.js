define(["react","react-dom"],function(a,o){return function(a){"use strict";var o=this;this.html_id=a,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.chk_chamado_email_todas_mensagens=this.dialog.find(".chk_chamado_email_todas_mensagens"),this.chk_chamado_email_em_nome_do_usuario_da_mensagem=this.dialog.find(".chk_chamado_email_em_nome_do_usuario_da_mensagem"),this.chk_sugerir_situacao=this.dialog.find(".chk_sugerir_situacao"),this.chk_sugerir_situacao_reclassificao=this.dialog.find(".chk_sugerir_situacao_reclassificao"),this.chk_sugerir_email=this.dialog.find(".chk_sugerir_email"),this.chk_sugerir_entidade_usuario_logado=this.dialog.find(".chk_sugerir_entidade_usuario_logado"),this.chk_chamado_classificacoes=this.dialog.find(".chk_chamado_classificacoes"),this.div_sugerir_situacao=this.dialog.find(".div_sugerir_situacao"),this.div_sugerir_email=this.dialog.find(".div_sugerir_email"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.edt_mascara_horas_trabalhadas=this.dialog.find(".edt_mascara_horas_trabalhadas"),this.selecao_motivo_sla=this.dialog.find("#selecao_motivo_sla"),this.div_selecao_motivos=this.dialog.find(".div_selecao_motivos"),this.selecao_tipo_motivo=this.dialog.find("#selecao_tipo_motivo"),this.tipo_motivo_sla_reacao=null,this.motivos_sla_reacao=[],this.show=function(a){o.preencher(),show_modal(o.modal.attr("id"))},this.preencher=function(){WS.get("chamado/get_configuracoes/",null,function(a){o.chk_chamado_email_todas_mensagens.prop("checked","S"==a.chamado_email_todas_mensagens).change(),o.chk_chamado_email_em_nome_do_usuario_da_mensagem.prop("checked","S"==a.chamado_email_em_nome_do_usuario_da_mensagem).change(),o.chk_sugerir_situacao.prop("checked","S"==a.sugerir_situacao).change(),o.chk_sugerir_situacao_reclassificao.prop("checked","S"==a.sugerir_situacao_reclassificacao).trigger("change"),o.chk_sugerir_email.prop("checked","S"==a.sugerir_email).change(),o.chk_sugerir_entidade_usuario_logado.prop("checked","S"==a.sugerir_entidade_usuario_logado).change(),o.chk_chamado_classificacoes.prop("checked","S"==a.chamado_classificacoes).change(),o.edt_mascara_horas_trabalhadas.val(a.chamado_mascara_horas_trabalhadas||"000:00"),o.tipo_motivo_sla_reacao=a.chamado_tipo_motivo_sla_reacao?a.chamado_tipo_motivo_sla_reacao:CHAMADO_TIPO_REACAO_SLA.QUALQUER_MOTIVO,o.motivos_sla_reacao=a.chamado_motivos_sla_reacao?JSON.parse(a.chamado_motivos_sla_reacao):[],o.tipo_motivo_sla_reacao==CHAMADO_TIPO_REACAO_SLA.QUALQUER_MOTIVO?o.div_selecao_motivos.addClass("hidden"):o.div_selecao_motivos.removeClass("hidden"),o.render_selecao_tipo_motivo(),o.render_selecao_motivo()})},this.render_selecao_tipo_motivo=function(){o.selecao_tipo_motivo.dxSelectBox({dataSource:[{id:"1",nome:"Qualquer Motivo de Chamado"},{id:"2",nome:"Motivos específicos"}],value:o.tipo_motivo_sla_reacao,displayExpr:"nome",valueExpr:"id",onValueChanged:a=>{a.value==CHAMADO_TIPO_REACAO_SLA.QUALQUER_MOTIVO?o.div_selecao_motivos.addClass("hidden"):o.div_selecao_motivos.removeClass("hidden"),o.tipo_motivo_sla_reacao=a.value}})},this.render_selecao_motivo=function(){ReactDOM.render(React.createElement(window.components.SelecaoChamadoMotivo.default,{apenasMotivosSLA:!0,selectionMode:"multiple",valueExpr:"chamado_motivo_id",displayExpr:"nome",keyExpr:"chamado_motivo_id",aoAlterar:a=>{o.motivos_sla_reacao=a},selecionado:o.motivos_sla_reacao,dropDownContainer:o.modal}),o.selecao_motivo_sla[0])},this.close=function(){close_modal(o.modal.attr("id")),void 0!==o.onclose&&o.onclose&&o.onclose()},this.unload=function(){o.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){o.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){o.tipo_motivo_sla_reacao!=CHAMADO_TIPO_REACAO_SLA.MOTIVOS_ESPECIFICOS||o.motivos_sla_reacao.length?WS.post("chamado/salvar_configuracoes",{chamado_email_todas_mensagens:o.chk_chamado_email_todas_mensagens.prop("checked"),chamado_email_em_nome_do_usuario_da_mensagem:o.chk_chamado_email_em_nome_do_usuario_da_mensagem.prop("checked"),sugerir_situacao:o.chk_sugerir_situacao.prop("checked"),sugerir_situacao_reclassificacao:o.chk_sugerir_situacao_reclassificao.prop("checked"),sugerir_email:o.chk_sugerir_email.prop("checked"),sugerir_entidade_usuario_logado:o.chk_sugerir_entidade_usuario_logado.prop("checked"),chamado_classificacoes:o.chk_chamado_classificacoes.prop("checked"),chamado_mascara_horas_trabalhadas:o.edt_mascara_horas_trabalhadas.val(),chamado_tipo_motivo_sla_reacao:o.tipo_motivo_sla_reacao,chamado_motivos_sla_reacao:JSON.stringify(o.motivos_sla_reacao)},function(a){alert_saved("Configurações salvas com sucesso"),o.unload()}):alertaPopUp("Validação","Selecione os motivos nos quais o tempo de reação do SLA será calculado.","OK",()=>{})})}});