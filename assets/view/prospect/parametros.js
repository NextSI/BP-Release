define([],function(){return function(e){"use strict";var i=this;this.html_id=e,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.onselect=null,this.onclose=null,this.modal_body=this.dialog.find(".modal-body"),this.edt_nome=this.dialog.find(".edt_nome"),this.edt_razao_social=this.dialog.find(".edt_razao_social"),this.edt_municipio=this.dialog.find(".edt_municipio"),this.edt_representante=this.dialog.find(".edt_representante"),this.select_efetivado=this.dialog.find(".select_efetivado"),this.select_bloqueado=this.dialog.find(".select_bloqueado"),this.select_qualificado=this.dialog.find(".select_qualificado"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_pesquisar=this.dialog.find(".btn_pesquisar"),this.campo_dinamico=[],this.options=[{id:"",descricao:"Desativado"},{id:"S",descricao:"Sim"},{id:"N",descricao:"NÃ£o"}],this.show=function(e,o,t,a,l,d,n,s,c,_){""!=t.trim()&&null!=t.trim()&&i.edt_nome.val(t.trim()),""!=a.trim()&&null!=a.trim()&&i.edt_razao_social.val(a.trim()),""!=l.trim()&&null!=l.trim()&&i.edt_municipio.val(l.trim()),""!=d.trim()&&null!=d.trim()&&i.edt_representante.val(d.trim()),i.select_efetivado.dxSelectBox({dataSource:i.options,displayExpr:"descricao",valueExpr:"id",value:n}),i.select_qualificado.dxSelectBox({dataSource:i.options,displayExpr:"descricao",valueExpr:"id",value:c}),i.select_bloqueado.dxSelectBox({dataSource:i.options,displayExpr:"descricao",valueExpr:"id",value:s}),i.onselect=e,show_modal(i.modal.attr("id")),i.render_campo_pesquisa(_),set_focus(i.edt_nome)},this.render_campo_pesquisa=function(e){var o="",t="";WS.get("formulario_prospect/get_formulario/",null,function(a){$(a.grupos).each(function(a,l){$(l.elementos).each(function(a,l){if(l.tipo!=ELEMENTO_TIPO.OPCOES?(o=l.tipo==ELEMENTO_TIPO.DATA?"date":"text",t='<input type="'+o+'" class="'+l.id_elemento+' form-control" id="'+l.id_elemento+'" maxlength="50" placeholder="Filtro por '+l.nome+'">'):t=l.tipo_lista_opcoes==TIPO_LISTA_OPCOES.OPTION_MULTIPLAS?'<select title="" type="select" class="formulario_campo form-control selectpicker vld_lista_option_multiplas '+l.id_elemento+'"  multiple id="'+l.id_elemento+'">':'<select type="select" class="formulario_campo form-control id_elemento vld_lista_option '+l.id_elemento+'" id="'+l.id_elemento+'">',"S"==l.utiliza_filtro){var d=$('<div class="row"><div class="col-md-12 col-sm-12"><div class="form-group"><label for="'+l.id_elemento+'">'+l.nome+"</label>"+t+"</div></div></div>");if(d.appendTo(i.modal_body),i.campo_dinamico.push({id_elemento:l.id_elemento,option:l.tipo==ELEMENTO_TIPO.OPCOES}),l.tipo==ELEMENTO_TIPO.OPCOES){var n=d.find("select");add_option(n,"",""),$(l.opcoes).each(function(e,i){add_option(n,i,i)}),l.tipo_lista_opcoes==TIPO_LISTA_OPCOES.OPTION_MULTIPLAS&&n.selectpicker("refresh")}App.aplicar_mascaras(d),e&&$(e).each(function(e,i){i.id_elemento==l.id_elemento&&i.valor&&(l.tipo_lista_opcoes==TIPO_LISTA_OPCOES.OPTION_MULTIPLAS?$(document).find("."+i.id_elemento).val(i.valor).trigger({type:"change",execute:!0}).selectpicker("refresh"):$(document).find("."+i.id_elemento).val(i.valor))})}})})})},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.unload=function(){i.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_pesquisar.unbind("click"),this.btn_pesquisar.click(function(){$(i.campo_dinamico).each(function(e,o){i.campo_dinamico[e].valor=i.modal_body.find("#"+o.id_elemento).val()});var e={nome_fantasia:i.edt_nome.val(),razao_social:i.edt_razao_social.val(),municipio:i.edt_municipio.val(),nome_representante:i.edt_representante.val(),efetivados:i.select_efetivado.dxSelectBox("instance").option("value"),bloqueado:i.select_bloqueado.dxSelectBox("instance").option("value"),qualificado:i.select_qualificado.dxSelectBox("instance").option("value"),campo_dinamico:i.campo_dinamico};i.onselect(e),i.unload()})}});