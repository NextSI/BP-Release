define([],function(){return function(o){"use strict";var i=this;this.html_id=o,this.dialog=$("#"+this.html_id),this.modal=this.dialog.find(".modal"),this.modal.attr("id",this.html_id+"_modal"),this.title=this.modal.find(".modal-title"),this.tipo=null,this.onclose=null,this.onsave=null,this.cbo_motivo_bloqueio=this.dialog.find(".cbo_motivo_bloqueio"),this.edt_descricao=this.dialog.find(".edt_descricao"),this.btn_cancelar=this.dialog.find(".btn_cancelar"),this.btn_salvar=this.dialog.find(".btn_salvar"),this.btn_excluir=this.dialog.find(".btn_excluir"),this.documento_motivo_bloqueio_id=null,this.documento_id=null,this.status_bloqueio="",this.show=function(o,t){i.btn_salvar.prop("disabled",!0),i.documento_id=o,i.status_bloqueio=t,show_modal(i.modal.attr("id"))},this.close=function(){close_modal(i.modal.attr("id")),void 0!==i.onclose&&i.onclose&&i.onclose()},this.listar_motivos=function(o){i.cbo_motivo_bloqueio.find("option").remove(),add_option(i.cbo_motivo_bloqueio,-1,"Selecione o motivo"),WS.get("documento_motivo_bloqueio/listar/",null,function(t){for(var l=0;l<t.length;l++){var e=t[l];add_option(i.cbo_motivo_bloqueio,e.documento_motivo_bloqueio_id,e.descricao)}add_option(i.cbo_motivo_bloqueio,0,"Outro motivo"),o&&i.cbo_motivo_bloqueio.val(o).trigger("change"),i.cbo_motivo_bloqueio.selectpicker("refresh"),o||i.cbo_motivo_bloqueio.trigger("change")})},i.cbo_motivo_bloqueio.change(function(o){-1==i.cbo_motivo_bloqueio.val()?i.btn_salvar.prop("disabled",!0):i.btn_salvar.prop("disabled",!1),"0"==i.cbo_motivo_bloqueio.val()?(i.edt_descricao.show(),set_focus(i.edt_descricao)):i.edt_descricao.hide()}),this.unload=function(){i.close(),View.unload(this.html_id)},this.btn_cancelar.unbind("click"),this.btn_cancelar.click(function(){i.unload()}),this.btn_salvar.unbind("click"),this.btn_salvar.click(function(){WS.post("documento/salva_motivo_bloqueio",{documento_motivo_bloqueio_id:i.cbo_motivo_bloqueio.val(),documento_motivo_bloqueio:i.cbo_motivo_bloqueio.find("option:selected").text(),bloqueado:i.status_bloqueio,documento_id:i.documento_id,motivo_bloqueio:i.edt_descricao.val()},function(o){i.documento_motivo_bloqueio_id=o.id,alert_saved("Salvo com sucesso"),void 0!==i.onsave&&i.onsave&&i.onsave(o),i.unload()})}),i.listar_motivos()}});