!function(e,t){e.fn.contextMenu=function(n){return this.each(function(){e(this).on("contextmenu",function(t){return void 0!==n.menuShow&&n.menuShow.call(this,t,n),e(".context_menu").hide(),e(n.menuSelector).addClass("context_menu").data("invokedOn",e(t.target)).show().css({position:"absolute",left:o(t),top:i(t)}).off("click").on("click",function(t){e(this).hide();var o=e(this).data("invokedOn"),i=e(t.target);i.is("span")&&(i=i.parent());var a=i.attr("data-context-menu");n.menuSelected.call(this,o,a)}),!1}),e(document).click(function(){e(n.menuSelector).hide()})});function o(o){if(void 0!==n.modal)var i=o.pageX-e(n.modal.content).offset().left;else i=o.pageX;var a=e(t).width(),c=e(n.menuSelector).width();return i+c>a&&c<i?i-c:i}function i(o){if(void 0!==n.modal)var i=o.pageY-e(n.modal.content).offset().top;else i=o.pageY;var a=e(t).height(),c=e(n.menuSelector).height();return i+c>a&&c<i?i-c:i}}}(jQuery,window);