define([],function(){return function(i){"use strict";var t=this;this.html_id=i,this.dialog=$("#"+this.html_id),this.title="Assuntos Documento",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.listar=function(){var i=t.tab_listagem.find("tbody"),a=i.find("tr:first");t.tab_listagem.find("tr:gt(1)").remove(),WS.get("assunto/listar/",null,function(o){$(o).each(function(o,n){!function(o){var n=a.clone();n.removeAttr("template-row"),n.css("display",""),$(n.find("[template-field='descricao']")).text(o.descricao);var s=$(n.find(".ico_controle_acessos"));"S"==o.controle_acessos&&s.show();var d=$(n.find("[template-field='padrao_chamados']"));"S"==o.padrao_chamados&&d.addClass("glyphicon-ok");var l=$(n.find("[template-field='padrao_sistema']"));"S"==o.padrao_sistema&&l.addClass("glyphicon-ok");var e=$(n.find("[template-field='padrao_projeto']"));"S"==o.padrao_projeto&&e.addClass("glyphicon-ok");var c=$(n.find("[template-field='padrao_processo']"));"S"==o.padrao_processos&&c.addClass("glyphicon-ok");var r=$(n.find("[template-field='padrao_documentos']"));"S"==o.padrao_documentos&&r.addClass("glyphicon-ok");var f=$(n.find("[template-field='padrao_atendimento_relacionamento']"));"S"==o.padrao_atendimento_relacionamento&&f.addClass("glyphicon-ok");var u=$(n.find(".btn_visualizar"));u.unbind("click"),u.click(function(){View.load("assunto/detalhes",function(i,t){t.show(o.assunto_id,FORMULARIO.VISUALIZAR)})});var h=$(n.find(".btn_editar")),_=function(){View.load("assunto/detalhes",function(i,a){a.onclose=t.listar,a.show(o.assunto_id,FORMULARIO.EDITAR)})};h.unbind("click"),h.click(_),n.dblclick(_);var p=$(n.find(".btn_excluir"));p.unbind("click"),p.click(function(){View.load("assunto/detalhes",function(i,a){a.onclose=t.listar,a.show(o.assunto_id,FORMULARIO.EXCLUIR)})}),n.appendTo(i)}(n)})})},this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("assunto/detalhes",function(i,a){a.onclose=t.listar,a.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){t.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});