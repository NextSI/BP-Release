define([],function(){return function(t){"use strict";var i=this;this.html_id=t,this.dialog=$("#"+this.html_id),this.title="√Årea de Foco",this.tab_listagem=this.dialog.find(".tab_listagem"),this.btn_novo=this.dialog.find(".btn_novo"),this.btn_listar=this.dialog.find(".btn_listar"),this.totalizadores=this.dialog.find(".tab_listagem tfoot"),this.listar=function(){var t,a=(t=i.tab_listagem.find("tbody")).find("tr:first");(t=i.tab_listagem.find("tbody")).find("tr:not([template-row])").remove(),WS.get("area_foco/listar/",null,function(o){n=0,$(o).each(function(o,e){n+=parseInt(e.quantidade),function(n){var o=a.clone();o.removeAttr("template-row"),o.css({display:"",cursor:"default"}),o.attr("data-id",n.area_id);var e=$(o.find("[template-field='nome']")),l=$(o.find("[template-field='quantidade']"));e.text(n.nome),l.text(n.quantidade);var d=$(o.find(".btn_excluir"));d.unbind("click"),d.click(function(){View.load("area_foco/detalhes",function(t,a){a.onclose=i.listar,a.show(n.area_id,FORMULARIO.EXCLUIR)})});var s=$(o.find(".btn_editar"));s.unbind("click"),s.click(function(){View.load("area_foco/detalhes",function(t,a){a.onclose=i.listar,a.show(n.area_id,FORMULARIO.EDITAR)})});var c=$(o.find(".btn_visualizar"));c.unbind("click"),c.click(function(){View.load("area_foco/detalhes",function(t,i){i.show(n.area_id,FORMULARIO.VISUALIZAR)})}),o.appendTo(t)}(e)}),i.totalizadores.find("tr .qtd").html(n)})};var n=0;this.btn_novo.unbind("click"),this.btn_novo.click(function(){View.load("area_foco/detalhes",function(t,n){n.onclose=i.listar,n.show(null,FORMULARIO.NOVO)})}),this.btn_listar.unbind("click"),this.btn_listar.click(function(){i.listar()}),this.unload=function(){View.unload(this.html_id)},this.listar()}});